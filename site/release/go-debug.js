/*
 * GoJS v1.2.7 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software, http://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2013 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.2.7/doc/license.html.
 */
(function(window) { var f=void 0,h=!0,q=null,s=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function w(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,fa={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.qF===h});
Object.freeze||(Object.freeze=function(a){a.qF=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),g=Math.max(8,16-(c-a)),k=window.setTimeout(function(){b(c+g)},g);a=c+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();
var x={Gk:s,Ny:s,KC:s,JG:s,LG:s,LD:s,$C:s,hI:s,trace:function(a){window&&window.console&&window.console.log(a)},fC:s,assert:function(a,b){if(!a&&x.fC)throw window&&(x.trace(b),window.alert(b)),Error(b);},Jr:q,HC:function(a,b){a===f&&(a=x.Jr);b===f&&(b=a.Mk("").ab);var c=b.length,d=a.Ea.getContext("2d");d.fillStyle="rgba(255,255,0,.3)";for(var e=0;e<c;e++){var g=b.na(e),k=g.ya;if(g.za!==q)x.HC(a,g.za);else{var l=g.Bi.copy();l.rz(g.Gc);d.save();d.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy);d.fillRect(k.x,
k.y,k.width,k.height);d.restore()}}},IC:function(a,b){a||(a=x.Jr);b||(b=a.Mk("").ab);var c=a.Ea.getContext("2d"),d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.na(e),k=g.Ma,l=g.Bi;g.za!==q?x.IC(a,g.za):(c.save(),c.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),c.fillRect(k.x,k.y,k.width,k.height),c.restore())}},EG:function(a,b){a||(a=x.Jr);b||(b=a.Mk("").ab);var c=a.Ea.getContext("2d"),d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.na(e),k=g.Ga,l=g.Bi;
g.za!==q?x.EG(a,g.za):(c.save(),c.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),c.fillRect(k.x||0,k.y||0,k.width,k.height),c.restore())}},DI:function(){x.IC();x.HC()},EI:function(a){a||(a=x.Jr);var b=a.uc;a=a.Ea.getContext("2d");a.strokeStyle="rgba(0,255,0,.9)";a.strokeRect(b.x,b.y,b.width,b.height)},JC:function(a,b){b.fillStyle="red";b.fillRect(0,0,8,8);b.lineWidth=8;b.strokeStyle="rgba(255,255,0,.6)";var c=a.gb;b.strokeRect(c.x,c.y,c.width,c.height);b.fillStyle="rgba(0,255,0,.2)";b.fillRect(a.uc.x,
a.uc.y,a.uc.width,a.uc.height)},FG:function(a,b){a.lineWidth=2;a.strokeStyle="rgba(255,0,0,.5)";a.strokeRect(b.Fb.x,b.Fb.y,b.Fb.width,b.Fb.height);b.stroke!==f&&(a.strokeStyle=b.stroke);b.de!==f&&(a.lineWidth=b.de);b.ha!==q&&b.ha.type===ga&&(a.lineWidth=1,a.strokeStyle="rgba(10,200,10,.6)",b.stroke!==f&&(a.strokeStyle=b.stroke),b.de!==f&&(a.lineWidth=b.de))},GG:function(a,b){a.lineWidth=1;a.strokeStyle="rgba(0,0,255,.5)";a.strokeRect(b.Ma.x,b.Ma.y,b.Ma.width,b.Ma.height);b.stroke!==f&&(a.strokeStyle=
b.stroke);b.de!==f&&(a.lineWidth=b.de)},My:function(a,b,c){a.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);c=b.vb.length;for(var d=0;d<c;d++)for(var e=b.vb.na(d),g=e.ab.length,k=0;k<g;k++){var l=e.ab.na(k);if(l.location!==f&&l.location!==q){if(l.location.W()){var m=l.location.x,n=l.location.y;a.beginPath();a.strokeStyle="limegreen";a.lineWidth=2;a.moveTo(m,n+6);a.lineTo(m,n);a.lineTo(m+6,n);a.moveTo(m,n);a.lineTo(m+10,n+20);a.stroke()}m=l.position.x;n=l.position.y;a.beginPath();a.strokeStyle="red";
a.lineWidth=2;a.moveTo(m,n+6);a.lineTo(m,n);a.lineTo(m+6,n);a.moveTo(m,n);a.lineTo(m+20,n+10);a.stroke()}}a.setTransform(1,0,0,1,0,0)},KG:function(a,b,c){var d=a.length;b.fillStyle="rgba(255,0,0,.1)";for(var e=0;e<d;e++){var g=ha(c,a[e]);b.fillRect(g[0],g[1],g[2],g[3])}},HG:function(a,b,c,d,e){a.fillStyle="rgba(0,255,0,.2)";a.fillRect(b,c,d,e)},IG:function(a,b,c){a.save();var d=b.Gc;d.reset();1!==b.Lb&&d.scale(b.Lb);b=b.kb;(0!==b.x||0!==b.y)&&d.translate(-b.x,-b.y);a.setTransform(d.m11,d.m12,d.m21,
d.m22,d.dx,d.dy);c=c.sc.n;d=c.length;for(b=0;b<d;b++){var e=c[b];a.beginPath();a.moveTo(e.x-4,e.y);a.lineTo(e.x+4,e.y);a.moveTo(e.x,e.y-4);a.lineTo(e.x,e.y+4);a.lineWidth=2;a.strokeStyle="rgba(255,0,0,.9)";a.stroke()}a.restore()},CI:function(a){a||(a=x.Jr);for(a=a.im;a.next();)x.trace(a.value.toString())},AJ:function(a,b){var c=b.ug(a),d=b.Xb;d.xc=b.xm(c);d.S=c;return ka(b,d,a)},xJ:function(a,b){b.od(a.S)&&(b.Ff.fillStyle="lime",b.Ff.dl="lime",b.Ff.fillRect(a.xc.x,a.xc.y,1*b.scale,1*b.scale))},yJ:function(a){var b=
la(a,s,q);if(!b.oo){a=a.Ff;for(var c=0;c<=b.Hl;c++)for(var d=0;d<=b.Il;d++){var e=b.Wb[c][d];if(e!==ma){var g=c*b.kd+b.pf,k=d*b.cd+b.qf;0!==e&&(a.fillStyle="rgba(255, 0, 0, .2)",a.fillRect(g,k,b.kd,b.cd));e>=na||(e%=10,a.fillStyle="blue",a.fillText(e.toString(),g,k+b.cd))}}}},NG:function(a){if(a instanceof y)for(a=a.im;a.next();){var b=a.value;z.trace(b.toString());for(b=b.mm;b.next();)x.NG(b.value)}else if(a instanceof B){z.trace("References for "+a);a.layer&&z.trace("  "+a.layer.toString()+' LayerName: "'+
a.Ud+'"');a.pm!==a&&z.trace("  SelectionObject: "+a.pm.toString()+' SelectionObjectName: "'+a.Ro+'"');a.Qb!==a&&z.trace("  LocationObject: "+a.Qb.toString()+' LocationObjectName: "'+a.fs+'"');if(a.ng){for(var c="",b=a.ng.k;b.next();)c+=b.key+" ";z.trace("  Adornments: "+c)}a.bb&&z.trace("  ContainingGroup: "+a.bb.toString());if(a instanceof D){if(a.Sc)for(b=a.Sc.k;b.next(););if(0<a.rd.count){c="";for(b=a.rd;b.next();)c+=b.value.toString()+", ";z.trace("  Links: "+c)}a.Yc&&z.trace("  LabeledLink: "+
a.Yc.toString());if(a instanceof oa){z.trace("  Placeholder: "+a.placeholder);c="";for(b=a.Bc;b.next();)c+=b.value.toString()+", ";z.trace("  Members: "+c);c="";for(b=a.zl.k;b.next();)c+=b.value.toString()+", ";z.trace("  NestedGroups: "+c);z.trace("  Layout: "+a.Pb)}}else if(a instanceof E){z.trace("  Path: "+a.path);z.trace("  From: "+a.da+" "+a.Kc+' "'+a.wf+'"');z.trace("  To: "+a.ja+" "+a.td+' "'+a.lg+'"');c="";for(b=a.wi;b.next();)c+=b.value.toString()+", ";z.trace("  LabelNodes: "+c)}}},OG:function(a){if(a instanceof
y)for(a=a.im;a.next();){var b=a.value;z.trace(b.toString());for(b=b.mm;b.next();)x.OG(b.value)}else a instanceof B&&(b=" ",a.Hy&&(b+="c"),a.Ky&&(b+="d"),a.Zy&&(b+="g"),a.qz&&(b+="m"),a.Jz&&(b+="h"),a.Kz&&(b+="z"),a.Lz&&(b+="o"),a.Ij&&(b+="s"),a.Yz&&(b+="t"),a.Oz&&(b+="A"),a.qv&&(b+="B"),a.sv&&(b+="L"),a.$a&&(b+="S"),a.Fj&&(b+="H"),x.SA(a,1,b))},SA:function(a,b,c){for(var d="",e=0;e<b;e++)d+="  ";d+=a.toString();c&&(d+=c);c=" ";c=a.visible?c+"v":c+"~";a.He&&(c+="p");a.rh&&(c+="m");a.Yr&&(c+="a");d=
d+c+(" "+a.ya.toString());a.Fa.W()&&(d+=" d:"+a.Fa.toString());a.Ma.W()&&(d+=" n:"+a.Ma.toString());1!==a.scale&&(d+=" s:"+a.scale);0!==a.angle&&(d+=" a:"+a.angle);a.background!==q&&(d+=" b:"+a.background.toString());a.hi!==q&&(d+=" a:"+a.background.toString());a instanceof F&&(d+=" elts:"+a.za.count,0!==a.cA&&(d+=" top:"+a.cA),0!==a.gz&&(d+=" left:"+a.gz),a.ds!==q&&(d+=" itemArray#:"+a.ds.length),a.pH&&(d+=" cat:"+a.pH),a.data!==q&&(d+=" data:"+a.data));z.trace(d);if(a instanceof F)for(a=a.elements;a.next();)x.SA(a.value,
b+1,"")}};fa.Debug=x;
var z={Eh:Object.freeze([]),Ty:{},PC:0,eH:{},Ov:document.createElement("canvas").getContext("2d"),Pv:"",dA:[],Ev:q,DC:[],Wz:"ontouchstart"in window,AE:"ongesturestart"in window,wC:s,Fr:q,Gr:q,Er:q,Ru:"",UE:s,XE:s,WE:s,VE:s,xC:q,Vo:s,SE:s,TE:s,m:function(a){x&&x.fC&&alert(a);throw Error(a);},J:function(a,b){if(a.hb){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);z.m(c)}},l:function(a,b,c,d){a instanceof b||(c=z.qh(c),d!==f&&(c+="."+d),z.Rb(a,
b,c))},j:function(a,b,c,d){typeof a!==b&&(c=z.qh(c),d!==f&&(c+="."+d),z.Rb(a,b,c))},p:function(a,b,c){isFinite(a)||(b=z.qh(b),c!==f&&(b+="."+c),z.m(b+" must be a real number and not NaN or Infinity: "+a))},wb:function(a,b,c,d){if(!(a instanceof pa)||a.ve!==b)c=z.qh(c),d!==f&&(c+="."+d),z.Rb(a,"a constant of class "+z.ph(b),c)},Rb:function(a,b,c,d){b=z.qh(b);c=z.qh(c);d!==f&&(c+="."+d);z.m(c+" value is not an instance of "+b+": "+a)},ia:function(a,b,c,d){c=z.qh(c);d!==f&&(c+="."+d);z.m(c+" is not in the range "+
b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);x&&x.hI&&z.m(a)},yb:function(a){return"object"===typeof a&&a!==q},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},Dr:function(a,b,c){z.isArray(a)||z.Rb(a,"Array or NodeList or HTMLCollection",b,c)},$b:function(a){return a.length},Mb:function(a,b){return a[b]},dC:function(a,b,c){Array.isArray(a)?a[b]=c:z.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Ay:function(a,
b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1},ii:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):z.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},ji:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):z.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},vw:[],O:function(){var a=z.vw.pop();return a===f?new G:a},ic:function(a,b){var c=z.vw.pop();if(c===f)return new G(a,
b);c.x=a;c.y=b;return c},B:function(a){z.vw.push(a)},rA:[],$k:function(){var a=z.rA.pop();return a===f?new qa:a},Cj:function(a){z.rA.push(a)},ww:[],hf:function(){var a=z.ww.pop();return a===f?new H:a},Kj:function(a,b,c,d){var e=z.ww.pop();if(e===f)return new H(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e},Jc:function(a){z.ww.push(a)},sA:[],Ng:function(){var a=z.sA.pop();return a===f?new ra:a},Ce:function(a){z.sA.push(a)},xw:q,u:function(){var a=z.xw;return a!==q?(z.xw=q,a):new sa},v:function(a){a.reset();
z.xw=a},qA:[],zb:function(){var a=z.qA.pop();return a===f?[]:a},Da:function(a){a.length=0;z.qA.push(a)},uA:1,qc:function(a){a.__gohashid=z.uA++},Vr:function(a){var b=a.__gohashid;b===f&&(b=z.uA++,a.__gohashid=b);return b},fc:function(a){return a.__gohashid},g:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},ea:function(a,b){b.Hw=a;fa[a]=b},Pa:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){z.j(a,"function","Util.defineProperty:classfunc");
z.j(b,"object","Util.defineProperty:propobj");z.j(c,"function","Util.defineProperty:getter");z.j(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d};if(e!==f)for(var k in e)c[k]=e[k];Object.defineProperty(a.prototype,g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},A:function(a,b,c,d){z.j(a,"function","Util.defineReadOnlyProperty:classfunc");z.j(b,"object","Util.defineReadOnlyProperty:propobj");z.j(c,"function",
"Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e];b={get:c,set:function(a){z.m('The property "'+g+'" is read-only and cannot be set to '+a)}};if(d!==f)for(var k in d)b[k]=d[k];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Vf:function(a,b){for(var c in b)b[c]=h;a.prototype.tF=b},qh:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?z.ph(a):a===q?"*":""},ph:function(a){if("function"===
typeof a){if(a.Hw)return a.Hw;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("(");if(b=b.substring(9,c).trim())return a.Hw=b}else if("object"===typeof a&&a.constructor)return z.ph(a.constructor);return typeof a},w:function(a,b,c){z.j(a,"function","Util.defineEnumValue:classfunc");z.j(b,"string","Util.defineEnumValue:name");z.j(c,"number","Util.defineEnumValue:num");c=new pa(a,b,c);Object.freeze(c);a[b]=c;var d=a.tA;d||(d=new ta("string",pa),a.tA=d);d.add(b,c);return c},Zl:function(a,b){if(!b)return q;
z.j(a,"function","Util.findEnumValueForName:classfunc");z.j(b,"string","Util.findEnumValueForName:name");var c=a.tA;return!c?q:c.Ba(b)},hG:function(a,b,c,d){var e={},g;for(g in a){for(var k=s,l=1;l<arguments.length;l++)if(arguments[l]===g){k=h;break}k||(e[g]=a[g])}return e},cb:function(a,b){if(!a||!b)return q;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),c===q&&(c=f)):c=a[b]}catch(d){x&&z.trace("property get error: "+d.toString())}return c},Ta:function(a,
b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){x&&z.trace("property set error: "+d.toString())}},Kv:function(a,b){z.j(a,"object","Setting properties requires Objects as arguments");z.j(b,"object","Setting properties requires Objects as arguments");var c=x;c||(x=z);var d=a instanceof F,e=a instanceof y,g;for(g in b){var k=a,l=g;if(d||e){var m=g.indexOf(".");if(0<m){var n=g.substring(0,m);d?k=a.Be(n):(k=a[n])||(k=a.tb[n]);k?l=g.substr(m+
1):z.m("Unable to find object named: "+n+" in "+a.toString()+" when trying to set property: "+g)}}"_"!==l[0]&&!z.lv(k,l)&&(e&&z.lv(a.tb,l)?k=a.tb:z.m('Trying to set undefined property "'+l+'" on object: '+k.toString()));k[l]=b[g];"_"===l[0]&&(m=k.jl,m||(m=[],k.jl=m),m.push(l))}x=c;return a},lv:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.tF;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return s},jC:function(a,b){if(!z.yb(b)||b instanceof
Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=z.cb(b,d);e!==q&&("function"!==typeof e&&!z.lv(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},Qu:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(z.fc(b)!==f){if(!z.mu.contains(b))if(z.mu.add(b),
z.Ot.add(z.jC(a,b)),b instanceof J||b instanceof va||b instanceof ta)for(var c=b.k;c.next();)z.Qu(a+"["+c.key+"]",c.value);else for(c in b){var d=z.cb(b,c);if(!(d===f||d===q||!z.yb(d))&&"_ownProperties"!==c){if(b instanceof ya){if("_lines"===c)continue}else if(b instanceof F){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof y))if(b instanceof za){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof Aa){if("archetypeLinkData"===
c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof Ca){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof L){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}z.Qu(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)z.Qu(a+"["+c+"]",b[c]);
else z.Ot.add(z.jC(a,b))},cG:function(a){z.mu===f?z.mu=new va:z.mu.clear();z.Ot=new Da;z.Qu("",a);a=z.Ot.toString();z.Ot=q;return a},LH:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",k=0;k<a.length;k++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(k)^b[(b[c]+b[d])%256]);return g},dH:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&
15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Xa:function(a){return z.LH(z.dH(a))},cl:q,wy:"7da71ca0ad381e90",dG:"@COLOR1",eG:"@COLOR2"},Ea=z,Fa=document.createElement("canvas"),Ha=Fa.getContext("2d");Ha[z.Xa("7ca11abfd022028846")]=z.Xa("398c3597c01238");
for(var Ia=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22472913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Ja=1;5>Ja;Ja++)Ha[z.Xa("7ca11abfd7330390")](z.Xa(Ia[Ja-1]),10,15*Ja+0);Ha[z.Xa("7ca11abfd022028846")]=z.Xa("39f046ebb36e4b");for(Ja=1;5>Ja;Ja++)Ha[z.Xa("7ca11abfd7330390")](z.Xa(Ia[Ja-1]),10,15*Ja+0);Ea.cl=Fa;function pa(a,b,c){z.qc(this);this.zA=a;this.Kb=b;this.AF=c}
pa.prototype.toString=function(){return z.ph(this.zA)+"."+this.Kb};z.A(pa,{ve:"classType"},w("zA"));z.A(pa,{name:"name"},w("Kb"));z.A(pa,{value:"value"},w("AF"));function Da(){this.yA=[];this.kI=0;this.mI="  "}Da.prototype.toString=function(){return this.yA.join("")};Da.prototype.add=function(a){a&&this.yA.push(a)};function Ka(){}z.A(Ka,{k:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=aa();Ka.prototype.next=Ka.prototype.next=ca(s);Ka.prototype.first=Ka.prototype.sb=ca(q);
z.A(Ka,{count:"count"},ca(0));Ka.prototype.sg=aa();Ka.prototype.toString=ca("EmptyIterator");z.mg=new Ka;function Ma(a){this.key=-1;this.value=a}z.Vf(Ma,{key:h,value:h});z.A(Ma,{k:"iterator"},function(){return this});Ma.prototype.reset=Ma.prototype.reset=function(){this.key=-1};Ma.prototype.next=Ma.prototype.next=function(){return-1===this.key?(this.key=0,h):s};Ma.prototype.first=Ma.prototype.sb=function(){this.key=0;return this.value};z.A(Ma,{count:"count"},ca(1));
Ma.prototype.sg=function(){this.value=q};Ma.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Na(a){this.nf=a;this.un=q;this.reset()}z.Vf(Na,{key:h,value:h});z.A(Na,{k:"iterator"},function(){return this});z.g(Na,"predicate",Na.prototype.Vk);z.defineProperty(Na,{Vk:"predicate"},w("un"),ba("un"));Na.prototype.reset=Na.prototype.reset=function(){var a=this.nf;a.Zg=q;this.eb=a.Sb;this.Zd=-1};
Na.prototype.next=Na.prototype.next=function(){var a=this.nf;a.Sb!==this.eb&&z.m("the List has been modified during iteration");var a=a.n,b=a.length,c=++this.Zd,d=this.un;if(d!==q)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Zd=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.sg()}return s};
Na.prototype.first=Na.prototype.sb=function(){var a=this.nf;this.eb=a.Sb;this.Zd=0;var a=a.n,b=a.length,c=this.un;if(c!==q){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Zd=d,this.value=e;d++}return q}return 0<b?(e=a[0],this.key=0,this.value=e):q};z.A(Na,{count:"count"},function(){var a=this.un;if(a!==q){for(var b=0,c=this.nf.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.nf.n.length});Na.prototype.sg=function(){this.key=-1;this.value=q;this.eb=-1;this.un=q;this.nf.Zg=this};
Na.prototype.toString=function(){return"ListIterator@"+this.Zd+"/"+this.nf.count};function Ra(a){this.nf=a;this.reset()}z.Vf(Ra,{key:h,value:h});z.A(Ra,{k:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.nf;a.vx=q;this.eb=a.Sb;this.Zd=a.n.length};Ra.prototype.next=Ra.prototype.next=function(){var a=this.nf;a.Sb!==this.eb&&z.m("the List has been modified during iteration");var b=--this.Zd;if(0<=b)return this.key=b,this.value=a.n[b],h;this.sg();return s};
Ra.prototype.first=Ra.prototype.sb=function(){var a=this.nf;this.eb=a.Sb;var b=a.n;this.Zd=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):q};z.A(Ra,{count:"count"},function(){return this.nf.n.length});Ra.prototype.sg=function(){this.key=-1;this.value=q;this.eb=-1;this.nf.vx=this};Ra.prototype.toString=function(){return"ListIteratorBackwards("+this.Zd+"/"+this.nf.count+")"};
function J(a){z.qc(this);this.hb=s;this.n=[];this.Sb=0;this.vx=this.Zg=q;a===f||a===q?this.aa=q:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.aa=a:z.ia(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.aa=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:z.ia(a,"null, a primitive type name, or a class type","List constructor: type")}
z.ea("List",J);J.prototype.og=function(a){this.aa!==q&&("string"===typeof this.aa?(typeof a!==this.aa||a===q)&&z.Rb(a,this.aa):a instanceof this.aa||z.Rb(a,this.aa))};J.prototype.Ad=function(){var a=this.Sb;a++;999999999<a&&(a=0);this.Sb=a};J.prototype.freeze=J.prototype.freeze=function(){this.hb=h;return this};J.prototype.thaw=J.prototype.Ua=function(){this.hb=s;return this};J.prototype.toString=function(){return"List("+z.qh(this.aa)+")#"+z.fc(this)};
J.prototype.add=J.prototype.add=function(a){a!==q&&(x&&this.og(a),z.J(this,a),this.n.push(a),this.Ad())};J.prototype.addAll=J.prototype.Re=function(a){if(a===q)return this;z.J(this);var b=this.n;if(z.isArray(a))for(var c=z.$b(a),d=0;d<c;d++){var e=z.Mb(a,d);x&&this.og(e);b.push(e)}else for(a=a.k;a.next();)e=a.value,x&&this.og(e),b.push(e);this.Ad();return this};J.prototype.clear=J.prototype.clear=function(){z.J(this);this.n.length=0;this.Ad()};
J.prototype.contains=J.prototype.contains=function(a){if(a===q)return s;x&&this.og(a);return-1!==this.n.indexOf(a)};J.prototype.indexOf=J.prototype.indexOf=function(a){if(a===q)return-1;x&&this.og(a);return this.n.indexOf(a)};J.prototype.elt=J.prototype.na=function(a){x&&z.p(a,J,"elt:i");var b=this.n;(0>a||a>=b.length)&&z.ia(a,"0 <= i < length",J,"elt:i");return b[a]};
J.prototype.setElt=J.prototype.gg=function(a,b){x&&(this.og(b),z.p(a,J,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&z.ia(a,"0 <= i < length",J,"setElt:i");z.J(this,a);c[a]=b};J.prototype.first=J.prototype.sb=function(){var a=this.n;return 0===a.length?q:a[0]};J.prototype.insertAt=J.prototype.Ed=function(a,b){x&&(this.og(b),z.p(a,J,"insertAt:i"));0>a&&z.ia(a,">= 0",J,"insertAt:i");z.J(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.Ad();return h};
J.prototype.remove=J.prototype.remove=function(a){if(a===q)return s;x&&this.og(a);z.J(this,a);var b=this.n;a=b.indexOf(a);if(-1===a)return s;a===b.length-1?b.pop():b.splice(a,1);this.Ad();return h};J.prototype.removeAt=J.prototype.sd=function(a){x&&z.p(a,J,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&z.ia(a,"0 <= i < length",J,"removeAt:i");z.J(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Ad()};
J.prototype.removeRange=J.prototype.removeRange=function(a,b){x&&(z.p(a,J,"removeRange:from"),z.p(b,J,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&z.ia(a,"0 <= from < length",J,"elt:from");(0>b||b>=c.length)&&z.ia(b,"0 <= to < length",J,"elt:to");z.J(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.Ad()};J.prototype.copy=function(){for(var a=new J(this.aa),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
J.prototype.toArray=J.prototype.Je=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};J.prototype.toSet=J.prototype.gI=function(){for(var a=new va(this.aa),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};J.prototype.sort=J.prototype.sort=function(a){x&&z.j(a,"function",J,"sort:sortfunc");z.J(this);this.n.sort(a);this.Ad();return this};
J.prototype.sortRange=J.prototype.To=function(a,b,c){var d=this.n,e=d.length;b===f&&(b=0);c===f&&(c=e);x&&(z.j(a,"function",J,"sortRange:sortfunc"),z.p(b,J,"sortRange:from"),z.p(c,J,"sortRange:to"));z.J(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&z.ia(b,"0 <= from < length",J,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.Ad()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.Ad();return this};J.prototype.reverse=J.prototype.reverse=function(){z.J(this);this.n.reverse();this.Ad();return this};z.A(J,{count:"count"},function(){return this.n.length});z.A(J,{length:"length"},function(){return this.n.length});z.A(J,{k:"iterator"},function(){if(0>=this.n.length)return z.mg;var a=this.Zg;return a!==q?(a.reset(),a):new Na(this)});
z.A(J,{hm:"iteratorBackwards"},function(){if(0>=this.n.length)return z.mg;var a=this.vx;return a!==q?(a.reset(),a):new Ra(this)});function Ta(a){this.q=a;this.reset()}z.Vf(Ta,{key:h,value:h});z.A(Ta,{k:"iterator"},function(){return this});Ta.prototype.reset=Ta.prototype.reset=function(){var a=this.q;a.Zg=q;this.eb=a.Sb;this.Md=q};
Ta.prototype.next=Ta.prototype.next=function(){var a=this.q;a.Sb!==this.eb&&z.m("the Set has been modified during iteration");var b=this.Md,b=b===q?a.pe:b.Yi;if(b!==q)return this.Md=b,this.value=b.value,this.key=b.key,h;this.sg();return s};Ta.prototype.first=Ta.prototype.sb=function(){var a=this.q;this.eb=a.Sb;a=a.pe;if(a!==q){this.Md=a;var b=a.value;this.key=a.key;return this.value=b}return q};z.A(Ta,{count:"count"},function(){return this.q.Ld});
Ta.prototype.sg=function(){this.value=q;this.eb=-1;this.q.Zg=this};Ta.prototype.toString=function(){return this.Md!==q?"SetIterator@"+this.Md.value:"SetIterator"};
function va(a){z.qc(this);this.hb=s;a===f||a===q?this.aa=q:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.aa=a:z.ia(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.aa=a===Object?"object":a===String?"string":a===Number?"number":a:z.ia(a,"null, a primitive type name, or a class type","Set constructor: type");this.Oc={};this.Ld=0;this.Zg=q;this.Sb=0;this.ah=this.pe=q}z.ea("Set",va);
va.prototype.og=function(a){this.aa!==q&&("string"===typeof this.aa?(typeof a!==this.aa||a===q)&&z.Rb(a,this.aa):a instanceof this.aa||z.Rb(a,this.aa))};va.prototype.Ad=function(){var a=this.Sb;a++;999999999<a&&(a=0);this.Sb=a};va.prototype.freeze=va.prototype.freeze=function(){this.hb=h;return this};va.prototype.thaw=va.prototype.Ua=function(){this.hb=s;return this};va.prototype.toString=function(){return"Set("+z.qh(this.aa)+")#"+z.fc(this)};
va.prototype.add=va.prototype.add=function(a){if(a===q)return s;x&&this.og(a);z.J(this,a);var b=a;z.yb(a)&&(b=z.Vr(a));return this.Oc[b]===f?(this.Ld++,a=new Ua(a,a),this.Oc[b]=a,b=this.ah,b===q?this.pe=a:(a.vn=b,b.Yi=a),this.ah=a,this.Ad(),h):s};va.prototype.addAll=va.prototype.Re=function(a){if(a===q)return this;z.J(this);if(z.isArray(a))for(var b=z.$b(a),c=0;c<b;c++)this.add(z.Mb(a,c));else for(a=a.k;a.next();)this.add(a.value);return this};
va.prototype.contains=va.prototype.contains=function(a){if(a===q)return s;x&&this.og(a);var b=a;return z.yb(a)&&(b=z.fc(a),b===f)?s:this.Oc[b]!==f};va.prototype.containsAll=va.prototype.wI=function(a){if(a===q)return h;for(a=a.k;a.next();)if(!this.contains(a.value))return s;return h};va.prototype.containsAny=va.prototype.xI=function(a){if(a===q)return h;for(a=a.k;a.next();)if(this.contains(a.value))return h;return s};va.prototype.first=va.prototype.sb=function(){var a=this.pe;return a===q?q:a.value};
va.prototype.remove=va.prototype.remove=function(a){if(a===q)return s;x&&this.og(a);z.J(this,a);var b=a;if(z.yb(a)&&(b=z.fc(a),b===f))return s;a=this.Oc[b];if(a===f)return s;var c=a.Yi,d=a.vn;c!==q&&(c.vn=d);d!==q&&(d.Yi=c);this.pe===a&&(this.pe=c);this.ah===a&&(this.ah=d);delete this.Oc[b];this.Ld--;this.Ad();return h};va.prototype.removeAll=va.prototype.CJ=function(a){if(a===q)return this;z.J(this);for(a=a.k;a.next();)this.remove(a.value);return this};
va.prototype.retainAll=va.prototype.GJ=function(a){if(a===q||0===this.count)return this;z.J(this);var b=new va(this.aa);b.Re(a);a=new J(this.aa);for(var c=this.k;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.k;b.next();)this.remove(b.value);return this};va.prototype.clear=va.prototype.clear=function(){z.J(this);this.Oc={};this.Ld=0;this.ah=this.pe=q;this.Ad()};va.prototype.copy=function(){var a=new va(this.aa),b=this.Oc,c;for(c in b)a.add(b[c].value);return a};
va.prototype.toArray=va.prototype.Je=function(){var a=Array(this.Ld),b=this.Oc,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};va.prototype.toList=va.prototype.fI=function(){var a=new J(this.aa),b=this.Oc,c;for(c in b)a.add(b[c]);return a};z.A(va,{count:"count"},w("Ld"));z.A(va,{k:"iterator"},function(){if(0>=this.Ld)return z.mg;var a=this.Zg;return a!==q?(a.reset(),a):new Ta(this)});function Va(a){this.Qc=a;this.reset()}z.Vf(Va,{key:h,value:h});z.A(Va,{k:"iterator"},function(){return this});
Va.prototype.reset=Va.prototype.reset=function(){this.eb=this.Qc.Sb;this.Md=q};Va.prototype.next=Va.prototype.next=function(){var a=this.Qc;a.Sb!==this.eb&&z.m("the Map has been modified during iteration");var b=this.Md,b=b===q?a.pe:b.Yi;if(b!==q)return this.Md=b,this.value=b.key,h;this.sg();return s};Va.prototype.first=Va.prototype.sb=function(){var a=this.Qc;this.eb=a.Sb;a=a.pe;if(a!==q){this.Md=a;var b=a.value;this.key=a.key;return this.value=b}return q};z.A(Va,{count:"count"},function(){return this.Qc.Ld});
Va.prototype.sg=function(){this.value=q;this.eb=-1};Va.prototype.toString=function(){return this.Md!==q?"MapKeySetIterator@"+this.Md.value:"MapKeySetIterator"};function Ya(a){z.qc(this);this.Qc=a}z.Pa(Ya,va);Ya.prototype.freeze=function(){return this};Ya.prototype.Ua=function(){return this};Ya.prototype.toString=function(){return"MapKeySet("+this.Qc.toString()+")"};Ya.prototype.add=Ya.prototype.add=function(){z.m("This Set is read-only: "+this.toString());return s};
Ya.prototype.contains=Ya.prototype.contains=function(a){return this.Qc.contains(a)};Ya.prototype.remove=Ya.prototype.remove=function(){z.m("This Set is read-only: "+this.toString());return s};Ya.prototype.clear=Ya.prototype.clear=function(){z.m("This Set is read-only: "+this.toString())};Ya.prototype.copy=function(){return new Ya(this.Qc)};Ya.prototype.toSet=Ya.prototype.gI=function(){var a=new va(this.Qc.$g),b=this.Qc.Oc,c;for(c in b)a.add(b[c].key);return a};
Ya.prototype.toArray=Ya.prototype.Je=function(){var a=this.Qc.Oc,b=Array(this.Qc.Ld),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};Ya.prototype.toList=Ya.prototype.fI=function(){var a=new J(this.aa),b=this.Qc.Oc,c;for(c in b)a.add(b[c].key);return a};z.A(Ya,{count:"count"},function(){return this.Qc.Ld});z.A(Ya,{k:"iterator"},function(){return 0>=this.Qc.Ld?z.mg:new Va(this.Qc)});function Ua(a,b){this.key=a;this.value=b;this.vn=this.Yi=q}z.Vf(Ua,{key:h,value:h});
Ua.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Za(a){this.Qc=a;this.reset()}z.Vf(Za,{key:h,value:h});z.A(Za,{k:"iterator"},function(){return this});Za.prototype.reset=Za.prototype.reset=function(){var a=this.Qc;a.Zg=q;this.eb=a.Sb;this.Md=q};
Za.prototype.next=Za.prototype.next=function(){var a=this.Qc;a.Sb!==this.eb&&z.m("the Map has been modified during iteration");var b=this.Md,b=b===q?a.pe:b.Yi;if(b!==q)return this.Md=b,this.key=b.key,this.value=b.value,h;this.sg();return s};Za.prototype.first=Za.prototype.sb=function(){var a=this.Qc;this.eb=a.Sb;a=a.pe;if(a!==q){this.Md=a;var b=a.key;this.key=b;this.value=a.value;return b}return q};z.A(Za,{count:"count"},function(){return this.Qc.Ld});
Za.prototype.sg=function(){this.value=this.key=q;this.eb=-1;this.Qc.Zg=this};Za.prototype.toString=function(){return this.Md!==q?"MapIterator@"+this.Md:"MapIterator"};
function ta(a,b){z.qc(this);this.hb=s;a===f||a===q?this.$g=q:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.$g=a:z.ia(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.$g=a===Object?"object":a===String?"string":a===Number?"number":a:z.ia(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===q?this.gi=q:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.gi=
b:z.ia(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.gi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:z.ia(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Oc={};this.Ld=0;this.Zg=q;this.Sb=0;this.ah=this.pe=q}z.ea("Map",ta);
function $a(a,b){a.$g!==q&&("string"===typeof a.$g?(typeof b!==a.$g||b===q)&&z.Rb(b,a.$g):b instanceof a.$g||z.Rb(b,a.$g))}ta.prototype.Ad=function(){var a=this.Sb;a++;999999999<a&&(a=0);this.Sb=a};ta.prototype.freeze=ta.prototype.freeze=function(){this.hb=h;return this};ta.prototype.thaw=ta.prototype.Ua=function(){this.hb=s;return this};ta.prototype.toString=function(){return"Map("+z.qh(this.$g)+","+z.qh(this.gi)+")#"+z.fc(this)};
ta.prototype.add=ta.prototype.add=function(a,b){x&&($a(this,a),this.gi!==q&&("string"===typeof this.gi?(typeof b!==this.gi||b===q)&&z.Rb(b,this.gi):b instanceof this.gi||z.Rb(b,this.gi)));z.J(this,a);var c=a;z.yb(a)&&(c=z.Vr(a));var d=this.Oc[c];if(d===f)return this.Ld++,d=new Ua(a,b),this.Oc[c]=d,c=this.ah,c===q?this.pe=d:(d.vn=c,c.Yi=d),this.ah=d,this.Ad(),h;d.value=b;return s};
ta.prototype.addAll=ta.prototype.Re=function(a){if(a===q)return this;x&&z.l(a,ta,ta,"addAll:map");for(a=a.k;a.next();)this.add(a.key,a.value);return this};ta.prototype.contains=ta.prototype.contains=function(a){x&&$a(this,a);var b=a;return z.yb(a)&&(b=z.fc(a),b===f)?s:this.Oc[b]!==f};ta.prototype.getValue=ta.prototype.Ba=function(a){x&&$a(this,a);var b=a;if(z.yb(a)&&(b=z.fc(a),b===f))return q;a=this.Oc[b];return a===f?q:a.value};
ta.prototype.remove=ta.prototype.remove=function(a){if(a===q)return s;x&&$a(this,a);z.J(this,a);var b=a;if(z.yb(a)&&(b=z.fc(a),b===f))return s;a=this.Oc[b];if(a===f)return s;var c=a.Yi,d=a.vn;c!==q&&(c.vn=d);d!==q&&(d.Yi=c);this.pe===a&&(this.pe=c);this.ah===a&&(this.ah=d);delete this.Oc[b];this.Ld--;this.Ad();return h};ta.prototype.clear=ta.prototype.clear=function(){z.J(this);this.Oc={};this.Ld=0;this.ah=this.pe=q;this.Ad()};
ta.prototype.copy=function(){var a=new ta(this.$g,this.gi),b=this.Oc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ta.prototype.toArray=ta.prototype.Je=function(){var a=this.Oc,b=Array(this.Ld),c=0,d;for(d in a){var e=a[d];b[c]=new Ua(e.key,e.value);c++}return b};ta.prototype.toKeySet=ta.prototype.al=function(){return new Ya(this)};z.A(ta,{count:"count"},w("Ld"));z.A(ta,{k:"iterator"},function(){if(0>=this.count)return z.mg;var a=this.Zg;return a!==q?(a.reset(),a):new Za(this)});
function G(a,b){a===f?this.M=this.L=0:"number"===typeof a&&"number"===typeof b?(this.L=a,this.M=b):z.m("Invalid arguments to Point constructor")}z.ea("Point",G);G.prototype.assign=function(a){this.L=a.L;this.M=a.M};G.prototype.q=function(a,b){this.L=a;this.M=b};G.prototype.setTo=G.prototype.So=function(a,b){x&&(z.j(a,"number",G,"setTo:x"),z.j(b,"number",G,"setTo:y"));z.J(this);this.L=a;this.M=b;return this};
G.prototype.set=G.prototype.set=function(a){x&&z.l(a,G,G,"set:p");z.J(this);this.L=a.L;this.M=a.M;return this};G.prototype.copy=function(){var a=new G;a.L=this.L;a.M=this.M;return a};G.prototype.Oa=function(){this.hb=h;Object.freeze(this);return this};G.prototype.Y=function(){return Object.isFrozen(this)?this:this.copy().freeze()};G.prototype.freeze=function(){this.hb=h;return this};G.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;return this};
G.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new G(c,e)}return new G};G.stringify=function(a){return a instanceof G?a.x.toString()+" "+a.y.toString():a.toString()};G.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};G.prototype.equals=G.prototype.N=function(a){return!(a instanceof G)?s:this.L===a.x&&this.M===a.y};
G.prototype.equalTo=G.prototype.Py=function(a,b){return this.L===a&&this.M===b};G.prototype.zj=function(a){return N.La(this.L,a.x)&&N.La(this.M,a.y)};G.prototype.qi=function(a){return N.I(this.L,a.x)&&N.I(this.M,a.y)};G.prototype.add=G.prototype.add=function(a){x&&z.l(a,G,G,"add:p");z.J(this);this.L+=a.x;this.M+=a.y;return this};G.prototype.subtract=G.prototype.Is=function(a){x&&z.l(a,G,G,"subtract:p");z.J(this);this.L-=a.x;this.M-=a.y;return this};
G.prototype.offset=G.prototype.offset=function(a,b){x&&(z.p(a,G,"offset:dx"),z.p(b,G,"offset:dy"));z.J(this);this.L+=a;this.M+=b;return this};G.prototype.rotate=G.prototype.rotate=function(a){x&&z.p(a,G,"rotate:angle");z.J(this);if(0===a)return this;var b=this.L,c=this.M;if(0===b&&0===c)return this;var d=a*Math.PI/180;a=Math.cos(d);d=Math.sin(d);this.L=a*b-d*c;this.M=d*b+a*c;return this};
G.prototype.scale=G.prototype.scale=function(a,b){x&&(z.p(a,G,"scale:sx"),z.p(b,G,"scale:sy"));this.L*=a;this.M*=b;return this};G.prototype.distanceSquaredPoint=G.prototype.Lk=function(a){x&&z.l(a,G,G,"distanceSquaredPoint:p");var b=a.x-this.L;a=a.y-this.M;return b*b+a*a};G.prototype.distanceSquared=G.prototype.Kr=function(a,b){x&&(z.p(a,G,"distanceSquared:px"),z.p(b,G,"distanceSquared:py"));var c=a-this.L,d=b-this.M;return c*c+d*d};
G.prototype.normalize=G.prototype.normalize=function(){z.J(this);var a=this.L,b=this.M,c=Math.sqrt(a*a+b*b);0<c&&(this.L=a/c,this.M=b/c);return this};G.prototype.directionPoint=G.prototype.ni=function(a){x&&z.l(a,G,G,"directionPoint:p");return ab(a.x-this.L,a.y-this.M)};G.prototype.direction=G.prototype.direction=function(a,b){x&&(z.p(a,G,"direction:px"),z.p(b,G,"direction:py"));return ab(a-this.L,b-this.M)};
function ab(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}G.prototype.setRectSpot=G.prototype.Cs=function(a,b){x&&(z.l(a,H,G,"setRectSpot:r"),z.l(b,O,G,"setRectSpot:spot"));z.J(this);this.L=a.x+b.x*a.width+b.offsetX;this.M=a.y+b.y*a.height+b.offsetY;return this};
G.prototype.setSpot=G.prototype.Ds=function(a,b,c,d,e){x&&(z.p(a,G,"setSpot:x"),z.p(b,G,"setSpot:y"),z.p(c,G,"setSpot:w"),z.p(d,G,"setSpot:h"),(0>c||0>d)&&z.m("Point.setSpot:Width and height cannot be negative"),z.l(e,O,G,"setSpot:spot"));z.J(this);this.L=a+e.x*c+e.offsetX;this.M=b+e.y*d+e.offsetY;return this};G.prototype.transform=function(a){x&&z.l(a,ra,G,"transform:t");a.Va(this);return this};function bb(a,b){x&&z.l(b,ra,G,"transformInverted:t");b.ti(a);return a}var cb;
G.distanceLineSegmentSquared=cb=function(a,b,c,d,e,g){x&&(z.p(a,G,"distanceLineSegmentSquared:px"),z.p(b,G,"distanceLineSegmentSquared:py"),z.p(c,G,"distanceLineSegmentSquared:ax"),z.p(d,G,"distanceLineSegmentSquared:ay"),z.p(e,G,"distanceLineSegmentSquared:bx"),z.p(g,G,"distanceLineSegmentSquared:by"));var k=e-c,l=g-d,m=k*k+l*l;c-=a;d-=b;var n=-c*k-d*l;if(0>=n||n>=m)return k=e-a,l=g-b,Math.min(c*c+d*d,k*k+l*l);a=k*d-l*c;return a*a/m};var jb;
G.distanceSquared=jb=function(a,b,c,d){x&&(z.p(a,G,"distanceSquared:px"),z.p(b,G,"distanceSquared:py"),z.p(c,G,"distanceSquared:qx"),z.p(d,G,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var kb;
G.direction=kb=function(a,b,c,d){x&&(z.p(a,G,"direction:px"),z.p(b,G,"direction:py"),z.p(c,G,"direction:qx"),z.p(d,G,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};z.g(G,"x",G.prototype.x);z.defineProperty(G,{x:"x"},w("L"),function(a){z.J(this,a);x&&z.j(a,"number",G,"x");this.L=a});z.g(G,"y",G.prototype.y);
z.defineProperty(G,{y:"y"},w("M"),function(a){z.J(this,a);x&&z.j(a,"number",G,"y");this.M=a});G.prototype.isReal=G.prototype.W=function(){return isFinite(this.x)&&isFinite(this.y)};function qa(a,b){a===f?this.va=this.wa=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.wa=a,this.va=b):z.m("Invalid arguments to Size constructor")}z.ea("Size",qa);qa.prototype.assign=function(a){this.wa=a.wa;this.va=a.va};qa.prototype.q=function(a,b){this.wa=a;this.va=b};
qa.prototype.setTo=qa.prototype.So=function(a,b){x&&(z.j(a,"number",qa,"setTo:w"),z.j(b,"number",qa,"setTo:h"));0>a&&z.ia(a,">= 0",qa,"setTo:w");0>b&&z.ia(b,">= 0",qa,"setTo:h");z.J(this);this.wa=a;this.va=b;return this};qa.prototype.set=qa.prototype.set=function(a){x&&z.l(a,qa,qa,"set:s");z.J(this);this.wa=a.wa;this.va=a.va;return this};qa.prototype.copy=function(){var a=new qa;a.wa=this.wa;a.va=this.va;return a};qa.prototype.Oa=function(){this.hb=h;Object.freeze(this);return this};
qa.prototype.Y=function(){return Object.isFrozen(this)?this:this.copy().freeze()};qa.prototype.freeze=function(){this.hb=h;return this};qa.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;return this};qa.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new qa(c,e)}return new qa};
qa.stringify=function(a){return a instanceof qa?a.width.toString()+" "+a.height.toString():a.toString()};qa.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};qa.prototype.equals=qa.prototype.N=function(a){return!(a instanceof qa)?s:this.wa===a.width&&this.va===a.height};qa.prototype.equalTo=qa.prototype.Py=function(a,b){return this.wa===a&&this.va===b};qa.prototype.zj=function(a){return N.La(this.wa,a.width)&&N.La(this.va,a.height)};
qa.prototype.qi=function(a){return N.I(this.wa,a.width)&&N.I(this.va,a.height)};z.g(qa,"width",qa.prototype.width);z.defineProperty(qa,{width:"width"},w("wa"),function(a){z.J(this,a);x&&z.j(a,"number",qa,"width");0>a&&z.ia(a,">= 0",qa,"width");this.wa=a});z.g(qa,"height",qa.prototype.height);z.defineProperty(qa,{height:"height"},w("va"),function(a){z.J(this,a);x&&z.j(a,"number",qa,"height");0>a&&z.ia(a,">= 0",qa,"height");this.va=a});
qa.prototype.isReal=qa.prototype.W=function(){return isFinite(this.width)&&isFinite(this.height)};
function H(a,b,c,d){a===f?this.va=this.wa=this.M=this.L=0:a instanceof G?b instanceof G?(this.L=Math.min(a.L,b.L),this.M=Math.min(a.M,b.M),this.wa=Math.abs(a.L-b.L),this.va=Math.abs(a.M-b.M)):b instanceof qa?(this.L=a.L,this.M=a.M,this.wa=b.wa,this.va=b.va):z.m("Incorrect arguments supplied"):"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.L=a,this.M=b,this.wa=c,this.va=d):z.m("Invalid arguments to Rect constructor")}
z.ea("Rect",H);H.prototype.assign=function(a){this.L=a.L;this.M=a.M;this.wa=a.wa;this.va=a.va};H.prototype.q=function(a,b,c,d){this.L=a;this.M=b;this.wa=c;this.va=d};function lb(a,b,c){a.wa=b;a.va=c}H.prototype.setTo=H.prototype.So=function(a,b,c,d){x&&(z.j(a,"number",H,"setTo:x"),z.j(b,"number",H,"setTo:y"),z.j(c,"number",H,"setTo:w"),z.j(d,"number",H,"setTo:h"));0>c&&z.ia(c,">= 0",H,"setTo:w");0>d&&z.ia(d,">= 0",H,"setTo:h");z.J(this);this.L=a;this.M=b;this.wa=c;this.va=d;return this};
H.prototype.set=H.prototype.set=function(a){x&&z.l(a,H,H,"set:r");z.J(this);this.L=a.L;this.M=a.M;this.wa=a.wa;this.va=a.va;return this};H.prototype.setPoint=H.prototype.ff=function(a){x&&z.l(a,G,H,"setPoint:p");z.J(this);this.L=a.L;this.M=a.M;return this};H.prototype.setSize=H.prototype.JJ=function(a){x&&z.l(a,qa,H,"setSize:s");z.J(this);this.wa=a.wa;this.va=a.va;return this};H.prototype.copy=function(){var a=new H;a.L=this.L;a.M=this.M;a.wa=this.wa;a.va=this.va;return a};
H.prototype.Oa=function(){this.hb=h;Object.freeze(this);return this};H.prototype.Y=function(){return Object.isFrozen(this)?this:this.copy().freeze()};H.prototype.freeze=function(){this.hb=h;return this};H.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;return this};
H.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new H(c,e,g,k)}return new H};H.stringify=function(a){return a instanceof H?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
H.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};H.prototype.equals=H.prototype.N=function(a){return!(a instanceof H)?s:this.L===a.x&&this.M===a.y&&this.wa===a.width&&this.va===a.height};H.prototype.equalTo=H.prototype.Py=function(a,b,c,d){return this.L===a&&this.M===b&&this.wa===c&&this.va===d};H.prototype.zj=function(a){return N.La(this.L,a.x)&&N.La(this.M,a.y)&&N.La(this.wa,a.width)&&N.La(this.va,a.height)};
H.prototype.qi=function(a){return N.I(this.L,a.x)&&N.I(this.M,a.y)&&N.I(this.wa,a.width)&&N.I(this.va,a.height)};H.prototype.containsPoint=H.prototype.Ia=function(a){x&&z.l(a,G,H,"containsPoint:p");return this.L<=a.x&&this.L+this.wa>=a.x&&this.M<=a.y&&this.M+this.va>=a.y};H.prototype.containsRect=H.prototype.uj=function(a){x&&z.l(a,H,H,"containsRect:r");return this.L<=a.x&&a.x+a.width<=this.L+this.wa&&this.M<=a.y&&a.y+a.height<=this.M+this.va};
H.prototype.contains=H.prototype.contains=function(a,b,c,d){x?(z.p(a,H,"contains:x"),z.p(b,H,"contains:y"),c===f?c=0:z.p(c,H,"contains:w"),d===f?d=0:z.p(d,H,"contains:h"),(0>c||0>d)&&z.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.L<=a&&a+c<=this.L+this.wa&&this.M<=b&&b+d<=this.M+this.va};H.prototype.reset=function(){z.J(this);this.va=this.wa=this.M=this.L=0};
H.prototype.offset=H.prototype.offset=function(a,b){x&&(z.p(a,H,"offset:dx"),z.p(b,H,"offset:dy"));z.J(this);this.L+=a;this.M+=b;return this};H.prototype.inflate=H.prototype.Fg=function(a,b){x&&(z.p(a,H,"inflate:w"),z.p(b,H,"inflate:h"));return mb(this,b,a,b,a)};H.prototype.addMargin=H.prototype.Gu=function(a){x&&z.l(a,ub,H,"addMargin:m");return mb(this,a.top,a.right,a.bottom,a.left)};
H.prototype.subtractMargin=H.prototype.aI=function(a){x&&z.l(a,ub,H,"subtractMargin:m");return mb(this,-a.top,-a.right,-a.bottom,-a.left)};H.prototype.grow=H.prototype.aJ=function(a,b,c,d){x&&(z.p(a,H,"grow:t"),z.p(b,H,"grow:r"),z.p(c,H,"grow:b"),z.p(d,H,"grow:l"));return mb(this,a,b,c,d)};function mb(a,b,c,d,e){z.J(a);var g=a.wa;c+e<=-g?(a.L+=g/2,a.wa=0):(a.L-=e,a.wa+=c+e);c=a.va;b+d<=-c?(a.M+=c/2,a.va=0):(a.M-=b,a.va+=b+d);return a}
H.prototype.intersectRect=H.prototype.eJ=function(a){x&&z.l(a,H,H,"intersectRect:r");return xb(this,a.x,a.y,a.width,a.height)};H.prototype.intersect=H.prototype.dJ=function(a,b,c,d){x&&(z.p(a,H,"intersect:x"),z.p(b,H,"intersect:y"),z.p(c,H,"intersect:w"),z.p(d,H,"intersect:h"),(0>c||0>d)&&z.m("Rect.intersect:Width and height cannot be negative"));return xb(this,a,b,c,d)};
function xb(a,b,c,d,e){z.J(a);var g=Math.max(a.L,b),k=Math.max(a.M,c);b=Math.min(a.L+a.wa,b+d);c=Math.min(a.M+a.va,c+e);a.L=g;a.M=k;a.wa=Math.max(0,b-g);a.va=Math.max(0,c-k);return a}H.prototype.intersectsRect=H.prototype.xf=function(a){x&&z.l(a,H,H,"intersectsRect:r");return this.jD(a.x,a.y,a.width,a.height)};
H.prototype.intersects=H.prototype.jD=function(a,b,c,d){x&&(z.p(a,H,"intersects:x"),z.p(b,H,"intersects:y"),z.p(a,H,"intersects:w"),z.p(b,H,"intersects:h"),(0>c||0>d)&&z.m("Rect.intersects:Width and height cannot be negative"));var e=this.wa,g=this.L;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return s;a=this.va;c=this.M;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?s:h};
function Ab(a,b){var c=a.wa,d=b.width+10+10,e=a.L,g=b.x-10;if(e>d+g||g>c+e)return s;c=a.va;d=b.height+10+10;e=a.M;g=b.y-10;return e>d+g||g>c+e?s:h}H.prototype.unionPoint=H.prototype.Lj=function(a){x&&z.l(a,G,H,"unionPoint:p");return Bb(this,a.x,a.y,0,0)};H.prototype.unionRect=H.prototype.Mj=function(a){x&&z.l(a,H,H,"unionRect:r");return Bb(this,a.L,a.M,a.wa,a.va)};
H.prototype.union=H.prototype.OE=function(a,b,c,d){z.J(this);x?(z.p(a,H,"union:x"),z.p(b,H,"union:y"),c===f?c=0:z.p(c,H,"union:w"),d===f?d=0:z.p(d,H,"union:h"),(0>c||0>d)&&z.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return Bb(this,a,b,c,d)};function Bb(a,b,c,d,e){var g=Math.min(a.L,b),k=Math.min(a.M,c);b=Math.max(a.L+a.wa,b+d);c=Math.max(a.M+a.va,c+e);a.L=g;a.M=k;a.wa=b-g;a.va=c-k;return a}
H.prototype.setSpot=H.prototype.Ds=function(a,b,c){x&&(z.p(a,H,"setSpot:x"),z.p(b,H,"setSpot:y"),z.l(c,O,H,"setSpot:spot"));z.J(this);this.L=a-c.offsetX-c.x*this.wa;this.M=b-c.offsetY-c.y*this.va;return this};var Cb;
H.contains=Cb=function(a,b,c,d,e,g,k,l){x?(z.p(a,H,"contains:rx"),z.p(b,H,"contains:ry"),z.p(c,H,"contains:rw"),z.p(d,H,"contains:rh"),z.p(e,H,"contains:x"),z.p(g,H,"contains:y"),k===f?k=0:z.p(k,H,"contains:w"),l===f?l=0:z.p(l,H,"contains:h"),(0>c||0>d||0>k||0>l)&&z.m("Rect.contains:Width and height cannot be negative")):(k===f&&(k=0),l===f&&(l=0));return a<=e&&e+k<=a+c&&b<=g&&g+l<=b+d};
H.intersects=function(a,b,c,d,e,g,k,l){x&&(z.p(a,H,"intersects:rx"),z.p(b,H,"intersects:ry"),z.p(c,H,"intersects:rw"),z.p(d,H,"intersects:rh"),z.p(e,H,"intersects:x"),z.p(g,H,"intersects:y"),z.p(k,H,"intersects:w"),z.p(l,H,"intersects:h"),(0>c||0>d||0>k||0>l)&&z.m("Rect.intersects:Width and height cannot be negative"));c+=a;k+=e;if(a>k||e>c)return s;a=d+b;l+=g;return b>l||g>a?s:h};z.g(H,"x",H.prototype.x);z.defineProperty(H,{x:"x"},w("L"),function(a){z.J(this,a);x&&z.j(a,"number",H,"x");this.L=a});
z.g(H,"y",H.prototype.y);z.defineProperty(H,{y:"y"},w("M"),function(a){z.J(this,a);x&&z.j(a,"number",H,"y");this.M=a});z.g(H,"width",H.prototype.width);z.defineProperty(H,{width:"width"},w("wa"),function(a){z.J(this,a);x&&z.j(a,"number",H,"width");0>a&&z.ia(a,">= 0",H,"width");this.wa=a});z.g(H,"height",H.prototype.height);z.defineProperty(H,{height:"height"},w("va"),function(a){z.J(this,a);x&&z.j(a,"number",H,"height");0>a&&z.ia(a,">= 0",H,"height");this.va=a});z.g(H,"left",H.prototype.left);
z.defineProperty(H,{left:"left"},w("L"),function(a){z.J(this,a);x&&z.j(a,"number",H,"left");this.L=a});z.g(H,"top",H.prototype.top);z.defineProperty(H,{top:"top"},w("M"),function(a){z.J(this,a);x&&z.j(a,"number",H,"top");this.M=a});z.g(H,"right",H.prototype.right);z.defineProperty(H,{right:"right"},function(){return this.L+this.wa},function(a){z.J(this,a);x&&z.p(a,H,"right");this.L+=a-(this.L+this.wa)});z.g(H,"bottom",H.prototype.bottom);
z.defineProperty(H,{bottom:"bottom"},function(){return this.M+this.va},function(a){z.J(this,a);x&&z.p(a,H,"top");this.M+=a-(this.M+this.va)});z.g(H,"position",H.prototype.position);z.defineProperty(H,{position:"position"},function(){return new G(this.L,this.M)},function(a){z.J(this,a);x&&z.l(a,G,H,"position");this.L=a.x;this.M=a.y});z.g(H,"size",H.prototype.size);
z.defineProperty(H,{size:"size"},function(){return new qa(this.wa,this.va)},function(a){z.J(this,a);x&&z.l(a,qa,H,"size");this.wa=a.width;this.va=a.height});z.g(H,"center",H.prototype.Cy);z.defineProperty(H,{Cy:"center"},function(){return new G(this.L+this.wa/2,this.M+this.va/2)},function(a){z.J(this,a);x&&z.l(a,G,H,"center");this.L=a.x-this.wa/2;this.M=a.y-this.va/2});z.g(H,"centerX",H.prototype.Ca);
z.defineProperty(H,{Ca:"centerX"},function(){return this.L+this.wa/2},function(a){z.J(this,a);x&&z.p(a,H,"centerX");this.L=a-this.wa/2});z.g(H,"centerY",H.prototype.Ka);z.defineProperty(H,{Ka:"centerY"},function(){return this.M+this.va/2},function(a){z.J(this,a);x&&z.p(a,H,"centerY");this.M=a-this.va/2});H.prototype.isReal=H.prototype.W=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
H.prototype.isEmpty=H.prototype.fJ=function(){return 0===this.width&&0===this.height};function ub(a,b,c,d){a===f?this.Jf=this.Ef=this.Nf=this.Qf=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):z.m("Invalid arguments to Margin constructor")}z.ea("Margin",ub);ub.prototype.assign=function(a){this.Qf=a.Qf;this.Nf=a.Nf;this.Ef=a.Ef;this.Jf=a.Jf};
ub.prototype.setTo=ub.prototype.So=function(a,b,c,d){x&&(z.j(a,"number",ub,"setTo:t"),z.j(b,"number",ub,"setTo:r"),z.j(c,"number",ub,"setTo:b"),z.j(d,"number",ub,"setTo:l"));z.J(this);this.Qf=a;this.Nf=b;this.Ef=c;this.Jf=d;return this};ub.prototype.set=ub.prototype.set=function(a){x&&z.l(a,ub,ub,"assign:m");z.J(this);this.Qf=a.Qf;this.Nf=a.Nf;this.Ef=a.Ef;this.Jf=a.Jf;return this};ub.prototype.copy=function(){var a=new ub;a.Qf=this.Qf;a.Nf=this.Nf;a.Ef=this.Ef;a.Jf=this.Jf;return a};
ub.prototype.Oa=function(){this.hb=h;Object.freeze(this);return this};ub.prototype.Y=function(){return Object.isFrozen(this)?this:this.copy().freeze()};ub.prototype.freeze=function(){this.hb=h;return this};ub.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;return this};
ub.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new ub(c,e,g,k)}return new ub};ub.stringify=function(a){return a instanceof ub?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};
ub.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};ub.prototype.equals=ub.prototype.N=function(a){return!(a instanceof ub)?s:this.Qf===a.top&&this.Nf===a.right&&this.Ef===a.bottom&&this.Jf===a.left};ub.prototype.equalTo=ub.prototype.Py=function(a,b,c,d){return this.Qf===a&&this.Nf===b&&this.Ef===c&&this.Jf===d};ub.prototype.zj=function(a){return N.La(this.Qf,a.top)&&N.La(this.Nf,a.right)&&N.La(this.Ef,a.bottom)&&N.La(this.Jf,a.left)};
ub.prototype.qi=function(a){return N.I(this.Qf,a.top)&&N.I(this.Nf,a.right)&&N.I(this.Ef,a.bottom)&&N.I(this.Jf,a.left)};z.g(ub,"top",ub.prototype.top);z.defineProperty(ub,{top:"top"},w("Qf"),function(a){z.J(this,a);x&&z.p(a,ub,"top");this.Qf=a});z.g(ub,"right",ub.prototype.right);z.defineProperty(ub,{right:"right"},w("Nf"),function(a){z.J(this,a);x&&z.p(a,ub,"right");this.Nf=a});z.g(ub,"bottom",ub.prototype.bottom);
z.defineProperty(ub,{bottom:"bottom"},w("Ef"),function(a){z.J(this,a);x&&z.p(a,ub,"bottom");this.Ef=a});z.g(ub,"left",ub.prototype.left);z.defineProperty(ub,{left:"left"},w("Jf"),function(a){z.J(this,a);x&&z.p(a,ub,"left");this.Jf=a});ub.prototype.isReal=ub.prototype.W=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ra(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}z.Vf(ra,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h});
ra.prototype.set=ra.prototype.set=function(a){x&&z.l(a,ra,ra,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};ra.prototype.copy=function(){var a=new ra;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ra.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
ra.prototype.equals=ra.prototype.N=function(a){return!(a instanceof ra)?s:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy};ra.prototype.reset=ra.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};
ra.prototype.multiply=ra.prototype.multiply=function(a){x&&z.l(a,ra,ra,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
ra.prototype.multiplyInverted=ra.prototype.rz=function(a){x&&z.l(a,ra,ra,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,k=b*(a.m21*a.dy-a.m22*a.dx),l=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*g;e=this.m12*e+this.m22*g;g=this.m11*k+this.m21*l+this.dx;k=this.m12*k+this.m22*l+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=k;return this};
ra.prototype.invert=ra.prototype.az=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g};
ra.prototype.rotate=ra.prototype.rotate=function(a,b,c){x&&(z.p(a,ra,"rotate:angle"),z.p(b,ra,"rotate:rx"),z.p(c,ra,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180;a=Math.cos(d);var d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,k=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=k;this.translate(-b,-c)};
ra.prototype.translate=ra.prototype.translate=function(a,b){x&&(z.p(a,ra,"translate:x"),z.p(b,ra,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};ra.prototype.scale=ra.prototype.scale=function(a,b){b===f&&(b=a);x&&(z.p(a,ra,"translate:sx"),z.p(b,ra,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
ra.prototype.transformPoint=ra.prototype.Va=function(a){x&&z.l(a,G,ra,"transformPoint:p");var b=a.L,c=a.M;a.L=b*this.m11+c*this.m21+this.dx;a.M=b*this.m12+c*this.m22+this.dy;return a};ra.prototype.invertedTransformPoint=ra.prototype.ti=function(a){x&&z.l(a,G,ra,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.L,k=a.M;a.L=g*this.m22*b+k*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.M=g*c+k*d+e;return a};
ra.prototype.transformRect=ra.prototype.JE=function(a){x&&z.l(a,H,ra,"transformRect:rect");var b=a.L,c=a.M,d=b+a.wa,e=c+a.va,g=this.m11,k=this.m12,l=this.m21,m=this.m22,n=this.dx,p=this.dy,r=b*g+c*l+n,t=b*k+c*m+p,u=d*g+c*l+n,c=d*k+c*m+p,v=b*g+e*l+n,b=b*k+e*m+p,g=d*g+e*l+n,d=d*k+e*m+p,e=r,k=t,r=Math.min(r,u),e=Math.max(e,u),k=Math.min(k,c),t=Math.max(t,c),r=Math.min(r,v),e=Math.max(e,v),k=Math.min(k,b),t=Math.max(t,b),r=Math.min(r,g),e=Math.max(e,g),k=Math.min(k,d),t=Math.max(t,d);a.L=r;a.M=k;a.wa=
e-r;a.va=t-k};ra.prototype.isIdentity=ra.prototype.$r=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function O(a,b,c,d){a===f?this.Mf=this.Lf=this.M=this.L=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}z.ea("Spot",O);O.prototype.assign=function(a){this.L=a.L;this.M=a.M;this.Lf=a.Lf;this.Mf=a.Mf};
O.prototype.setTo=O.prototype.So=function(a,b,c,d){x&&(Gb(a,"setTo:x"),Gb(b,"setTo:y"),Hb(c,"setTo:offx"),Hb(d,"setTo:offy"));z.J(this);this.L=a;this.M=b;this.Lf=c;this.Mf=d;return this};O.prototype.set=O.prototype.set=function(a){x&&z.l(a,O,O,"set:s");z.J(this);this.L=a.L;this.M=a.M;this.Lf=a.Lf;this.Mf=a.Mf;return this};O.prototype.copy=function(){var a=new O;a.L=this.L;a.M=this.M;a.Lf=this.Lf;a.Mf=this.Mf;return a};O.prototype.Oa=function(){this.hb=h;Object.freeze(this);return this};
O.prototype.Y=function(){return Object.isFrozen(this)?this:this.copy().freeze()};O.prototype.freeze=function(){this.hb=h;return this};O.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;return this};function Lb(a,b){a.L=NaN;a.M=NaN;a.Lf=b;return a}function Gb(a,b){(isNaN(a)||1<a||0>a)&&z.ia(a,"0 <= "+b+" <= 1",O,b)}function Hb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&z.ia(a,"real number, not NaN or Infinity",O,b)}var Mb;
O.parse=Mb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return z.NONE;if("TopLeft"===a)return z.qw;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return z.$o;if("TopRight"===a)return z.sw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return z.Yo;if("Center"===a)return z.fw;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return z.Zo;if("BottomLeft"===a)return z.aw;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return z.Xo;if("BottomRight"===a)return z.cw;if("TopSide"===
a)return z.uw;if("LeftSide"===a)return z.iw;if("RightSide"===a)return z.ow;if("BottomSide"===a)return z.ew;if("TopBottomSides"===a)return z.pw;if("LeftRightSides"===a)return z.hw;if("TopLeftSides"===a)return z.rw;if("TopRightSides"===a)return z.tw;if("BottomLeftSides"===a)return z.bw;if("BottomRightSides"===a)return z.dw;if("NotTopSide"===a)return z.mw;if("NotLeftSide"===a)return z.kw;if("NotRightSide"===a)return z.lw;if("NotBottomSide"===a)return z.jw;if("AllSides"===a)return z.$v;if("Default"===
a)return z.gw;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new O(c,e,g,k)}return new O};O.stringify=function(a){return a instanceof O?Ob(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
O.prototype.toString=function(){return Ob(this)?0===this.Lf&&0===this.Mf?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.N(z.NONE)?"None":this.N(z.qw)?"TopLeft":this.N(z.$o)?"Top":this.N(z.sw)?"TopRight":this.N(z.Yo)?"Left":this.N(z.fw)?"Center":this.N(z.Zo)?"Right":this.N(z.aw)?"BottomLeft":this.N(z.Xo)?"Bottom":this.N(z.cw)?"BottomRight":this.N(z.uw)?"TopSide":this.N(z.iw)?"LeftSide":this.N(z.ow)?"RightSide":this.N(z.ew)?"BottomSide":this.N(z.pw)?
"TopBottomSides":this.N(z.hw)?"LeftRightSides":this.N(z.rw)?"TopLeftSides":this.N(z.tw)?"TopRightSides":this.N(z.bw)?"BottomLeftSides":this.N(z.dw)?"BottomRightSides":this.N(z.mw)?"NotTopSide":this.N(z.kw)?"NotLeftSide":this.N(z.lw)?"NotRightSide":this.N(z.jw)?"NotBottomSide":this.N(z.$v)?"AllSides":this.N(z.gw)?"Default":"None"};
O.prototype.equals=O.prototype.N=function(a){return!(a instanceof O)?s:(this.L===a.x||isNaN(this.L)&&isNaN(a.x))&&(this.M===a.y||isNaN(this.M)&&isNaN(a.y))&&this.Lf===a.offsetX&&this.Mf===a.offsetY};O.prototype.opposite=O.prototype.wJ=function(){return new O(0.5-(this.L-0.5),0.5-(this.M-0.5),-this.Lf,-this.Mf)};O.prototype.includesSide=O.prototype.bJ=function(a){if(!Rb(this)||!Rb(a))return s;a=a.offsetY;return(this.Mf&a)===a};z.g(O,"x",O.prototype.x);
z.defineProperty(O,{x:"x"},w("L"),function(a){z.J(this,a);x&&Gb(a,"x");this.L=a});z.g(O,"y",O.prototype.y);z.defineProperty(O,{y:"y"},w("M"),function(a){z.J(this,a);x&&Gb(a,"y");this.M=a});z.g(O,"offsetX",O.prototype.offsetX);z.defineProperty(O,{offsetX:"offsetX"},w("Lf"),function(a){z.J(this,a);x&&Hb(a,"offsetX");this.Lf=a});z.g(O,"offsetY",O.prototype.offsetY);z.defineProperty(O,{offsetY:"offsetY"},w("Mf"),function(a){z.J(this,a);x&&Hb(a,"offsetY");this.Mf=a});
function Ob(a){return!isNaN(a.x)&&!isNaN(a.y)}function Sb(a){return isNaN(a.x)||isNaN(a.y)}function Rb(a){return Sb(a)&&1===a.offsetX&&0!==a.offsetY}function Vb(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}z.ud=1;z.$c=2;z.jd=4;z.hd=8;z.NONE=Lb(new O(0,0,0,0),0).Oa();z.gw=Lb(new O(0,0,-1,0),-1).Oa();z.qw=(new O(0,0,0,0)).Oa();z.$o=(new O(0.5,0,0,0)).Oa();z.sw=(new O(1,0,0,0)).Oa();z.Yo=(new O(0,0.5,0,0)).Oa();z.fw=(new O(0.5,0.5,0,0)).Oa();z.Zo=(new O(1,0.5,0,0)).Oa();
z.aw=(new O(0,1,0,0)).Oa();z.Xo=(new O(0.5,1,0,0)).Oa();z.cw=(new O(1,1,0,0)).Oa();z.uw=Lb(new O(0,0,1,z.ud),1).Oa();z.iw=Lb(new O(0,0,1,z.$c),1).Oa();z.ow=Lb(new O(0,0,1,z.jd),1).Oa();z.ew=Lb(new O(0,0,1,z.hd),1).Oa();z.pw=Lb(new O(0,0,1,z.ud|z.hd),1).Oa();z.hw=Lb(new O(0,0,1,z.$c|z.jd),1).Oa();z.rw=Lb(new O(0,0,1,z.ud|z.$c),1).Oa();z.tw=Lb(new O(0,0,1,z.ud|z.jd),1).Oa();z.bw=Lb(new O(0,0,1,z.hd|z.$c),1).Oa();z.dw=Lb(new O(0,0,1,z.hd|z.jd),1).Oa();z.mw=Lb(new O(0,0,1,z.$c|z.jd|z.hd),1).Oa();
z.kw=Lb(new O(0,0,1,z.ud|z.jd|z.hd),1).Oa();z.lw=Lb(new O(0,0,1,z.ud|z.$c|z.hd),1).Oa();z.jw=Lb(new O(0,0,1,z.ud|z.$c|z.jd),1).Oa();z.$v=Lb(new O(0,0,1,z.ud|z.$c|z.jd|z.hd),1).Oa();var Wb;O.None=Wb=z.NONE;var Zb;O.Default=Zb=z.gw;var $b;O.TopLeft=$b=z.qw;var ac;O.TopCenter=ac=z.$o;var bc;O.TopRight=bc=z.sw;O.LeftCenter=z.Yo;var cc;O.Center=cc=z.fw;O.RightCenter=z.Zo;var dc;O.BottomLeft=dc=z.aw;var fc;O.BottomCenter=fc=z.Xo;var gc;O.BottomRight=gc=z.cw;var hc;O.MiddleTop=hc=z.$o;var ic;
O.MiddleLeft=ic=z.Yo;var jc;O.MiddleRight=jc=z.Zo;var kc;O.MiddleBottom=kc=z.Xo;O.Top=z.$o;var nc;O.Left=nc=z.Yo;var oc;O.Right=oc=z.Zo;O.Bottom=z.Xo;var pc;O.TopSide=pc=z.uw;var qc;O.LeftSide=qc=z.iw;var wc;O.RightSide=wc=z.ow;var xc;O.BottomSide=xc=z.ew;O.TopBottomSides=z.pw;O.LeftRightSides=z.hw;O.TopLeftSides=z.rw;O.TopRightSides=z.tw;O.BottomLeftSides=z.bw;O.BottomRightSides=z.dw;O.NotTopSide=z.mw;O.NotLeftSide=z.kw;O.NotRightSide=z.lw;O.NotBottomSide=z.jw;var yc;O.AllSides=yc=z.$v;
var N={ua:4*((Math.sqrt(2)-1)/3),Nj:(new G(0,0)).Oa(),iF:(new H(0,0,0,0)).Oa(),ap:(new ub(0,0,0,0)).Oa(),gF:(new ub(2,2,2,2)).Oa(),hF:(new qa(Infinity,Infinity)).Oa(),dF:(new G(-Infinity,-Infinity)).Oa(),cF:(new G(Infinity,Infinity)).Oa(),Os:(new qa(0,0)).Oa(),nw:(new qa(1,1)).Oa(),Am:(new qa(6,6)).Oa(),jA:(new qa(8,8)).Oa(),eF:(new G(NaN,NaN)).Oa(),oA:q,sqrt:function(a){if(0>=a)return 0;var b=N.oA;if(b===q){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);N.oA=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):
2E3>=a?b[a|0]:Math.sqrt(a)},I:function(a,b){var c=a-b;return 0.5>c&&-0.5<c},La:function(a,b){var c=a-b;return 5E-8>c&&-5E-8<c},qd:function(a,b,c,d,e,g,k){0>=e&&(e=1E-6);var l,m,n,p;a<c?(m=a,l=c):(m=c,l=a);b<d?(p=b,n=d):(p=d,n=b);if(a===c)return p<=k&&k<=n&&a-e<=g&&g<=a+e;if(b===d)return m<=g&&g<=l&&b-e<=k&&k<=b+e;l+=e;m-=e;if(m<=g&&g<=l&&(n+=e,p-=e,p<=k&&k<=n))if(l-m>n-p)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=k&&k<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(k=(c-a)/(d-b)*(k-b)+a,
k-e<=g&&g<=k+e)return h}else return h;return s},Ou:function(a,b,c,d,e,g,k,l,m,n,p,r){if(!N.qd(a,b,k,l,r,c,d)||!N.qd(a,b,k,l,r,e,g)){var t=(a+c)/2,u=(b+d)/2,v=(c+e)/2,A=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(t+v)/2;c=(u+A)/2;var v=(v+e)/2,A=(A+g)/2,C=(d+v)/2,K=(c+A)/2;return N.Ou(a,b,t,u,d,c,C,K,m,n,p,r)||N.Ou(C,K,v,A,e,g,k,l,m,n,p,r)}return N.qd(a,b,k,l,r,n,p)},bG:function(a,b,c,d,e,g,k,l,m){var n=(c+e)/2,p=(d+g)/2;m.x=(((a+c)/2+n)/2+(n+(e+k)/2)/2)/2;m.y=(((b+d)/2+p)/2+(p+(g+l)/2)/2)/2;return m},aG:function(a,
b,c,d,e,g,k,l){var m=(c+e)/2,n=(d+g)/2;return kb(((a+c)/2+m)/2,((b+d)/2+n)/2,(m+(e+k)/2)/2,(n+(g+l)/2)/2)},Tn:function(a,b,c,d,e,g,k,l,m,n){if(!N.qd(a,b,k,l,m,c,d)||!N.qd(a,b,k,l,m,e,g)){var p=(a+c)/2,r=(b+d)/2,t=(c+e)/2,u=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(p+t)/2;c=(r+u)/2;var t=(t+e)/2,u=(u+g)/2,v=(d+t)/2,A=(c+u)/2;N.Tn(a,b,p,r,d,c,v,A,m,n);N.Tn(v,A,t,u,e,g,k,l,m,n)}else Bb(n,a,b,0,0),Bb(n,k,l,0,0);return n},fe:function(a,b,c,d,e,g,k,l,m,n){if(!N.qd(a,b,k,l,m,c,d)||!N.qd(a,b,k,l,m,e,g)){var p=(a+c)/
2,r=(b+d)/2,t=(c+e)/2,u=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(p+t)/2;c=(r+u)/2;var t=(t+e)/2,u=(u+g)/2,v=(d+t)/2,A=(c+u)/2;N.fe(a,b,p,r,d,c,v,A,m,n);N.fe(v,A,t,u,e,g,k,l,m,n)}else 0===n.length&&n.push([a,b]),n.push([k,l]);return n},Bz:function(a,b,c,d,e,g,k,l,m,n){if(N.qd(a,b,e,g,n,c,d))return N.qd(a,b,e,g,n,l,m);var p=(a+c)/2,r=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var t=(p+c)/2,u=(r+d)/2;return N.Bz(a,b,p,r,t,u,k,l,m,n)||N.Bz(t,u,c,d,e,g,k,l,m,n)},BJ:function(a,b,c,d,e,g,k){k.x=((a+c)/2+(c+e)/2)/2;k.y=((b+d)/2+
(d+g)/2)/2;return k},Az:function(a,b,c,d,e,g,k,l){if(N.qd(a,b,e,g,k,c,d))Bb(l,a,b,0,0),Bb(l,e,g,0,0);else{var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var p=(m+c)/2,r=(n+d)/2;N.Az(a,b,m,n,p,r,k,l);N.Az(p,r,c,d,e,g,k,l)}return l},Lo:function(a,b,c,d,e,g,k,l){if(N.qd(a,b,e,g,k,c,d))0===l.length&&l.push([a,b]),l.push([e,g]);else{var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var p=(m+c)/2,r=(n+d)/2;N.Lo(a,b,m,n,p,r,k,l);N.Lo(p,r,c,d,e,g,k,l)}return l},Br:function(a,b,c,d,e,g,k,l,m,n,p,r,t,u){0>=t&&(t=1E-6);
if(!N.qd(a,b,k,l,t,c,d)||!N.qd(a,b,k,l,t,e,g)){var v=(a+c)/2,A=(b+d)/2;c=(c+e)/2;d=(d+g)/2;e=(e+k)/2;g=(g+l)/2;var C=(v+c)/2,K=(A+d)/2;c=(c+e)/2;d=(d+g)/2;var I=(C+c)/2,R=(K+d)/2,M=(p-m)*(p-m)+(r-n)*(r-n),S=s;N.Br(a,b,v,A,C,K,I,R,m,n,p,r,t,u)&&(a=(u.x-m)*(u.x-m)+(u.y-n)*(u.y-n),a<M&&(M=a,S=h));b=u.x;v=u.y;N.Br(I,R,c,d,e,g,k,l,m,n,p,r,t,u)&&(a=(u.x-m)*(u.x-m)+(u.y-n)*(u.y-n),a<M?S=h:(u.x=b,u.y=v));return S}v=(a-k)*(n-r)-(b-l)*(m-p);if(!v)return s;t=((a*l-b*k)*(m-p)-(a-k)*(m*r-n*p))/v;v=((a*l-b*k)*
(n-r)-(b-l)*(m*r-n*p))/v;if((m>p?m-p:p-m)<(n>r?n-r:r-n)){if(b<l?(m=b,k=l):(m=l,k=b),v<m||v>k)return s}else if(a<k?m=a:(m=k,k=a),t<m||t>k)return s;u.x=t;u.y=v;return h},Cr:function(a,b,c,d,e,g,k,l,m,n,p,r,t){var u=0;0>=t&&(t=1E-6);if(!N.qd(a,b,k,l,t,c,d)||!N.qd(a,b,k,l,t,e,g)){var v=(a+c)/2,A=(b+d)/2,C=(c+e)/2,K=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(v+C)/2;c=(A+K)/2;var C=(C+e)/2,K=(K+g)/2,I=(d+C)/2,R=(c+K)/2,u=u+N.Cr(a,b,v,A,d,c,I,R,m,n,p,r,t),u=u+N.Cr(I,R,C,K,e,g,k,l,m,n,p,r,t)}else{t=(a-k)*(n-r)-(b-l)*
(m-p);if(!t)return u;v=((a*l-b*k)*(m-p)-(a-k)*(m*r-n*p))/t;A=((a*l-b*k)*(n-r)-(b-l)*(m*r-n*p))/t;if(v>=p)return u;if((m>p?m-p:p-m)<(n>r?n-r:r-n)){if(b<l?(m=b,a=l):(m=l,a=b),A<m||A>a)return u}else if(a<k?(m=a,a=k):m=k,v<m||v>a)return u;0<t?u++:0>t&&u--}return u},ns:function(a,b,c,d,e,g,k){if(N.La(a,c)){var l;b<d?(l=b,c=d):(l=d,c=b);d=g;if(d<l)return k.x=a,k.y=l,s;if(d>c)return k.x=a,k.y=c,s;k.x=a;k.y=d;return h}if(N.La(b,d)){a<c?l=a:(l=c,c=a);d=e;if(d<l)return k.x=l,k.y=b,s;if(d>c)return k.x=c,k.y=
b,s;k.x=d;k.y=b;return h}l=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>l)return k.x=a,k.y=b,s;if(1.000005<l)return k.x=c,k.y=d,s;k.x=a+l*(c-a);k.y=b+l*(d-b);return h},Lg:function(a,b,c,d,e,g,k,l,m){if(N.I(a,c)&&N.I(b,d))return m.x=a,m.y=b,s;if(N.La(e,k)){if(N.La(a,c))return N.ns(a,b,c,d,e,g,m),s;g=(d-b)/(c-a)*(e-a)+b;return N.ns(a,b,c,d,e,g,m)}l=(l-g)/(k-e);if(N.La(a,c)){g=l*(a-e)+g;b<d?(k=b,c=d):(k=d,c=b);if(g<k)return m.x=a,m.y=k,s;if(g>c)return m.x=a,m.y=c,s;m.x=a;m.y=g;return h}k=
(d-b)/(c-a);if(N.La(l,k))return N.ns(a,b,c,d,e,g,m),s;e=(k*a-l*e+g-b)/(k-l);if(N.La(k,0)){a<c?k=a:(k=c,c=a);if(e<k)return m.x=k,m.y=b,s;if(e>c)return m.x=c,m.y=b,s;m.x=e;m.y=b;return h}g=k*(e-a)+b;return N.ns(a,b,c,d,e,g,m)},kJ:function(a,b,c,d,e){return N.Lg(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},XI:function(a,b,c,d,e,g,k,l,m,n){function p(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<r&&(r=e,m.x=c,m.y=d)}var r=Infinity;p(m.x,m.y);var t,u,v,A;e<k?(t=e,u=k):(t=k,u=e);g<l?(v=e,A=k):(v=k,A=e);t=(u-t)/2+n;n=(A-
v)/2+n;e=(e+k)/2;g=(g+l)/2;if(0===t||0===n)return m;if(0.5>(c>a?c-a:a-c)){t=1-(c-e)*(c-e)/(t*t);if(0>t)return m;t=Math.sqrt(t);d=-n*t+g;p(c,n*t+g);p(c,d)}else{c=(d-b)/(c-a);d=1/(t*t)+c*c/(n*n);l=2*c*(b-c*a)/(n*n)-2*c*g/(n*n)-2*e/(t*t);t=l*l-4*d*(2*c*a*g/(n*n)-2*b*g/(n*n)+g*g/(n*n)+e*e/(t*t)-1+(b-c*a)*(b-c*a)/(n*n));if(0>t)return m;t=Math.sqrt(t);n=(-l+t)/(2*d);p(n,c*n-c*a+b);t=(-l-t)/(2*d);p(t,c*t-c*a+b)}return m},lo:function(a,b,c,d,e,g,k,l,m){var n=1E21,p=a,r=b;if(N.Lg(a,b,a,d,e,g,k,l,m)){var t=
(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g);t<n&&(n=t,p=m.x,r=m.y)}N.Lg(c,b,c,d,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));N.Lg(a,b,c,b,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));N.Lg(a,d,c,d,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));m.x=p;m.y=r;return 1E21>n},nv:function(a,b,c){var d=b.x,e=b.y,g=c.x,k=c.y,l=a.left,m=a.right,n=a.top,p=a.bottom;return d===g?(e<k?(a=e,g=k):(a=k,g=e),l<=d&&d<=m&&a<=p&&g>=n):e===k?(d<g?a=d:(a=g,
g=d),n<=e&&e<=p&&a<=m&&g>=l):a.Ia(b)||a.Ia(c)||N.mv(l,n,m,n,d,e,g,k)||N.mv(m,n,m,p,d,e,g,k)||N.mv(m,p,l,p,d,e,g,k)||N.mv(l,p,l,n,d,e,g,k)?h:s},mv:function(a,b,c,d,e,g,k,l){return 0>=N.Tu(a,b,c,d,e,g)*N.Tu(a,b,c,d,k,l)&&0>=N.Tu(e,g,k,l,a,b)*N.Tu(e,g,k,l,c,d)},Tu:function(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0},qs:function(a){0>a&&(a+=360);360<=a&&(a-=360);return a},uC:function(a,b,c,d,e,g){var k=Math.PI;g||(d*=k/180,
e*=k/180);g=d<e?1:-1;var l=[],m=k/2,n=d;for(d=Math.min(2*k+1E-5,Math.abs(e-d));1E-5<d;)e=n+g*Math.min(d,m),l.push(N.kG(c,n,e,a,b)),d-=Math.abs(e-n),n=e;return l},kG:function(a,b,c,d,e){var g=(c-b)/2,k=a*Math.cos(g),l=a*Math.sin(g),m=0.5522847498*Math.tan(g),n=k+m*l,k=-l+m*k,l=-k,m=g+b,g=Math.cos(m),m=Math.sin(m);return{x1:d+a*Math.cos(b),y1:e+a*Math.sin(b),x2:d+n*g-k*m,y2:e+n*m+k*g,Jd:d+n*g-l*m,Kd:e+n*m+l*g,Hb:d+a*Math.cos(c),Ib:e+a*Math.sin(c)}},Qy:function(a,b,c,d,e,g,k){c=Math.floor((a-c)/e)*e+
c;d=Math.floor((b-d)/g)*g+d;var l=c;c+e-a<e/2&&(l=c+e);a=d;d+g-b<g/2&&(a=d+g);k.q(l,a);return k},TC:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g},CG:function(a,b,c,d){var e=0>c,g=0>d,k,l;a<b?(k=1,l=0):(k=0,l=1);var m,n;m=0===k?a:b;n=0===k?c:d;if(0===k?e:g)n=-n;k=l;c=0===k?c:d;if(0===k?e:g)c=-c;return N.DG(m,0===k?a:b,n,c,0,0)},DG:function(a,b,c,d,e,g){if(0<d)if(0<c){g=a*a;e=b*b;a*=c;var k=b*d,l=-e+k,m=-e+Math.sqrt(a*a+k*k);b=l;for(var n=0;9999999999>
n;++n){b=0.5*(l+m);if(b===l||b===m)break;var p=a/(b+g),r=k/(b+e),p=p*p+r*r-1;if(0<p)l=b;else if(0>p)m=b;else break}c=g*c/(b+g)-c;d=e*d/(b+e)-d;c=Math.sqrt(c*c+d*d)}else c=Math.abs(d-b);else d=a*a-b*b,e=a*c,e<d?(d=e/d,e=a*d,g=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,c=Math.sqrt(c*c+g*g)):c=Math.abs(c-a);return c}};
function Dc(a){1<arguments.length&&z.m("Geometry constructor can take at most one optional argument, the Geometry type.");z.qc(this);a===f?a=Ec:x&&z.wb(a,Dc,Dc,"constructor:type");this.aa=a;this.md=this.dd=this.ec=this.Zb=0;this.gk=new J(Fc);this.qt=this.gk.Sb;this.ct=(new H).freeze();this.Ya=h;this.bi=$b;this.ci=gc;this.Bt=this.Ct=NaN;this.Nd=N.Os;this.jc=Gc}z.ea("Geometry",Dc);
Dc.prototype.copy=function(){var a=new Dc;a.aa=this.aa;a.Zb=this.Zb;a.ec=this.ec;a.dd=this.dd;a.md=this.md;for(var b=this.gk,c=b.length,d=a.gk,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.qt=this.qt;a.ct.assign(this.ct);a.Ya=this.Ya;a.bi=this.bi.Y();a.ci=this.ci.Y();a.Ct=this.Ct;a.Bt=this.Bt;a.Nd=this.Nd.Y();a.jc=this.jc;return a};var Lc;Dc.Line=Lc=z.w(Dc,"Line",0);var Oc;Dc.Rectangle=Oc=z.w(Dc,"Rectangle",1);var Pc;Dc.Ellipse=Pc=z.w(Dc,"Ellipse",2);var Ec;Dc.Path=Ec=z.w(Dc,"Path",3);
Dc.prototype.Oa=function(){this.freeze();Object.freeze(this);return this};Dc.prototype.freeze=function(){this.hb=h;var a=this.lb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};Dc.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;var a=this.lb;a.Ua();for(var b=a.length,c=0;c<b;c++)a.n[c].Ua();return this};
Dc.prototype.equalsApprox=Dc.prototype.zj=function(a){if(!(a instanceof Dc))return s;if(this.type!==a.type)return this.type===Lc&&a.type===Ec?Qc(this,a):a.type===Lc&&this.type===Ec?Qc(a,this):s;if(this.type===Ec){var b=this.lb;a=a.lb;var c=b.length;if(c!==a.length)return s;for(var d=0;d<c;d++)if(!b.n[d].zj(a.n[d]))return s;return h}return N.I(this.la,a.la)&&N.I(this.ma,a.ma)&&N.I(this.D,a.D)&&N.I(this.F,a.F)};
function Qc(a,b){if(a.type!==Lc||b.type!==Ec)return s;if(1===b.lb.count){var c=b.lb.na(0);if(1===c.Ha.count&&(N.I(a.la,c.la)&&N.I(a.ma,c.ma))&&(c=c.Ha.na(0),c.type===Rc&&N.I(a.D,c.D)&&N.I(a.F,c.F)))return h}return s}var Sc;Dc.stringify=Sc=function(a){return a.toString()};
Dc.prototype.toString=function(a){switch(this.type){case Lc:return a===f?"M"+this.la.toString()+" "+this.ma.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.la.toFixed(a)+" "+this.ma.toFixed(a)+"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);case Oc:var b=new H(this.la,this.ma,0,0);b.OE(this.D,this.F,0,0);return a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Pc:b=new H(this.la,this.ma,0,0);b.OE(this.D,this.F,0,0);if(a===f){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Ec:for(var b="",c=this.lb,d=c.length,e=0;e<d;e++){var g=c.n[e];0<e&&(b+=" x ");g.qo&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};var Tc;
Dc.fillPath=Tc=function(a){"string"!==typeof a&&z.Rb(a,"string",Dc,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=e.match(/[Ff]/)!==q?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var Uc;
Dc.parse=Uc=function(a,b){function c(){return p>=C-1?h:n[p+1].match(/[A-Za-z]/)!==q}function d(){p++;return n[p]}function e(){var a=new G(parseFloat(d()),parseFloat(d()));r===r.toLowerCase()&&(a.x=A.x+a.x,a.y=A.y+a.y);return a}function g(){return A=e()}function k(){return v=e()}function l(){var a=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];c()||(a.push(parseFloat(d())),c()||a.push(parseFloat(d())));r===r.toLowerCase()&&(a[2]+=A.x,a[3]+=A.y);return a}function m(){return"c"!==
t.toLowerCase()&&"s"!==t.toLowerCase()?A:new G(2*A.x-v.x,2*A.y-v.y)}b===f&&(b=s);"string"!==typeof a&&z.Rb(a,"string",Dc,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,
"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var n=a.split(" "),p=-1,r="",t="",u=new G(0,0),v=new G(0,0),A=new G(0,0),C=n.length,K=z.u(),I,R=s,M=s,S=h;!(p>=C-1);)if(t=r,r=d(),""!==r)switch(r.toUpperCase()){case "X":S=h;M=R=s;break;case "M":I=g();K.Jb===q||S===h?(P(K,I.x,I.y,R,s,!M),S=s):K.moveTo(I.x,I.y);for(u=A;!c();)I=g(),K.lineTo(I.x,I.y);break;case "L":for(;!c();)I=g(),K.lineTo(I.x,I.y);break;case "H":for(;!c();)A=
I=new G((r===r.toLowerCase()?A.x:0)+parseFloat(d()),A.y),K.lineTo(A.x,A.y);break;case "V":for(;!c();)A=I=new G(A.x,(r===r.toLowerCase()?A.y:0)+parseFloat(d())),K.lineTo(A.x,A.y);break;case "C":for(;!c();){var Z=e(),X=k();I=g();Q(K,Z.x,Z.y,X.x,X.y,I.x,I.y)}break;case "S":for(;!c();)Z=m(),X=k(),I=g(),Q(K,Z.x,Z.y,X.x,X.y,I.x,I.y);break;case "Q":for(;!c();)X=k(),I=g(),Vc(K,X.x,X.y,I.x,I.y);break;case "T":for(;!c();)v=X=m(),I=g(),Vc(K,X.x,X.y,I.x,I.y);break;case "B":for(;!c();)I=l(),K.arcTo(I[0],I[1],
I[2],I[3],I[4],I[5],I[6]);break;case "A":for(;!c();){var Z=Math.abs(parseFloat(d())),X=Math.abs(parseFloat(d())),ea=parseFloat(d()),ia=!!parseFloat(d()),W=!!parseFloat(d());I=g();Wc(K,Z,X,ea,ia,W,I.x,I.y)}break;case "Z":bd(K);A=u;break;case "F":I=q;for(Z=1;n[p+Z];)if(n[p+Z].match(/[Uu]/)!==q)Z++;else if(n[p+Z].match(/[A-Za-z]/)===q)Z++;else{I=n[p+Z];break}I.match(/[Mm]/)?R=h:cd(K);break;case "U":I=q;for(Z=1;n[p+Z];)if(n[p+Z].match(/[Ff]/)!==q)Z++;else if(n[p+Z].match(/[A-Za-z]/)===q)Z++;else{I=n[p+
Z];break}I.match(/[Mm]/)?M=h:dd(K)}u=K.s;z.v(K);if(b)for(K=u.lb.k;K.next();)K.value.qo=h;return u};function ed(a,b){for(var c=a.length,d=z.O(),e=0;e<c;e++){var g=a[e];d.x=g.x1;d.y=g.y1;b.Va(d);g.x1=d.x;g.y1=d.y;d.x=g.x2;d.y=g.y2;b.Va(d);g.x2=d.x;g.y2=d.y;d.x=g.Jd;d.y=g.Kd;b.Va(d);g.Jd=d.x;g.Kd=d.y;d.x=g.Hb;d.y=g.Ib;b.Va(d);g.Hb=d.x;g.Ib=d.y}z.B(d)}Dc.prototype.dz=function(){if(this.Ya)return h;var a=this.lb;if(this.qt!==a.Sb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].dz())return h;return s};
Dc.prototype.fA=function(){this.Ya=s;var a=this.lb;this.qt=a.Sb;for(var b=a.length,c=0;c<b;c++)a.n[c].fA()};Dc.prototype.Ve=function(){var a=this.ct;a.Ua();a.q(0,0,this.Nd.width,this.Nd.height);fd(this,a,s);Bb(a,0,0,0,0);a.freeze()};Dc.prototype.computeBoundsWithoutOrigin=Dc.prototype.gG=function(){var a=new H;fd(this,a,h);return a};
function fd(a,b,c){switch(a.type){case Lc:case Oc:case Pc:c?b.q(a.Zb,a.ec,0,0):Bb(b,a.Zb,a.ec,0,0);Bb(b,a.dd,a.md,0,0);break;case Ec:a=a.lb;for(var d=a.length,e=0;e<d;e++){var g=a.n[e];c&&0===e?b.q(g.la,g.ma,0,0):Bb(b,g.la,g.ma,0,0);for(var k=g.Ha,l=k.length,m=g.la,n=g.ma,p=0;p<l;p++){var r=k.n[p];switch(r.type){case Rc:case gd:m=r.D;n=r.F;Bb(b,m,n,0,0);break;case hd:N.Tn(m,n,r.ob,r.Gb,r.Vd,r.Wd,r.D,r.F,0.5,b);m=r.D;n=r.F;break;case id:N.Az(m,n,r.ob,r.Gb,r.D,r.F,0.5,b);m=r.D;n=r.F;break;case jd:case kd:for(var r=
r.type===jd?ld(r,g):md(r,g,m,n),t=r.length,u=q,v=0;v<t;v++)u=r[v],N.Tn(u.x1,u.y1,u.x2,u.y2,u.Jd,u.Kd,u.Hb,u.Ib,0.5,b);u!==q&&(m=u.Hb,n=u.Ib);break;default:z.m("Unknown Segment type: "+r.type)}}}break;default:z.m("Unknown Geometry type: "+a.type)}}Dc.prototype.normalize=Dc.prototype.normalize=function(){z.J(this);var a=this.gG();this.offset(-a.x,-a.y);return new G(-a.x,-a.y)};
Dc.prototype.offset=Dc.prototype.offset=function(a,b){z.J(this);x&&(z.p(a,Dc,"offset"),z.p(b,Dc,"offset"));this.transform(1,0,0,1,a,b)};Dc.prototype.scale=Dc.prototype.scale=function(a,b){z.J(this);x&&(z.p(a,Dc,"scale:x"),z.p(b,Dc,"scale:y"),0>=a&&z.ia(a,"scale must be greater than zero",Dc,"scale:x"),0>=b&&z.ia(b,"scale must be greater than zero",Dc,"scale:y"));this.transform(a,0,0,b,0,0)};
Dc.prototype.rotate=Dc.prototype.rotate=function(a,b,c){z.J(this);b===f&&(b=0);c===f&&(c=0);x&&(z.p(a,Dc,"rotate:angle"),z.p(b,Dc,"rotate:x"),z.p(c,Dc,"rotate:y"));var d=z.Ng();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);z.Ce(d)};
Dc.prototype.transform=Dc.prototype.transform=function(a,b,c,d,e,g){var k,l;switch(this.type){case Lc:case Oc:case Pc:k=this.Zb;l=this.ec;this.Zb=k*a+l*c+e;this.ec=k*b+l*d+g;k=this.dd;l=this.md;this.dd=k*a+l*c+e;this.md=k*b+l*d+g;break;case Ec:for(var m=this.lb,n=m.length,p=0;p<n;p++){var r=m.n[p];k=r.la;l=r.ma;r.la=k*a+l*c+e;r.ma=k*b+l*d+g;for(var r=r.Ha,t=r.length,u=0;u<t;u++){var v=r.n[u];switch(v.type){case Rc:case gd:k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case hd:k=v.ob;l=v.Gb;v.ob=k*
a+l*c+e;v.Gb=k*b+l*d+g;k=v.Vd;l=v.Wd;v.Vd=k*a+l*c+e;v.Wd=k*b+l*d+g;k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case id:k=v.ob;l=v.Gb;v.ob=k*a+l*c+e;v.Gb=k*b+l*d+g;k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case jd:k=v.Ca;l=v.Ka;v.Ca=k*a+l*c+e;v.Ka=k*b+l*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY!==f&&(v.radiusY*=Math.sqrt(b*b+d*d));break;case kd:k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY*=Math.sqrt(b*b+d*d);break;default:z.m("Unknown Segment type: "+v.type)}}}}this.Ya=
h};Dc.prototype.pr=function(a,b){var c=this.Zb,d=this.ec,e=this.dd,g=this.md,k=Math.min(c,e),l=Math.min(d,g),c=Math.abs(e-c),d=Math.abs(g-d),g=z.O();g.x=k;g.y=l;b.Va(g);e=new Fc(g.x,g.y);g.x=k+c;g.y=l;b.Va(g);e.Ha.add(new rd(Rc,g.x,g.y));g.x=k+c;g.y=l+d;b.Va(g);e.Ha.add(new rd(Rc,g.x,g.y));g.x=k;g.y=l+d;b.Va(g);e.Ha.add((new rd(Rc,g.x,g.y)).close());z.B(g);a.type=Ec;a.lb.add(e);return a};
Dc.prototype.Ia=function(a,b,c,d){var e=a.x,g=a.y,k=this.Nb.x-20;a=a.y;for(var l=0,m,n,p,r,t,u,v,A=this.lb.n,C=A.length,K=0;K<C;K++){var I=A[K];if(I.qo){if(c&&I.Ia(e,g,b))return h;var R=I.Ha;m=I.la;n=I.ma;for(var M=m,S=n,Z=0;Z<=R.length;Z++){Z!==R.length?(p=R.n[Z],r=p.type,u=p.D,v=p.F):(r=Rc,u=M,v=S);switch(r){case gd:t=sd(e,g,k,a,m,n,M,S);if(t===h)return h;l+=t;M=u;S=v;break;case Rc:t=sd(e,g,k,a,m,n,u,v);if(t===h)return h;l+=t;break;case hd:t=N.Cr(m,n,p.ob,p.Gb,p.Vd,p.Wd,u,v,k,a,e,g,0.5);l+=t;break;
case id:t=N.Cr(m,n,(m+2*p.ob)/3,(n+2*p.Gb)/3,(p.ob+2*u)/3,(p.ob+2*u)/3,u,v,k,a,e,g,0.5);l+=t;break;case jd:case kd:r=p.type===jd?ld(p,I):md(p,I,m,n);for(var X=r.length,ea=q,ia=0;ia<X;ia++){ea=r[ia];if(0===ia){t=sd(e,g,k,a,m,n,ea.x1,ea.y1);if(t===h)return h;l+=t}t=N.Cr(ea.x1,ea.y1,ea.x2,ea.y2,ea.Jd,ea.Kd,ea.Hb,ea.Ib,k,a,e,g,0.5);l+=t}ea!==q&&(u=ea.Hb,v=ea.Ib);break;default:z.m("Unknown Segment type: "+p.type)}m=u;n=v}if(0!==l)return h;l=0}else if(I.Ia(e,g,d?b:b+2))return h}return 0!==l};
function sd(a,b,c,d,e,g,k,l){if(N.qd(e,g,k,l,0.05,a,b))return h;var m=(a-c)*(g-l);if(0===m)return 0;var n=((a*d-b*c)*(e-k)-(a-c)*(e*l-g*k))/m;b=(a*d-b*c)*(g-l)/m;if(n>=a)return 0;if((e>k?e-k:k-e)<(g>l?g-l:l-g)){if(g<l?(a=g,e=l):(a=l,e=g),b<a||b>e)return 0}else if(e<k?(a=e,e=k):a=k,n<a||n>e)return 0;return 0<m?1:-1}function td(a,b,c,d){for(var e=a.lb.length,g=0;g<e;g++)if(a.lb.n[g].Ia(b,c,d))return h;return s}
Dc.prototype.getPointAlongPath=Dc.prototype.$I=function(a){(0>a||1<a)&&z.ia(a,"0 <= fraction <= 1",Dc,"getPointAlongPath:fraction");var b=this.lb.sb(),c=z.zb(),d=[];d.push([b.la,b.ma]);for(var e=b.la,g=b.ma,k=e,l=g,m=b.Ha.n,n=m.length,p=0;p<n;p++){var r=m[p];switch(r.aa){case gd:c.push(d);d=[];d.push([r.D,r.F]);e=r.D;g=r.F;k=e;l=g;break;case Rc:d.push([r.D,r.F]);e=r.D;g=r.F;break;case hd:N.fe(e,g,r.Bg,r.Cg,r.wk,r.xk,r.ae,r.be,0.5,d);e=r.D;g=r.F;break;case id:N.Lo(e,g,r.Bg,r.Cg,r.ae,r.be,0.5,d);e=
r.D;g=r.F;break;case jd:for(var t=ld(r,b),u=t.length,v=0;v<u;v++){var A=t[v];N.fe(e,g,A.x2,A.y2,A.Jd,A.Kd,A.Hb,A.Ib,0.5,d);e=A.Hb;g=A.Ib}break;case kd:t=md(r,b,e,g);u=t.length;for(v=0;v<u;v++)A=t[v],N.fe(e,g,A.x2,A.y2,A.Jd,A.Kd,A.Hb,A.Ib,0.5,d),e=A.Hb,g=A.Ib;break;default:z.m("Segment not of valid type")}r.Yg&&d.push([k,l])}c.push(d);n=0;e=c.length;b=q;for(g=0;g<e;g++){k=c[g];l=k.length;for(p=0;p<l;p++)d=k[p],0!==p&&(m=Math.sqrt(jb(b[0],b[1],d[0],d[1])),n+=m),b=d}a*=n;for(g=n=0;g<e;g++){k=c[g];l=
k.length;for(p=0;p<l;p++){d=k[p];if(0!==p){m=Math.sqrt(jb(b[0],b[1],d[0],d[1]));if(n+m>a)return p=(a-n)/m,z.Da(c),new G(b[0]+(d[0]-b[0])*p,b[1]+(d[1]-b[1])*p);n+=m}b=d}}z.Da(c);return q};z.g(Dc,"type",Dc.prototype.type);z.defineProperty(Dc,{type:"type"},w("aa"),function(a){this.aa!==a&&(x&&z.wb(a,Dc,Dc,"type"),z.J(this,a),this.aa=a,this.Ya=h)});z.g(Dc,"startX",Dc.prototype.la);z.defineProperty(Dc,{la:"startX"},w("Zb"),function(a){this.Zb!==a&&(x&&z.p(a,Dc,"startX"),z.J(this,a),this.Zb=a,this.Ya=h)});
z.g(Dc,"startY",Dc.prototype.ma);z.defineProperty(Dc,{ma:"startY"},w("ec"),function(a){this.ec!==a&&(x&&z.p(a,Dc,"startY"),z.J(this,a),this.ec=a,this.Ya=h)});z.g(Dc,"endX",Dc.prototype.D);z.defineProperty(Dc,{D:"endX"},w("dd"),function(a){this.dd!==a&&(x&&z.p(a,Dc,"endX"),z.J(this,a),this.dd=a,this.Ya=h)});z.g(Dc,"endY",Dc.prototype.F);z.defineProperty(Dc,{F:"endY"},w("md"),function(a){this.md!==a&&(x&&z.p(a,Dc,"endY"),z.J(this,a),this.md=a,this.Ya=h)});z.g(Dc,"figures",Dc.prototype.lb);
z.defineProperty(Dc,{lb:"figures"},w("gk"),function(a){this.gk!==a&&(x&&z.l(a,J,Dc,"figures"),z.J(this,a),this.gk=a,this.Ya=h)});z.defineProperty(Dc,{G:"spot1"},w("bi"),function(a){x&&z.l(a,O,Dc,"spot1");z.J(this,a);this.bi=a.Y()});z.defineProperty(Dc,{H:"spot2"},w("ci"),function(a){x&&z.l(a,O,Dc,"spot2");z.J(this,a);this.ci=a.Y()});z.A(Dc,{Nb:"bounds"},function(){this.dz()&&(this.fA(),this.Ve());return this.ct});z.g(Dc,"minSize",Dc.prototype.Ge);
z.defineProperty(Dc,{Ge:"minSize"},w("Nd"),function(a){this.Nd.N(a)||(x&&z.l(a,qa,Dc,"minSize"),a=a.Y(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Nd=a)});function Fc(a,b,c){z.qc(this);c===f&&(c=h);this.pl=c;this.en=h;a!==f?(x&&z.p(a,Fc,"sx"),this.Zb=a):this.Zb=0;b!==f?(x&&z.p(b,Fc,"sy"),this.ec=b):this.ec=0;this.Wq=new J(rd);this.nu=this.Wq.Sb;this.Ya=h}z.ea("PathFigure",Fc);
Fc.prototype.copy=function(){var a=new Fc;a.pl=this.pl;a.en=this.en;a.Zb=this.Zb;a.ec=this.ec;for(var b=this.Wq,c=b.length,d=a.Wq,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.nu=this.nu;a.Ya=this.Ya;return a};Fc.prototype.equalsApprox=Fc.prototype.zj=function(a){if(!(a instanceof Fc)||!N.I(this.la,a.la)||!N.I(this.ma,a.ma))return s;var b=this.Ha;a=a.Ha;var c=b.length;if(c!==a.length)return s;for(var d=0;d<c;d++)if(!b.n[d].zj(a.n[d]))return s;return h};da=Fc.prototype;
da.toString=function(a){for(var b=a===f?"M"+this.la.toString()+" "+this.ma.toString():"M"+this.la.toFixed(a)+" "+this.ma.toFixed(a),c=this.Ha,d=c.length,e=0;e<d;e++)b+=" "+c.n[e].toString(a);return b};da.freeze=function(){this.hb=h;var a=this.Ha;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};da.Ua=function(){this.hb=s;var a=this.Ha;a.Ua();for(var b=a.length,c=0;c<b;c++)a.n[c].Ua();return this};
da.dz=function(){if(this.Ya)return h;var a=this.Ha;if(this.nu!==a.Sb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].Ya)return h;return s};da.fA=function(){this.Ya=s;var a=this.Ha;this.nu=a.Sb;for(var b=a.length,c=0;c<b;c++){var d=a.n[c];d.Ya=s;d.Ci=q}};z.g(Fc,"isFilled",Fc.prototype.qo);z.defineProperty(Fc,{qo:"isFilled"},w("pl"),function(a){x&&z.j(a,"boolean",Fc,"isFilled");z.J(this,a);this.pl=a});z.g(Fc,"isShadowed",Fc.prototype.Fj);
z.defineProperty(Fc,{Fj:"isShadowed"},w("en"),function(a){x&&z.j(a,"boolean",Fc,"isShadowed");z.J(this,a);this.en=a});z.g(Fc,"startX",Fc.prototype.la);z.defineProperty(Fc,{la:"startX"},w("Zb"),function(a){x&&z.p(a,Fc,"startX");z.J(this,a);this.Zb=a;this.Ya=h});z.g(Fc,"startY",Fc.prototype.ma);z.defineProperty(Fc,{ma:"startY"},w("ec"),function(a){x&&z.p(a,Fc,"startY");z.J(this,a);this.ec=a;this.Ya=h});z.g(Fc,"segments",Fc.prototype.Ha);
z.defineProperty(Fc,{Ha:"segments"},w("Wq"),function(a){x&&z.l(a,J,Fc,"segments");z.J(this,a);this.Wq=a;this.Ya=h});
Fc.prototype.Ia=function(a,b,c){for(var d=this.la,e=this.ma,g=d,k=e,l=this.Ha.n,m=l.length,n=0;n<m;n++){var p=l[n];switch(p.type){case gd:g=p.D;k=p.F;d=p.D;e=p.F;break;case Rc:if(N.qd(d,e,p.D,p.F,c,a,b))return h;d=p.D;e=p.F;break;case hd:if(N.Ou(d,e,p.ob,p.Gb,p.Vd,p.Wd,p.D,p.F,0.5,a,b,c))return h;d=p.D;e=p.F;break;case id:if(N.Bz(d,e,p.ob,p.Gb,p.D,p.F,0.5,a,b,c))return h;d=p.D;e=p.F;break;case jd:case kd:for(var r=p.type===jd?ld(p,this):md(p,this,d,e),t=r.length,u=q,v=0;v<t;v++)if(u=r[v],0===v&&N.qd(d,
e,u.x1,u.y1,c,a,b)||N.Ou(u.x1,u.y1,u.x2,u.y2,u.Jd,u.Kd,u.Hb,u.Ib,0.5,a,b,c))return h;u!==q&&(d=u.Hb,e=u.Ib);break;default:z.m("Unknown Segment type: "+p.type)}if(p.Zr&&(d!==g||e!==k)&&N.qd(d,e,g,k,c,a,b))return h}return s};
function rd(a,b,c,d,e,g,k,l){z.qc(this);a===f?a=Rc:x&&z.wb(a,rd,rd,"constructor:type");this.aa=a;a===jd?(b!==f?(x&&z.p(b,rd,"ex"),this.ce=b):this.ce=0,c!==f?(x&&z.p(c,rd,"ey"),this.ee=c):this.ee=0,d!==f&&(x&&z.p(d,rd,"x1"),this.Gm=d),e!==f&&(x&&z.p(e,rd,"y1"),this.Hm=e),g!==f&&(x&&z.p(g,rd,"x2"),this.aj=Math.max(g||0,0)),k!==f&&"number"===typeof k?(x&&z.p(k,rd,"y2"),this.bj=Math.max(k||0,0)):this.bj=this.aj):a===kd?(b!==f&&x&&z.p(b,rd,"ex"),c!==f&&x&&z.p(c,rd,"ey"),d!==f&&x&&z.p(d,rd,"x1"),e!==f&&
x&&z.p(e,rd,"y1"),this.ae=b||0,this.be=c||0,this.aj=Math.max(d||0,0),this.bj=Math.max(e||0,0),this.ce=k?1:0,this.ee=l?1:0,a=(g||0)%360,0>a&&(a+=360),this.In=a):(b!==f?(x&&z.p(b,rd,"ex"),this.ae=b):this.ae=0,c!==f?(x&&z.p(c,rd,"ey"),this.be=c):this.be=0,d!==f&&(x&&z.p(d,rd,"x1"),this.Bg=d),e!==f&&(x&&z.p(e,rd,"y1"),this.Cg=e),g!==f&&(x&&z.p(g,rd,"x2"),this.wk=g),k!==f&&"number"===typeof k&&(x&&z.p(k,rd,"y2"),this.xk=k));this.Ya=h;this.Yg=s;this.Ci=q}z.ea("PathSegment",rd);
rd.prototype.copy=function(){var a=new rd;a.aa=this.aa;this.aa===jd?(a.ce=this.ce,a.ee=this.ee,a.Gm=this.Gm,a.Hm=this.Hm,a.aj=this.aj,a.bj=this.bj):this.aa===kd?(a.ce=this.ce,a.ee=this.ee,a.ae=this.ae,a.be=this.be,a.aj=this.aj,a.bj=this.bj,a.In=this.In):(a.ae=this.ae,a.be=this.be,a.Bg=this.Bg,a.Cg=this.Cg,a.wk=this.wk,a.xk=this.xk);a.Ya=this.Ya;a.Yg=this.Yg;return a};
rd.prototype.equalsApprox=rd.prototype.zj=function(a){if(!(a instanceof rd)||this.type!==a.type||this.Zr!==a.Zr)return s;switch(this.type){case gd:case Rc:return N.I(this.D,a.D)&&N.I(this.F,a.F);case hd:return N.I(this.D,a.D)&&N.I(this.F,a.F)&&N.I(this.ob,a.ob)&&N.I(this.Gb,a.Gb)&&N.I(this.Vd,a.Vd)&&N.I(this.Wd,a.Wd);case id:return N.I(this.D,a.D)&&N.I(this.F,a.F)&&N.I(this.ob,a.ob)&&N.I(this.Gb,a.Gb);case jd:return N.I(this.hg,a.hg)&&N.I(this.Ah,a.Ah)&&N.I(this.Ca,a.Ca)&&N.I(this.Ka,a.Ka)&&N.I(this.radiusX,
a.radiusX)&&N.I(this.radiusY,a.radiusY);case kd:return this.ov===a.ov&&this.rv===a.rv&&N.I(this.Zv,a.Zv)&&N.I(this.D,a.D)&&N.I(this.F,a.F)&&N.I(this.radiusX,a.radiusX)&&N.I(this.radiusY,a.radiusY);default:return s}};
rd.prototype.toString=function(a){switch(this.type){case gd:a=a===f?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Rc:a=a===f?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case hd:a=a===f?"C"+this.ob.toString()+" "+this.Gb.toString()+" "+this.Vd.toString()+" "+this.Wd.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.ob.toFixed(a)+" "+this.Gb.toFixed(a)+" "+this.Vd.toFixed(a)+" "+this.Wd.toFixed(a)+
" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case id:a=a===f?"Q"+this.ob.toString()+" "+this.Gb.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.ob.toFixed(a)+" "+this.Gb.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case jd:a=a===f?"B"+this.hg.toString()+" "+this.Ah.toString()+" "+this.Ca.toString()+" "+this.Ka.toString()+" "+this.radiusX:"B"+this.hg.toFixed(a)+" "+this.Ah.toFixed(a)+" "+this.Ca.toFixed(a)+" "+this.Ka.toFixed(a)+" "+this.radiusX;break;case kd:a=
a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Zv.toString()+" "+(this.rv?1:0)+" "+(this.ov?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Zv.toFixed(a)+" "+(this.rv?1:0)+" "+(this.ov?1:0)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;default:a=this.type.toString()}return a+(this.Yg?"z":"")};var gd;rd.Move=gd=z.w(rd,"Move",0);var Rc;rd.Line=Rc=z.w(rd,"Line",1);var hd;rd.Bezier=hd=z.w(rd,"Bezier",2);var id;
rd.QuadraticBezier=id=z.w(rd,"QuadraticBezier",3);var jd;rd.Arc=jd=z.w(rd,"Arc",4);var kd;rd.SvgArc=kd=z.w(rd,"SvgArc",4);rd.prototype.freeze=function(){this.hb=h;return this};rd.prototype.Ua=function(){this.hb=s;return this};rd.prototype.close=rd.prototype.close=function(){this.Yg=h;return this};
function ld(a,b){if(a.Ci!==q&&b.Ya===s)return a.Ci;var c=a.radiusX,d=a.radiusY;d===f&&(d=c);var e=N.uC(a.Gm,a.Hm,c<d?c:d,a.hg,a.hg+a.Ah);if(c!==d){var g=z.Ng();g.reset();c<d?g.scale(1,d/c):g.scale(c/d,1);for(var c=e.length,d=z.O(),k=0,l=0,m=0;m<c;m++){var n=e[m];0===m&&(k=n.x1,l=n.y1);n.x1-=k;n.y1-=l;n.x2-=k;n.y2-=l;n.Jd-=k;n.Kd-=l;n.Hb-=k;n.Ib-=l}for(m=0;m<c;m++)n=e[m],d.x=n.x1,d.y=n.y1,g.Va(d),n.x1=d.x+k,n.y1=d.y+l,d.x=n.x2,d.y=n.y2,g.Va(d),n.x2=d.x+k,n.y2=d.y+l,d.x=n.Jd,d.y=n.Kd,g.Va(d),n.Jd=d.x+
k,n.Kd=d.y+l,d.x=n.Hb,d.y=n.Ib,g.Va(d),n.Hb=d.x+k,n.Ib=d.y+l;z.B(d);z.Ce(g)}a.Ci=e;return a.Ci}
function md(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(g(a,b))}function g(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.Ci!==q&&b.Ya===s)return a.Ci;b=a.aj;var k=a.bj,l=a.In*(Math.PI/180),m=a.hg,n=a.ee,p=a.ae,r=a.be,t=Math.cos(l)*(c-p)/2+Math.sin(l)*(d-r)/2,u=-Math.sin(l)*(c-p)/2+Math.cos(l)*(d-r)/2,v=Math.pow(t,2)/Math.pow(b,2)+Math.pow(u,2)/Math.pow(k,2);1<v&&(b*=Math.sqrt(v),k*=Math.sqrt(v));
v=(m===n?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(k,2)-Math.pow(b,2)*Math.pow(u,2)-Math.pow(k,2)*Math.pow(t,2))/(Math.pow(b,2)*Math.pow(u,2)+Math.pow(k,2)*Math.pow(t,2)));isNaN(v)&&(v=0);m=v*b*u/k;v=v*-k*t/b;isNaN(m)&&(m=0);isNaN(v)&&(v=0);c=(c+p)/2+Math.cos(l)*m-Math.sin(l)*v;d=(d+r)/2+Math.sin(l)*m+Math.cos(l)*v;l=e([1,0],[(t-m)/b,(u-v)/k]);r=[(t-m)/b,(u-v)/k];u=[(-t-m)/b,(-u-v)/k];t=e(r,u);-1>=g(r,u)&&(t=Math.PI);1<=g(r,u)&&(t=0);0===n&&0<t&&(t-=2*Math.PI);1===n&&0>t&&(t+=2*Math.PI);n=b>k?1:b/k;
u=b>k?k/b:1;b=N.uC(0,0,b>k?b:k,l,l+t,h);k=z.Ng();k.reset();k.translate(c,d);k.rotate(a.In,0,0);k.scale(n,u);ed(b,k);z.Ce(k);a.Ci=b;return a.Ci}z.g(rd,"isClosed",rd.prototype.Zr);z.defineProperty(rd,{Zr:"isClosed"},w("Yg"),function(a){this.Yg!==a&&(this.Yg=a,this.Ya=h)});z.g(rd,"type",rd.prototype.type);z.defineProperty(rd,{type:"type"},w("aa"),function(a){x&&z.wb(a,rd,rd,"type");z.J(this,a);this.aa=a;this.Ya=h});z.g(rd,"endX",rd.prototype.D);
z.defineProperty(rd,{D:"endX"},w("ae"),function(a){x&&z.p(a,rd,"endX");z.J(this,a);this.ae=a;this.Ya=h});z.g(rd,"endY",rd.prototype.F);z.defineProperty(rd,{F:"endY"},w("be"),function(a){x&&z.p(a,rd,"endY");z.J(this,a);this.be=a;this.Ya=h});z.defineProperty(rd,{ob:"point1X"},w("Bg"),function(a){x&&z.p(a,rd,"point1X");z.J(this,a);this.Bg=a;this.Ya=h});z.defineProperty(rd,{Gb:"point1Y"},w("Cg"),function(a){x&&z.p(a,rd,"point1Y");z.J(this,a);this.Cg=a;this.Ya=h});
z.defineProperty(rd,{Vd:"point2X"},w("wk"),function(a){x&&z.p(a,rd,"point2X");z.J(this,a);this.wk=a;this.Ya=h});z.defineProperty(rd,{Wd:"point2Y"},w("xk"),function(a){x&&z.p(a,rd,"point2Y");z.J(this,a);this.xk=a;this.Ya=h});z.defineProperty(rd,{Ca:"centerX"},w("Gm"),function(a){x&&z.p(a,rd,"centerX");z.J(this,a);this.Gm=a;this.Ya=h});z.defineProperty(rd,{Ka:"centerY"},w("Hm"),function(a){x&&z.p(a,rd,"centerY");z.J(this,a);this.Hm=a;this.Ya=h});
z.defineProperty(rd,{radiusX:"radiusX"},w("aj"),function(a){x&&z.p(a,rd,"radiusX");0>a&&z.ia(a,">= zero",rd,"radiusX");z.J(this,a);this.aj=a;this.Ya=h});z.defineProperty(rd,{radiusY:"radiusY"},w("bj"),function(a){x&&z.p(a,rd,"radiusY");0>a&&z.ia(a,">= zero",rd,"radiusY");z.J(this,a);this.bj=a;this.Ya=h});z.defineProperty(rd,{hg:"startAngle"},w("ce"),function(a){this.ce!==a&&(z.J(this,a),x&&z.p(a,rd,"startAngle"),a%=360,0>a&&(a+=360),this.ce=a,this.Ya=h)});
z.defineProperty(rd,{Ah:"sweepAngle"},w("ee"),function(a){x&&z.p(a,rd,"sweepAngle");z.J(this,a);360<a&&(a=360);-360>a&&(a=-360);this.ee=a;this.Ya=h});z.defineProperty(rd,{ov:"isClockwiseArc"},function(){return!!this.ee},function(a){z.J(this,a);this.ee=a?1:0;this.Ya=h});z.defineProperty(rd,{rv:"isLargeArc"},function(){return!!this.ce},function(a){z.J(this,a);this.ce=a?1:0;this.Ya=h});
z.defineProperty(rd,{Zv:"xAxisRotation"},w("In"),function(a){x&&z.p(a,rd,"xAxisRotation");a%=360;0>a&&(a+=360);z.J(this,a);this.In=a;this.Ya=h});function ud(){this.fa=q;this.ny=(new G(0,0)).freeze();this.Tw=(new G(0,0)).freeze();this.Zs=this.Rt=0;this.Ft="";this.Au=this.mt=s;this.kt=this.bt=0;this.Di=this.ut=s;this.Cp=q;this.yu=0;this.Of=this.wu=q}z.ea("InputEvent",ud);
ud.prototype.copy=function(){var a=new ud;a.fa=this.fa;a.ny=this.xc.copy().freeze();a.Tw=this.S.copy().freeze();a.Rt=this.Rt;a.Zs=this.Zs;a.Ft=this.Ft;a.mt=this.mt;a.Au=this.Au;a.bt=this.bt;a.kt=this.kt;a.ut=this.ut;a.Di=this.Di;a.Cp=this.Cp;a.yu=this.yu;a.wu=this.wu;a.Of=this.Of;return a};
ud.prototype.toString=function(){var a="^";this.vh&&(a+="M:"+this.vh);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.he&&(a+="C:"+this.he);this.xj&&(a+="D:"+this.xj);this.je&&(a+="h");this.bubbles&&(a+="b");this.S!==q&&(a+="@"+this.S.toString());return a};z.g(ud,"diagram",ud.prototype.h);z.defineProperty(ud,{h:"diagram"},w("fa"),ba("fa"));z.g(ud,"viewPoint",ud.prototype.xc);z.defineProperty(ud,{xc:"viewPoint"},w("ny"),function(a){z.l(a,G,ud,"viewPoint");this.ny.assign(a)});
z.g(ud,"documentPoint",ud.prototype.S);z.defineProperty(ud,{S:"documentPoint"},w("Tw"),function(a){z.l(a,G,ud,"documentPoint");this.Tw.assign(a)});z.g(ud,"modifiers",ud.prototype.vh);z.defineProperty(ud,{vh:"modifiers"},w("Rt"),ba("Rt"));z.g(ud,"button",ud.prototype.button);z.defineProperty(ud,{button:"button"},w("Zs"),ba("Zs"));z.g(ud,"key",ud.prototype.key);z.defineProperty(ud,{key:"key"},w("Ft"),ba("Ft"));z.g(ud,"down",ud.prototype.yj);z.defineProperty(ud,{yj:"down"},w("mt"),ba("mt"));
z.g(ud,"up",ud.prototype.Ai);z.defineProperty(ud,{Ai:"up"},w("Au"),ba("Au"));z.g(ud,"clickCount",ud.prototype.he);z.defineProperty(ud,{he:"clickCount"},w("bt"),ba("bt"));z.g(ud,"delta",ud.prototype.xj);z.defineProperty(ud,{xj:"delta"},w("kt"),ba("kt"));z.g(ud,"handled",ud.prototype.je);z.defineProperty(ud,{je:"handled"},w("ut"),ba("ut"));z.g(ud,"bubbles",ud.prototype.bubbles);z.defineProperty(ud,{bubbles:"bubbles"},w("Di"),ba("Di"));z.g(ud,"event",ud.prototype.event);
z.defineProperty(ud,{event:"event"},w("Cp"),ba("Cp"));z.A(ud,{uv:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a});z.g(ud,"timestamp",ud.prototype.timestamp);z.defineProperty(ud,{timestamp:"timestamp"},w("yu"),ba("yu"));z.g(ud,"targetDiagram",ud.prototype.ig);z.defineProperty(ud,{ig:"targetDiagram"},w("wu"),ba("wu"));z.g(ud,"targetObject",ud.prototype.Hd);z.defineProperty(ud,{Hd:"targetObject"},w("Of"),ba("Of"));
z.A(ud,{control:"control"},function(){return 0!==(this.vh&1)});z.A(ud,{shift:"shift"},function(){return 0!==(this.vh&4)});z.A(ud,{alt:"alt"},function(){return 0!==(this.vh&2)});z.A(ud,{rJ:"meta"},function(){return 0!==(this.vh&8)});z.A(ud,{left:"left"},function(){return 0===this.button});z.A(ud,{sJ:"middle"},function(){return 1===this.button});z.A(ud,{right:"right"},function(){return 2===this.button});function vd(){this.fa=q;this.Kb="";this.fu=this.su=q;this.$s=s}z.ea("DiagramEvent",vd);
vd.prototype.copy=function(){var a=new vd;a.fa=this.fa;a.Kb=this.Kb;a.su=this.su;a.fu=this.fu;a.$s=this.$s;return a};vd.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.Sv!==q&&(a+=":"+this.Sv.toString());this.Dv!==q&&(a+="("+this.Dv.toString()+")");return a};z.g(vd,"diagram",vd.prototype.h);z.defineProperty(vd,{h:"diagram"},w("fa"),ba("fa"));z.g(vd,"name",vd.prototype.name);z.defineProperty(vd,{name:"name"},w("Kb"),ba("Kb"));z.g(vd,"subject",vd.prototype.Sv);
z.defineProperty(vd,{Sv:"subject"},w("su"),ba("su"));z.g(vd,"parameter",vd.prototype.Dv);z.defineProperty(vd,{Dv:"parameter"},w("fu"),ba("fu"));z.g(vd,"cancel",vd.prototype.cancel);z.defineProperty(vd,{cancel:"cancel"},w("$s"),ba("$s"));function wd(){this.clear()}z.ea("ChangedEvent",wd);var xd;wd.Transaction=xd=z.w(wd,"Transaction",-1);var yd;wd.Property=yd=z.w(wd,"Property",0);var zd;wd.Insert=zd=z.w(wd,"Insert",1);var Gd;wd.Remove=Gd=z.w(wd,"Remove",2);
wd.prototype.clear=wd.prototype.clear=function(){this.at=yd;this.iu=this.Qt="";this.Ut=this.Vt=this.au=this.bu=this.$t=this.fa=this.Od=q};wd.prototype.copy=function(){var a=new wd;a.Od=this.Od;a.fa=this.fa;a.at=this.at;a.Qt=this.Qt;a.iu=this.iu;a.$t=this.$t;var b=this.bu;a.bu=z.yb(b)&&"function"===typeof b.Y?b.Y():b;b=this.au;a.au=z.yb(b)&&"function"===typeof b.Y?b.Y():b;b=this.Vt;a.Vt=z.yb(b)&&"function"===typeof b.Y?b.Y():b;b=this.Ut;a.Ut=z.yb(b)&&"function"===typeof b.Y?b.Y():b;return a};
wd.prototype.toString=function(){var a="",a=this.fd===xd?a+"* ":this.fd===yd?a+(this.ga!==q?"!m":"!d"):a+((this.ga!==q?"!m":"!d")+this.fd);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.cf&&this.cf!==this.propertyName&&(a+=" "+this.cf);a+=": ";this.fd===xd?this.oldValue!==q&&(a+=" "+this.oldValue):(this.object!==q&&(a+=Hd(this.object)),this.oldValue!==q&&(a+="  old: "+Hd(this.oldValue)),this.Af!==q&&(a+=" "+this.Af),this.newValue!==q&&(a+="  new: "+Hd(this.newValue)),
this.yf!==q&&(a+=" "+this.yf));return a};wd.prototype.getValue=wd.prototype.Ba=function(a){return a?this.oldValue:this.newValue};wd.prototype.getParam=wd.prototype.ZI=function(a){return a?this.Af:this.yf};wd.prototype.canUndo=wd.prototype.canUndo=function(){return this.ga!==q||this.h!==q?h:s};wd.prototype.undo=wd.prototype.undo=function(){this.canUndo()&&(this.ga!==q?this.ga.changeState(this,h):this.h!==q&&this.h.changeState(this,h))};
wd.prototype.canRedo=wd.prototype.canRedo=function(){return this.ga!==q||this.h!==q?h:s};wd.prototype.redo=wd.prototype.redo=function(){this.canRedo()&&(this.ga!==q?this.ga.changeState(this,s):this.h!==q&&this.h.changeState(this,s))};z.g(wd,"model",wd.prototype.ga);z.defineProperty(wd,{ga:"model"},w("Od"),ba("Od"));z.g(wd,"diagram",wd.prototype.h);z.defineProperty(wd,{h:"diagram"},w("fa"),ba("fa"));z.g(wd,"change",wd.prototype.fd);
z.defineProperty(wd,{fd:"change"},w("at"),function(a){x&&z.wb(a,wd,wd,"change");this.at=a});z.g(wd,"modelChange",wd.prototype.cf);z.defineProperty(wd,{cf:"modelChange"},w("Qt"),function(a){x&&z.j(a,"string",wd,"modelChange");this.Qt=a});z.g(wd,"propertyName",wd.prototype.propertyName);z.defineProperty(wd,{propertyName:"propertyName"},w("iu"),function(a){x&&"string"!==typeof a&&z.l(a,Function,wd,"propertyName");this.iu=a});z.g(wd,"object",wd.prototype.object);
z.defineProperty(wd,{object:"object"},w("$t"),ba("$t"));z.g(wd,"oldValue",wd.prototype.oldValue);z.defineProperty(wd,{oldValue:"oldValue"},w("bu"),ba("bu"));z.g(wd,"oldParam",wd.prototype.Af);z.defineProperty(wd,{Af:"oldParam"},w("au"),ba("au"));z.g(wd,"newValue",wd.prototype.newValue);z.defineProperty(wd,{newValue:"newValue"},w("Vt"),ba("Vt"));z.g(wd,"newParam",wd.prototype.yf);z.defineProperty(wd,{yf:"newParam"},w("Ut"),ba("Ut"));
function L(a){1<arguments.length&&z.m("Model constructor can only take one optional argument, the Array of node data.");z.qc(this);this.Nw=this.Kb="";this.nk=s;this.rf=[];this.rc=new ta(q,Object);this.Al="key";this.ft=this.Jt=q;this.zq="category";this.rg=new ta(q,va);this.Vi=q;this.ai=s;this.my=q;this.Aa=new Id;a!==f&&(this.bg=a)}z.ea("Model",L);L.prototype.clear=L.prototype.clear=function(){this.rf=[];this.rc.clear();this.rg.clear();this.Aa.clear()};
L.prototype.writeJsonProtected=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Ul&&(a+=',\n  "dataFormat": '+this.quote(this.Ul));this.fb&&(a+=',\n  "isReadOnly": '+this.fb);"key"!==this.Uk&&"string"===typeof this.Uk&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Uk));"category"!==this.Tk&&"string"===typeof this.Tk&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Tk));return a};L.prototype.iA=function(){return',\n  "nodeDataArray": '+Jd(this,this.bg,h)};
L.prototype.readJsonProtected=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Ul=a.dataFormat);a.isReadOnly&&(this.fb=a.isReadOnly);a.nodeKeyProperty&&(this.Uk=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.Tk=a.nodeCategoryProperty)};L.prototype.Dz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,Kd(this,a),this.bg=a)};
L.prototype.toString=function(a){a===f&&(a=0);if(1<a)return this.$z();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.bg;var c=z.$b(a),d;for(d=0;d<c;d++)var e=z.Mb(a,d),b=b+(" "+this.xb(e)+":"+Hd(e))}return b};L.prototype.toJson=L.prototype.$z=function(a){a===f&&(a=this.constructor===L?"go.Model":this.constructor===T?"go.GraphLinksModel":this.constructor===Ld?"go.TreeModel":z.ph(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.iA()+"}"};
L.fromJson=function(a,b){b===f&&(b=q);b&&z.l(b,L,L,"fromJson:model");var c=q;if("string"===typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){x&&z.trace("JSON.parse error: "+d.toString())}else z.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:z.m("Unable to construct a Model from: "+a);if(b===q){var e;e=q;var g=c["class"];if("string"===typeof g)try{var k=q;0===g.indexOf("go.")?(g=g.substr(3),k=fa[g]):(k=fa[g])||(k=window[g]);"function"===typeof k&&
(e=new k)}catch(l){}e===q||e instanceof L?b=e:z.m("Unable to construct a Model of declared class: "+c["class"])}b===q&&(b=new T);b.readJsonProtected(c);b.Dz(c);return b};
function Kd(a,b){if(z.isArray(b))for(var c=z.$b(b),d=0;d<c;d++){var e=z.Mb(b,d);z.yb(e)&&z.dC(b,d,Kd(a,e))}else if(z.yb(b)){for(d in b)if(e=b[d],z.yb(e)&&(e=Kd(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,k=0;k<e.length;k++)if("number"!==typeof e[k]){g=s;break}if(g){g=new J(G);for(k=0;k<e.length/2;k++){var l=new G(e[2*k],e[2*k+1]);g.add(l)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new G(Md(b.x),Md(b.y));else if("go.Size"===
e)d=new qa(Md(b.width),Md(b.height));else if("go.Rect"===e)d=new H(Md(b.x),Md(b.y),Md(b.width),Md(b.height));else if("go.Margin"===e)d=new ub(Md(b.top),Md(b.right),Md(b.bottom),Md(b.left));else if("go.Spot"===e)d="string"===typeof b["enum"]?Mb(b["enum"]):new O(Md(b.x),Md(b.y),Md(b.offsetX),Md(b.offsetY));else if("go.Brush"===e){if(d=new Nd,d.type=z.Zl(Nd,b.type),b.start instanceof O&&(d.start=b.start),b.end instanceof O&&(d.end=b.end),"number"===typeof b.startRadius&&(d.Uo=Md(b.startRadius)),"number"===
typeof b.endRadius&&(d.ao=Md(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?Uc(b.path):new Dc,d.type=z.Zl(Dc,b.type),"number"===typeof b.startX&&(d.la=Md(b.startX)),"number"===typeof b.startY&&(d.ma=Md(b.startY)),"number"===typeof b.endX&&(d.D=Md(b.endX)),"number"===typeof b.endY&&(d.F=Md(b.endY)),b.spot1 instanceof O&&(d.G=b.spot1),b.spot2 instanceof O&&(d.H=b.spot2));c=d}return c}return b}
L.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
L.prototype.writeJsonValue=L.prototype.Yv=function(a){var b;if(a===f)b="undefined";else if(a===q)b="null";else if(a===h)b="true";else if(a===s)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(z.isArray(a))b=Jd(this,a);else if(z.yb(a)){var c=a;if(c instanceof G)a={"class":"go.Point",x:Yd(c.x),y:Yd(c.y)};else if(c instanceof qa)a={"class":"go.Size",width:Yd(c.width),height:Yd(c.height)};
else if(c instanceof H)a={"class":"go.Rect",x:Yd(c.x),y:Yd(c.y),width:Yd(c.width),height:Yd(c.height)};else if(c instanceof ub)a={"class":"go.Margin",top:Yd(c.top),right:Yd(c.right),bottom:Yd(c.bottom),left:Yd(c.left)};else if(c instanceof O)a=Ob(c)?{"class":"go.Spot",x:Yd(c.x),y:Yd(c.y),offsetX:Yd(c.offsetX),offsetY:Yd(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Nd){a={"class":"go.Brush",type:c.type.name};if(c.type===Zd)a.color=c.color;else if(c.type===$d||c.type===ae)a.start=
c.start,a.end=c.end,c.type===ae&&(0!==c.Uo&&(a.startRadius=Yd(c.Uo)),isNaN(c.ao)||(a.endRadius=Yd(c.ao)));if(c.Vn!==q){for(var d={},c=c.Vn.k;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof Dc&&(a={"class":"go.Geometry",type:c.type.name},0!==c.la&&(a.startX=Yd(c.la)),0!==c.ma&&(a.startY=Yd(c.ma)),0!==c.D&&(a.endX=Yd(c.D)),0!==c.F&&(a.endY=Yd(c.F)),c.G.N($b)||(a.spot1=c.G),c.H.N(gc)||(a.spot2=c.H),c.type===Ec&&(a.path=Sc(c)));var d="{",e=h;for(b in a)if(c=z.cb(a,b),!(c===f||
"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?e=s:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof J&&c.aa===G){for(var g="[",c=c.k;c.next();){var k=c.value;1<g.length&&(g+=",");g+=this.Yv(k.x);g+=",";g+=this.Yv(k.y)}g+="]";d+=g}else d+=this.Yv(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};
function Jd(a,b,c){var d=z.$b(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var k=z.Mb(b,g);k!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.Yv(k))}c&&1<d&&(e+="\n");return e+" ]"}function Yd(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}function Md(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}z.g(L,"name",L.prototype.name);
z.defineProperty(L,{name:"name"},w("Kb"),function(a){var b=this.Kb;b!==a&&(z.j(a,"string",L,"name"),this.Kb=a,this.i("name",b,a))});z.g(L,"dataFormat",L.prototype.Ul);z.defineProperty(L,{Ul:"dataFormat"},w("Nw"),function(a){var b=this.Nw;b!==a&&(z.j(a,"string",L,"dataFormat"),this.Nw=a,this.i("dataFormat",b,a))});z.g(L,"isReadOnly",L.prototype.fb);z.defineProperty(L,{fb:"isReadOnly"},w("nk"),function(a){var b=this.nk;b!==a&&(z.j(a,"boolean",L,"isReadOnly"),this.nk=a,this.i("isReadOnly",b,a))});
L.prototype.addChangedListener=L.prototype.vy=function(a){z.j(a,"function",L,"addChangedListener:listener");this.Vi===q&&(this.Vi=new J("function"));this.Vi.add(a)};L.prototype.removeChangedListener=L.prototype.Gz=function(a){z.j(a,"function",L,"removeChangedListener:listener");this.Vi!==q&&(this.Vi.remove(a),0===this.Vi.count&&(this.Vi=q))};
L.prototype.Pu=function(a){this.cc||this.Aa.ZC(a);if(this.Vi!==q){var b=this.Vi,c=b.length;if(1===c)b=b.na(0),b(a);else if(0!==c)for(var d=b.Je(),e=0;e<c;e++)b=d[e],b(a)}};L.prototype.raiseChangedEvent=L.prototype.Zc=function(a,b,c,d,e,g,k){be(this,"",a,b,c,d,e,g,k)};L.prototype.raiseChanged=L.prototype.i=function(a,b,c,d,e){be(this,"",yd,a,this,b,c,d,e)};L.prototype.raiseDataChanged=L.prototype.Cz=function(a,b,c,d,e,g){be(this,"",yd,b,a,c,d,e,g)};
function be(a,b,c,d,e,g,k,l,m){l===f&&(l=q);m===f&&(m=q);var n=new wd;n.ga=a;n.fd=c;n.cf=b;n.propertyName=d;n.object=e;n.oldValue=g;n.Af=l;n.newValue=k;n.yf=m;a.Pu(n)}z.g(L,"undoManager",L.prototype.Aa);z.defineProperty(L,{Aa:"undoManager"},w("my"),function(a){var b=this.my;b!==a&&(z.l(a,Id,L,"undoManager"),b!==q&&b.QH(this),this.my=a,a!==q&&a.FF(this))});z.g(L,"skipsUndoManager",L.prototype.cc);
z.defineProperty(L,{cc:"skipsUndoManager"},w("ai"),function(a){z.j(a,"boolean",L,"skipsUndoManager");this.ai=a});
L.prototype.changeState=function(a,b){if(a!==q&&a.ga===this)if(a.fd===yd){var c=a.object,d=a.propertyName,e=a.Ba(b);z.Ta(c,d,e)}else a.fd===zd?"nodeDataArray"===a.cf?(c=a.newValue,z.yb(c)&&(d=this.xb(c),d!==f&&(b?(z.ji(this.rf,a.yf),this.rc.remove(d)):(z.ii(this.rf,a.yf,c),this.rc.add(d,c))))):""===a.cf?(c=a.object,!z.isArray(c)&&a.propertyName&&(c=z.cb(a.object,a.propertyName)),z.isArray(c)&&(d=a.newValue,e=a.yf,b?z.ji(c,e):z.ii(c,e,d))):z.m("unknown ChangedEvent.Insert object: "+a.toString()):a.fd===
Gd?"nodeDataArray"===a.cf?(c=a.oldValue,z.yb(c)&&(d=this.xb(c),d!==f&&(b?(z.ii(this.rf,a.Af,c),this.rc.add(d,c)):(z.ji(this.rf,a.Af),this.rc.remove(d))))):""===a.cf?(c=a.object,!z.isArray(c)&&a.propertyName&&(c=z.cb(a.object,a.propertyName)),z.isArray(c)&&(d=a.oldValue,e=a.Af,b?z.ii(c,e,d):z.ji(c,e))):z.m("unknown ChangedEvent.Remove object: "+a.toString()):a.fd!==xd&&z.m("unknown ChangedEvent: "+a.toString())};L.prototype.startTransaction=L.prototype.pc=function(a){return this.Aa.pc(a)};
L.prototype.commitTransaction=L.prototype.we=function(a){return this.Aa.we(a)};L.prototype.rollbackTransaction=L.prototype.ws=function(){return this.Aa.ws()};L.prototype.updateTargetBindings=L.prototype.Eb=function(a,b){b===f&&(b="");be(this,"SourceChanged",xd,b,a,q,q)};z.g(L,"nodeKeyProperty",L.prototype.Uk);
z.defineProperty(L,{Uk:"nodeKeyProperty"},w("Al"),function(a){var b=this.Al;b!==a&&(le(a,L,"nodeKeyProperty"),0<this.rc.count&&z.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Al=a,this.i("nodeKeyProperty",b,a))});function le(a,b,c){"string"!==typeof a&&"function"!==typeof a&&z.Rb(a,"string or function",b,c)}
L.prototype.getKeyForNodeData=L.prototype.xb=function(a){if(a!==q){var b=this.Al;if(""!==b&&(b=z.cb(a,b),b!==f)){if(me(b))return b;x&&z.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};
L.prototype.setKeyForNodeData=L.prototype.Rz=function(a,b){b===q&&(b=f);b!==f&&!me(b)&&z.Rb(b,"number or string",L,"setKeyForNodeData:key");if(a!==q){var c=this.Al;if(""!==c)if(this.xe(a)){var d=z.cb(a,c);d!==b&&this.Ye(b)===q&&(z.Ta(a,c,b),this.rc.remove(d),this.rc.add(b,a),be(this,"nodeKey",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c),this.us(d,b))}else z.Ta(a,c,b)}};z.g(L,"makeUniqueKeyFunction",L.prototype.xH);
z.defineProperty(L,{xH:"makeUniqueKeyFunction"},w("Jt"),function(a){var b=this.Jt;b!==a&&(a!==q&&z.j(a,"function",L,"makeUniqueKeyFunction"),this.Jt=a,this.i("makeUniqueKeyFunction",b,a))});function me(a){return"number"===typeof a||"string"===typeof a}L.prototype.containsNodeData=L.prototype.xe=function(a){a=this.xb(a);return a===f?s:this.rc.contains(a)};L.prototype.findNodeDataForKey=L.prototype.Ye=function(a){a===q&&z.m("Model.findNodeDataForKey:key must not be null");return a===f||!me(a)?q:this.rc.Ba(a)};
z.g(L,"nodeDataArray",L.prototype.bg);
z.defineProperty(L,{bg:"nodeDataArray"},w("rf"),function(a){var b=this.rf;if(b!==a){z.Dr(a,L,"nodeDataArray");this.rc.clear();this.eA();for(var c=z.$b(a),d=0;d<c;d++){var e=z.Mb(a,d);if(!z.yb(e)){z.m("Model.nodeDataArray must only contain Objects, not: "+e);return}z.Vr(e)}this.rf=a;for(var g=new J(Object),d=0;d<c;d++){var e=z.Mb(a,d),k=this.xb(e);k===f?g.add(e):this.rc.Ba(k)!==q?g.add(e):this.rc.add(k,e)}for(d=g.k;d.next();)e=d.value,this.zD(e),g=this.xb(e),this.rc.add(g,e);be(this,"nodeDataArray",
yd,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=z.Mb(a,d),this.Oo(e),this.No(e);this.kC();Array.isArray(a)||(this.fb=h)}});
L.prototype.makeNodeDataKeyUnique=L.prototype.zD=function(a){if(a!==q){var b=this.Al;if(""!==b){var c=this.xb(a);if(c===f||this.rc.contains(c)){var d=this.Jt;if(d!==q&&(c=d(this,a),c!==f&&c!==q&&!this.rc.contains(c))){z.Ta(a,b,c);return}if("string"===typeof c){for(d=2;this.rc.contains(c+d);)d++;z.Ta(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.rc.count-1;this.rc.contains(d);)d--;z.Ta(a,b,d)}else z.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
L.prototype.addNodeData=L.prototype.wr=function(a){if(a!==q){z.Vr(a);var b=this.xb(a);b!==f&&this.rc.Ba(b)===a||(this.zD(a),b=this.xb(a),this.rc.add(b,a),b=z.$b(this.rf),z.ii(this.rf,b,a),be(this,"nodeDataArray",zd,"nodeDataArray",this,q,a,q,b),this.Oo(a),this.No(a))}};L.prototype.removeNodeData=L.prototype.XD=function(a){if(a!==q){var b=this.xb(a);b!==f&&this.rc.contains(b)&&(this.rc.remove(b),b=z.Ay(this.rf,a),0>b||(z.ji(this.rf,b),be(this,"nodeDataArray",Gd,"nodeDataArray",this,a,q,b,q),this.Ms(a)))}};
da=L.prototype;da.us=function(a,b){var c=ne(this,a);c instanceof va&&this.rg.add(b,c)};da.eA=aa();da.Oo=aa();da.No=aa();da.Ms=aa();function oe(a,b,c){if(b!==f){var d=a.rg.Ba(b);d===q&&(d=new va,a.rg.add(b,d));d.add(c)}}function pe(a,b,c){if(b!==f){var d=a.rg.Ba(b);d instanceof va&&(c===f||c===q?a.rg.remove(b):(d.remove(c),0===d.count&&a.rg.remove(b)))}}
L.prototype.dumpDelayedReferences=L.prototype.FI=function(){z.trace("DelayedReferences ("+this.rg.count+")");for(var a=this.rg.k;a.next();){for(var b="",c=a.value.k;c.next();)b+=Hd(c.value)+", ";z.trace("  "+a.key+": "+b)}};function ne(a,b){if(b===f)return q;var c=a.rg.Ba(b);return c instanceof va?c:q}L.prototype.clearUnresolvedReferences=L.prototype.kC=function(a){a===f?this.rg.clear():this.rg.remove(a)};z.g(L,"copyNodeDataFunction",L.prototype.jG);
z.defineProperty(L,{jG:"copyNodeDataFunction"},w("ft"),function(a){var b=this.ft;b!==a&&(a!==q&&z.j(a,"function",L,"copyNodeDataFunction"),this.ft=a,this.i("copyNodeDataFunction",b,a))});L.prototype.copyNodeData=L.prototype.vj=function(a){if(a===q)return q;var b=q,b=this.ft;if(b!==q)b=b(a,this);else{var b=new a.constructor,c;for(c in a)z.Ta(b,c,z.cb(a,c))}b&&z.qc(b);return b};
L.prototype.setDataProperty=L.prototype.Lv=function(a,b,c){x&&(z.j(a,"object",L,"setDataProperty:data"),z.j(b,"string",L,"setDataProperty:propname"),""===b&&z.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.xe(a))if(b===this.Uk)this.Rz(a,c);else{if(b===this.Tk){this.Jv(a,c);return}}else!z.Vo&&a instanceof U&&(z.Vo=h,z.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));var d=
z.cb(a,b);d!==c&&(z.Ta(a,b,c),this.Cz(a,b,d,c))};L.prototype.addArrayItem=L.prototype.oI=function(a,b){this.jH(a,-1,b)};L.prototype.insertArrayItem=L.prototype.jH=function(a,b,c){x&&(z.Dr(a,L,"insertArrayItem:arr"),z.p(b,L,"insertArrayItem:idx"));a===this.rf&&z.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=z.$b(a));z.ii(a,b,c);be(this,"",zd,"",a,q,c,q,b)};
L.prototype.removeArrayItem=L.prototype.DJ=function(a,b){b===f&&(b=-1);x&&(z.Dr(a,L,"removeArrayItem:arr"),z.p(b,L,"removeArrayItem:idx"));a===this.rf&&z.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=z.$b(a)-1);var c=z.Mb(a,b);z.ji(a,b);be(this,"",Gd,"",a,c,q,b,q)};z.g(L,"nodeCategoryProperty",L.prototype.Tk);
z.defineProperty(L,{Tk:"nodeCategoryProperty"},w("zq"),function(a){var b=this.zq;b!==a&&(le(a,L,"nodeCategoryProperty"),this.zq=a,this.i("nodeCategoryProperty",b,a))});L.prototype.getCategoryForNodeData=L.prototype.getCategoryForNodeData=function(a){if(a===q)return"";var b=this.zq;if(""===b)return"";b=z.cb(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&z.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
L.prototype.setCategoryForNodeData=L.prototype.Jv=function(a,b){z.j(b,"string",L,"setCategoryForNodeData:cat");if(a!==q){var c=this.zq;if(""!==c)if(this.xe(a)){var d=z.cb(a,c);d===f&&(d="");d!==b&&(z.Ta(a,c,b),be(this,"nodeCategory",yd,c,a,d,b))}else z.Ta(a,c,b)}};
function T(a,b){2<arguments.length&&z.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");L.call(this);this.pk=[];this.on=new va(Object);this.$j=this.et=q;this.Si="from";this.Ui="to";this.hq=this.fq="";this.cq="category";this.dh=this.Xt="";this.Wt="isGroup";this.Zi="group";a!==f&&(this.bg=a);b!==f&&(this.Hg=b)}z.ea("GraphLinksModel",T);z.Pa(T,L);
T.prototype.clear=T.prototype.clear=function(){L.prototype.clear.call(this);this.pk=[];this.on.clear()};T.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.$z();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.bg;var c=z.$b(a),d;for(d=0;d<c;d++)var e=z.Mb(a,d),b=b+(" "+this.xb(e)+":"+Hd(e));b+="\n link data:";a=this.Hg;c=z.$b(a);for(d=0;d<c;d++)e=z.Mb(a,d),b+=" "+this.bm(e)+"--\x3e"+this.cm(e)}return b};
T.prototype.writeJsonProtected=function(){var a=L.prototype.writeJsonProtected.call(this),b="";"category"!==this.vo&&"string"===typeof this.vo&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.vo));"from"!==this.wo&&"string"===typeof this.wo&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.wo));"to"!==this.Ao&&"string"===typeof this.Ao&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Ao));""!==this.xo&&"string"===typeof this.xo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.xo));""!==
this.Bo&&"string"===typeof this.Bo&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Bo));""!==this.Jo&&"string"===typeof this.Jo&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.Jo));""!==this.yo&&"string"===typeof this.yo&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.yo));"isGroup"!==this.Io&&"string"===typeof this.Io&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.Io));"group"!==this.Ho&&"string"===typeof this.Ho&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Ho));return a+
b};T.prototype.iA=function(){var a=L.prototype.iA.call(this),b=',\n  "linkDataArray": '+Jd(this,this.Hg,h);return a+b};
T.prototype.readJsonProtected=function(a){L.prototype.readJsonProtected.call(this,a);a.linkFromKeyProperty&&(this.wo=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Ao=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.xo=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Bo=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.vo=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.Jo=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.yo=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.Io=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.Ho=a.nodeGroupKeyProperty)};T.prototype.Dz=function(a){L.prototype.Dz.call(this,a);a.linkDataArray&&(a=a.linkDataArray,Kd(this,a),this.Hg=a)};
T.prototype.changeState=function(a,b){if(a.fd===zd){var c=q;"linkDataArray"===a.cf?c=this.Hg:"linkLabelKeys"===a.cf&&(c=this.Pk(a.object));if(z.isArray(c)){b?z.ji(c,a.yf):z.ii(c,a.yf,a.newValue);return}}else if(a.fd===Gd&&(c=q,"linkDataArray"===a.cf?c=this.Hg:"linkLabelKeys"===a.cf&&(c=this.Pk(a.object)),z.isArray(c))){b?z.ii(c,a.Af,a.oldValue):z.ji(c,a.Af);return}L.prototype.changeState.call(this,a,b)};z.g(T,"archetypeNodeData",T.prototype.Ar);
z.defineProperty(T,{Ar:"archetypeNodeData"},w("$j"),function(a){var b=this.$j;b!==a&&(a!==q&&z.l(a,Object,T,"archetypeNodeData"),this.$j=a,this.i("archetypeNodeData",b,a))});T.prototype.km=function(a){if(a!==f){var b=this.$j;if(b!==q){var c=this.Ye(a);c===q&&(c=this.vj(b),z.Ta(c,this.Al,a),this.wr(c))}return a}};z.g(T,"linkFromKeyProperty",T.prototype.wo);
z.defineProperty(T,{wo:"linkFromKeyProperty"},w("Si"),function(a){var b=this.Si;b!==a&&(le(a,T,"linkFromKeyProperty"),this.Si=a,this.i("linkFromKeyProperty",b,a))});T.prototype.getFromKeyForLinkData=T.prototype.bm=function(a){if(a!==q){var b=this.Si;if(""!==b&&(b=z.cb(a,b),b!==f)){if(me(b))return b;x&&z.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
T.prototype.setFromKeyForLinkData=T.prototype.Mv=function(a,b){b===q&&(b=f);b!==f&&!me(b)&&z.Rb(b,"number or string",T,"setFromKeyForLinkData:key");if(a!==q){var c=this.Si;if(""!==c)if(b=this.km(b),this.mi(a)){var d=z.cb(a,c);d!==b&&(pe(this,d,a),z.Ta(a,c,b),this.Ye(b)===q&&oe(this,b,a),be(this,"linkFromKey",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};z.g(T,"linkToKeyProperty",T.prototype.Ao);
z.defineProperty(T,{Ao:"linkToKeyProperty"},w("Ui"),function(a){var b=this.Ui;b!==a&&(le(a,T,"linkToKeyProperty"),this.Ui=a,this.i("linkToKeyProperty",b,a))});T.prototype.getToKeyForLinkData=T.prototype.cm=function(a){if(a!==q){var b=this.Ui;if(""!==b&&(b=z.cb(a,b),b!==f)){if(me(b))return b;x&&z.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
T.prototype.setToKeyForLinkData=T.prototype.Nv=function(a,b){b===q&&(b=f);b!==f&&!me(b)&&z.Rb(b,"number or string",T,"setToKeyForLinkData:key");if(a!==q){var c=this.Ui;if(""!==c)if(b=this.km(b),this.mi(a)){var d=z.cb(a,c);d!==b&&(pe(this,d,a),z.Ta(a,c,b),this.Ye(b)===q&&oe(this,b,a),be(this,"linkToKey",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};z.g(T,"linkFromPortIdProperty",T.prototype.xo);
z.defineProperty(T,{xo:"linkFromPortIdProperty"},w("fq"),function(a){var b=this.fq;b!==a&&(le(a,T,"linkFromPortIdProperty"),this.fq=a,this.i("linkFromPortIdProperty",b,a))});T.prototype.getFromPortIdForLinkData=T.prototype.XG=function(a){if(a===q)return"";var b=this.fq;if(""===b)return"";a=z.cb(a,b);return a===f?"":a};
T.prototype.setFromPortIdForLinkData=T.prototype.Bs=function(a,b){z.j(b,"string",T,"setFromPortIdForLinkData:portname");if(a!==q){var c=this.fq;if(""!==c)if(this.mi(a)){var d=z.cb(a,c);d===f&&(d="");d!==b&&(z.Ta(a,c,b),be(this,"linkFromPortId",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};z.g(T,"linkToPortIdProperty",T.prototype.Bo);
z.defineProperty(T,{Bo:"linkToPortIdProperty"},w("hq"),function(a){var b=this.hq;b!==a&&(le(a,T,"linkToPortIdProperty"),this.hq=a,this.i("linkToPortIdProperty",b,a))});T.prototype.getToPortIdForLinkData=T.prototype.$G=function(a){if(a===q)return"";var b=this.hq;if(""===b)return"";a=z.cb(a,b);return a===f?"":a};
T.prototype.setToPortIdForLinkData=T.prototype.Es=function(a,b){z.j(b,"string",T,"setToPortIdForLinkData:portname");if(a!==q){var c=this.hq;if(""!==c)if(this.mi(a)){var d=z.cb(a,c);d===f&&(d="");d!==b&&(z.Ta(a,c,b),be(this,"linkToPortId",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};z.g(T,"nodeIsLinkLabelProperty",T.prototype.Jo);
z.defineProperty(T,{Jo:"nodeIsLinkLabelProperty"},w("Xt"),function(a){var b=this.Xt;b!==a&&(le(a,T,"nodeIsLinkLabelProperty"),this.Xt=a,this.i("nodeIsLinkLabelProperty",b,a))});T.prototype.isLinkLabelForNodeData=T.prototype.ez=function(a){if(a===q)return s;var b=this.Xt;return""===b?s:z.cb(a,b)?h:s};z.g(T,"linkLabelKeysProperty",T.prototype.yo);
z.defineProperty(T,{yo:"linkLabelKeysProperty"},w("dh"),function(a){var b=this.dh;b!==a&&(le(a,T,"linkLabelKeysProperty"),this.dh=a,this.i("linkLabelKeysProperty",b,a))});T.prototype.getLabelKeysForLinkData=T.prototype.Pk=function(a){if(a===q)return z.Eh;var b=this.dh;if(""===b)return z.Eh;a=z.cb(a,b);return a===f?z.Eh:a};
T.prototype.setLabelKeysForLinkData=T.prototype.qE=function(a,b){z.Dr(b,T,"setLabelKeysForLinkData:arr");if(a!==q){var c=this.dh;if(""!==c)if(this.mi(a)){var d=z.cb(a,c);d===f&&(d=z.Eh);if(d!==b){for(var e=z.$b(d),g=0;g<e;g++){var k=z.Mb(d,g);pe(this,k,a)}z.Ta(a,c,b);e=z.$b(b);for(g=0;g<e;g++)k=z.Mb(b,g),this.Ye(k)===q&&oe(this,k,a);be(this,"linkLabelKeys",yd,c,a,d,b);"string"===typeof c&&this.Eb(a,c)}}else z.Ta(a,c,b)}};
T.prototype.addLabelKeyForLinkData=T.prototype.XB=function(a,b){if(!(b===q||b===f))if(me(b)||z.Rb(b,"number or string",T,"addLabelKeyForLinkData:key"),a!==q){var c=this.dh;if(""!==c){var d=z.cb(a,c);d===f?this.qE(a,[b]):z.isArray(d)?0<=z.Ay(d,b)||(z.ii(d,Infinity,b),this.mi(a)&&(this.Ye(b)===q&&oe(this,b,a),be(this,"linkLabelKeys",zd,c,a,q,b))):z.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
T.prototype.removeLabelKeyForLinkData=T.prototype.OH=function(a,b){if(!(b===q||b===f))if(me(b)||z.Rb(b,"number or string",T,"removeLabelKeyForLinkData:key"),a!==q){var c=this.dh;if(""!==c){var d=z.cb(a,c);if(z.isArray(d)){var e=z.Ay(d,b);0>e||(z.ji(d,e),this.mi(a)&&(pe(this,b,a),be(this,"linkLabelKeys",Gd,c,a,b,q)))}else d!==f&&z.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};z.g(T,"linkDataArray",T.prototype.Hg);
z.defineProperty(T,{Hg:"linkDataArray"},w("pk"),function(a){var b=this.pk;if(b!==a){z.Dr(a,T,"linkDataArray");for(var c=z.$b(a),d=0;d<c;d++){var e=z.Mb(a,d);if(!z.yb(e)){z.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}z.Vr(e)}this.pk=a;for(var g=new va(Object),d=0;d<c;d++)e=z.Mb(a,d),g.add(e);this.on=g;be(this,"linkDataArray",yd,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=z.Mb(a,d),Ee(this,e)}});
T.prototype.containsLinkData=T.prototype.mi=function(a){return a===q?s:this.on.contains(a)};T.prototype.addLinkData=T.prototype.YB=function(a){if(a!==q){if(z.fc(a)===f)z.qc(a);else if(this.mi(a))return;this.on.add(a);var b=z.$b(this.pk);z.ii(this.pk,b,a);be(this,"linkDataArray",zd,"linkDataArray",this,q,a,q,b);Ee(this,a)}};
T.prototype.removeLinkData=T.prototype.PH=function(a){if(a!==q){this.on.remove(a);var b=this.pk.indexOf(a);if(!(0>b)){z.ji(this.pk,b);be(this,"linkDataArray",Gd,"linkDataArray",this,a,q,b,q);b=this.bm(a);pe(this,b,a);b=this.cm(a);pe(this,b,a);for(var c=this.Pk(a),d=z.$b(c),e=0;e<d;e++)b=z.Mb(c,e),pe(this,b,a)}}};function Ee(a,b){var c=a.bm(b),c=a.km(c);a.Ye(c)===q&&oe(a,c,b);c=a.cm(b);c=a.km(c);a.Ye(c)===q&&oe(a,c,b);for(var d=a.Pk(b),e=z.$b(d),g=0;g<e;g++)c=z.Mb(d,g),a.Ye(c)===q&&oe(a,c,b)}
z.g(T,"copyLinkDataFunction",T.prototype.iG);z.defineProperty(T,{iG:"copyLinkDataFunction"},w("et"),function(a){var b=this.et;b!==a&&(a!==q&&z.j(a,"function",T,"copyLinkDataFunction"),this.et=a,this.i("copyLinkDataFunction",b,a))});
T.prototype.copyLinkData=T.prototype.sC=function(a){if(a===q)return q;var b=q,b=this.et;if(b!==q)b=b(a,this);else{var b=new a.constructor,c;for(c in a)z.Ta(b,c,z.cb(a,c))}b&&(z.qc(b),""!==this.Si&&z.Ta(b,this.Si,f),""!==this.Ui&&z.Ta(b,this.Ui,f),""!==this.dh&&z.Ta(b,this.dh,[]));return b};z.g(T,"nodeIsGroupProperty",T.prototype.Io);z.defineProperty(T,{Io:"nodeIsGroupProperty"},w("Wt"),function(a){var b=this.Wt;b!==a&&(le(a,T,"nodeIsGroupProperty"),this.Wt=a,this.i("nodeIsGroupProperty",b,a))});
T.prototype.isGroupForNodeData=T.prototype.cz=function(a){if(a===q)return s;var b=this.Wt;return""===b?s:z.cb(a,b)?h:s};z.g(T,"nodeGroupKeyProperty",T.prototype.Ho);z.defineProperty(T,{Ho:"nodeGroupKeyProperty"},w("Zi"),function(a){var b=this.Zi;b!==a&&(le(a,T,"nodeGroupKeyProperty"),this.Zi=a,this.i("nodeGroupKeyProperty",b,a))});
T.prototype.getGroupKeyForNodeData=T.prototype.ko=function(a){if(a!==q){var b=this.Zi;if(""!==b&&(b=z.cb(a,b),b!==f)){if(me(b))return b;x&&z.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
T.prototype.setGroupKeyForNodeData=T.prototype.Qz=function(a,b){b===q&&(b=f);b!==f&&!me(b)&&z.Rb(b,"number or string",T,"setGroupKeyForNodeData:key");if(a!==q){var c=this.Zi;if(""!==c)if(this.xe(a)){var d=z.cb(a,c);d!==b&&(pe(this,d,a),z.Ta(a,c,b),this.Ye(b)===q&&oe(this,b,a),be(this,"nodeGroupKey",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};T.prototype.copyNodeData=T.prototype.vj=function(a){if(a===q)return q;a=L.prototype.vj.call(this,a);""!==this.Zi&&z.Ta(a,this.Zi,f);return a};
T.prototype.setDataProperty=T.prototype.Lv=function(a,b,c){x&&(z.j(a,"object",T,"setDataProperty:data"),z.j(b,"string",T,"setDataProperty:propname"),""===b&&z.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.xe(a))if(b===this.Uk)this.Rz(a,c);else{if(b===this.Tk){this.Jv(a,c);return}if(b===this.Ho){this.Qz(a,c);return}b===this.Io?z.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Jo&&
z.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.mi(a)){if(b===this.wo){this.Mv(a,c);return}if(b===this.Ao){this.Nv(a,c);return}if(b===this.xo){this.Bs(a,c);return}if(b===this.Bo){this.Es(a,c);return}if(b===this.vo){this.pE(a,c);return}if(b===this.yo){this.qE(a,c);return}}else!z.Vo&&a instanceof U&&(z.Vo=h,z.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));
var d=z.cb(a,b);d!==c&&(z.Ta(a,b,c),this.Cz(a,b,d,c))};da=T.prototype;
da.us=function(a,b){L.prototype.us.call(this,a,b);for(var c=this.rc.k;c.next();)this.Iz(c.value,a,b);for(c=this.on.k;c.next();){var d=c.value,e=a,g=b;if(this.bm(d)===e){var k=this.Si;z.Ta(d,k,g);be(this,"linkFromKey",yd,k,d,e,g);"string"===typeof k&&this.Eb(d,k)}this.cm(d)===e&&(k=this.Ui,z.Ta(d,k,g),be(this,"linkToKey",yd,k,d,e,g),"string"===typeof k&&this.Eb(d,k));for(var l=this.Pk(d),m=z.$b(l),k=this.dh,n=0;n<m;n++)z.Mb(l,n)===e&&(z.dC(l,n,g),be(this,"linkLabelKeys",zd,k,d,e,g))}};
da.Iz=function(a,b,c){if(this.ko(a)===b){var d=this.Zi;z.Ta(a,d,c);be(this,"nodeGroupKey",yd,d,a,b,c);"string"===typeof d&&this.Eb(a,d)}};da.eA=function(){L.prototype.eA.call(this);for(var a=this.Hg,b=z.$b(a),c=0;c<b;c++)Ee(this,z.Mb(a,c))};
da.Oo=function(a){L.prototype.Oo.call(this,a);a=this.xb(a);var b=ne(this,a);if(b!==q){for(var c=new J(Object),b=b.k;b.next();){var d=b.value;if(this.xe(d)){if(this.ko(d)===a){var e=this.Zi;be(this,"nodeGroupKey",yd,e,d,a,a);"string"===typeof e&&this.Eb(d,e);c.add(d)}}else{this.bm(d)===a&&(e=this.Si,be(this,"linkFromKey",yd,e,d,a,a),"string"===typeof e&&this.Eb(d,e),c.add(d));this.cm(d)===a&&(e=this.Ui,be(this,"linkToKey",yd,e,d,a,a),"string"===typeof e&&this.Eb(d,e),c.add(d));for(var g=this.Pk(d),
k=z.$b(g),e=this.dh,l=0;l<k;l++)z.Mb(g,l)===a&&(be(this,"linkLabelKeys",zd,e,d,a,a),c.add(d))}}for(c=c.k;c.next();)pe(this,a,c.value)}};da.No=function(a){L.prototype.No.call(this,a);var b=this.ko(a);this.Ye(b)===q&&oe(this,b,a)};da.Ms=function(a){L.prototype.Ms.call(this,a);var b=this.ko(a);pe(this,b,a)};z.g(T,"linkCategoryProperty",T.prototype.vo);
z.defineProperty(T,{vo:"linkCategoryProperty"},w("cq"),function(a){var b=this.cq;b!==a&&(le(a,T,"linkCategoryProperty"),this.cq=a,this.i("linkCategoryProperty",b,a))});T.prototype.getCategoryForLinkData=T.prototype.getCategoryForLinkData=function(a){if(a===q)return"";var b=this.cq;if(""===b)return"";b=z.cb(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&z.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
T.prototype.setCategoryForLinkData=T.prototype.pE=function(a,b){z.j(b,"string",T,"setCategoryForLinkData:cat");if(a!==q){var c=this.cq;if(""===c)return"";if(this.mi(a)){var d=z.cb(a,c);d===f&&(d="");d!==b&&(z.Ta(a,c,b),be(this,"linkCategory",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};
function Ld(a){1<arguments.length&&z.m("TreeModel constructor can only take one optional argument, the Array of node data.");L.call(this);this.$i="parent";this.Dq="parentLinkCategory";a!==f&&(this.bg=a)}z.ea("TreeModel",Ld);z.Pa(Ld,L);Ld.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.$z();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.bg;var c=z.$b(a),d;for(d=0;d<c;d++)var e=z.Mb(a,d),b=b+(" "+this.xb(e)+":"+Hd(e))}return b};
Ld.prototype.writeJsonProtected=function(){var a=L.prototype.writeJsonProtected.call(this),b="";"parent"!==this.Ko&&"string"===typeof this.Ko&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Ko));return a+b};Ld.prototype.readJsonProtected=function(a){L.prototype.readJsonProtected.call(this,a);a.nodeParentKeyProperty&&(this.Ko=a.nodeParentKeyProperty)};Ld.prototype.km=function(a){return a};z.g(Ld,"nodeParentKeyProperty",Ld.prototype.Ko);
z.defineProperty(Ld,{Ko:"nodeParentKeyProperty"},w("$i"),function(a){var b=this.$i;b!==a&&(le(a,Ld,"nodeParentKeyProperty"),this.$i=a,this.i("nodeParentKeyProperty",b,a))});Ld.prototype.getParentKeyForNodeData=Ld.prototype.mo=function(a){if(a!==q){var b=this.$i;if(""!==b&&(b=z.cb(a,b),b!==f)){if(me(b))return b;x&&z.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
Ld.prototype.setParentKeyForNodeData=Ld.prototype.Cf=function(a,b){b===q&&(b=f);b!==f&&!me(b)&&z.Rb(b,"number or string",Ld,"setParentKeyForNodeData:key");if(a!==q){var c=this.$i;if(""!==c)if(b=this.km(b),this.xe(a)){var d=z.cb(a,c);d!==b&&(pe(this,d,a),z.Ta(a,c,b),this.Ye(b)===q&&oe(this,b,a),be(this,"nodeParentKey",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};z.g(Ld,"parentLinkCategoryProperty",Ld.prototype.KH);
z.defineProperty(Ld,{KH:"parentLinkCategoryProperty"},w("Dq"),function(a){var b=this.Dq;b!==a&&(le(a,Ld,"parentLinkCategoryProperty"),this.Dq=a,this.i("parentLinkCategoryProperty",b,a))});Ld.prototype.getParentLinkCategoryForNodeData=Ld.prototype.ZG=function(a){if(a===q)return"";var b=this.Dq;if(""===b)return"";b=z.cb(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&z.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
Ld.prototype.setParentLinkCategoryForNodeData=Ld.prototype.VH=function(a,b){z.j(b,"string",Ld,"setParentLinkCategoryForNodeData:cat");if(a!==q){var c=this.Dq;if(""===c)return"";if(this.xe(a)){var d=z.cb(a,c);d===f&&(d="");d!==b&&(z.Ta(a,c,b),be(this,"parentLinkCategory",yd,c,a,d,b),"string"===typeof c&&this.Eb(a,c))}else z.Ta(a,c,b)}};Ld.prototype.copyNodeData=Ld.prototype.vj=function(a){if(a===q)return q;a=L.prototype.vj.call(this,a);""!==this.$i&&z.Ta(a,this.$i,f);return a};
Ld.prototype.setDataProperty=Ld.prototype.Lv=function(a,b,c){x&&(z.j(a,"object",Ld,"setDataProperty:data"),z.j(b,"string",Ld,"setDataProperty:propname"),""===b&&z.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.xe(a))if(b===this.Uk)this.Rz(a,c);else{if(b===this.Tk){this.Jv(a,c);return}if(b===this.Ko){this.Cf(a,c);return}}else!z.Vo&&a instanceof U&&(z.Vo=h,z.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),
z.trace("  Is that really your intent?"));var d=z.cb(a,b);d!==c&&(z.Ta(a,b,c),this.Cz(a,b,d,c))};da=Ld.prototype;da.us=function(a,b){L.prototype.us.call(this,a,b);for(var c=this.rc.k;c.next();)this.Iz(c.value,a,b)};da.Iz=function(a,b,c){if(this.mo(a)===b){var d=this.$i;z.Ta(a,d,c);be(this,"nodeParentKey",yd,d,a,b,c);"string"===typeof d&&this.Eb(a,d)}};
da.Oo=function(a){L.prototype.Oo.call(this,a);a=this.xb(a);var b=ne(this,a);if(b!==q){for(var c=new J(Object),b=b.k;b.next();){var d=b.value;if(this.xe(d)&&this.mo(d)===a){var e=this.$i;be(this,"nodeParentKey",yd,e,d,a,a);"string"===typeof e&&this.Eb(d,e);c.add(d)}}for(c=c.k;c.next();)pe(this,a,c.value)}};da.No=function(a){L.prototype.No.call(this,a);var b=this.mo(a),b=this.km(b);this.Ye(b)===q&&oe(this,b,a)};da.Ms=function(a){L.prototype.Ms.call(this,a);var b=this.mo(a);pe(this,b,a)};
function Fe(a,b,c){z.qc(this);a===f?a="":z.j(a,"string",Fe,"constructor:targetprop");b===f?b=a:z.j(b,"string",Fe,"constructor:sourceprop");c===f?c=q:c!==q&&z.j(c,"function",Fe,"constructor:conv");this.IB="";this.Of=q;this.xu=a;this.vu=this.$x=0;this.BB=q;this.qu=b;this.Kw=c;this.zx=Ge;this.Fw=q}z.ea("Binding",Fe);var Ge;Fe.OneWay=Ge=z.w(Fe,"OneWay",1);var He;Fe.TwoWay=He=z.w(Fe,"TwoWay",2);
Fe.parseEnum=function(a,b){z.j(a,"function",Fe,"parseEnum:ctor");z.wb(b,a,Fe,"parseEnum:defval");return function(c){return z.Zl(a,c)||b}};var Hd;Fe.toString=Hd=function(a){var b=a;z.yb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID));return b===f?"undefined":b===q?"null":b.toString()};Fe.prototype.toString=function(){return"Binding("+this.sm+" "+this.Xz+":"+this.Tz+")"};
Fe.prototype.freeze=function(){this.hb=h;return this};Fe.prototype.Ua=function(){this.hb=s;return this};z.g(Fe,"targetId",Fe.prototype.sm);z.defineProperty(Fe,{sm:q},w("IB"),function(a){z.J(this);z.j(a,"string",Fe,"targetId");this.IB=a});z.g(Fe,"targetProperty",Fe.prototype.Xz);z.defineProperty(Fe,{Xz:"targetProperty"},w("xu"),function(a){z.J(this);z.j(a,"string",Fe,"targetProperty");this.xu=a});z.g(Fe,"sourceName",Fe.prototype.Hs);
z.defineProperty(Fe,{Hs:"sourceName"},w("BB"),function(a){z.J(this);z.j(a,"string",Fe,"sourceName");this.BB=a});z.g(Fe,"sourceProperty",Fe.prototype.Tz);z.defineProperty(Fe,{Tz:"sourceProperty"},w("qu"),function(a){z.J(this);z.j(a,"string",Fe,"sourceProperty");this.qu=a});z.g(Fe,"converter",Fe.prototype.pC);z.defineProperty(Fe,{pC:"converter"},w("Kw"),function(a){z.J(this);a!==q&&z.j(a,"function",Fe,"converter");this.Kw=a});z.g(Fe,"backConverter",Fe.prototype.iC);
z.defineProperty(Fe,{iC:"backConverter"},w("Fw"),function(a){z.J(this);a!==q&&z.j(a,"function",Fe,"backConverter");this.Fw=a});z.g(Fe,"mode",Fe.prototype.mode);z.defineProperty(Fe,{mode:"mode"},w("zx"),function(a){z.J(this);z.wb(a,Fe,Fe,"mode");this.zx=a});Fe.prototype.makeTwoWay=Fe.prototype.mJ=function(a){a===f&&(a=q);this.mode=He;this.iC=a;return this};Fe.prototype.ofObject=Fe.prototype.wz=function(a){a===f&&(a="");x&&z.j(a,"string",Fe,"ofObject:srcname");this.Hs=a;return this};
Fe.prototype.updateTarget=Fe.prototype.QE=function(a,b,c){var d=this.qu;if(!(c&&d!==c)){c=this.xu;var e=this.Kw;if(!(e===q&&""===c)){x&&("string"===typeof c&&"function"!==typeof a.setAttribute&&"_"!==c[0]&&!z.lv(a,c))&&z.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=z.cb(b,d));if(g!==f)if(e===q)""!==c&&z.Ta(a,c,g);else try{if(""!==c){var k=e(g,a);z.Ta(a,c,k)}else e(g,a)}catch(l){x&&z.trace("Binding error: "+l.toString())}}}};
Fe.prototype.updateSource=Fe.prototype.PE=function(a,b,c,d){if(this.zx===He){var e=this.xu;if(!(c&&e!==c)){c=this.qu;var g=this.Fw;if(!(g===q&&""===c)){var k=a;""!==e&&(k=z.cb(a,e));if(k!==f)if(g===q)d&&d.ga?d.ga.Lv(b,c,k):z.Ta(b,c,k);else try{if(""!==c){var l=g(k,b);d&&d.ga?d.ga.Lv(b,c,l):z.Ta(b,c,l)}else g(k,b)}catch(m){x&&z.trace("Binding error: "+m.toString())}}}}};function Ie(){this.mF=(new J(wd)).freeze();this.Kb="";this.$A=s}z.ea("Transaction",Ie);
Ie.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.nh.count.toString()+(this.po?"":", incomplete");if(a!==f&&0<a)for(var c=this.nh.count,d=0;d<c;d++){var e=this.nh.na(d);e!==q&&(b+="\n  "+e.toString(a-1))}return b};Ie.prototype.clear=Ie.prototype.clear=function(){var a=this.nh;a.Ua();for(var b=a.count-1;0<=b;b--){var c=a.na(b);c!==q&&c.clear()}a.clear();a.freeze()};Ie.prototype.canUndo=Ie.prototype.canUndo=w("po");
Ie.prototype.undo=Ie.prototype.undo=function(){if(this.canUndo())for(var a=this.nh.count-1;0<=a;a--){var b=this.nh.na(a);b!==q&&b.undo()}};Ie.prototype.canRedo=Ie.prototype.canRedo=w("po");Ie.prototype.redo=Ie.prototype.redo=function(){if(this.canRedo())for(var a=this.nh.count,b=0;b<a;b++){var c=this.nh.na(b);c!==q&&c.redo()}};z.A(Ie,{nh:"changes"},w("mF"));z.g(Ie,"name",Ie.prototype.name);z.defineProperty(Ie,{name:"name"},w("Kb"),ba("Kb"));z.g(Ie,"isComplete",Ie.prototype.po);
z.defineProperty(Ie,{po:"isComplete"},w("$A"),ba("$A"));function Id(){this.Ax=new va(L);this.Ph=s;this.pF=(new J(Ie)).freeze();this.kk=-1;this.hB=999;this.Qh=s;this.jt=q;this.Ak=0;this.Gw=s;x&&(this.Gw=h);this.Ag=(new J("string")).freeze();this.rn=new J("number");this.$w=h}z.ea("UndoManager",Id);
Id.prototype.toString=function(a){for(var b="UndoManager "+this.Ej+"<"+this.history.count+"<="+this.lz,b=b+"[",c=this.KD.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.KD.na(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.na(d).toString(a-1)}return b};
Id.prototype.clear=Id.prototype.clear=function(){var a=this.history;a.Ua();for(var b=a.count-1;0<=b;b--){var c=a.na(b);c!==q&&c.clear()}a.clear();this.kk=-1;a.freeze();this.Qh=s;this.jt=q;this.Ak=0;this.Ag.Ua();this.Ag.clear();this.Ag.freeze();this.rn.clear()};Id.prototype.addModel=Id.prototype.FF=function(a){this.Ax.add(a)};Id.prototype.removeModel=Id.prototype.QH=function(a){this.Ax.remove(a)};
Id.prototype.startTransaction=Id.prototype.pc=function(a){a===f&&(a="");a===q&&(a="");if(this.jb)return s;this.$w===h&&(this.$w=s,this.Ak++,this.Ec("StartingFirstTransaction",a,this.Kk),0<this.Ak&&this.Ak--);this.isEnabled&&(this.Ag.Ua(),this.Ag.add(a),this.Ag.freeze(),this.Kk===q?this.rn.add(0):this.rn.add(this.Kk.nh.count));this.Ak++;var b=1===this.bl;b&&this.Ec("StartedTransaction",a,this.Kk);return b};Id.prototype.commitTransaction=Id.prototype.we=function(a){return Je(this,h,a)};
Id.prototype.rollbackTransaction=Id.prototype.ws=function(){return Je(this,s,"")};
function Je(a,b,c){if(a.jb)return s;a.Dy&&1>a.bl&&z.trace("Ending transaction without having started a transaction: "+c);var d=1===a.bl;d&&(b&&a.isEnabled)&&a.Ec("CommittingTransaction",c,a.Kk);var e=0;if(0<a.bl&&(a.Ak--,a.isEnabled)){var g=a.Ag.count;0<g&&(""===c&&(c=a.Ag.na(0)),a.Ag.Ua(),a.Ag.sd(g-1),a.Ag.freeze());g=a.rn.count;0<g&&(e=a.rn.na(g-1),a.rn.sd(g-1))}g=a.Kk;if(d){if(b){if(a.isEnabled&&g!==q){b=g;b.po=h;b.name=c;d=a.history;d.Ua();for(e=d.count-1;e>a.Ej;e--)g=d.na(e),g!==q&&g.clear(),
d.sd(e);e=a.lz;0===e&&(e=1);0<e&&d.count>=e&&(g=d.na(0),g!==q&&g.clear(),d.sd(0),a.kk--);d.add(b);a.kk++;d.freeze();g=b}a.Ec("CommittedTransaction",c,g)}else{a.Qh=h;try{a.isEnabled&&g!==q&&(g.po=h,g.undo())}finally{a.Ec("RolledBackTransaction",c,g),a.Qh=s}g!==q&&g.clear()}a.jt=q;return h}if(a.isEnabled&&!b&&g!==q){a=e;c=g.nh;for(b=c.count-1;b>=a;b--)d=c.na(b),d!==q&&d.undo(),c.Ua(),c.sd(b);c.freeze()}return s}
Id.prototype.canUndo=Id.prototype.canUndo=function(){if(!this.isEnabled||0<this.bl||this.jb)return s;var a=this.IE;return a!==q&&a.canUndo()?h:s};Id.prototype.undo=Id.prototype.undo=function(){if(this.canUndo()){var a=this.IE;try{this.Ec("StartingUndo","Undo",a),this.Qh=h,this.kk--,a.undo()}catch(b){z.trace("undo error: "+b.toString())}finally{this.Qh=s,this.Ec("FinishedUndo","Undo",a)}}};
Id.prototype.canRedo=Id.prototype.canRedo=function(){if(!this.isEnabled||0<this.bl||this.jb)return s;var a=this.HE;return a!==q&&a.canRedo()?h:s};Id.prototype.redo=Id.prototype.redo=function(){if(this.canRedo()){var a=this.HE;try{this.Ec("StartingRedo","Redo",a),this.Qh=h,this.kk++,a.redo()}catch(b){z.trace("redo error: "+b.toString())}finally{this.Qh=s,this.Ec("FinishedRedo","Redo",a)}}};
Id.prototype.Ec=function(a,b,c){c===f&&(c=q);var d=new wd;d.fd=xd;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.zH;a.next();)b=a.value,d.ga=b,b.Pu(d)};Id.prototype.handleChanged=Id.prototype.ZC=function(a){if(this.isEnabled&&!this.jb&&!this.skipsEvent(a)){var b=this.Kk;b===q&&(this.jt=b=new Ie);var c=a.copy(),b=b.nh;b.Ua();b.add(c);b.freeze();this.Dy&&(0>=this.bl&&!this.$w)&&(a=a.h,a!==q&&a.vg===s||z.trace("Change not within a transaction: "+c.toString()))}};
Id.prototype.skipsEvent=function(a){if(a===q||0>a.fd.value)return h;a=a.object;if(a instanceof U){if(a=a.layer,a!==q&&a.gc)return h}else if(a instanceof Ke&&a.gc)return h;return s};z.A(Id,{zH:"models"},function(){return this.Ax.k});z.g(Id,"isEnabled",Id.prototype.isEnabled);z.defineProperty(Id,{isEnabled:"isEnabled"},w("Ph"),ba("Ph"));z.A(Id,{IE:"transactionToUndo"},function(){return 0<=this.Ej&&this.Ej<=this.history.count-1?this.history.na(this.Ej):q});
z.A(Id,{HE:"transactionToRedo"},function(){return this.Ej<this.history.count-1?this.history.na(this.Ej+1):q});z.A(Id,{jb:"isUndoingRedoing"},w("Qh"));z.A(Id,{history:"history"},w("pF"));z.g(Id,"maxHistoryLength",Id.prototype.lz);z.defineProperty(Id,{lz:"maxHistoryLength"},w("hB"),ba("hB"));z.A(Id,{Ej:"historyIndex"},w("kk"));z.A(Id,{Kk:"currentTransaction"},w("jt"));z.A(Id,{bl:"transactionLevel"},w("Ak"));z.A(Id,{lH:"isInTransaction"},function(){return 0<this.Ak});
z.defineProperty(Id,{Dy:"checksTransactionLevel"},w("Gw"),ba("Gw"));z.A(Id,{KD:"nestedTransactionNames"},w("Ag"));function za(){0<arguments.length&&z.m("CommandHandler constructor cannot take any arguments.");this.fa=q;this.LA=this.EA=s;this.sk=this.xA=q;this.SB=1.05;this.wx=NaN;this.eB=q;this.TB=NaN}z.ea("CommandHandler",za);za.prototype.toString=ca("CommandHandler");z.A(za,{h:"diagram"},w("fa"));za.prototype.me=function(a){x&&a!==q&&z.l(a,y,za,"setDiagram");this.fa=a};
za.prototype.doKeyDown=function(){var a=this.h;if(a!==q){var b=a.T,c=b.control,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&this.undo():
c&&"A"===g?this.canSelectAll()&&this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.Te&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.Te&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.Se&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.Se&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.Se?a.scroll("page","left"):a.Te&&a.scroll("page","up"):"PageDown"===g?d&&a.Se?a.scroll("page","right"):a.Te&&
a.scroll("page","down"):"Home"===g?(b=a.uc,c&&a.Te?a.position=new G(a.position.x,b.y):!c&&a.Se&&(a.position=new G(b.x,a.position.y))):"End"===g?(b=a.uc,d=a.gb,c&&a.Te?a.position=new G(d.x,b.bottom-d.height):!c&&a.Se&&(a.position=new G(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=h}};za.prototype.doKeyUp=function(){var a=this.h;a!==q&&(a.T.bubbles=h)};za.prototype.stopCommand=function(){var a=this.h;if(a!==q){var b=a.Ra;b instanceof Le&&a.te&&a.Ey();b!==q&&b.doCancel()}};za.prototype.canStopCommand=ca(h);
za.prototype.selectAll=function(){var a=this.h;if(a!==q){a.xa();try{a.Wc="wait";a.Ja("ChangingSelection");for(var b=a.mm;b.next();)b.value.$a=h;for(b=a.Gj;b.next();)b.value.$a=h;for(b=a.links;b.next();)b.value.$a=h}finally{a.Ja("ChangedSelection"),a.Wc=""}}};za.prototype.canSelectAll=function(){var a=this.h;return a!==q&&a.te};
za.prototype.deleteSelection=function(){var a=this.h;if(a!==q&&!a.Ja("SelectionDeleting",a.selection))try{a.Wc="wait";a.pc("Delete");a.Ja("ChangingSelection");for(var b=new va(B),c=a.selection.k;c.next();)Me(b,c.value,h,this.CC?Infinity:0,function(a){return a.canDelete()});a.Hz(b,h);a.Ja("SelectionDeleted",b)}finally{a.Ja("ChangedSelection"),a.we("Delete"),a.Wc=""}};za.prototype.canDeleteSelection=function(){var a=this.h;return a===q||(a.fb||a.Fe)||!a.Ek||0===a.selection.count?s:h};
function Me(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=q),(e===q||e(b))&&!(b instanceof Ne)))if(a.add(b),b instanceof D){if(c&&b instanceof oa)for(var g=b.Bc;g.next();){var k=g.value;Me(a,k,c,d,e)}for(k=b.rd;k.next();)if(g=k.value,!a.contains(g)){var l=g.da,m=g.ja;l!==q&&a.contains(l)&&m!==q&&a.contains(m)?Me(a,g,c,d,e):(l===q||m===q)&&Me(a,g,c,d,e)}if(1<d)for(b=b.NC();b.next();)k=b.value,Me(a,k,c,d-1,e)}else if(b instanceof E)for(k=b.wi;k.next();)Me(a,k.value,c,d,e)}
za.prototype.copyParts=function(a,b,c){var d=new ta(B,B);for(a=a.k;a.next();){var e=a.value;Oe(this,e,b,d,c)}if(b!==q){c=b.ga;a=new va(E);for(var g=new ta(E,E),k=d.k;k.next();)if(e=k.value,e instanceof E)(e.da===q||e.ja===q)&&a.add(e);else if(c instanceof Ld&&e instanceof D&&e.data!==q){var l=e,e=k.key,m=e.OC();m!==q&&((m=d.Ba(m))?(c.Cf(l.data,c.xb(m.data)),l=b.vf(l.data),e=e.Qr(),e!==q&&l!==q&&g.add(e,l)):c.Cf(l.data,f))}0<a.count&&b.Hz(a,s);if(0<g.count)for(b=g.k;b.next();)d.add(b.key,b.value)}for(b=
d.k;b.next();)b.value.Eb();return d};
function Oe(a,b,c,d,e){if(b===q||e&&!b.canCopy())return q;if(d.contains(b))return a=d.Ba(b),a instanceof B?a:q;var g=q,k=b.data;if(k!==q&&c!==q){var l=c.ga;b instanceof E?l instanceof T&&(k=l.sC(k),z.yb(k)&&(l.YB(k),g=c.vf(k))):(k=l.vj(k),z.yb(k)&&(l.wr(k),g=c.Bj(k)))}else Pe(b),g=b.copy(),c!==q&&g instanceof B&&c.add(g);if(!(g instanceof B))return q;g.$a=s;d.add(b,g);if(b instanceof D){for(l=b.rd;l.next();){k=l.value;if(k.da===b){var m=d.Ba(k);m!==q&&(m.da=g)}k.ja===b&&(m=d.Ba(k),m!==q&&(m.ja=g))}if(b instanceof
oa&&g instanceof oa)for(b=b.Bc;b.next();)l=Oe(a,b.value,c,d,e),!(l instanceof E)&&l!==q&&(l.bb=g)}else if(b instanceof E){l=b.da;l!==q&&(l=d.Ba(l),l!==q&&(g.da=l));l=b.ja;l!==q&&(l=d.Ba(l),l!==q&&(g.ja=l));for(b=b.wi;b.next();)l=Oe(a,b.value,c,d,e),l!==q&&(l.Yc=g)}return g}za.prototype.copySelection=function(){var a=this.h;if(a!==q){for(var b=new va(B),a=a.selection.k;a.next();)Me(b,a.value,h,this.rC?Infinity:0,function(a){return a.canCopy()});this.copyToClipboard(b)}};
za.prototype.canCopySelection=function(){var a=this.h;return a===q||(!a.pj||!a.Ju)||0===a.selection.count?s:h};za.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};za.prototype.canCutSelection=function(){var a=this.h;return a===q||(a.fb||a.Fe)||(!a.pj||!a.Ek||!a.Ju)||0===a.selection.count?s:h};
za.prototype.copyToClipboard=function(a){var b=this.h;if(b!==q){var c=q;a===q?(z.Er=q,z.Ru=""):(a=b.copyParts(a,q,h),c=new J(B),c.Re(a),z.Er=c,z.Ru=b.ga.Ul);b.Ja("ClipboardChanged",c)}};za.prototype.pasteFromClipboard=function(){var a=new va(B),b=z.Er;if(b===q)return a;var c=this.h;if(c===q||z.Ru!==c.ga.Ul)return a;for(b=c.copyParts(b,c,s).k;b.next();)c=b.value,c.location.W()||(c.location=b.key.location),c.position.W()||(c.position=b.key.position),a.add(c);return a};
za.prototype.pasteSelection=function(a){var b=this.h;if(b!==q)try{b.Wc="wait";b.pc("Paste");b.Ja("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Qe(b);for(var d=c.k;d.next();)d.value.$a=h;b.Ja("ChangedSelection");if(a instanceof G){var e=b.computePartsBounds(b.selection);if(e){var g=b.tb.ze,k=g.computeEffectiveCollection(b.selection);g.moveParts(k,new G(a.x-e.Ca,a.y-e.Ka),s)}}b.Ja("ClipboardPasted",c)}finally{b.we("Paste"),b.Wc=""}};
za.prototype.canPasteSelection=function(){var a=this.h;return a===q||(a.fb||a.Fe)||(!a.Kl||!a.Ju)||z.Er===q||z.Ru!==a.ga.Ul?s:h};za.prototype.undo=function(){var a=this.h;a!==q&&a.Aa.undo()};za.prototype.canUndo=function(){var a=this.h;return a===q||a.fb||a.Fe?s:a.yy&&a.Aa.canUndo()};za.prototype.redo=function(){var a=this.h;a!==q&&a.Aa.redo()};za.prototype.canRedo=function(){var a=this.h;return a===q||a.fb||a.Fe?s:a.yy&&a.Aa.canRedo()};
za.prototype.decreaseZoom=function(a){a===f&&(a=1/this.Ns);z.p(a,za,"decreaseZoom:factor");var b=this.h;b!==q&&b.Nl===Re&&(a*=b.scale,a<b.$f||a>b.Zf||(b.scale=a))};za.prototype.canDecreaseZoom=function(a){a===f&&(a=1/this.Ns);z.p(a,za,"canDecreaseZoom:factor");var b=this.h;if(b===q||b.Nl!==Re)return s;a*=b.scale;return a<b.$f||a>b.Zf?s:b.Rn};
za.prototype.increaseZoom=function(a){a===f&&(a=this.Ns);z.p(a,za,"increaseZoom:factor");var b=this.h;b!==q&&b.Nl===Re&&(a*=b.scale,a<b.$f||a>b.Zf||(b.scale=a))};za.prototype.canIncreaseZoom=function(a){a===f&&(a=this.Ns);z.p(a,za,"canIncreaseZoom:factor");var b=this.h;if(b===q||b.Nl!==Re)return s;a*=b.scale;return a<b.$f||a>b.Zf?s:b.Rn};za.prototype.resetZoom=function(a){a===f&&(a=1);z.p(a,za,"resetZoom:newscale");var b=this.h;if(b!==q&&!(a<b.$f||a>b.Zf))b.scale=a};
za.prototype.canResetZoom=function(a){a===f&&(a=1);z.p(a,za,"canResetZoom:newscale");var b=this.h;return b===q||a<b.$f||a>b.Zf?s:b.Rn};za.prototype.zoomToFit=function(){var a=this.h;if(a!==q){var b=a.scale,c=a.position;b===this.TB&&!isNaN(this.wx)?(a.scale=this.wx,a.position=this.eB):(this.wx=b,this.eB=c.copy(),a.zoomToFit(),a.yi(),this.TB=a.scale)}};za.prototype.canZoomToFit=function(){var a=this.h;return a===q?s:a.Rn};
za.prototype.collapseTree=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.pc("Collapse Tree");var c=new J(D);if(a instanceof D&&a.Lc)a.collapseTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof D&&d.Lc&&(d.collapseTree(),c.add(d))}b.Ja("TreeCollapsed",c);b.we("Collapse Tree")};
za.prototype.canCollapseTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.fb)return s;if(a instanceof D){if(!a.Lc)return s;if(0<a.fv().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof D&&b.Lc&&0<b.fv().count)return h;return s};
za.prototype.expandTree=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.pc("Expand Tree");var c=new J(D);if(a instanceof D&&!a.Lc)a.expandTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof D&&!d.Lc&&(d.expandTree(),c.add(d))}b.Ja("TreeExpanded",c);b.we("Expand Tree")};
za.prototype.canExpandTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.fb)return s;if(a instanceof D){if(a.Lc)return s;if(0<a.fv().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof D&&!b.Lc&&0<b.fv().count)return h;return s};
za.prototype.groupSelection=function(){var a=this.h;if(a!==q){var b=a.ga;if(b!==q&&b instanceof T){var c=this.zy;if(c!==q){var d=q;try{a.Wc="wait";a.pc("Group");a.Ja("ChangingSelection");for(var e=new J(B),g=a.selection.k;g.next();){var k=g.value;k.Td()&&k.canGroup()&&e.add(k)}for(var l=new J(B),m=e.k;m.next();){for(var n=m.value,k=s,g=e.k;g.next();)if(n.as(g.value)){k=h;break}k||l.add(n)}if(0<l.count){g=l.k;g.next();var p=g.value.bb;if(p!==q)for(;p!==q;){g=l.k;g.next();for(e=s;g.next();)if(n=g.value,
!n.as(p)){e=h;break}if(e)p=p.bb;else break}if(c instanceof oa)Pe(c),d=c.copy(),d instanceof oa&&a.add(d);else if(b.cz(c)){var r=b.vj(c);z.yb(r)&&(b.wr(r),d=a.Mr(r))}if(d instanceof oa){p!==q&&this.isValidMember(p,d)&&(d.bb=p);for(g=l.k;g.next();)n=g.value,this.isValidMember(d,n)&&(n.bb=d);a.select(d)}}a.Ja("ChangedSelection");a.Ja("SelectionGrouped",d)}finally{a.we("Group"),a.Wc=""}}}}};
za.prototype.canGroupSelection=function(){var a=this.h;if(a===q||a.fb||a.Fe||!a.Kl||!a.Ln)return s;var b=a.ga;if(b===q||!(b instanceof T)||this.zy===q)return s;for(a=a.selection.k;a.next();)if(b=a.value,b.Td()&&b.canGroup())return h;return s};function $e(a){var b=z.zb();for(a=a.k;a.next();){var c=a.value;c instanceof E||b.push(c)}a=new va(B);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,k=0;k<c;k++)if(e.as(b[k])){g=s;break}g&&a.add(e)}z.Da(b);return a}
za.prototype.isValidMember=function(a,b){if(b===q||a===b||b instanceof E)return s;if(a!==q){if(a===b||a.as(b))return s;var c=a.hs;if(c!==q&&!c(a,b)||a.data===q&&b.data!==q||a.data!==q&&b.data===q)return s}c=this.hs;return c!==q?c(a,b):h};
za.prototype.ungroupSelection=function(a){a===f&&(a=q);var b=this.h;if(b!==q){var c=b.ga;if(c!==q&&c instanceof T)try{b.Wc="wait";b.pc("Ungroup");b.Ja("ChangingSelection");var d=new J(oa);if(a instanceof oa)d.add(a);else for(var e=b.selection.k;e.next();){var g=e.value;g instanceof oa&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Ey();for(e=d.k;e.next();){var k=e.value,l=k.data,m=k.bb,n=m!==q&&m.data!==q?c.xb(m.data):f,p=new J(B);p.Re(k.Bc);for(var r=p.k;r.next();){var t=r.value;if(!(t instanceof E)){var u=
t.data;u!==q?c.Qz(u,n):t.bb=m;t.$a=h}}l!==q?c.XD(l):b.remove(k)}}b.Ja("ChangedSelection");b.Ja("SelectionUngrouped",d,p)}finally{b.we("Ungroup"),b.Wc=""}}};za.prototype.canUngroupSelection=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.fb||b.Fe||!b.Ek||!b.Qn)return s;var c=b.ga;if(c===q||!(c instanceof T))return s;if(a instanceof oa){if(a.canUngroup())return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof oa&&b.canUngroup())return h;return s};
za.prototype.addTopLevelParts=function(a,b){for(var c=h,d=$e(a).k;d.next();){var e=d.value;e.bb!==q&&(!b||this.isValidMember(q,e)?e.bb=q:c=s)}return c};za.prototype.collapseSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.pc("Collapse SubGraph");var c=new J(oa);if(a instanceof oa&&a.Ze)a.collapseSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof oa&&d.Ze&&(d.collapseSubGraph(),c.add(d))}b.Ja("SubGraphCollapsed",c);b.we("Collapse SubGraph")};
za.prototype.canCollapseSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.fb)return s;if(a instanceof oa)return!a.Ze?s:h;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof oa&&b.Ze)return h;return s};
za.prototype.expandSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.pc("Expand SubGraph");var c=new J(oa);if(a instanceof oa&&!a.Ze)a.expandSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof oa&&!d.Ze&&(d.expandSubGraph(),c.add(d))}b.Ja("SubGraphExpanded",c);b.we("Expand SubGraph")};
za.prototype.canExpandSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.fb)return s;if(a instanceof oa)return a.Ze?s:h;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof oa&&!b.Ze)return h;return s};
za.prototype.editTextBlock=function(a){a===f&&(a=q);var b=this.h;if(b!==q&&b.tb!==q){var c=b.tb.Tv;if(c!==q){if(a===q){a=b.selection.k;for(var d=q;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===q)return;a=af(d,function(a){return a instanceof ya&&a.av})}a!==q&&a instanceof ya&&(c.kg=a,b.Ra=c)}}};
za.prototype.canEditTextBlock=function(a){a===f&&(a=q);var b=this.h;if(b===q||(b.fb||b.Fe)||!b.Pn||b.tb===q||b.tb.Tv===q)return s;if(a instanceof ya){if(a=a.Z,a!==q&&a.canEdit())return h}else for(b=b.selection.k;b.next();)if(a=b.value,a.canEdit()&&(a=af(a,function(a){return a instanceof ya&&a.av}),a!==q))return h;return s};
za.prototype.showContextMenu=function(a){var b=this.h;if(b!==q&&b.tb!==q){var c=b.tb.Vu;if(c!==q&&(a===f&&(a=0<b.selection.count?b.selection.sb():b),a=c.findObjectWithContextMenu(a),a!==q)){var d=new ud,e=q;a instanceof U?e=a.nb(cc):b.dn||(e=b.gb,e=new G(e.x+e.width/2,e.y+e.height/2));e!==q&&(d.xc=b.xm(e),d.S=e,b.Xb=d);b.Ra=c;bf(c,s,a)}}};
za.prototype.canShowContextMenu=function(a){var b=this.h;if(b===q||b.tb===q)return s;var c=b.tb.Vu;if(c===q)return s;a===f&&(a=0<b.selection.count?b.selection.sb():b);return c.findObjectWithContextMenu(a)===q?s:h};z.g(za,"copiesTree",za.prototype.rC);z.defineProperty(za,{rC:"copiesTree"},w("EA"),ba("EA"));z.g(za,"deletesTree",za.prototype.CC);z.defineProperty(za,{CC:"deletesTree"},w("LA"),ba("LA"));z.g(za,"archetypeGroupData",za.prototype.zy);
z.defineProperty(za,{zy:"archetypeGroupData"},w("xA"),function(a){a!==q&&z.l(a,Object,za,"archetypeGroupData");var b=this.h;b!==q&&(b=b.ga,b instanceof T&&!(a instanceof oa)&&!b.cz(a)&&z.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.xA=a});z.g(za,"memberValidation",za.prototype.hs);z.defineProperty(za,{hs:"memberValidation"},w("sk"),function(a){a!==q&&z.j(a,"function",za,"memberValidation");this.sk=a});
z.g(za,"zoomFactor",za.prototype.Ns);z.defineProperty(za,{Ns:"zoomFactor"},w("SB"),function(a){z.j(a,"number",za,"zoomFactor");1<a||z.m("zoomFactor must be larger than 1.0, not: "+a);this.SB=a});function cf(){0<arguments.length&&z.m("Tool constructor cannot take any arguments.");z.qc(this);this.fa=q;this.Kb="";this.Ph=h;this.YA=s;this.QB=q;this.Eu=-1}z.ea("Tool",cf);cf.prototype.me=function(a){x&&a!==q&&z.l(a,y,cf,"setDiagram");this.fa=a};
cf.prototype.toString=function(){return""!==this.name?this.name+" Tool":z.ph(Object.getPrototypeOf(this))};cf.prototype.updateAdornments=aa();cf.prototype.canStart=w("isEnabled");cf.prototype.doStart=aa();cf.prototype.doActivate=function(){this.oa=h};cf.prototype.doDeactivate=function(){this.oa=s};cf.prototype.doStop=aa();cf.prototype.doCancel=function(){this.stopTool()};cf.prototype.stopTool=function(){var a=this.h;a!==q&&a.Ra===this&&(a.Ra=q,a.Wc="")};
cf.prototype.doMouseDown=function(){!this.oa&&this.canStart()&&this.doActivate()};cf.prototype.doMouseMove=aa();cf.prototype.doMouseUp=function(){this.stopTool()};cf.prototype.doMouseWheel=aa();cf.prototype.doKeyDown=function(){var a=this.h;a!==q&&"Esc"===a.T.key&&this.doCancel()};cf.prototype.doKeyUp=aa();cf.prototype.startTransaction=cf.prototype.pc=function(a){this.Ke=q;var b=this.h;return b===q?s:b.pc(a)};
cf.prototype.stopTransaction=cf.prototype.Jj=function(){var a=this.h;return a===q?s:this.Ke===q?a.ws():a.we(this.Ke)};
cf.prototype.standardMouseSelect=function(){var a=this.h;if(a!==q&&a.te){var b=a.T,c=a.Nr(b.S,s);if(c!==q)if(b.control){a.Ja("ChangingSelection");for(b=c;b!==q&&!b.canSelect();)b=b.bb;b.$a=!b.$a;a.Ja("ChangedSelection")}else if(b.shift){if(!c.$a){a.Ja("ChangingSelection");for(b=c;b!==q&&!b.canSelect();)b=b.bb;b.$a=h;a.Ja("ChangedSelection")}}else{if(!c.$a){for(b=c;b!==q&&!b.canSelect();)b=b.bb;a.select(b)}}else b.left&&(!b.control&&!b.shift)&&a.Ey()}};
cf.prototype.standardMouseClick=function(a,b){a===f&&(a=q);b===f&&(b=function(a){return!a.layer.gc});var c=this.h;if(c!==q){var d=c.T,e=c.od(d.S,a,b);d.Hd=e;df(e,d,c)}};
function df(a,b,c){var d=0;b.left?d=1===b.he?1:2===b.he?2:1:b.right&&1===b.he&&(d=3);var e="";if(a!==q){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ja(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ja(e)}if(a!==q)for(;a!==q;){e=q;switch(d){case 1:e=a.click;break;case 2:e=a.Wl?a.Wl:a.click;break;case 3:e=a.Hr}if(e!==q&&
(e(b,a),b.je))break;a=a.ha}else{e=q;switch(d){case 1:e=c.click;break;case 2:e=c.Wl?c.Wl:c.click;break;case 3:e=c.Hr}e!==q&&e(b)}}
cf.prototype.standardMouseOver=function(){var a=this.h;if(a!==q){var b=a.T;if(b.h!==q){var c=a.od(b.S,q,q);b.Hd=c;var d=a.cc;a.cc=h;var e=s;if(c!==a.Xn){var g=a.Xn;a.zz=g;a.Xn=c;for(this.doCurrentObjectChanged(g,c);g!==q;){var k=g.pz;if(k!==q){if(c===g)break;if(c!==q&&c.ui(g))break;k(b,g,c);e=h;if(b.je)break}g=g.ha}for(g=a.zz;c!==q;){k=c.oz;if(k!==q){if(g===c)break;if(g!==q&&g.ui(c))break;k(b,c,g);e=h;if(b.je)break}c=c.ha}c=a.Xn}if(c!==q){g=c;for(k="";g!==q;){k=g.cursor;if(""!==k)break;g=g.ha}a.Wc=
k;for(g=c;g!==q;){k=g.ls;if(k!==q&&(k(b,g),e=h,b.je))break;g=g.ha}}else a.Wc="",k=a.ls,k!==q&&(k(b),e=h);e&&a.oc();a.cc=d}}};cf.prototype.doCurrentObjectChanged=aa();
cf.prototype.standardMouseWheel=function(){var a=this.h;if(a!==q){var b=a.T,c=b.xj;if(0!==c){var d=a.tb.lm;if(a.Rn&&(d===ef&&!b.shift||d===ff&&b.control)){d=a.Dh;a.Dh=b.xc;var e=a.Ue;e!==q?0<c?e.increaseZoom():e.decreaseZoom():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.Dh=d;b.bubbles=s}else if(d===ef&&b.shift||d===ff&&!b.control)d=a.position.copy(),!b.shift&&a.Te?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Se&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.N(d)||
(b.bubbles=s)}}};cf.prototype.standardWaitAfter=function(a){z.j(a,"number",cf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Eu=window.setTimeout(function(){b.doWaitAfter()},a)};cf.prototype.cancelWaitAfter=function(){-1!==this.Eu&&window.clearTimeout(this.Eu);this.Eu=-1};cf.prototype.doWaitAfter=aa();
cf.prototype.findToolHandleAt=function(a,b){var c=this.h;if(c===q)return q;c=c.od(a,q,function(a){a=a.Z;return a===q?s:a.Hc!==q});if(c===q)return q;var d=c.Z;return d===q||d.Ic!==b?q:c};cf.prototype.isBeyondDragSize=function(a,b){var c=this.h;if(c===q)return s;a===f&&(a=c.Ac.xc);b===f&&(b=c.T.xc);var d=c.tb.FC,c=d.width,d=d.height;z.Wz&&(c+=6,d+=6);return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>d};z.A(cf,{h:"diagram"},w("fa"));z.g(cf,"name",cf.prototype.name);
z.defineProperty(cf,{name:"name"},w("Kb"),ba("Kb"));z.g(cf,"isEnabled",cf.prototype.isEnabled);z.defineProperty(cf,{isEnabled:"isEnabled"},w("Ph"),ba("Ph"));z.g(cf,"isActive",cf.prototype.oa);z.defineProperty(cf,{oa:"isActive"},w("YA"),ba("YA"));z.g(cf,"transactionResult",cf.prototype.Ke);z.defineProperty(cf,{Ke:"transactionResult"},w("QB"),ba("QB"));
function gf(){0<arguments.length&&z.m("DraggingTool constructor cannot take any arguments.");cf.call(this);this.name="Dragging";this.DA=h;this.ql=this.QA=s;this.mx=h;this.ex=(new qa(NaN,NaN)).freeze();this.gx=$b;this.hx=(new G(NaN,NaN)).freeze();this.PA=s;this.NA=this.CA=this.OA=this.GA=q;this.yp=this.aB=s;this.Dn=new G(NaN,NaN);this.di=new G;this.tu=s;this.pu=h;this.Sm=100;this.kl=this.hu=q}z.ea("DraggingTool",gf);z.Pa(gf,cf);z.g(gf,"copiesEffectiveCollection",gf.prototype.qC);
z.defineProperty(gf,{qC:"copiesEffectiveCollection"},w("DA"),ba("DA"));z.g(gf,"dragsTree",gf.prototype.GC);z.defineProperty(gf,{GC:"dragsTree"},w("QA"),ba("QA"));z.g(gf,"isGridSnapEnabled",gf.prototype.ro);z.defineProperty(gf,{ro:"isGridSnapEnabled"},w("ql"),function(a){this.ql!==a&&(z.j(a,"boolean",gf,"isGridSnapEnabled"),this.ql=a)});z.g(gf,"isGridSnapRealtime",gf.prototype.lD);
z.defineProperty(gf,{lD:"isGridSnapRealtime"},w("mx"),function(a){this.mx!==a&&(z.j(a,"boolean",gf,"isGridSnapRealtime"),this.mx=a)});z.g(gf,"gridSnapCellSize",gf.prototype.Yy);z.defineProperty(gf,{Yy:"gridSnapCellSize"},w("ex"),function(a){this.ex.N(a)||(z.l(a,qa,gf,"gridSnapCellSize"),this.ex=a=a.Y())});z.g(gf,"gridSnapCellSpot",gf.prototype.WC);z.defineProperty(gf,{WC:"gridSnapCellSpot"},w("gx"),function(a){this.gx.N(a)||(z.l(a,O,gf,"gridSnapCellSpot"),this.gx=a=a.Y())});
z.g(gf,"gridSnapOrigin",gf.prototype.XC);z.defineProperty(gf,{XC:"gridSnapOrigin"},w("hx"),function(a){this.hx.N(a)||(z.l(a,G,gf,"gridSnapOrigin"),this.hx=a=a.Y())});z.g(gf,"dragsLinks",gf.prototype.Xl);z.defineProperty(gf,{Xl:"dragsLinks"},w("PA"),ba("PA"));z.g(gf,"currentPart",gf.prototype.Yn);z.defineProperty(gf,{Yn:"currentPart"},w("GA"),ba("GA"));z.g(gf,"copiedParts",gf.prototype.gd);z.defineProperty(gf,{gd:"copiedParts"},w("CA"),ba("CA"));z.g(gf,"draggedParts",gf.prototype.lc);
z.defineProperty(gf,{lc:"draggedParts"},w("OA"),ba("OA"));z.g(gf,"draggedLink",gf.prototype.kc);z.defineProperty(gf,{kc:"draggedLink"},w("NA"),ba("NA"));z.g(gf,"isDragOutStarted",gf.prototype.pv);z.defineProperty(gf,{pv:"isDragOutStarted"},w("aB"),ba("aB"));z.g(gf,"delay",gf.prototype.Zu);z.defineProperty(gf,{Zu:"delay"},w("Sm"),ba("Sm"));
gf.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||!a.Fk&&!a.pj&&!a.Ku||!a.te)return s;var b=a.T;return!b.left||a.Ra!==this&&(!this.isBeyondDragSize()||b.uv&&b.timestamp-a.Ac.timestamp<this.Sm)?s:this.findDraggablePart()!==q};gf.prototype.findDraggablePart=function(){var a=this.h;if(a===q)return q;a=a.Nr(a.Ac.S,s);if(a===q)return q;for(;a!==q&&!a.canSelect();)a=a.bb;return a!==q&&(a.canMove()||a.canCopy())?a:q};
gf.prototype.standardMouseSelect=function(){var a=this.h;if(a!==q&&a.te){var b=a.Nr(a.Ac.S,s);if(b!==q){for(;b!==q&&!b.canSelect();)b=b.bb;this.Yn=b;this.Yn.$a||(a.Ja("ChangingSelection"),b=a.T,!b.control&&!b.shift&&Qe(a),this.Yn.$a=h,a.Ja("ChangedSelection"))}}};
gf.prototype.doActivate=function(){var a=this.h;if(a!==q){this.standardMouseSelect();var b=this.Yn;b===q||!b.canMove()&&!b.canCopy()||(this.oa=h,this.Dn.set(a.position),hf(this,a.selection),this.kl=this.hu=q,this.lc=this.computeEffectiveCollection(a.selection),a.Sx=h,jf(this,this.lc),this.pc("Drag"),this.di.set(a.Ac.S),a.pd=h,a.Ku&&(this.pv=h,this.yp=s,kf=this,lf=this.h))}};
function hf(a,b){if(a.Xl){var c=a.h;c!==q&&c.qj&&(1===b.count?(c=b.k,c.next(),a.kc=c.value,a.kc!==q&&(a.kc.canRelinkFrom()&&a.kc.canRelinkTo())&&a.kc.ge()):a.kc=q)}}
gf.prototype.computeEffectiveCollection=function(a){var b=this.h!==q&&this.h.Ra===this,c=new ta(B,Object);if(a===q)return c;for(var d=a.k;d.next();){var e=d.value;mf(this,c,e,b)}if(this.kc!==q&&this.Xl)return c;for(d=a.k;d.next();)e=d.value,e instanceof E&&(a=e,b=a.da,b!==q&&!c.contains(b)?c.remove(a):(b=a.ja,b!==q&&!c.contains(b)&&c.remove(a)));return c};function nf(a){return a===f?{point:N.Nj,Rx:N.Nj}:{point:a.copy(),Rx:N.Nj}}
function mf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof D){b.add(c,nf(c.location));if(c instanceof oa)for(var e=c.Bc;e.next();){var g=e.value;mf(a,b,g,d)}for(g=c.rd;g.next();)if(e=g.value,!b.contains(e)){var k=e.da,l=e.ja;k!==q&&(b.contains(k)&&l!==q&&b.contains(l))&&mf(a,b,e,d)}if(a.GC)for(c=c.NC();c.next();)g=c.value,mf(a,b,g,d)}else if(c instanceof E){e=c;b.add(e,nf());for(g=e.wi;g.next();)mf(a,b,g.value,d)}else c instanceof Ne||b.add(c,nf(c.location))}
gf.prototype.doDeactivate=function(){this.oa=s;var a=this.h;a!==q&&of(a);pf(this);zf(this,this.lc);this.lc=q;this.yp=this.pv=s;if(0<Af.count){for(var b=Af.length,c=0;c<b;c++){var d=Af.n[c];d.kc!==q&&(d.kc=q);Bf(d);pf(d);d.h!==q&&of(d.h)}Af.clear()}this.kc!==q&&(this.kc=q);this.Dn.So(NaN,NaN);kf=lf=q;Bf(this);a.pd=s;a.Sx=s;this.Jj()};function pf(a){var b=a.h;if(b!==q){var c=b.cc;b.cc=h;for(var d=b.T,e=a.kl;e!==q;){var g=e.nz;if(g!==q&&(g(d,e,q),d.je))break;e=e.ha}b.cc=c}a.hu=q;a.kl=q}
gf.prototype.doCancel=function(){Bf(this);Cf(this);var a=this.h;a!==q&&this.Dn.W()&&(a.position=this.Dn);this.stopTool()};function jf(a,b){if(b!==q){a.tu=h;for(var c=b.k;c.next();){var d=c.key;d instanceof E&&(d.Js=h)}}}function zf(a,b){if(b!==q&&a.tu){for(var c=b.k;c.next();){var d=c.key;d instanceof E&&(d.Js=s,d.xh===Df?d.bc():d.ca())}a.tu=s}}gf.prototype.doKeyDown=function(){var a=this.h;a!==q&&(a=a.T,a!==q&&this.oa&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};
gf.prototype.doKeyUp=function(){var a=this.h;a!==q&&(a.T!==q&&this.oa)&&this.doMouseMove()};function Ef(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,k=a.k;k.next();){var l=k.value;if(l.Td()){var m=l.location,l=m.x,m=m.y;!isNaN(l)&&!isNaN(m)&&(l<c&&(c=l),m<d&&(d=m),l>e&&(e=l),m>g&&(g=m))}}Infinity===c?b.q(0,0,0,0):b.q(c,d,e-c,g-d)}
function Ff(a,b){if(a.gd===q){var c=a.h;if(!(c===q||c.fb||c.Fe)&&a.lc!==q){Cf(a);c.cc=!b;c.yr=!b;a.di.set(c.Ac.S);for(var c=a.qC?c.copyParts(a.lc.al(),c,h):c.copyParts(c.selection,c,h),d=c.k;d.next();)d.value.location=d.key.location;d=z.hf();Ef(c,d);z.Jc(d);for(var d=new ta(B,Object),e=a.lc.k;e.next();){var g=e.key;g.Td()&&g.canCopy()&&(g=c.Ba(g),g!==q&&(g.pi(),d.add(g,nf(g.location))))}for(c=c.k;c.next();)e=c.value,e instanceof E&&e.canCopy()&&d.add(e,nf());a.gd=d;hf(a,d.al());a.kc!==q&&(c=a.kc,
d=c.Ni(),c.Sk(a.di.x-(d.x+d.width/2),a.di.y-(d.y+d.height/2)))}}}function Bf(a){var b=a.h;b!==q&&(a.gd!==q&&(b.Hz(a.gd.al(),s),a.gd=q),b.cc=s,b.yr=s,a.di.set(b.Ac.S))}function Gf(a,b,c){var d=a.h;if(d!==q){var e=a.di,g=z.O();g.assign(d.T.S);a.moveParts(b,g.Is(e),c);z.B(g)}}
gf.prototype.moveParts=function(a,b,c){if(!(a===q||0===a.count)){var d=z.O(),e=z.O();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);var g=this.tu;g||jf(this,a);for(var k=new J,l=new J(Ua),m=a.k;m.next();){var n=m.key;if(n.Td()){var p=Hf(this,n,a);if(p!==q)k.add({Cc:n,info:m.value,aH:p});else if(!c||n.canMove()){p=m.value.point;d.assign(p);var r=this.computeMove(n,d.add(e),a);n.location=r;m.value.Rx=r.Is(p)}}else m.key instanceof E&&l.add(m.Md)}for(c=k.k;c.next();)k=c.value,p=k.info.point,d.assign(p),
k.Cc.location=d.add(k.aH.Rx);p=z.O();c=z.O();for(l=l.k;l.next();)if(r=l.value,k=r.key,k instanceof E)if(k.Js)if(m=k.da,n=k.ja,this.kc!==q&&this.Xl)r=r.value.point,a.add(k,nf(e)),m=b.x-r.x,n=b.y-r.y,k.Sk(m,n);else{if(m!==q){p.assign(m.location);var t=a.Ba(m);t!==q&&p.Is(t.point)}n!==q&&(c.assign(n.location),t=a.Ba(n),t!==q&&c.Is(t.point));m!==q&&n!==q?p.qi(c)?(r=r.value.point,m=d,m.assign(p),m.Is(r),a.add(k,nf(p)),k.Sk(m.x,m.y)):(k.Js=s,k.bc()):(r=r.value.point,a.add(k,nf(m!==q?p:n!==q?c:b)),m=e.x-
r.x,n=e.y-r.y,k.Sk(m,n))}else if(k.da===q||k.ja===q)r=r.value.point,a.add(k,nf(b)),m=e.x-r.x,n=e.y-r.y,k.Sk(m,n);z.B(d);z.B(e);z.B(p);z.B(c);g||zf(this,a)}};function Hf(a,b,c){b=b.bb;if(b!==q){a=Hf(a,b,c);if(a!==q)return a;a=c.Ba(b);if(a!==q)return a}return q}function Cf(a){if(a.lc!==q){for(var b=a.h,c=a.lc.k;c.next();){var d=c.key;d.Td()&&(d.location=c.value.point)}for(c=a.lc.k;c.next();)if(d=c.key,d instanceof E&&d.Js){var e=c.value.point;a.lc.add(d,nf());d.Sk(-e.x,-e.y)}b.vc()}}
gf.prototype.computeMove=function(a,b,c,d){d===f&&(d=new G);d.assign(b);if(a===q)return d;c===f&&(c=q);var e=b;if(this.ro&&(this.lD||c===q||this.h.T.Ai))if(e=z.O(),c=e,c.assign(b),a!==q){var g=this.h;if(g!==q){var k=g.no,l=this.Yy,g=l.width,l=l.height,m=this.XC,n=m.x,m=m.y,p=this.WC;if(k!==q){var r=k.Tr;isNaN(g)&&(g=r.width);isNaN(l)&&(l=r.height);k=k.Xy;isNaN(n)&&(n=k.x);isNaN(m)&&(m=k.y)}k=z.ic(0,0);k.Ds(0,0,g,l,p);N.Qy(b.x,b.y,n+k.x,m+k.y,g,l,c);z.B(k)}}c=a.Ly!==q?a.Ly(a,b,e):e;l=a.GD;g=l.x;isNaN(g)&&
(g=a.location.x);l=l.y;isNaN(l)&&(l=a.location.y);k=a.AD;n=k.x;isNaN(n)&&(n=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);d.q(Math.max(g,Math.min(c.x,n)),Math.max(l,Math.min(c.y,k)));e!==b&&z.B(e);return d};function If(a,b){if(b===q)return h;var c=b.Z;return c===q||c.$a||c instanceof Ne||c.layer.gc||a.lc&&a.lc.contains(c)||a.gd&&a.gd.contains(c)?h:s}
function Jf(a,b,c,d){var e=a.h;if(e!==q){if(a.Xl&&a.kc!==q){var g=a.h.ga;g instanceof T&&(a.kc.da!==q&&g.Bs(a.kc.data,""),a.kc.ja!==q&&g.Es(a.kc.data,""))}g=s;a.pu===s&&(g=e.cc,e.cc=h);var k=s,l=Kf(e,b,q,function(b){return!If(a,b)}),m=e.T;m.Hd=l;var n=e.cc;e.cc=h;if(l!==a.kl){var p=a.kl;a.hu=p;for(a.kl=l;p!==q;){var r=p.nz;if(r!==q){if(l===p)break;if(l!==q&&l.ui(p))break;r(m,p,l);k=h;if(m.je)break}p=p.ha}for(p=a.hu;l!==q;){r=l.HD;if(r!==q){if(p===l)break;if(p!==q&&p.ui(l))break;r(m,l,p);k=h;if(m.je)break}l=
l.ha}l=a.kl}l===q&&(r=e.JD,r!==q&&(r(m),k=h));a.doDragOver(b,l);e.cc=n;k&&e.yi();a.pu===s&&(e.cc=g);(e.Se||e.Te)&&(c||d)&&Lf(e,b)}}gf.prototype.doDragOver=aa();function Mf(a,b){var c=a.h;if(c!==q&&c.ga!==q){pf(a);var d=Kf(c,b,q,function(b){return!If(a,b)}),e=c.T;e.Hd=d;if(d!==q)for(var g=d;g!==q;){var k=g.is;if(k!==q&&(k(e,g),e.je))break;g=g.ha}else k=c.is,k!==q&&k(e);a.doDropOnto(b,d);for(d=c.selection.k;d.next();)e=d.value,e instanceof D&&Nf(c,e.ya)}}gf.prototype.doDropOnto=aa();
gf.prototype.doMouseMove=function(){if(this.oa){var a=this.h;if(a!==q&&this.Yn!==q&&this.lc!==q){var b=s,c=s;this.mayCopy()?(b=h,Ff(this,s),Gf(this,this.gd,h)):this.mayMove()?(c=h,Bf(this),Gf(this,this.lc,h)):Bf(this);Jf(this,a.T.S,c,b);a.oc()}}};
gf.prototype.doMouseUp=function(){if(this.oa){this.yp=h;var a=this.h;if(a!==q){var b=s,c=this.mayCopy();c&&this.gd!==q?(Cf(this),Bf(this),Ff(this,h),Gf(this,this.gd,h),this.gd!==q&&a.lE(this.gd.al())):(b=h,Bf(this),this.mayMove()&&(Gf(this,this.lc,h),this.pu=s,Jf(this,a.T.S,h,s),this.pu=h));Mf(this,a.T.S);if(this.oa){this.gd=q;if(b&&this.lc!==q)for(b=this.lc.k;b.next();){var d=b.key;d instanceof D&&(d=d.bb,d!==q&&d.placeholder!==q&&!this.lc.contains(d)&&d.Fy&&d.ca())}a.vc();zf(this,this.lc);this.Ke=
c?"Copy":"Move";a.Ja(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};gf.prototype.mayCopy=function(){var a=this.h;if(a===q||(a.fb||a.Fe||!a.Kl||!a.pj)||!a.T.control)return s;for(a=a.selection.k;a.next();){var b=a.value;if(b.Td()&&b.canCopy())return h}return this.kc!==q&&this.Xl&&this.kc.canCopy()?h:s};
gf.prototype.mayMove=function(){var a=this.h;if(a===q||a.fb||!a.Fk)return s;for(a=a.selection.k;a.next();){var b=a.value;if(b.Td()&&b.canMove())return h}return this.kc!==q&&this.Xl&&this.kc.canMove()?h:s};var Af=new J(gf),kf=q,lf=q;gf.prototype.mayCopyExternal=function(){var a=this.h;return a===q||(!a.xy||a.fb||a.Fe||!a.Kl)||a.ga===q?s:h};
gf.prototype.doSimulatedDragEnter=function(){if(this.mayCopyExternal()){var a=kf;if(a!==q){Bf(a);Cf(a);var b=a.h;b!==q&&a.Dn.W()&&(b.position=a.Dn);b!==q&&of(b)}Af.contains(this)||Af.add(this)}};gf.prototype.doSimulatedDragLeave=function(){kf.pv=s;this.doCancel()};gf.prototype.doSimulatedDragOver=function(){if(this.mayCopyExternal()){var a=this.h;if(a!==q){var b=kf;b!==q&&b.lc!==q&&(Of(this,b.lc.al(),s),Gf(this,this.gd,s),Jf(this,a.T.S,s,h),a.oc())}}};
gf.prototype.doSimulatedDrop=function(){var a=kf;if(a!==q&&(a.yp=h,Bf(this),this.mayCopyExternal())){var b=this.h;b!==q&&(this.pc("Drop"),Of(this,a.lc.al(),h),Gf(this,this.gd,h),this.gd!==q&&b.lE(this.gd.al()),this.Ke="ExternalCopy",Mf(this,b.T.S),this.gd=q,b.Ja("ExternalObjectsDropped",b.selection),this.Jj(),b.vc())}};
function Of(a,b,c){if(a.gd===q){var d=a.h;if(!(d===q||d.fb||d.Fe)&&d.ga!==q){d.cc=!c;d.yr=!c;a.di.set(d.T.S);d=d.copyParts(b,d,h);c=z.hf();Ef(b,c);var e=c.x+c.width/2,g=c.y+c.height/2;z.Jc(c);var k=a.di;c=new ta(B,Object);var l=z.O();for(b=b.k;b.next();){var m=b.value;if(m.Td()&&m.canCopy()){var n=m.location,m=d.Ba(m);l.q(k.x-(e-n.x),k.y-(g-n.y));m.location=l;m.pi();c.add(m,nf(l))}}z.B(l);for(d=d.k;d.next();)e=d.value,e instanceof E&&e.canCopy()&&c.add(e,nf());a.gd=c;hf(a,c.al());a.kc!==q&&(c=a.kc,
d=c.Ni(),c.Sk(a.di.x-(d.x+d.width/2),a.di.y-(d.y+d.height/2)))}}}
function Pf(){0<arguments.length&&z.m("LinkingBaseTool constructor cannot take any arguments.");cf.call(this);this.Lx=100;this.tx=s;var a=new E;a.Ro="PATH";var b=new V;b.rh=h;b.name="PATH";b.stroke="blue";a.add(b);b=new V;b.vm="Standard";b.fill="blue";a.add(b);a.Ud="Tool";this.iy=a;a=new D;b=new V;b.Xd="";b.Cb="Rectangle";b.fill=q;b.stroke="magenta";b.pb=2;b.Fa=N.nw;a.add(b);a.Ij=s;a.Ud="Tool";this.gy=a;this.hy=b;a=new D;b=new V;b.Xd="";b.Cb="Rectangle";b.fill=q;b.stroke="magenta";b.pb=2;b.Fa=N.nw;
a.add(b);a.Ij=s;a.Ud="Tool";this.jy=a;this.ky=b;this.Kx=this.Jx=this.Ex=this.Dx=this.Fx=q;this.Mp=h;this.zF=new ta(U,"boolean");this.vB=this.gB=this.ay=q}z.ea("LinkingBaseTool",Pf);z.Pa(Pf,cf);Pf.prototype.doStop=function(){var a=this.h;a!==q&&of(a);this.fg=this.eg=this.dg=this.cg=this.Vb=q;this.Wv.clear();this.gf=q};z.g(Pf,"portGravity",Pf.prototype.QD);z.defineProperty(Pf,{QD:"portGravity"},w("Lx"),function(a){this.Lx!==a&&(x&&z.j(a,"number",Pf,"portGravity"),this.Lx=a)});
z.g(Pf,"isUnconnectedLinkValid",Pf.prototype.to);z.defineProperty(Pf,{to:"isUnconnectedLinkValid"},w("tx"),function(a){this.tx!==a&&(x&&z.j(a,"boolean",Pf,"isUnconnectedLinkValid"),this.tx=a)});z.g(Pf,"temporaryLink",Pf.prototype.jg);z.defineProperty(Pf,{jg:"temporaryLink"},w("iy"),function(a){this.iy!==a&&(x&&z.l(a,E,Pf,"temporaryLink"),this.iy=a)});z.g(Pf,"temporaryFromNode",Pf.prototype.jf);
z.defineProperty(Pf,{jf:"temporaryFromNode"},w("gy"),function(a){this.gy!==a&&(x&&z.l(a,D,Pf,"temporaryFromNode"),this.gy=a)});z.g(Pf,"temporaryFromPort",Pf.prototype.tm);z.defineProperty(Pf,{tm:"temporaryFromPort"},w("hy"),function(a){this.hy!==a&&(x&&z.l(a,U,Pf,"temporaryFromPort"),this.hy=a)});z.g(Pf,"temporaryToNode",Pf.prototype.kf);z.defineProperty(Pf,{kf:"temporaryToNode"},w("jy"),function(a){this.jy!==a&&(x&&z.l(a,D,Pf,"temporaryToNode"),this.jy=a)});z.g(Pf,"temporaryToPort",Pf.prototype.um);
z.defineProperty(Pf,{um:"temporaryToPort"},w("ky"),function(a){this.ky!==a&&(x&&z.l(a,U,Pf,"temporaryToPort"),this.ky=a)});z.g(Pf,"originalLink",Pf.prototype.Vb);z.defineProperty(Pf,{Vb:"originalLink"},w("Fx"),function(a){this.Fx!==a&&(x&&a!==q&&z.l(a,E,Pf,"originalLink"),this.Fx=a)});z.g(Pf,"originalFromNode",Pf.prototype.cg);z.defineProperty(Pf,{cg:"originalFromNode"},w("Dx"),function(a){this.Dx!==a&&(x&&a!==q&&z.l(a,D,Pf,"originalFromNode"),this.Dx=a)});z.g(Pf,"originalFromPort",Pf.prototype.dg);
z.defineProperty(Pf,{dg:"originalFromPort"},w("Ex"),function(a){this.Ex!==a&&(x&&a!==q&&z.l(a,U,Pf,"originalFromPort"),this.Ex=a)});z.g(Pf,"originalToNode",Pf.prototype.eg);z.defineProperty(Pf,{eg:"originalToNode"},w("Jx"),function(a){this.Jx!==a&&(x&&a!==q&&z.l(a,D,Pf,"originalToNode"),this.Jx=a)});z.g(Pf,"originalToPort",Pf.prototype.fg);z.defineProperty(Pf,{fg:"originalToPort"},w("Kx"),function(a){this.Kx!==a&&(x&&a!==q&&z.l(a,U,Pf,"originalToPort"),this.Kx=a)});
z.defineProperty(Pf,{Ee:"isForwards"},w("Mp"),ba("Mp"));z.A(Pf,{Wv:"validPortsCache"},w("zF"));z.g(Pf,"targetPort",Pf.prototype.gf);z.defineProperty(Pf,{gf:"targetPort"},w("ay"),function(a){this.ay!==a&&(x&&a!==q&&z.l(a,U,Pf,"targetPort"),this.ay=a)});Pf.prototype.copyPortProperties=function(a,b,c,d,e){if(!(a===q||b===q||c===q||d===q)){d.Fa=b.ya.size;e?(d.qb=b.qb,d.wm=b.wm):(d.mb=b.mb,d.am=b.am);c.af=cc;var g=z.O();c.location=b.nb(cc,g);z.B(g);d.angle=b.Nk();this.ts!==q&&this.ts(a,b,c,d,e)}};
Pf.prototype.setNoTargetPortProperties=function(a,b,c){b!==q&&(b.Fa=N.nw,b.mb=Wb,b.qb=Wb);a!==q&&(a.location=this.h.T.S);this.ts!==q&&this.ts(q,q,a,b,c)};Pf.prototype.doMouseDown=function(){this.oa&&this.doMouseMove()};
Pf.prototype.doMouseMove=function(){if(this.oa){var a=this.h;if(a!==q){this.gf=this.findTargetPort(this.Ee);if(this.gf!==q){var b=this.gf.Z;if(b instanceof D){this.Ee?this.copyPortProperties(b,this.gf,this.kf,this.um,h):this.copyPortProperties(b,this.gf,this.jf,this.tm,s);a.oc();return}}this.Ee?this.setNoTargetPortProperties(this.kf,this.um,h):this.setNoTargetPortProperties(this.jf,this.tm,s);a.oc();(a.Se||a.Te)&&Lf(a,a.T.S)}}};
Pf.prototype.findValidLinkablePort=function(a,b){if(a===q)return q;var c=a.Z;if(!(c instanceof D))return q;for(;a!==q;){var d=b?a.aA:a.Uy;if(d===h&&(a.Xd!==q||a instanceof D)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===s)break;a=a.ha}return q};
Pf.prototype.findTargetPort=function(a){var b=this.h,c=b.T.S,d=this.QD;0>=d&&(d=0.1);for(var e=this,g=b.fo(c,d,function(b){return e.findValidLinkablePort(b,a)},q,h),d=Infinity,b=q,g=g.k;g.next();){var k=g.value,l=k.Z;if(l instanceof D){var m=k.nb(cc,z.O()),n=c.x-m.x,p=c.y-m.y;z.B(m);m=n*n+p*p;m<d&&(n=this.Wv.Ba(k),n!==q?n&&(b=k,d=m):a&&this.isValidLink(this.cg,this.dg,l,k)||!a&&this.isValidLink(l,k,this.eg,this.fg)?(this.Wv.add(k,h),b=k,d=m):this.Wv.add(k,s))}}return b!==q&&(c=b.Z,c instanceof D&&
(c.layer===q||c.layer.Ll))?b:q};Pf.prototype.isValidFrom=function(a,b){if(a===q||b===q)return this.to;if(this.h.Ra===this&&(a.layer!==q&&!a.layer.Ll||b.Uy!==h))return s;var c=b.SC;if(Infinity>c){if(this.Vb!==q&&a===this.cg&&b===this.dg)return h;var d=b.Xd;d===q&&(d="");if(a.ev(d).count>=c)return s}return h};
Pf.prototype.isValidTo=function(a,b){if(a===q||b===q)return this.to;if(this.h.Ra===this&&(a.layer!==q&&!a.layer.Ll||b.aA!==h))return s;var c=b.DE;if(Infinity>c){if(this.Vb!==q&&a===this.eg&&b===this.fg)return h;var d=b.Xd;d===q&&(d="");if(a.Wf(d).count>=c)return s}return h};Pf.prototype.isInSameNode=function(a,b){if(a===q||b===q)return s;if(a===b)return h;var c=a.Z,d=b.Z;return c!==q&&c===d};
Pf.prototype.isLinked=function(a,b){if(a===q||b===q)return s;var c=a.Z;if(!(c instanceof D))return s;var d=a.Xd;d===q&&(d="");var e=b.Z;if(!(e instanceof D))return s;var g=b.Xd;g===q&&(g="");for(e=e.Wf(g);e.next();)if(g=e.value,g.da===c&&g.wf===d)return h;return s};
Pf.prototype.isValidLink=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==q&&d!==q&&((!b.RC||!d.CE)&&this.isInSameNode(b,d)||(!b.QC||!d.BE)&&this.isLinked(b,d))||this.Vb!==q&&(a!==q&&Qf(this,a,this.Vb)||c!==q&&Qf(this,c,this.Vb))||a!==q&&c!==q&&(a.data===q&&c.data!==q||a.data!==q&&c.data===q)||!$f(this,a,c,this.Vb)?s:this.jz!==q?this.jz(a,b,c,d,this.Vb):h};
function Qf(a,b,c){if(b===q)return s;var d=b.Yc;if(d===q)return s;if(d===c)return h;var e=new va(D);e.add(b);return ag(a,d,c,e)}function ag(a,b,c,d){if(b===c)return h;var e=b.da;if(e!==q&&e.vi&&(d.add(e),ag(a,e.Yc,c,d)))return h;b=b.ja;return b!==q&&b.vi&&(d.add(b),ag(a,b.Yc,c,d))?h:s}
function $f(a,b,c,d){if(b===q||c===q)return s;var e=a.h.RE;if(e!==bg){if(e===cg){if(d!==q&&!d.mc)return h;for(e=c.rd;e.next();){var g=e.value;if(g!==d&&g.mc&&g.ja===c)return s}return!dg(a,b,c,d,h)}if(e===eg){if(d!==q&&!d.mc)return h;for(e=b.rd;e.next();)if(g=e.value,g!==d&&g.mc&&g.da===b)return s;return!dg(a,b,c,d,h)}if(e===fg)return b===c?a=h:(e=new va(D),e.add(c),a=gg(a,e,b,c,d)),!a;if(e===hg)return!dg(a,b,c,d,s);if(e===ig)return b===c?a=h:(e=new va(D),e.add(c),a=jg(a,e,b,c,d)),!a}return h}
function dg(a,b,c,d,e){if(b===c)return h;if(b===q||c===q)return s;for(var g=b.rd;g.next();){var k=g.value;if(k!==d&&(!e||k.mc)&&k.ja===b)if(k=k.da,k!==b&&dg(a,k,c,d,e))return h}return s}function gg(a,b,c,d,e){if(c===d)return h;if(c===q||d===q||b.contains(c))return s;b.add(c);for(var g=c.rd;g.next();){var k=g.value;if(k!==e&&k.ja===c&&(k=k.da,k!==c&&gg(a,b,k,d,e)))return h}return s}
function jg(a,b,c,d,e){if(c===d)return h;if(c===q||d===q||b.contains(c))return s;b.add(c);for(var g=c.rd;g.next();){var k=g.value;if(k!==e){var l=k.da,k=k.ja,l=l===c?k:l;if(l!==c&&jg(a,b,l,d,e))return h}}return s}z.g(Pf,"linkValidation",Pf.prototype.jz);z.defineProperty(Pf,{jz:"linkValidation"},w("gB"),function(a){a!==q&&z.j(a,"function",Pf,"linkValidation");this.gB=a});z.g(Pf,"portTargeted",Pf.prototype.ts);
z.defineProperty(Pf,{ts:"portTargeted"},w("vB"),function(a){a!==q&&z.j(a,"function",Pf,"portTargeted");this.vB=a});function Aa(){0<arguments.length&&z.m("LinkingTool constructor cannot take any arguments.");Pf.call(this);this.name="Linking";this.Dw={};this.Cw=q;this.pa=kg;this.Wx=this.Vx=q}z.ea("LinkingTool",Aa);z.Pa(Aa,Pf);var kg;Aa.Either=kg=z.w(Aa,"Either",0);var lg;Aa.ForwardsOnly=lg=z.w(Aa,"ForwardsOnly",0);var mg;Aa.BackwardsOnly=mg=z.w(Aa,"BackwardsOnly",0);z.g(Aa,"archetypeLinkData",Aa.prototype.bC);
z.defineProperty(Aa,{bC:"archetypeLinkData"},w("Dw"),function(a){this.Dw!==a&&(a!==q&&z.l(a,Object,Aa,"archetypeLinkData"),this.Dw=a)});z.g(Aa,"archetypeLabelNodeData",Aa.prototype.aC);
z.defineProperty(Aa,{aC:"archetypeLabelNodeData"},w("Cw"),function(a){if(this.Cw!==a){a!==q&&z.l(a,Object,Aa,"archetypeLabelNodeData");var b=this.h;b!==q&&(b=b.ga,b instanceof T&&!(a instanceof D)&&!b.ez(a)&&z.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Cw=a}});z.g(Aa,"direction",Aa.prototype.direction);
z.defineProperty(Aa,{direction:"direction"},w("pa"),function(a){this.pa!==a&&(x&&z.wb(a,Aa,Aa,"direction"),this.pa=a)});z.g(Aa,"startObject",Aa.prototype.Uz);z.defineProperty(Aa,{Uz:"startObject"},w("Vx"),function(a){this.Vx!==a&&(x&&a!==q&&z.l(a,U,Aa,"startObject"),this.Vx=a)});z.A(Aa,{Rv:"startPort"},w("Wx"));
Aa.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||(a.fb||a.Fe)||!a.Ll)return s;var b=a.ga;return b===q||!(b instanceof T)&&!(b instanceof Ld)||!a.T.left||a.Ra!==this&&!this.isBeyondDragSize()?s:this.findLinkablePort()!==q};
Aa.prototype.findLinkablePort=function(){var a=this.h;if(a===q)return q;var b=this.Uz;b===q&&(b=a.od(a.Ac.S,q,q));if(b===q||!(b.Z instanceof D))return q;var c=this.direction;if(c===kg||c===lg)if(a=this.findValidLinkablePort(b,s),a!==q)return this.Mp=h,a;if(c===kg||c===mg)if(a=this.findValidLinkablePort(b,h),a!==q)return this.Mp=s,a;return q};
Aa.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Rv===q&&(this.Wx=this.findLinkablePort()),this.Rv!==q)){this.pc(this.name);a.pd=h;a.Wc="pointer";if(this.Ee){this.dg=this.Rv;var b=this.dg.Z;b instanceof D&&(this.cg=b);this.copyPortProperties(this.cg,this.dg,this.jf,this.tm,s)}else this.fg=this.Rv,b=this.fg.Z,b instanceof D&&(this.eg=b),this.copyPortProperties(this.eg,this.fg,this.kf,this.um,h);a.add(this.jf);a.add(this.kf);this.jg!==q&&(this.jf!==q&&(this.jg.da=this.jf),this.kf!==q&&
(this.jg.ja=this.kf),this.jg.bc(),a.add(this.jg));this.oa=h}};Aa.prototype.doDeactivate=function(){this.oa=s;var a=this.h;a!==q&&(a.remove(this.jg),a.remove(this.jf),a.remove(this.kf),a.pd=s,a.Wc="",this.Jj())};Aa.prototype.doStop=function(){Pf.prototype.doStop.call(this);this.Uz=this.Wx=q};
Aa.prototype.doMouseUp=function(){if(this.oa){var a=this.h;if(a===q)return;var b=this.Ke=q,c=q,d=q,e=q,g=this.gf=this.findTargetPort(this.Ee),k=q;g!==q?(k=g.Z,k instanceof D&&(this.Ee?(this.cg!==q&&(b=this.cg,c=this.dg),d=k,e=g):(b=k,c=g,this.eg!==q&&(d=this.eg,e=this.fg)))):this.Ee?this.cg!==q&&this.to&&(b=this.cg,c=this.dg):this.eg!==q&&this.to&&(d=this.eg,e=this.fg);if(b!==q||d!==q)b=this.insertLink(b,c,d,e),b!==q?(g===q&&(this.Ee?b.zG=a.T.S:b.rG=a.T.S),a.te&&a.select(b),this.Ke=this.name,a.Ja("LinkDrawn",
b)):a.ga.kC()}this.stopTool()};
Aa.prototype.insertLink=function(a,b,c,d){var e=this.h;if(e===q)return q;var g=e.ga;if(g===q)return q;if(g instanceof Ld){if(b=a,d=c,e.Mc||(b=c,d=a),b!==q&&d!==q)return g.Cf(d.data,g.xb(b.data)),d.Qr()}else if(g instanceof T){b===q&&(b=a);b=b.Xd;b===q&&(b="");d===q&&(d=c);var k=d.Xd;k===q&&(k="");d=this.bC;if(d instanceof E){if(Pe(d),g=d.copy(),g instanceof E)return g.da=a,g.wf=b,g.ja=c,g.lg=k,e.add(g),g}else if(d!==q&&(d=g.sC(d),z.yb(d)))return g.Mv(d,g.xb(a.data)),g.Bs(d,b),g.Nv(d,g.xb(c.data)),
g.Es(d,k),g.YB(d),a=this.aC,a!==q&&g.ez(a)&&(a=g.vj(a),z.yb(a)&&(g.wr(a),a=g.xb(a),a!==f&&g.XB(d,a))),g=e.vf(d)}return q};function ng(){0<arguments.length&&z.m("RelinkingTool constructor cannot take any arguments.");Pf.call(this);this.name="Relinking";var a=new V;a.Cb="Diamond";a.Fa=N.jA;a.fill="cyan";a.cursor="pointer";a.ef=0;this.VA=a;a=new V;a.Cb="Diamond";a.Fa=N.jA;a.fill="cyan";a.cursor="pointer";a.ef=-1;this.MB=a;this.Tb=q;this.tB=new H}z.ea("RelinkingTool",ng);z.Pa(ng,Pf);
ng.prototype.updateAdornments=function(a){if(a instanceof E){var b=q,c="RelinkFrom";if(a.$a){var d=a.pm;a.ya.W()&&(d!==q&&a.Db()&&a.canRelinkFrom()&&d.Rk()&&d.ya.W())&&(b=a.bo(c),b===q&&(b=this.makeAdornment(d,s),b.Ic=c),b!==q&&b.ca());a.Bk(c,b)}else a.Wk(c);b=q;c="RelinkTo";a.$a?(d=a.pm,a.ya.W()&&(d!==q&&a.Db()&&a.canRelinkTo()&&d.Rk()&&d.ya.W())&&(b=a.bo(c),b===q&&(b=this.makeAdornment(d,h),b.Ic=c,b.gm=h),b!==q&&b.ca()),a.Bk(c,b)):a.Wk(c)}};
ng.prototype.makeAdornment=function(a,b){var c=new Ne;c.type=ug;var d=b?this.eI:this.VG;d!==q&&c.add(d.copy());c.Hc=a;return c};z.defineProperty(ng,{VG:"fromHandleArchetype"},w("VA"),function(a){a&&z.l(a,U,ng,"fromHandleArchetype");this.VA=a});z.defineProperty(ng,{eI:"toHandleArchetype"},w("MB"),function(a){a&&z.l(a,U,ng,"toHandleArchetype");this.MB=a});z.A(ng,{handle:"handle"},w("Tb"));
ng.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||(a.fb||a.Fe)||!a.qj)return s;var b=a.ga;if(b===q||!(b instanceof T)&&!(b instanceof Ld)||!a.T.left)return s;b=this.findToolHandleAt(a.Ac.S,"RelinkFrom");b===q&&(b=this.findToolHandleAt(a.Ac.S,"RelinkTo"));return b!==q};
ng.prototype.doActivate=function(){var a=this.h;if(a!==q){if(this.Vb===q){var b=this.findToolHandleAt(a.Ac.S,"RelinkFrom");b===q&&(b=this.findToolHandleAt(a.Ac.S,"RelinkTo"));if(b===q)return;var c=b.Z;if(!(c instanceof Ne)||!(c.nj instanceof E))return;this.Tb=b;this.Mp=c===q||"RelinkTo"===c.Ic;this.Vb=c.nj}this.pc(this.name);a.pd=h;a.Wc="pointer";this.dg=this.Vb.Kc;this.cg=this.Vb.da;this.fg=this.Vb.td;this.eg=this.Vb.ja;this.tB.set(this.Vb.ya);this.Vb!==q&&0<this.Vb.ta&&(this.Vb.da===q&&(this.tm!==
q&&(this.tm.Fa=N.Os),this.jf!==q&&(this.jf.location=this.Vb.o(0))),this.Vb.ja===q&&(this.um!==q&&(this.um.Fa=N.Os),this.kf!==q&&(this.kf.location=this.Vb.o(this.Vb.ta-1))));this.copyPortProperties(this.cg,this.dg,this.jf,this.tm,s);this.copyPortProperties(this.eg,this.fg,this.kf,this.um,h);a.add(this.jf);a.add(this.kf);this.jg!==q&&(this.jf!==q&&(this.jg.da=this.jf),this.kf!==q&&(this.jg.ja=this.kf),this.jg.bc(),a.add(this.jg));this.oa=h}};
ng.prototype.doDeactivate=function(){this.oa=s;var a=this.h;a!==q&&(a.remove(this.jg),a.remove(this.jf),a.remove(this.kf),a.pd=s,a.Wc="",this.Jj())};ng.prototype.doStop=function(){Pf.prototype.doStop.call(this);this.Tb=q};
ng.prototype.doMouseUp=function(){if(this.oa){var a=this.h;if(a===q)return;this.Ke=q;var b=this.cg,c=this.dg,d=this.eg,e=this.fg,g=this.Vb;this.gf=this.findTargetPort(this.Ee);if(this.gf!==q){var k=this.gf.Z;k instanceof D&&(this.Ee?(d=k,e=this.gf):(b=k,c=this.gf))}else this.to?this.Ee?e=d=q:c=b=q:g=q;g!==q&&(this.reconnectLink(g,this.Ee?d:b,this.Ee?e:c,this.Ee),this.gf===q&&(this.Ee?g.zG=a.T.S:g.rG=a.T.S,g.bc()),a.te&&(g.$a=h),this.Ke=this.name,a.Ja("LinkRelinked",g,this.Ee?this.fg:this.dg));vg(this.Vb,
this.tB)}this.stopTool()};ng.prototype.reconnectLink=function(a,b,c,d){var e=this.h;if(e===q)return s;var g=b!==q?b.data:q,g=g!==q?e.ga.xb(g):f,k=c.Xd!==q?c.Xd:"",l=a.data;if(l!==q&&g!==f)if(c=e.ga,c instanceof Ld)e=e.Mc,k=a.da,g=a.ja,e||(k=a.ja,g=a.da),a=k,k=g,d&&e||!d&&!e?(k=b,c.Cf(g.data,f),c.Cf(k.data,c.xb(a.data))):c.Cf(g.data,c.xb(b.data));else if(c instanceof T)d?(c.Nv(l,g),c.Es(l,k)):(c.Mv(l,g),c.Bs(l,k));else return s;else d?(this.Vb.ja=b,this.Vb.lg=k):(this.Vb.da=b,this.Vb.wf=k);return h};
function wg(){0<arguments.length&&z.m("LinkReshapingTool constructor cannot take any arguments.");cf.call(this);this.name="LinkReshaping";var a=new V;a.Cb="Rectangle";a.Fa=N.Am;a.fill="cyan";this.ik=a;a=new V;a.Cb="Diamond";a.Fa=N.Am;a.fill="cyan";this.iB=a;this.xB=3;this.Aw=this.Tb=q;this.uB=new G;this.Hx=q}z.ea("LinkReshapingTool",wg);z.Pa(wg,cf);var xg;wg.None=xg=z.w(wg,"None",0);var yg;wg.Horizontal=yg=z.w(wg,"Horizontal",1);var zg;wg.Vertical=zg=z.w(wg,"Vertical",2);var Ag;
wg.All=Ag=z.w(wg,"All",3);wg.prototype.updateAdornments=function(a){if(a instanceof E){var b=q;if(a.$a){var c=a.path;a.ya.W()&&(c!==q&&a.Db()&&a.canReshape()&&c.Rk()&&c.ya.W())&&(b=a.bo(this.name),b===q&&(b=this.makeAdornment(c),b.Ic=this.name,b.gm=h),b!==q&&(b.location=a.position,b.ca()));a.Bk(this.name,b)}else a.Wk(this.name)}};
wg.prototype.makeAdornment=function(a){var b=new Ne;b.type=ug;var c=a.Z,d=c.ta,e=c.Ob;if(c.points!==q&&1<d){var d=c.Rr,g=c.vv,k=e?1:0;if(c.Fv&&c.Xe!==Bg)for(var l=d+k;l<g-k;l++){var m=this.makeResegmentHandle(a,l);m!==q&&(m.ef=l,m.zs=0.5,b.add(m))}for(l=d+1;l<g;l++)if(m=this.makeHandle(a,l),m!==q){m.ef=l;if(l!==d)if(l===d+1&&e){var k=c.o(d),n=c.o(d+1);N.I(k.x,n.x)&&N.I(k.y,n.y)&&(n=c.o(d-1));N.I(k.x,n.x)?(m.Mo=zg,m.cursor="n-resize"):N.I(k.y,n.y)&&(m.Mo=yg,m.cursor="w-resize")}else l===g-1&&e?(k=
c.o(g-1),n=c.o(g),N.I(k.x,n.x)&&N.I(k.y,n.y)&&(k=c.o(g+1)),N.I(k.x,n.x)?(m.Mo=zg,m.cursor="n-resize"):N.I(k.y,n.y)&&(m.Mo=yg,m.cursor="w-resize")):l!==g&&(m.Mo=Ag,m.cursor="move");b.add(m)}b.Hc=a}return b};wg.prototype.makeHandle=function(){var a=this.Ur;return a===q?q:a.copy()};z.defineProperty(wg,{Ur:"handleArchetype"},w("ik"),function(a){a&&z.l(a,U,wg,"handleArchetype");this.ik=a});wg.prototype.makeResegmentHandle=function(){var a=this.yH;return a===q?q:a.copy()};
z.defineProperty(wg,{yH:"midHandleArchetype"},w("iB"),function(a){a&&z.l(a,U,wg,"midHandleArchetype");this.iB=a});z.A(wg,{handle:"handle"},w("Tb"));z.A(wg,{zr:"adornedLink"},w("Aw"));wg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.fb||!a.Mn?s:this.findToolHandleAt(a.Ac.S,this.name)!==q};
wg.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Tb=this.findToolHandleAt(a.Ac.S,this.name),this.Tb!==q)){var b=this.Tb.Z.nj;if(b instanceof E){this.Aw=b;a.pd=h;this.pc(this.name);if(b.Fv&&0.5===this.Tb.zs){var c=b.points.copy(),d=this.Tb.nb(cc);c.Ed(this.Tb.ef+1,d);b.Ob&&c.Ed(this.Tb.ef+1,d);b.points=c;b.ge();b.updateAdornments();this.Tb=this.findToolHandleAt(a.Ac.S,this.name)}this.uB=b.o(this.Tb.ef);this.Hx=b.points.copy();this.oa=h}}};
wg.prototype.doDeactivate=function(){this.Jj();this.Aw=this.Tb=q;var a=this.h;a!==q&&(a.pd=s);this.oa=s};wg.prototype.doCancel=function(){var a=this.zr;a!==q&&(a.points=this.Hx);this.stopTool()};wg.prototype.doMouseMove=function(){var a=this.h;this.oa&&a!==q&&(a=this.computeReshape(a.T.S),this.reshape(a))};
wg.prototype.doMouseUp=function(){var a=this.h;if(this.oa&&a!==q){var b=this.computeReshape(a.T.S);this.reshape(b);b=this.zr;if(b!==q&&b.Fv){var c=this.handle.ef,d=b.o(c-1),e=b.o(c),g=b.o(c+1);if(b.Ob){if(c>b.Rr+1&&c<b.vv-1){var k=b.o(c-2);if(Math.abs(d.x-e.x)<this.wh&&Math.abs(d.y-e.y)<this.wh&&(Cg(this,k,d,e,g,h)||Cg(this,k,d,e,g,s))){var l=b.points.copy();Cg(this,k,d,e,g,h)?(l.gg(c-2,new G(k.x,(g.y+k.y)/2)),l.gg(c+1,new G(g.x,(g.y+k.y)/2))):(l.gg(c-2,new G((g.x+k.x)/2,k.y)),l.gg(c+1,new G((g.x+
k.x)/2,g.y)));l.sd(c);l.sd(c-1);b.points=l;b.ge();b.updateAdornments()}else if(k=b.o(c+2),Math.abs(e.x-g.x)<this.wh&&Math.abs(e.y-g.y)<this.wh&&(Cg(this,d,e,g,k,h)||Cg(this,d,e,g,k,s)))l=b.points.copy(),Cg(this,d,e,g,k,h)?(l.gg(c-1,new G(d.x,(d.y+k.y)/2)),l.gg(c+2,new G(k.x,(d.y+k.y)/2))):(l.gg(c-1,new G((d.x+k.x)/2,d.y)),l.gg(c+2,new G((d.x+k.x)/2,k.y))),l.sd(c+1),l.sd(c),b.points=l,b.ge(),b.updateAdornments()}}else k=z.O(),N.ns(d.x,d.y,g.x,g.y,e.x,e.y,k)&&9>k.Lk(e)&&(l=b.points.copy(),l.sd(c),b.points=
l,b.ge(),b.updateAdornments()),z.B(k)}a.vc();this.Ke=this.name;a.Ja("LinkReshaped",this.zr)}this.stopTool()};function Cg(a,b,c,d,e,g){return g?Math.abs(b.y-c.y)<a.wh&&Math.abs(c.y-d.y)<a.wh&&Math.abs(d.y-e.y)<a.wh:Math.abs(b.x-c.x)<a.wh&&Math.abs(c.x-d.x)<a.wh&&Math.abs(d.x-e.x)<a.wh}z.g(cf,"resegmentingDistance",cf.prototype.wh);z.defineProperty(cf,{wh:"resegmentingDistance"},w("xB"),ba("xB"));
wg.prototype.reshape=function(a){var b=this.zr;b.Zk();var c=this.handle.ef,d=this.handle.Mo;if(b.Ob)if(c===b.Rr+1)c=b.Rr+1,d===zg?(b.U(c,b.o(c-1).x,a.y),b.U(c+1,b.o(c+2).x,a.y)):d===yg&&(b.U(c,a.x,b.o(c-1).y),b.U(c+1,a.x,b.o(c+2).y));else if(c===b.vv-1)c=b.vv-1,d===zg?(b.U(c-1,b.o(c-2).x,a.y),b.U(c,b.o(c+1).x,a.y)):d===yg&&(b.U(c-1,a.x,b.o(c-2).y),b.U(c,a.x,b.o(c+1).y));else{var d=c,e=b.o(d),g=b.o(d-1),k=b.o(d+1);N.I(g.x,e.x)&&N.I(e.y,k.y)?(N.I(g.x,b.o(d-2).x)&&!N.I(g.y,b.o(d-2).y)?(b.C(d,a.x,g.y),
c++,d++):b.U(d-1,a.x,g.y),N.I(k.y,b.o(d+2).y)&&!N.I(k.x,b.o(d+2).x)?b.C(d+1,k.x,a.y):b.U(d+1,k.x,a.y)):N.I(g.y,e.y)&&N.I(e.x,k.x)?(N.I(g.y,b.o(d-2).y)&&!N.I(g.x,b.o(d-2).x)?(b.C(d,g.x,a.y),c++,d++):b.U(d-1,g.x,a.y),N.I(k.x,b.o(d+2).x)&&!N.I(k.y,b.o(d+2).y)?b.C(d+1,a.x,k.y):b.U(d+1,a.x,k.y)):N.I(g.x,e.x)&&N.I(e.x,k.x)?(N.I(g.x,b.o(d-2).x)&&!N.I(g.y,b.o(d-2).y)?(b.C(d,a.x,g.y),c++,d++):b.U(d-1,a.x,g.y),N.I(k.x,b.o(d+2).x)&&!N.I(k.y,b.o(d+2).y)?b.C(d+1,a.x,k.y):b.U(d+1,a.x,k.y)):N.I(g.y,e.y)&&N.I(e.y,
k.y)&&(N.I(g.y,b.o(d-2).y)&&!N.I(g.x,b.o(d-2).x)?(b.C(d,g.x,a.y),c++,d++):b.U(d-1,g.x,a.y),N.I(k.y,b.o(d+2).y)&&!N.I(k.x,b.o(d+2).x)?b.C(d+1,k.x,a.y):b.U(d+1,k.x,a.y));b.U(c,a.x,a.y)}else b.U(c,a.x,a.y),1===c&&Sb(b.computeSpot(h))&&(g=b.da,k=b.Kc,d=k.nb(cc,z.O()),e=z.O(),g=b.getLinkPointFromPoint(g,k,d,a,h,e),b.U(0,g.x,g.y),z.B(d),z.B(e)),c===b.ta-2&&Sb(b.computeSpot(s))&&(c=b.ja,g=b.td,d=g.nb(cc,z.O()),e=z.O(),g=b.getLinkPointFromPoint(c,g,d,a,s,e),b.U(b.ta-1,g.x,g.y),z.B(d),z.B(e));b.li()};
wg.prototype.computeReshape=function(a){var b=this.zr,c=this.handle.ef;switch(this.handle.Mo){case Ag:return a;case zg:return b=b.o(c),new G(b.x,a.y);case yg:return b=b.o(c),new G(a.x,b.y);default:case xg:return b.o(c)}};z.g(wg,"originalPoint",wg.prototype.GH);z.A(wg,{GH:"originalPoint"},w("uB"));z.g(wg,"originalPoints",wg.prototype.HH);z.A(wg,{HH:"originalPoints"},w("Hx"));
function Dg(){0<arguments.length&&z.m("ResizingTool constructor cannot take any arguments.");cf.call(this);this.name="Resizing";this.Nd=(new qa(1,1)).freeze();this.Xi=(new qa(9999,9999)).freeze();this.Ei=(new qa(NaN,NaN)).freeze();this.ql=s;this.Qa=q;var a=new V;a.oj=cc;a.Cb="Rectangle";a.Fa=N.Am;a.fill="cyan";a.stroke="black";a.pb=1;a.cursor="pointer";this.ik=a;this.Tb=q;this.sn=0;this.sF=new H;this.du=new qa;this.Gx=new G;this.Zw=new qa(0,0);this.Yw=new qa(Infinity,Infinity);this.Xw=new qa(1,1)}
z.ea("ResizingTool",Dg);z.Pa(Dg,cf);Dg.prototype.updateAdornments=function(a){if(!(a===q||a instanceof E)){var b=q;if(a.$a){var c=a.bE;if(a.canResize()&&(c!==q&&a.ya.W()&&a.Db()&&c.Rk()&&c.ya.W())&&(b=a.bo(this.name),b===q&&(b=this.makeAdornment(c),b.gm=h,b.af=cc),b!==q)){var d=c.Nk();b.angle=d;var e=c.nb(cc,z.O()),g=c.Dj();b.location=e;z.B(e);e=b.placeholder;if(e!==q){var c=c.Ma,k=z.$k();k.q(c.width*g,c.height*g);e.Fa=k;z.Cj(k)}Eg(this,b,d)}a.Bk(this.name,b)}else a.Wk(this.name)}};
Dg.prototype.makeAdornment=function(a){var b=q,b=a.Z.$D;if(b===q){b=new Ne;b.type=Fg;var c=new Gg;c.rh=h;b.add(c);b.add(this.makeHandle(a,$b));b.add(this.makeHandle(a,bc));b.add(this.makeHandle(a,gc));b.add(this.makeHandle(a,dc));b.add(this.makeHandle(a,hc));b.add(this.makeHandle(a,jc));b.add(this.makeHandle(a,kc));b.add(this.makeHandle(a,ic))}else if(Pe(b),b=b.copy(),!(b instanceof Ne))return q;b.Ic=this.name;b.Hc=a;return b};
Dg.prototype.makeHandle=function(a,b){var c=this.Ur;if(c===q)return q;c=c.copy();c.alignment=b;return c};
function Eg(a,b,c){if(b!==q)if(!Vb(b.alignment)&&""!==b.cursor)a:{a=b.alignment;Sb(a)&&(a=cc);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof F)for(b=b.elements;b.next();)Eg(a,b.value,
c)}z.defineProperty(Dg,{Ur:"handleArchetype"},w("ik"),function(a){a&&z.l(a,U,Dg,"handleArchetype");this.ik=a});z.A(Dg,{handle:"handle"},w("Tb"));z.defineProperty(Dg,{Hc:"adornedObject"},w("Qa"),function(a){a&&z.l(a,U,Dg,"adornedObject");this.Qa=a});Dg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.fb||!a.Nn||!a.T.left?s:this.findToolHandleAt(a.Ac.S,this.name)!==q?h:s};
Dg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.Tb=this.findToolHandleAt(a.Ac.S,this.name),this.Tb!==q&&(this.Qa=this.Tb.Z.Hc,this.sn=this.Qa.angle,this.sF.set(this.Qa.Ma),this.Gx.set(this.Qa.Z.location),this.du.set(this.Qa.Fa),this.Xw=this.computeCellSize(),this.Zw=this.computeMinSize(),this.Yw=this.computeMaxSize(),a.pd=h,this.pc(this.name),this.oa=h))};Dg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.Jj(),this.Qa=this.Tb=q,this.oa=a.pd=s)};
Dg.prototype.doCancel=function(){this.Qa.Fa=this.du;this.Qa.Z.location=this.Gx;this.stopTool()};Dg.prototype.doMouseMove=function(){var a=this.h;if(this.oa&&a!==q){var b=this.Zw,c=this.Yw,d=this.Xw,e=this.Qa.VC(a.T.S,z.O()),g=this.Qa.jv;g===Hg&&(g=this.Qa.Sa.jc);b=this.computeResize(e,this.Tb.alignment,b,c,d,!(g===Ig||g===Jg||a.T.shift));this.resize(b);a.yi();z.B(e)}};
Dg.prototype.doMouseUp=function(){var a=this.h;if(this.oa&&a!==q){var b=this.Zw,c=this.Yw,d=this.Xw,e=this.Qa.VC(a.T.S,z.O()),g=this.Qa.jv;g===Hg&&(g=this.Qa.Sa.jc);b=this.computeResize(e,this.Tb.alignment,b,c,d,!(g===Ig||g===Jg||a.T.shift));this.resize(b);z.B(e);a.vc();this.Ke=this.name;a.Ja("PartResized",this.Qa,this.du)}this.stopTool()};
Dg.prototype.resize=function(a){var b=this.h;if(b!==q){var c=this.Qa.Z,d=c.position.copy(),e=this.Qa.Ma.copy(),g=this.Qa.Nk(),k=this.Qa.Dj();360<=g?g-=360:0>g&&(g+=360);var l=Math.PI*g/180,m=Math.cos(l),l=Math.sin(l),n=a.width-e.width,e=a.height-e.height,p=90<g&&270>g?1:0;d.x+=k*((a.x+n*p)*m-(a.y+e*(0<g&&180>g?1:0))*l);d.y+=k*((a.x+n*(180<g&&360>g?1:0))*l+(a.y+e*p)*m);this.Qa.Fa=a.size;c.pi();c.move(d);b.oc()}};
Dg.prototype.computeResize=function(a,b,c,d,e,g){Sb(b)&&(b=cc);var k=this.Qa.Ma,l=k.x,m=k.y,n=k.x+k.width,p=k.y+k.height,r=1;if(!g){var r=k.width,t=k.height;0>=r&&(r=1);0>=t&&(t=1);r=t/r}t=z.O();N.Qy(a.x,a.y,l,m,e.width,e.height,t);a=k.copy();0>=b.x?0>=b.y?(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=Math.max(n-a.x,c.width),a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,p-c.height),a.height=Math.max(p-a.y,c.height),g||(b=a.height/a.width,r<b?(a.height=r*a.width,a.y=p-a.height):
(a.width=a.height/r,a.x=n-a.width))):1<=b.y?(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=Math.max(n-a.x,c.width),a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(b=a.height/a.width,r<b?a.height=r*a.width:(a.width=a.height/r,a.x=n-a.width))):(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=n-a.x,g||(a.height=r*a.width,a.y=m+0.5*(p-m-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(t.x-l,d.width),c.width),a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,
p-c.height),a.height=Math.max(p-a.y,c.height),g||(b=a.height/a.width,r<b?(a.height=r*a.width,a.y=p-a.height):a.width=a.height/r)):1<=b.y?(a.width=Math.max(Math.min(t.x-l,d.width),c.width),a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(b=a.height/a.width,r<b?a.height=r*a.width:a.width=a.height/r)):(a.width=Math.max(Math.min(t.x-l,d.width),c.width),g||(a.height=r*a.width,a.y=m+0.5*(p-m-a.height))):0>=b.y?(a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,p-c.height),a.height=p-a.y,g||(a.width=
a.height/r,a.x=l+0.5*(n-l-a.width))):1<=b.y&&(a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(a.width=a.height/r,a.x=l+0.5*(n-l-a.width)));z.B(t);return a};Dg.prototype.computeMinSize=function(){var a=this.Qa.Ge.copy(),b=this.Ge;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Dg.prototype.computeMaxSize=function(){var a=this.Qa.le.copy(),b=this.le;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Dg.prototype.computeCellSize=function(){var a=new qa(NaN,NaN),b=this.Qa.Z;if(b){var c=b.aE;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Hk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.h;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.tb.ze,c!==q&&c.ro&&(c=c.Yy,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&
0<c.height)&&(a.height=c.height)),b=b.no,b!==q&&(b.visible&&this.ro)&&(c=b.Tr,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};z.g(Dg,"minSize",Dg.prototype.Ge);
z.defineProperty(Dg,{Ge:"minSize"},w("Nd"),function(a){this.Nd.N(a)||(x&&z.l(a,qa,Dg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Nd.assign(a))});z.g(Dg,"maxSize",Dg.prototype.le);z.defineProperty(Dg,{le:"maxSize"},w("Xi"),function(a){this.Xi.N(a)||(x&&z.l(a,qa,Dg,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.Xi.assign(a))});z.g(Dg,"cellSize",Dg.prototype.Hk);
z.defineProperty(Dg,{Hk:"cellSize"},w("Ei"),function(a){this.Ei.N(a)||(x&&z.l(a,qa,Dg,"cellSize"),this.Ei.assign(a))});z.g(Dg,"isGridSnapEnabled",Dg.prototype.ro);z.defineProperty(Dg,{ro:"isGridSnapEnabled"},w("ql"),function(a){this.ql!==a&&(z.j(a,"boolean",Dg,"isGridSnapEnabled"),this.ql=a)});z.g(Dg,"originalDesiredSize",Dg.prototype.EH);z.A(Dg,{EH:"originalDesiredSize"},w("du"));z.g(Dg,"originalLocation",Dg.prototype.FH);z.A(Dg,{FH:"originalLocation"},w("Gx"));
function Ng(){0<arguments.length&&z.m("RotatingTool constructor cannot take any arguments.");cf.call(this);this.name="Rotating";this.Ux=45;this.Tx=2;this.Qa=q;var a=new V;a.Cb="Ellipse";a.Fa=N.Am;a.fill="yellow";a.stroke="black";a.pb=1;a.cursor="pointer";this.ik=a;this.Tb=q;this.sn=0;this.yB=new G}z.ea("RotatingTool",Ng);z.Pa(Ng,cf);
Ng.prototype.updateAdornments=function(a){if(!(a===q||a instanceof E)){var b=q;if(a.$a){var c=a.fE;if(a.canRotate()&&(c!==q&&a.ya.W()&&a.Db()&&c.Rk()&&c.ya.W())&&(b=a.bo(this.name),b===q&&(b=this.makeAdornment(c),b.gm=h),b!==q)){b.angle=c.Nk();var d=q,e=q;c===a||c===a.Qb?(d=a.Qb,e=a.af):(d=c,e=cc);for(var g=d.Ma,e=z.ic(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==q&&d!==c;)d.transform.Va(e),d=d.ha;d=e.y;g=Math.max(e.x-c.Ma.width,0);b.af=cc;var k=z.O();b.location=c.nb(new O(1,0,50+g,d),k);z.B(k);
z.B(e)}a.Bk(this.name,b)}else a.Wk(this.name)}};Ng.prototype.makeAdornment=function(a){var b=q,b=a.Z.eE;if(b===q){b=new Ne;b.type=Pg;var c=this.Ur;c!==q&&b.add(c.copy())}else if(Pe(b),b=b.copy(),!(b instanceof Ne))return q;b.Ic=this.name;b.Hc=a;return b};z.defineProperty(Ng,{Ur:"handleArchetype"},w("ik"),function(a){a&&z.l(a,U,Ng,"handleArchetype");this.ik=a});z.A(Ng,{handle:"handle"},w("Tb"));z.defineProperty(Ng,{Hc:"adornedObject"},w("Qa"),function(a){a&&z.l(a,U,Ng,"adornedObject");this.Qa=a});
Ng.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.fb||!a.On||!a.T.left?s:this.findToolHandleAt(a.Ac.S,this.name)!==q?h:s};Ng.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Tb=this.findToolHandleAt(a.Ac.S,this.name),this.Tb!==q)){this.Qa=this.Tb.Z.Hc;var b=this.Qa.Z,c=b.Qb;this.yB=this.Qa===b||this.Qa===c?c.nb(b.af):this.Qa.nb(cc);this.sn=this.Qa.angle;a.pd=h;this.pc(this.name);this.oa=h}};
Ng.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.Jj(),this.Qa=this.Tb=q,this.oa=a.pd=s)};Ng.prototype.doCancel=function(){this.rotate(this.sn);this.stopTool()};Ng.prototype.doMouseMove=function(){var a=this.h;this.oa&&a!==q&&(a=this.computeRotate(a.T.S),this.rotate(a))};Ng.prototype.doMouseUp=function(){var a=this.h;if(this.oa&&a!==q){var b=this.computeRotate(a.T.S);this.rotate(b);a.vc();this.Ke=this.name;a.Ja("PartRotated",this.Qa,this.sn)}this.stopTool()};
Ng.prototype.rotate=function(a){z.p(a,Ng,"rotate:newangle");this.Qa!==q&&(this.Qa.angle=a,this.h.oc())};Ng.prototype.computeRotate=function(a){a=this.yB.ni(a);var b=this.Qa.ha;b&&(a-=b.Nk(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.wE),180),c=Math.min(Math.abs(this.vE),b/2);!this.h.T.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};z.g(Ng,"snapAngleMultiple",Ng.prototype.wE);
z.defineProperty(Ng,{wE:"snapAngleMultiple"},w("Ux"),function(a){this.Ux!==a&&(x&&z.j(a,"number",Ng,"snapAngleMultiple"),this.Ux=a)});z.g(Ng,"snapAngleEpsilon",Ng.prototype.vE);z.defineProperty(Ng,{vE:"snapAngleEpsilon"},w("Tx"),function(a){this.Tx!==a&&(x&&z.j(a,"number",Ng,"snapAngleEpsilon"),this.Tx=a)});z.g(Ng,"originalAngle",Ng.prototype.DH);z.A(Ng,{DH:"originalAngle"},w("sn"));
function Qg(){0<arguments.length&&z.m("ClickSelectingTool constructor cannot take any arguments.");cf.call(this);this.name="ClickSelecting"}z.ea("ClickSelectingTool",Qg);z.Pa(Qg,cf);Qg.prototype.canStart=function(){return!this.isEnabled||this.h===q||this.isBeyondDragSize()?s:h};Qg.prototype.doMouseUp=function(){this.oa&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};
function Rg(){0<arguments.length&&z.m("ActionTool constructor cannot take any arguments.");cf.call(this);this.name="Action";this.Cm=q}z.ea("ActionTool",Rg);z.Pa(Rg,cf);Rg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q)return s;var b=a.T,c=a.od(b.S,function(a){for(;a.ha!==q&&!a.Yr;)a=a.ha;return a},function(a){return a.Yr});return c!==q?(this.Cm=c,a.Xn=a.od(b.S,q,q),h):s};
Rg.prototype.doMouseDown=function(){if(this.oa){var a=this.h.T,b=this.Cm;b!==q&&(a.Hd=b,b.sy!==q&&b.sy(a,b))}else this.canStart()&&this.doActivate()};Rg.prototype.doMouseMove=function(){if(this.oa){var a=this.h.T,b=this.Cm;b!==q&&(a.Hd=b,b.ty!==q&&b.ty(a,b))}};Rg.prototype.doMouseUp=function(){if(this.oa){var a=this.h,b=a.T,c=this.Cm;if(c===q)return;b.Hd=c;c.uy!==q&&c.uy(b,c);this.isBeyondDragSize()||df(c,b,a)}this.stopTool()};
Rg.prototype.doCancel=function(){var a=this.h;if(a!==q){var a=a.T,b=this.Cm;if(b===q)return;a.Hd=b;b.qy!==q&&b.qy(a,b)}this.stopTool()};Rg.prototype.doStop=function(){this.Cm=q};function Ca(){0<arguments.length&&z.m("ClickCreatingTool constructor cannot take any arguments.");cf.call(this);this.name="ClickCreating";this.$j=q;this.lx=h;this.UA=new G(0,0)}z.ea("ClickCreatingTool",Ca);z.Pa(Ca,cf);
Ca.prototype.canStart=function(){if(!this.isEnabled||this.Ar===q)return s;var a=this.h;if(a===q||(a.fb||a.Fe)||!a.Kl||!a.T.left||this.isBeyondDragSize())return s;if(this.kD){if(1===a.T.he&&(this.UA=a.T.xc.copy()),2!==a.T.he||this.isBeyondDragSize(this.UA))return s}else if(1!==a.T.he)return s;return a.Ra!==this&&a.Nr(a.T.S,h)!==q?s:h};Ca.prototype.doMouseUp=function(){var a=this.h;this.oa&&a!==q&&this.insertPart(a.T.S);this.stopTool()};
Ca.prototype.insertPart=function(a){var b=this.h;if(b===q)return q;var c=this.Ar;if(c===q)return q;this.pc(this.name);var d=q;c instanceof B?c.Td()&&(Pe(c),d=c.copy(),d instanceof B&&b.add(d)):c!==q&&(c=b.ga.vj(c),z.yb(c)&&(b.ga.wr(c),d=b.Bj(c)));d instanceof B&&(d.location=a,b.te&&b.select(d));b.vc();this.Ke=this.name;b.Ja("PartCreated",d);this.Jj();return d instanceof B?d:q};z.g(Ca,"archetypeNodeData",Ca.prototype.Ar);
z.defineProperty(Ca,{Ar:"archetypeNodeData"},w("$j"),function(a){this.$j!==a&&(a!==q&&z.l(a,Object,Ca,"archetypeNodeData"),this.$j=a)});z.g(Ca,"isDoubleClick",Ca.prototype.kD);z.defineProperty(Ca,{kD:"isDoubleClick"},w("lx"),function(a){this.lx!==a&&(z.j(a,"boolean",Ca,"isDoubleClick"),this.lx=a)});
function Sg(){0<arguments.length&&z.m("ContextMenuTool constructor cannot take any arguments.");cf.call(this);this.name="ContextMenu";this.FA=q;this.lB=new G;this.Rm=q;if(z.Wz===h){this.Rm=new Ne;this.Ow=q;var a=this;this.NB=function(){a.stopTool()};if(z.wC===s){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",
0);b.addEventListener("contextmenu",function(a){a.preventDefault();return s},s);b.addEventListener("selectstart",function(a){a.preventDefault();return s},s);c.addEventListener("contextmenu",function(a){a.preventDefault();return s},s);document.body&&(document.body.appendChild(b),document.body.appendChild(c));z.Gr=b;z.Fr=c;z.wC=h}}}z.ea("ContextMenuTool",Sg);z.Pa(Sg,cf);
Sg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||this.isBeyondDragSize()||!a.T.right?s:this.Rm!==q&&!(a.T.event instanceof MouseEvent)||this.findObjectWithContextMenu()!==q?h:s};Sg.prototype.doStart=function(){var a=this.h;a!==q&&this.lB.set(a.Ac.S)};Sg.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu()};
Sg.prototype.findObjectWithContextMenu=function(a){var b=this.h;if(b===q)return q;var c=b.T,d=q,d=a!==f?a:b.od(c.S,q,function(a){return!a.layer.gc});if(d!==q){for(a=d;a!==q;){c=a.contextMenu;if(c!==q)return a;a=a.ha}if(this.Rm!==q&&!(b.T.event instanceof MouseEvent))return d.Z}else if(c=b.contextMenu,c!==q)return b;return q};Sg.prototype.doActivate=aa();
Sg.prototype.doMouseDown=function(){if(this.oa){var a=this.h;if(a!==q&&this.We!==q){var b=a.od(a.T.S,q,q);b!==q&&b.ui(this.We)?(this.standardMouseClick(q,q),this.stopTool()):(this.stopTool(),a.Ra.doMouseDown())}}};Sg.prototype.doMouseUp=function(){this.oa||this.canStart()&&bf(this,h)};
function bf(a,b,c){a.oa=h;b&&a.standardMouseSelect();a.standardMouseClick();c===f&&(c=a.findObjectWithContextMenu());c!==q?(b=c.contextMenu,b!==q?a.showContextMenu(b,c instanceof U?c:q):a.showDefaultContextMenu()):a.showDefaultContextMenu()}Sg.prototype.doMouseMove=function(){this.oa&&this.standardMouseOver()};
Sg.prototype.showContextMenu=function(a,b){z.l(a,Ne,Sg,"showContextMenu:contextmenu");b!==q&&z.l(b,U,Sg,"showContextMenu:obj");var c=this.h;if(c!==q){a!==this.We&&this.hideContextMenu();a.Ud="Tool";a.Ij=s;a.scale=1/c.scale;a.Ic=this.name;c.add(a);if(b!==q){var d=q,e=b.io();e!==q&&(d=e.data);a.Hc=b;a.data=d}else a.data=c.ga;a.pi();this.positionContextMenu(a,b);this.We=a;c.oc()}};
Sg.prototype.positionContextMenu=function(a){var b=this.h;if(b!==q){var c=b.T.S.copy(),d=a.Ga,e=b.gb;b.T.uv&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}};Sg.prototype.hideContextMenu=function(){var a=this.h;a!==q&&this.We!==q&&(this.We.data=q,this.We.Hc=q,a.remove(this.We),this.We=q,this.standardMouseOver(),a.oc())};
Sg.prototype.initializeDefaultButtons=function(){if(this.h===q)return q;var a=new J,b=this.h.Ue;a.add({text:"Copy",uf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",uf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",uf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",uf:function(a){b.pasteSelection(a.T.S)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",uf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",uf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",uf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",uf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",uf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Zoom To Fit",
uf:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}});a.add({text:"Reset Zoom",uf:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",uf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",uf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",uf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});
return a};
Sg.prototype.showDefaultContextMenu=function(){var a=this.h;if(a!==q){this.Ow===q&&(this.Ow=this.initializeDefaultButtons());this.Rm!==this.We&&this.hideContextMenu();z.Gr.innerHTML="";z.Fr.addEventListener("click",this.NB,s);var b=this,c=document.createElement("ul");c.className="defaultCXul";z.Gr.appendChild(c);c.innerHTML="";for(var d=this.Ow.k;d.next();){var e=d.value,g=e.text,k=e.visible;if("function"!==typeof k||k()){k=document.createElement("li");k.className="defaultCXli";var l=document.createElement("a");l.className=
"defaultCXa";l.href="#";l.nF=e.uf;l.addEventListener("click",function(c){this.nF(a);b.stopTool();c.preventDefault();return s},s);l.textContent=g;k.appendChild(l);c.appendChild(k)}}z.Gr.style.display="block";z.Fr.style.display="block";this.We=this.Rm}};Sg.prototype.hideDefaultContextMenu=function(){this.We!==q&&this.We===this.Rm&&(z.Gr.style.display="none",z.Fr.style.display="none",z.Fr.removeEventListener("click",this.NB,s),this.We=q)};z.g(Sg,"currentContextMenu",Sg.prototype.We);
z.defineProperty(Sg,{We:"currentContextMenu"},w("FA"),ba("FA"));z.A(Sg,{uJ:"mouseDownPoint"},w("lB"));function Tg(){0<arguments.length&&z.m("DragSelectingTool constructor cannot take any arguments.");cf.call(this);this.name="DragSelecting";this.Sm=175;this.cB=s;var a=new B;a.Ud="Tool";a.Ij=s;var b=new V;b.name="SHAPE";b.Cb="Rectangle";b.fill=q;b.stroke="magenta";a.add(b);this.Fm=a}z.ea("DragSelectingTool",Tg);z.Pa(Tg,cf);
Tg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||!a.te)return s;var b=a.T;return!b.left||a.Ra!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Ac.timestamp<this.Zu||a.Nr(b.S,h)!==q)?s:h};Tg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.oa=h,a.pd=h,a.cc=h,a.add(this.Uf),this.doMouseMove())};Tg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.remove(this.Uf),a.cc=s,this.oa=a.pd=s,a.oc())};
Tg.prototype.doMouseMove=function(){var a=this.h;if(a!==q&&this.oa&&this.Uf!==q){var b=this.computeBoxBounds(),c=this.Uf.Be("SHAPE");c===q&&(c=this.Uf.SG());c.Fa=b.size;this.Uf.position=b.position;a.oc()}};Tg.prototype.doMouseUp=function(){if(this.oa){var a=this.h;a.remove(this.Uf);try{a.Wc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Wc=""}}this.stopTool()};Tg.prototype.computeBoxBounds=function(){var a=this.h;return a===q?new H(0,0,0,0):new H(a.Ac.S,a.T.S)};
Tg.prototype.selectInRect=function(a){var b=this.h;if(b!==q){var c=b.T;b.Ja("ChangingSelection");a=b.Aj(a,q,function(a){return a instanceof B&&a.canSelect()},this.pD);if(c.control)if(c.shift)for(a=a.k;a.next();)c=a.value,c.$a&&(c.$a=s);else for(a=a.k;a.next();)c=a.value,c.$a=!c.$a;else{if(!c.shift){for(var d=new J(B),e=b.selection.k;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.k;d.next();)c=d.value,c.$a=s}for(a=a.k;a.next();)c=a.value,c.$a||(c.$a=h)}b.Ja("ChangedSelection")}};
z.g(Tg,"delay",Tg.prototype.Zu);z.defineProperty(Tg,{Zu:"delay"},w("Sm"),ba("Sm"));z.g(Tg,"isPartialInclusion",Tg.prototype.pD);z.defineProperty(Tg,{pD:"isPartialInclusion"},w("cB"),ba("cB"));z.g(Tg,"box",Tg.prototype.Uf);z.defineProperty(Tg,{Uf:"box"},w("Fm"),ba("Fm"));
function Ug(){0<arguments.length&&z.m("PanningTool constructor cannot take any arguments.");cf.call(this);this.name="Panning";this.Ix=new G;this.Di=s;var a=this;this.DB=function(){document.removeEventListener("scroll",a.DB,s);a.stopTool()}}z.ea("PanningTool",Ug);z.Pa(Ug,cf);Ug.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||!a.Se&&!a.Te||!a.T.left||a.Ra!==this&&!this.isBeyondDragSize()?s:h};
Ug.prototype.doActivate=function(){var a=this.h;a!==q&&(this.Di?(a.T.bubbles=h,document.addEventListener("scroll",this.DB,s)):(a.Wc="move",a.pd=h,this.Ix=a.position.copy()),this.oa=h)};Ug.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.Wc="",this.oa=a.pd=s,a.xa())};Ug.prototype.doCancel=function(){var a=this.h;a!==q&&(a.position=this.Ix,a.pd=s);this.stopTool()};Ug.prototype.doMouseMove=function(){this.move()};Ug.prototype.doMouseUp=function(){this.move();this.stopTool()};
Ug.prototype.move=function(){var a=this.h;if(this.oa&&a)if(this.Di)a.T.bubbles=h;else{var b=a.position,c=a.Ac.S,d=a.T.S,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.Se||(e=b.x);a.Te||(c=b.y);a.position=new G(e,c)}};z.g(Ug,"bubbles",Ug.prototype.bubbles);z.defineProperty(Ug,{bubbles:"bubbles"},w("Di"),ba("Di"));z.g(Ug,"originalPosition",Ug.prototype.IH);z.A(Ug,{IH:"originalPosition"},w("Ix"));
function Vg(){0<arguments.length&&z.m("TextEditingTool constructor cannot take any arguments.");cf.call(this);this.name="TextEditing";this.Pw=this.HA=this.ly=this.KB=q;this.Xx=Wg;this.hj=q;this.eb=Xg;this.uk=q}z.ea("TextEditingTool",Vg);z.Pa(Vg,cf);var Yg;Vg.LostFocus=Yg=z.w(Vg,"LostFocus",0);var Zg;Vg.MouseDown=Zg=z.w(Vg,"MouseDown",1);var $g;Vg.Tab=$g=z.w(Vg,"Tab",2);var ah;Vg.Enter=ah=z.w(Vg,"Enter",3);Vg.SingleClick=z.w(Vg,"SingleClick",0);var Wg;
Vg.SingleClickSelected=Wg=z.w(Vg,"SingleClickSelected",1);var Xg=z.w(Vg,"StateNone",0),bh=z.w(Vg,"StateActive",1),ch=z.w(Vg,"StateEditing",2),dh=z.w(Vg,"StateEditing2",3),eh=z.w(Vg,"StateValidating",4),fh=z.w(Vg,"StateValidated",5);z.g(Vg,"textBlock",Vg.prototype.kg);z.defineProperty(Vg,{kg:"textBlock"},w("ly"),ba("ly"));z.g(Vg,"currentTextEditor",Vg.prototype.Eg);z.defineProperty(Vg,{Eg:"currentTextEditor"},w("HA"),ba("HA"));z.g(Vg,"defaultTextEditor",Vg.prototype.yC);
z.defineProperty(Vg,{yC:"defaultTextEditor"},w("Pw"),ba("Pw"));z.g(Vg,"starting",Vg.prototype.xE);z.defineProperty(Vg,{xE:"starting"},w("Xx"),function(a){this.Xx!==a&&(x&&z.wb(a,Vg,Vg,"starting"),this.Xx=a)});Vg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||a.fb||!a.T.left||this.isBeyondDragSize())return s;a=a.od(a.T.S,q,function(a){return a instanceof ya});if(!(a instanceof ya)||!a.av)return s;a=a.Z;return a===q||this.xE===Wg&&!a.$a?s:h};
Vg.prototype.doStart=function(){!this.oa&&this.kg!==q&&this.doActivate()};
Vg.prototype.doActivate=function(){if(!this.oa){var a=this.h;if(a!==q){var b=this.kg;b===q&&(b=a.od(a.T.S,function(a){return a instanceof ya?a:q}),b=b instanceof ya?b:q);if(b!==q&&(this.kg=b,b.Z!==q)){this.oa=h;this.eb=bh;this.pc(this.name);var c=this.yC,d=s;b.Zz!==q&&(c=b.Zz);c!==q&&!c.vA&&(d=h);this.KB=this.kg.copy();c===q&&(c=document.createElement("textarea"),c.vA=h,this.Pw=c,c.addEventListener("input",function(){var a=this.textEditingTool.KB;a.text=this.value;gh(a,Infinity,Infinity);this.style.width=
20+a.Ga.width*this.dI+"px";this.rows=a.uD},s),c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==q)if(13===b)c.acceptText(ah);else{if(9===b)return c.acceptText($g),a.preventDefault(),s;27===b&&(c.doCancel(),c.h&&c.h.focus())}},s),c.addEventListener("focus",function(){var a=this.textEditingTool;a.eb===bh?a.eb=ch:a.eb===fh?a.eb=dh:a.eb===dh&&(a.eb=ch)},s));if(c.vA){var e=b.nb(cc),g=a.position,k=a.scale,l=b.Dj()*k,m=b.Ma.width*l;hh(b);var n=(e.x-g.x)*k,e=(e.y-g.y)*k;
c.value=b.text;a.oi.style.font=b.font;c.style.font="inherit";c.style.fontSize=100*l+"%";c.style.lineHeight="normal";m=20+m;c.style.width=m+"px";c.style.height="";c.rows=b.uD;a.oi.appendChild(c);c.style.left=(n-m/2|0)+"px";c.style.top=(e-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.oi.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.dI=l;if(d&&c.onActivate!==f)c.onActivate();this.Eg=c;c.focus()}}}};
Vg.prototype.doCancel=function(){this.uk!==q&&(this.Eg.style.border=this.uk,this.uk=q);this.stopTool()};Vg.prototype.doMouseUp=function(){!this.oa&&this.canStart()&&this.doActivate()};Vg.prototype.doMouseDown=function(){this.oa&&this.acceptText(Zg)};
Vg.prototype.acceptText=function(a){switch(a){case Zg:if(this.eb===fh||this.eb===dh)this.Eg.focus();else if(this.eb===bh||this.eb===ch)this.eb=eh,ih(this);break;case Yg:case ah:case $g:if(ah===a&&this.ly.tv===h)break;if(this.eb===bh||this.eb===ch)this.eb=eh,ih(this)}};
function ih(a){if(a.kg!==q&&a.Eg!==q){var b=a.kg,c=a.kg.text,d=a.Eg.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.kg,c,e)){a.eb=ch;b.Lr!==q&&b.Lr(a,c,e);a.uk===q&&(a.uk=a.Eg.style.border,a.Eg.style.border="3px solid red");a.Eg.focus();return}a.eb=fh;c!==e&&(a.kg.text=e);a.Ke=a.name;b=a.h;b!==q&&b.Ja("TextEdited",a.kg,c);a.stopTool();b!==q&&b.focus()}a.uk!==q&&(a.Eg.style.border=a.uk,a.uk=q)}
Vg.prototype.doDeactivate=function(){var a=this.h;if(a!==q){this.oa&&this.Jj();this.eb=Xg;this.kg=q;if(this.Eg!==q){var b=this.Eg;if(b.onDeactivate!==f)b.onDeactivate();b!==q&&a.oi.removeChild(b)}this.oa=s}};Vg.prototype.isValidText=function(a,b,c){z.l(a,ya,Vg,"isValidText:textblock");var d=this.Ks;if(d!==q&&!d(a,b,c))return s;d=a.Ks;return d!==q&&!d(a,b,c)?s:h};z.g(Vg,"textValidation",Vg.prototype.Ks);z.defineProperty(Vg,{Ks:"textValidation"},w("hj"),function(a){this.hj!==a&&(this.hj=a)});
function Le(){cf.call(this);this.name="ToolManager";this.mB=new J(cf);this.nB=new J(cf);this.oB=new J(cf);this.WA=this.XA=1E3;this.MA=(new qa(2,2)).Oa();this.it=this.Mw=q;this.pB=ff}z.ea("ToolManager",Le);z.Pa(Le,cf);var ff;Le.WheelScroll=ff=z.w(Le,"WheelScroll",0);var ef;Le.WheelZoom=ef=z.w(Le,"WheelZoom",1);Le.WheelNone=z.w(Le,"WheelNone",2);z.g(Le,"mouseWheelBehavior",Le.prototype.lm);z.defineProperty(Le,{lm:"mouseWheelBehavior"},w("pB"),ba("pB"));
Le.prototype.initializeStandardTools=function(){this.UB=new Rg;this.UD=new ng;this.xD=new wg;this.dE=new Dg;this.hE=new Ng;this.kz=new Aa;this.ze=new gf;this.EC=new Tg;this.PD=new Ug;this.Vu=new Sg;this.Tv=new Vg;this.lC=new Ca;this.mC=new Qg};
Le.prototype.doMouseDown=function(){var a=this.h;if(a!==q){var b=a.Aa;b.Dy&&0!==b.bl&&z.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.df.length,c=0;c<b;c++){var d=this.df.na(c);d.h===q&&d.me(this.h);if(d.canStart()){a.Ra=d;a.Ra===d&&(d.oa||d.doActivate(),d.doMouseDown());return}}1===a.T.button&&(this.lm===ff?this.lm=ef:this.lm===ef&&(this.lm=ff));this.doActivate();this.standardWaitAfter(this.$y)}};
Le.prototype.doMouseMove=function(){var a=this.h;if(a!==q){if(this.oa)for(var b=this.Ig.length,c=0;c<b;c++){var d=this.Ig.na(c);d.h===q&&d.me(this.h);if(d.canStart()){a.Ra=d;a.Ra===d&&(d.oa||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.oa?this.$y:this.cD)}};Le.prototype.doCurrentObjectChanged=function(a,b){var c=this.Jk;c!==q&&!(b!==q&&(b===c||b.ui(c)))&&this.hideToolTip()};
Le.prototype.doWaitAfter=function(){this.h&&this.h.Ea&&(this.doMouseHover(),this.oa||this.doToolTip())};Le.prototype.doMouseHover=function(){var a=this.h;if(a!==q){var b=a.T;b.Hd===q&&(b.Hd=a.od(b.S,q,q));var c=b.Hd;if(c!==q)for(;c!==q;){a=this.oa?c.js:c.ks;if(a!==q&&(a(b,c),b.je))break;c=c.ha}else a=this.oa?a.js:a.ks,a!==q&&a(b)}};
Le.prototype.doToolTip=function(){var a=this.h;if(a!==q){var b=a.T;b.Hd===q&&(b.Hd=a.od(b.S,q,q));b=b.Hd;if(b!==q){if(!(b===this.Jk||b.ui(this.Jk))){for(;b!==q;){a=b.Ls;if(a!==q){this.showToolTip(a,b);return}b=b.ha}this.hideToolTip()}}else a=a.Ls,a!==q?this.showToolTip(a,q):this.hideToolTip()}};
Le.prototype.showToolTip=function(a,b){z.l(a,Ne,Le,"showToolTip:tooltip");b!==q&&z.l(b,U,Le,"showToolTip:obj");var c=this.h;if(c!==q){a!==this.Jk&&this.hideToolTip();a.Ud="Tool";a.Ij=s;a.scale=1/c.scale;c.add(a);if(b!==q&&b!==this.it){var d=q,e=b.io();e!==q&&(d=e.data);a.Hc=b;a.data=d}else b===q&&(a.data=c.ga);if(b===q||b!==this.it)a.pi(),this.positionToolTip(a,b);this.Mw=a;this.it=b;c.oc()}};
Le.prototype.positionToolTip=function(a){var b=this.h;if(b!==q){var c=b.T.S.copy(),d=a.Ga,e=b.gb;b.T.uv&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}};Le.prototype.hideToolTip=function(){if(this.Jk!==q){var a=this.h;a!==q&&(this.Jk.data=q,this.Jk.Hc=q,a.remove(this.Jk),this.it=this.Mw=q,a.oc())}};z.A(Le,{Jk:"currentToolTip"},w("Mw"));
Le.prototype.doMouseUp=function(){this.cancelWaitAfter();if(this.oa){var a=this.h;if(a===q)return;for(var b=this.Jg.length,c=0;c<b;c++){var d=this.Jg.na(c);d.h===q&&d.me(this.h);if(d.canStart()){a.Ra=d;a.Ra===d&&(d.oa||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};Le.prototype.doMouseWheel=function(){this.standardMouseWheel()};Le.prototype.doKeyDown=function(){var a=this.h;a!==q&&a.Ue.doKeyDown()};Le.prototype.doKeyUp=function(){var a=this.h;a!==q&&a.Ue.doKeyUp()};
Le.prototype.doCancel=function(){kf!==q&&kf.doCancel();cf.prototype.doCancel.call(this)};Le.prototype.findTool=function(a){z.j(a,"string",Le,"findTool:name");for(var b=this.df.length,c=0;c<b;c++){var d=this.df.na(c);if(d.name===a)return d}b=this.Ig.length;for(c=0;c<b;c++)if(d=this.Ig.na(c),d.name===a)return d;b=this.Jg.length;for(c=0;c<b;c++)if(d=this.Jg.na(c),d.name===a)return d;return q};
Le.prototype.replaceTool=function(a,b){z.j(a,"string",Le,"replaceTool:name");b!==q&&(z.l(b,cf,Le,"replaceTool:newtool"),b.h&&b.h!==this.h&&z.m("Cannot share tools between Diagrams: "+b.toString()),b.me(this.h));for(var c=this.df.length,d=0;d<c;d++){var e=this.df.na(d);if(e.name===a)return b!==q?this.df.gg(d,b):this.df.sd(d),e}c=this.Ig.length;for(d=0;d<c;d++)if(e=this.Ig.na(d),e.name===a)return b!==q?this.Ig.gg(d,b):this.Ig.sd(d),e;c=this.Jg.length;for(d=0;d<c;d++)if(e=this.Jg.na(d),e.name===a)return b!==
q?this.Jg.gg(d,b):this.Jg.sd(d),e;return q};function jh(a,b,c,d){z.j(b,"string",Le,"replaceStandardTool:name");z.l(d,J,Le,"replaceStandardTool:list");c!==q&&(z.l(c,cf,Le,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&z.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.me(a.h));a.findTool(b)?a.replaceTool(b,c):c!==q&&d.add(c)}z.A(Le,{df:"mouseDownTools"},w("mB"));z.A(Le,{Ig:"mouseMoveTools"},w("nB"));z.A(Le,{Jg:"mouseUpTools"},w("oB"));z.g(Le,"hoverDelay",Le.prototype.cD);
z.defineProperty(Le,{cD:"hoverDelay"},w("XA"),ba("XA"));z.g(Le,"holdDelay",Le.prototype.$y);z.defineProperty(Le,{$y:"holdDelay"},w("WA"),ba("WA"));z.g(Le,"dragSize",Le.prototype.FC);z.defineProperty(Le,{FC:"dragSize"},w("MA"),ba("MA"));z.g(Le,"actionTool",Le.prototype.UB);z.defineProperty(Le,{UB:"actionTool"},function(){return this.findTool("Action")},function(a){jh(this,"Action",a,this.df)});z.g(Le,"relinkingTool",Le.prototype.UD);
z.defineProperty(Le,{UD:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){jh(this,"Relinking",a,this.df)});z.g(Le,"linkReshapingTool",Le.prototype.xD);z.defineProperty(Le,{xD:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){jh(this,"LinkReshaping",a,this.df)});z.g(Le,"resizingTool",Le.prototype.dE);z.defineProperty(Le,{dE:"resizingTool"},function(){return this.findTool("Resizing")},function(a){jh(this,"Resizing",a,this.df)});
z.g(Le,"rotatingTool",Le.prototype.hE);z.defineProperty(Le,{hE:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){jh(this,"Rotating",a,this.df)});z.g(Le,"linkingTool",Le.prototype.kz);z.defineProperty(Le,{kz:"linkingTool"},function(){return this.findTool("Linking")},function(a){jh(this,"Linking",a,this.Ig)});z.g(Le,"draggingTool",Le.prototype.ze);z.defineProperty(Le,{ze:"draggingTool"},function(){return this.findTool("Dragging")},function(a){jh(this,"Dragging",a,this.Ig)});
z.g(Le,"dragSelectingTool",Le.prototype.EC);z.defineProperty(Le,{EC:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){jh(this,"DragSelecting",a,this.Ig)});z.g(Le,"panningTool",Le.prototype.PD);z.defineProperty(Le,{PD:"panningTool"},function(){return this.findTool("Panning")},function(a){jh(this,"Panning",a,this.Ig)});z.g(Le,"contextMenuTool",Le.prototype.Vu);
z.defineProperty(Le,{Vu:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){jh(this,"ContextMenu",a,this.Jg)});z.g(Le,"textEditingTool",Le.prototype.Tv);z.defineProperty(Le,{Tv:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){jh(this,"TextEditing",a,this.Jg)});z.g(Le,"clickCreatingTool",Le.prototype.lC);z.defineProperty(Le,{lC:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){jh(this,"ClickCreating",a,this.Jg)});
z.g(Le,"clickSelectingTool",Le.prototype.mC);z.defineProperty(Le,{mC:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){jh(this,"ClickSelecting",a,this.Jg)});function Ke(){1<arguments.length&&z.m("Layer constructor cannot take any arguments.");z.qc(this);this.fa=q;this.ab=new J(B);this.Kb="";this.sf=1;this.sx=s;this.vk=this.py=this.Xj=this.Wj=this.Vj=this.Uj=this.Sj=this.Tj=this.Rj=this.Zj=this.Qj=this.Yj=this.Pj=this.Oj=h;this.eu=[]}z.ea("Layer",Ke);
Ke.prototype.me=ba("fa");
Ke.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,k=0,l=this.ab.k;l.next();){var m=l.value;m instanceof oa?e++:m instanceof D?d++:m instanceof E?g++:m instanceof Ne?k++:c++}l="";0<c&&(l+=c+" Parts ");0<d&&(l+=d+" Nodes ");0<e&&(l+=e+" Groups ");0<g&&(l+=g+" Links ");0<k&&(l+=k+" Adornments ");if(1<a)for(c=this.ab.k;c.next();)d=c.value,l+="\n    "+d.toString(a-1),(e=d.data)&&z.fc(e)&&(l+=" #"+z.fc(e)),d instanceof D?l+=" "+Hd(e):d instanceof
E&&(l+=" "+Hd(d.da)+" "+Hd(d.ja));return b+" "+this.ab.count+": "+l};Ke.prototype.findObjectAt=Ke.prototype.od=function(a,b,c){b===f&&(b=q);c===f&&(c=q);if(this.vk===s)return q;var d=this.ab,e=s;this.h.gb.Ia(a)&&(e=h);for(var g=z.O(),k=d.length;k--;){var l=d.na(k);if(!(e===h&&kh(l)===s)&&l.Db()&&(g.assign(a),bb(g,l.se),l=l.od(g,b,c),l!==q&&(b!==q&&(l=b(l)),l&&(c===q||c(l)))))return z.B(g),l}z.B(g);return q};
Ke.prototype.findObjectsAt=Ke.prototype.eo=function(a,b,c,d){b===f&&(b=q);c===f&&(c=q);!(d instanceof J)&&!(d instanceof va)&&(d=new va(U));if(this.vk===s)return d;var e=this.ab,g=s;this.h.gb.Ia(a)&&(g=h);for(var k=z.O(),l=e.length;l--;){var m=e.na(l);!(g===h&&kh(m)===s)&&m.Db()&&(k.assign(a),bb(k,m.se),m.eo(k,b,c,d)&&(b!==q&&(m=b(m)),m&&(c===q||c(m))&&d.add(m)))}z.B(k);return d};
Ke.prototype.findObjectsIn=Ke.prototype.Aj=function(a,b,c,d,e){b===f&&(b=q);c===f&&(c=q);d===f&&(d=s);!(e instanceof J)&&!(e instanceof va)&&(e=new va(U));if(this.vk===s)return e;var g=this.ab,k=s;this.h.gb.uj(a)&&(k=h);for(var l=g.length,g=g.n;l--;){var m=g[l];!(k===h&&kh(m)===s)&&(m.Db()&&m.Aj(a,b,c,d,e))&&(b!==q&&(m=b(m)),m&&(c===q||c(m))&&e.add(m))}return e};
Ke.prototype.Ry=function(a,b,c,d,e,g,k){if(this.vk===s)return e;for(var l=this.ab,m=l.length,l=l.n;m--;){var n=l[m];!(k===h&&kh(n)===s)&&(g(n)&&n.Db()&&n.Aj(a,b,c,d,e))&&(b!==q&&(n=b(n)),n&&(c===q||c(n))&&e.add(n))}return e};
Ke.prototype.findObjectsNear=Ke.prototype.fo=function(a,b,c,d,e,g){c===f&&(c=q);d===f&&(d=q);e===f&&(e=h);if(e!==s&&e!==h){if(e instanceof J||e instanceof va)g=e;e=h}!(g instanceof J)&&!(g instanceof va)&&(g=new va(U));if(this.vk===s)return g;var k=this.ab,l=s;this.h.gb.Ia(a)&&(l=h);for(var m=z.O(),n=z.O(),p=k.length;p--;){var r=k.n[p];!(l===h&&kh(r)===s)&&r.Db()&&(m.assign(a),bb(m,r.se),n.q(a.x+b,a.y),bb(n,r.se),r.fo(m,n,c,d,e,g)&&(c!==q&&(r=c(r)),r&&(d===q||d(r))&&g.add(r)))}z.B(m);z.B(n);return g};
da=Ke.prototype;da.Bf=function(a,b){if(this.visible&&a.mk){var c=this.ab,d;d=b?b:a.gb;for(var e=c.length,g=0;g<e;g++){var k=c.n[g];k.rF=g;if(!(k instanceof E&&k.lh===s)&&!(k instanceof Ne&&k.nj!==q))if(Ab(k.ya,d)){k.Bf(h);lh(k);for(k=k.Iu;k.next();){var l=k.value;gh(l,Infinity,Infinity);l.zc();l.Bf(h)}}else k.Bf(s),k.Iu!==q&&0<k.Iu.count&&lh(k)}}};
da.Ae=function(a,b,c,d){if(this.visible&&(d===f&&(d=h),d||!this.gc)){1!==this.sf&&(a.globalAlpha=this.sf);c=this.ab;d=this.eu;d.length=0;for(var e=b.scale,g=c.length,k=0;k<g;k++){var l=c.n[k];if(kh(l)){if(l instanceof E&&(l.Ob&&d.push(l),l.lh===s))continue;var m=l.ya;1<m.width*e||1<m.height*e?l.Ae(a,b):mh(l,a)}}a.globalAlpha=1}};
function nh(a,b,c,d){if(a.visible){b.globalAlpha=a.sf;var e=a.ab;a=a.eu;a.length=0;for(var g=c.scale,k=e.length,l=d.length,m=0;m<k;m++){var n=e.n[m];if(kh(n)){if(n instanceof E&&(n.Ob&&a.push(n),n.lh===s))continue;var p=oh(n,n.ya),r;a:{r=p;for(var t=d,u=l,v=2/g,A=4/g,C=0;C<u;C++){var K=t[C];if(!(0===K[2]||0===K[3])&&r.jD(K[0]-v,K[1]-v,K[2]+A,K[3]+A)){r=h;break a}}r=s}r&&(1<p.width*g||1<p.height*g?n.Ae(b,c):mh(n,b))}}b.globalAlpha=1}}
da.i=function(a,b,c,d,e){var g=this.h;g!==q&&g.Zc(yd,a,this,b,c,d,e)};da.em=function(a,b,c){var d=this.ab;b.kn=this;if(a>=d.count)a=d.count;else if(d.na(a)===b)return-1;d.Ed(a,b);b.Wr();d=this.h;d!==q&&(c?d.xa():d.em(b));b instanceof oa&&this.Qv(b);return a};da.De=function(a,b,c){var d=this.ab;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.na(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Xr();d.sd(a);d=this.h;d!==q&&(c?d.xa():d.De(b));b.kn=q;return a};
da.Qv=function(a){for(;a!==q;){if(a.layer===this){var b=a;if(b.Bc.next()){for(var c=-1,d=-1,e=this.ab.n,g=e.length,k=0;k<g;k++){var l=e[k];if(l===b&&(c=k,0<=d))break;if(0>d&&l.bb===b&&(d=k,0<=c))break}!(0>d)&&d<c&&(e=this.ab,e.sd(c),e.Ed(d,b))}}a=a.bb}};da.clear=function(){for(var a=this.ab.Je(),b=a.length,c=0;c<b;c++)a[c].Bf(s),this.De(-1,a[c])};z.A(Ke,{mm:"parts"},function(){return this.ab.k});z.A(Ke,{zJ:"partsBackwards"},function(){return this.ab.hm});z.A(Ke,{h:"diagram"},w("fa"));
z.g(Ke,"name",Ke.prototype.name);z.defineProperty(Ke,{name:"name"},w("Kb"),function(a){z.j(a,"string",Ke,"name");var b=this.Kb;if(b!==a){var c=this.h;if(c!==q){""===b&&z.m("Cannot rename default Layer to: "+a);for(c=c.im;c.next();)c.value.name===a&&z.m("Layer.name is already present in this diagram: "+a)}this.Kb=a;this.i("name",b,a);for(a=this.ab.k;a.next();)a.value.Ud=this.Kb}});z.g(Ke,"opacity",Ke.prototype.opacity);
z.defineProperty(Ke,{opacity:"opacity"},w("sf"),function(a){var b=this.sf;b!==a&&(z.j(a,"number",Ke,"opacity"),(0>a||1<a)&&z.ia(a,"0 <= val <= 1",Ke,"opacity"),this.sf=a,this.i("opacity",b,a),a=this.h,a!==q&&a.xa())});z.g(Ke,"isTemporary",Ke.prototype.gc);z.defineProperty(Ke,{gc:"isTemporary"},w("sx"),function(a){var b=this.sx;b!==a&&(z.j(a,"boolean",Ke,"isTemporary"),this.sx=a,this.i("isTemporary",b,a))});z.g(Ke,"visible",Ke.prototype.visible);
z.defineProperty(Ke,{visible:"visible"},w("py"),function(a){var b=this.py;if(b!==a){z.j(a,"boolean",Ke,"visible");this.py=a;this.i("visible",b,a);for(b=this.ab.k;b.next();){var c=b.value;a?c.updateAdornments():c.ge()}a=this.h;a!==q&&a.xa()}});z.g(Ke,"pickable",Ke.prototype.He);z.defineProperty(Ke,{He:"pickable"},w("vk"),function(a){var b=this.vk;b!==a&&(z.j(a,"boolean",Ke,"pickable"),this.vk=a,this.i("pickable",b,a))});z.g(Ke,"allowCopy",Ke.prototype.pj);
z.defineProperty(Ke,{pj:"allowCopy"},w("Oj"),function(a){var b=this.Oj;b!==a&&(z.j(a,"boolean",Ke,"allowCopy"),this.Oj=a,this.i("allowCopy",b,a))});z.g(Ke,"allowDelete",Ke.prototype.Ek);z.defineProperty(Ke,{Ek:"allowDelete"},w("Pj"),function(a){var b=this.Pj;b!==a&&(z.j(a,"boolean",Ke,"allowDelete"),this.Pj=a,this.i("allowDelete",b,a))});z.g(Ke,"allowTextEdit",Ke.prototype.Pn);
z.defineProperty(Ke,{Pn:"allowTextEdit"},w("Yj"),function(a){var b=this.Yj;b!==a&&(z.j(a,"boolean",Ke,"allowTextEdit"),this.Yj=a,this.i("allowTextEdit",b,a))});z.g(Ke,"allowGroup",Ke.prototype.Ln);z.defineProperty(Ke,{Ln:"allowGroup"},w("Qj"),function(a){var b=this.Qj;b!==a&&(z.j(a,"boolean",Ke,"allowGroup"),this.Qj=a,this.i("allowGroup",b,a))});z.g(Ke,"allowUngroup",Ke.prototype.Qn);
z.defineProperty(Ke,{Qn:"allowUngroup"},w("Zj"),function(a){var b=this.Zj;b!==a&&(z.j(a,"boolean",Ke,"allowUngroup"),this.Zj=a,this.i("allowUngroup",b,a))});z.g(Ke,"allowLink",Ke.prototype.Ll);z.defineProperty(Ke,{Ll:"allowLink"},w("Rj"),function(a){var b=this.Rj;b!==a&&(z.j(a,"boolean",Ke,"allowLink"),this.Rj=a,this.i("allowLink",b,a))});z.g(Ke,"allowRelink",Ke.prototype.qj);
z.defineProperty(Ke,{qj:"allowRelink"},w("Tj"),function(a){var b=this.Tj;b!==a&&(z.j(a,"boolean",Ke,"allowRelink"),this.Tj=a,this.i("allowRelink",b,a))});z.g(Ke,"allowMove",Ke.prototype.Fk);z.defineProperty(Ke,{Fk:"allowMove"},w("Sj"),function(a){var b=this.Sj;b!==a&&(z.j(a,"boolean",Ke,"allowMove"),this.Sj=a,this.i("allowMove",b,a))});z.g(Ke,"allowReshape",Ke.prototype.Mn);
z.defineProperty(Ke,{Mn:"allowReshape"},w("Uj"),function(a){var b=this.Uj;b!==a&&(z.j(a,"boolean",Ke,"allowReshape"),this.Uj=a,this.i("allowReshape",b,a))});z.g(Ke,"allowResize",Ke.prototype.Nn);z.defineProperty(Ke,{Nn:"allowResize"},w("Vj"),function(a){var b=this.Vj;b!==a&&(z.j(a,"boolean",Ke,"allowResize"),this.Vj=a,this.i("allowResize",b,a))});z.g(Ke,"allowRotate",Ke.prototype.On);
z.defineProperty(Ke,{On:"allowRotate"},w("Wj"),function(a){var b=this.Wj;b!==a&&(z.j(a,"boolean",Ke,"allowRotate"),this.Wj=a,this.i("allowRotate",b,a))});z.g(Ke,"allowSelect",Ke.prototype.te);z.defineProperty(Ke,{te:"allowSelect"},w("Xj"),function(a){var b=this.Xj;b!==a&&(z.j(a,"boolean",Ke,"allowSelect"),this.Xj=a,this.i("allowSelect",b,a))});
function y(a){function b(){document.removeEventListener("DOMContentLoaded",b,s);ph(c)}1<arguments.length&&z.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");z.qc(this);z.DC=[];this.dc=h;this.Qe=17;var c=this;document.body!==q?ph(this):document.addEventListener("DOMContentLoaded",b,s);this.vb=new J(Ke);this.wB=this.FB=this.EB=this.HB=this.GB=this.ub=this.Ff=this.Ea=q;this.kb=(new G(NaN,NaN)).freeze();this.Lb=1;this.jx=(new G(NaN,NaN)).freeze();this.kx=NaN;
this.Pt=1E-4;this.Mt=100;this.Gc=new ra;this.Fu=(new G(NaN,NaN)).freeze();this.rt=(new H(NaN,NaN,NaN,NaN)).freeze();this.el=Re;this.il=Zb;this.lk=Re;this.an=Zb;this.At=this.zt=$b;this.Hf=new va(U);this.qe=h;this.Tm=new ta(E,H);this.nt=h;this.lF=250;this.kF=1E3;this.Og=q;this.Ys=(new ub(16,16,16,16)).freeze();this.Bu=this.Rf=s;this.Dp=h;this.tg=new ud;this.Tc=new ud;this.Xb=new ud;this.Fi=q;this.uu=-1;this.Zx=s;this.Sw=new ta("string",J);this.Rw=new ta("string","string");qh(this);this.Zt=new va(D);
this.zk=new va(oa);this.It=new va(E);this.ab=new va(B);this.Et=h;this.ZA=s;this.Cu=bg;this.Lw=this.Qw=this.zu=q;this.ht="";this.wp="auto";this.Ih=this.ei=this.Sh=this.St=this.Th=this.Uh=this.Vh=this.Hh=this.Lh=this.Gh=q;this.Oh=h;this.Bx=this.Bw=s;this.Iw=q;this.Sx=this.ai=this.wA=s;this.dB=h;this.xd=s;this.Od=q;var d=this;this.jB=function(a){if(a.ga===d.ga&&d.Wa){d.Wa=s;try{var b=a.fd;""===a.cf&&b===yd&&rh(d,a.object,a.propertyName)}finally{d.Wa=h}}};this.kB=function(a){sh(d,a)};this.Jh=new ta(Object,
B);this.ek=new ta(Object,E);this.ul=new ta(Object,Array);this.nk=s;this.Pj=this.Oj=this.Ps=this.Ph=h;this.Rs=this.Qs=s;this.Ws=this.Us=this.Xj=this.Wj=this.Vj=this.Uj=this.Sj=this.Tj=this.Rj=this.Ts=this.Zj=this.Qj=this.Yj=h;this.dn=this.bB=s;this.Vs=this.Ss=this.wt=this.vt=h;this.lu=this.ku=16;this.Ox=this.ju=s;this.Qx=this.Px=this.dj=this.cj=q;this.re=(new ub(5)).freeze();this.ou=(new va(B)).freeze();this.Nt=999999999;this.mk=this.Qi=this.Pi=h;this.ol=this.nl=s;this.yt=this.xt=0;this.zd=q;this.Xs=
h;this.vg=s;this.Bd=q;this.cu=1;this.ax=s;this.CB=0;this.RB=(new H(NaN,NaN,NaN,NaN)).freeze();this.lt=(new H(NaN,NaN,NaN,NaN)).freeze();this.tn=new va;Ch(this);this.Ht=this.tt=this.Yt=this.JA=this.IA=this.KA=this.Ti=this.hk=this.Wh=q;Dh(this);this.Pc=q;this.st=s;this.Xn=this.zz=q;this.tb=new Le;this.tb.initializeStandardTools();this.Ra=this.Yu=this.tb;this.Ue=new za;this.ga=new T;this.ai=h;this.Pb=new Eh;this.ai=s;a===f&&(a=document.createElement("div"));this.RA=this.Uw=q;this.oy=h;this.Nx=s;this.Hi=
q;this.jk=new Fh;Gh(this,a);this.jn=1;this.Gt=0;this.fB=new G;this.PB=500;this.br=q;this.cn=s;window.navigator&&(0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"))&&(this.cn=h);this.nx=s;window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0")&&(this.nx=h);this.dc=s}z.ea("Diagram",y);
function Dh(a){a.Wh=new ta("string",B);var b=new D,c=new ya;c.bind(new Fe("text","",Hd));b.add(c);a.KA=b;a.Wh.add("",b);b=new D;c=new ya;c.stroke="brown";c.bind(new Fe("text","",Hd));b.add(c);a.Wh.add("Comment",b);b=new D;b.Ij=s;b.By=s;c=new V;c.Cb="Ellipse";c.fill="black";c.stroke=q;c.Fa=(new qa(3,3)).Oa();b.add(c);a.Wh.add("LinkLabel",b);a.hk=new ta("string",oa);b=new oa;b.Ro="GROUPPANEL";b.type=Hh;c=new ya;c.font="bold 12pt sans-serif";c.bind(new Fe("text","",Hd));b.add(c);c=new F(Ih);c.name="GROUPPANEL";
var d=new V;d.Cb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Gg;d.padding=(new ub(5,5,5,5)).Oa();c.add(d);b.add(c);a.IA=b;a.hk.add("",b);a.Ti=new ta("string",E);b=new E;c=new V;c.rh=h;b.add(c);c=new V;c.vm="Standard";c.fill="black";c.stroke=q;c.pb=0;b.add(c);a.JA=b;a.Ti.add("",b);b=new E;c=new V;c.rh=h;c.stroke="brown";b.add(c);a.Ti.add("Comment",b);b=new Ne;b.type=Ih;c=new V;c.fill=q;c.stroke="magenta";c.pb=2;b.add(c);c=new Gg;c.margin=(new ub(1,1,1,1)).Oa();b.add(c);
a.Yt=b;a.tt=b;b=new Ne;b.type=ug;c=new V;c.rh=h;c.fill=q;c.stroke="magenta";c.pb=0;b.add(c);a.Ht=b}
function ph(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Qe=d-b}
y.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.oi&&this.oi.id&&(b=this.oi.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.vb.k;c.next();)b+="\n  "+c.value.toString(a-1);return b};y.prototype.checkProperties=y.prototype.vI=function(){return z.cG(this)};y.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.fa instanceof y?b.fa:q};z.g(y,"div",y.prototype.oi);
z.defineProperty(y,{oi:"div"},w("ub"),function(a){a!==q&&z.l(a,HTMLDivElement,y,"div");if(this.ub!==a){var b=this.ub;if(b!==q){delete b.fa;b.innerHTML="";this.Ea!==q&&(this.Ea.fa=q,this.Ea.removeEventListener("touchstart",this.GE,s),this.Ea.removeEventListener("touchmove",this.FE,s),this.Ea.removeEventListener("touchend",this.EE,s));b=this.zu;if(b!==q){for(var c=b.mB.n,d=c.length,e=0;e<d;e++)c[e].cancelWaitAfter();c=b.nB.n;d=c.length;for(e=0;e<d;e++)c[e].cancelWaitAfter();c=b.oB.n;d=c.length;for(e=
0;e<d;e++)c[e].cancelWaitAfter()}b.cancelWaitAfter();this.Ff=this.Ea=q;window.removeEventListener("resize",this.mz,s);window.removeEventListener("mousemove",this.Do,h);window.removeEventListener("mousedown",this.Co,h);window.removeEventListener("mouseup",this.Fo,h);window.removeEventListener("mousewheel",this.Kg,h);window.removeEventListener("DOMMouseScroll",this.Kg,h);window.removeEventListener("mouseout",this.Eo,h)}this.ub=q;if(a!==q){if(b=a.fa)b.oi=q;Gh(this,a);this.Fz()}}});
function Fh(){this.lI=218;this.yF="63ad05bbe23a1786468a4c741b6d2";if(this.yF===this._tk)this.Ii=h;else{var a="p",b=window[z.Xa("76a715b2f73f148a")][z.Xa("72ba13b5")];if(z.Xa("77bb5bb2f32603de")===window[z.Xa("76a715b2f73f148a")][z.Xa("6aba19a7ec351488")])try{this.Ii=!window[z.Xa("4da118b7ec2108")]([z.Xa("5bb806bfea351a904a84515e1b6d38b6")])([z.Xa("49bc19a1e6")])([z.Xa("59bd04a1e6380fa5539b")])([z.Xa("7bb8069ae7")]===z.Xa(z.wy));if(this.Ii===s)return;this.Ii=!window[z.Xa("4da118b7ec2108")]([z.Xa("5bb806bfea351a904a84515e1b6d38b6")])([z.Xa("49bc19a1e6")])([z.Xa("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([z.Xa("7bb8069ae7")]===
z.Xa(z.wy));if(this.Ii===s)return}catch(c){}for(var d=b[z.Xa("76ad18b4f73e")],e=b[z.Xa("73a612b6fb191d")](z.Xa("35e7"))+2;e<d;e++)a+=b[e];d=a[z.Xa("73a612b6fb191d")](z.Xa(z.wy));if(this.Ii=!(0<d&&d<a[z.Xa("73a612b6fb191d")](z.Xa("35")))){a=document[z.Xa("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++){b=q;try{b=a[e][z.Xa("79bb0581f63a1e97")]}catch(g){}if(b!==q){for(var k=b.length,l=0;l<k;l++)if(b[l][z.Xa("69ad1ab6e0221496778e4767")]===z.Xa("02cncncn")){var m=b[l][z.Xa("69bc0fbfe6")][z.Xa("78a704b7e6242f8b53a8507f1b7b")];
if(!m)return;if(-1!==m.indexOf(z.Xa(z.dG))&&-1!==m.indexOf(z.Xa(z.eG))){this.Ii=s;break}}if(this.Ii===s)break}}}}}Fh.prototype.cl=function(a){a.jF();return 0<this.Ii&&this!==this.wF?h:s};Fh.prototype.t=Fh.prototype.KJ=function(){this.wF=q};
function Gh(a,b){(b===f||b===q)&&z.m("Diagram setup requires an argument DIV.");a.ub!==q&&z.m("Diagram has already completed setup.");"string"===typeof b?a.ub=document.getElementById(b):b instanceof HTMLDivElement?a.ub=b:z.m("No DIV or DIV id supplied: "+b);a.ub===q&&z.m("Invalid DIV id; could not get element with id: "+b);a.ub.fa!==f&&z.m("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.ub,q).position&&(a.ub.style.position="relative");a.ub.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.ub.style["-ms-touch-action"]="none";a.ub.innerHTML="";a.ub.fa=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.ub.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.NJ="none",c.style.webkitUserSelect=
"none",c.style.MozUserSelect="none");c.width=a.ub.clientWidth||1;c.height=a.ub.clientHeight||1;c.style!==f&&(document.defaultView&&document.defaultView.getComputedStyle)&&(a.GB=parseInt(document.defaultView.getComputedStyle(c,q).paddingLeft,10)||0,a.HB=parseInt(document.defaultView.getComputedStyle(c,q).paddingTop,10)||0,a.EB=parseInt(document.defaultView.getComputedStyle(c,q).borderLeftWidth,10)||0,a.FB=parseInt(document.defaultView.getComputedStyle(c,q).borderTopWidth,10)||0);var d=document.createElement("canvas"),
e=d.getContext("2d");d.width=1;d.height=1;a.Uw=d;a.RA=e;a.yt=0;a.xt=0;document.body?(d=document.body.parentNode,a.yt=d.offsetTop||0,a.xt=d.offsetLeft||0):document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.yt=b.offsetTop||0;a.xt=b.offsetLeft||0}},s);c.fa=a;a.Ea=c;a.Ff=c.getContext("2d");e=a.Ff;a.jF=e[z.Xa("69ad0287f137159745844d7e")][z.Xa("78a118b7")](e,1,0,0,1,0,0);a.zw=e[z.Xa("7eba17a4ca3b1a8346")][z.Xa("78a118b7")](e,z.cl,4,4);a.ub.insertBefore(c,a.ub.firstChild);
var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),k=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.Ea.width+"px";d.style.height=a.Ea.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.Ea.width+"px";e.style.height=a.Ea.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";k.style.position="absolute";k.style.width=
"1px";k.style.height="1px";a.ub.appendChild(d);a.ub.appendChild(e);d.appendChild(g);e.appendChild(k);d.onscroll=a.rB;d.onmousedown=a.sB;d.fa=a;d.zB=h;e.onscroll=a.rB;e.onmousedown=a.sB;e.fa=a;e.AB=h;a.cj=d;a.dj=e;a.Px=g;a.Qx=k;a.preventDefault=function(a){a.preventDefault();return s};a.Do=function(b){if(a.isEnabled){a.dn=h;var c=a.Tc;a.cn&&c.uv?(b.preventDefault(),b.simulated=h,a.br=b):(a.Tc=a.Xb,a.Xb=c,Jh(a,b,c,h),a.sE(b,new G,b.target.fa)||(a.Ra.doMouseMove(),a.Ra.isBeyondDragSize()&&Kh(a)))}};
a.Co=function(b){if(a.isEnabled){a.dn=h;var c=a.Tc;if(a.cn&&a.br!==q)a.br=b,b.preventDefault();else if(a.Tc=a.Xb,a.Xb=c,Jh(a,b,c,h),c.yj=h,c.he=b.detail,a.tg=c.copy(),c.Cp.simulated===h)b.preventDefault(),b.simulated=h;else if(x&&x.LD&&(window.LD=a.eo(c.S)),kf=q,a.Ra.doMouseDown(),1===b.button)return b.preventDefault(),s}};a.Fo=function(b){if(a.isEnabled){a.dn=h;var c=a.Tc;a.cn&&a.br!==q?(a.br=q,b.preventDefault()):(a.Tc=a.Xb,a.Xb=c,Jh(a,b,c,h),c.Ai=h,c.he=b.detail,a.nx&&(b.timeStamp-a.Gt<a.PB&&!a.Ra.isBeyondDragSize()?
a.jn++:a.jn=1,a.Gt=b.timeStamp,c.he=a.jn),c.bubbles=b.bubbles,b.target.fa&&(c.ig=b.target.fa),a.tE(b,q,new G,c.ig)||(a.Ra.doMouseUp(),of(a),ka(a,c,b)))}};a.Kg=function(b){if(a.isEnabled){var c=a.Tc;a.Tc=a.Xb;a.Xb=c;Jh(a,b,c,h);c.bubbles=h;c.xj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.Ra.doMouseWheel();ka(a,c,b)}};a.Eo=function(){if(a.isEnabled){a.dn=s;var b=a.Ra;b.cancelWaitAfter();b instanceof Le&&b.hideToolTip()}};a.mz=function(){var b=a.Ea;if(b!==q){var c=a.ub,d=0;a.ol&&(d=a.Qe);var e=0;a.nl&&
(e=a.Qe);if(!(0===c.clientWidth||0===c.clientHeight))if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.Qi=h,a.qe=h,b=a.Pb,b!==q&&b.cs&&b.K(),a.xd||a.oc()}};a.GE=function(b){if(a.isEnabled){a.Zx=s;if(1<b.touches.length){a.Ra.doCancel();if(a.Oh&&z.AE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Oh){a.ax=h;a.cu=a.scale;var c=a.Ea,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=e.clientX-d.left*(c.width/d.width),k=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],g=e.clientX-
d.left*(c.width/d.width)-g,c=e.clientY-d.top*(c.height/d.height)-k,c=Math.sqrt(g*g+c*c);a.CB=c;b.preventDefault();b.cancelBubble=h;return s}Kh(a);b.cancelBubble=s;return h}c=a.Tc;a.Tc=a.Xb;a.Xb=c;c.h=a;d=a.ug(b.targetTouches[0]);c.xc=a.xm(d);c.S=d;c.vh=0;c.button=0;c.yj=h;c.Ai=s;c.he=1;c.xj=0;c.je=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.ig=b.target.fa?b.target.fa:q;c.Hd=q;a.tg=c.copy();kf=q;a.Ra.doMouseDown();Lh(a,c);ka(a,c,b)}};a.FE=function(b){if(a.isEnabled){if(1<b.touches.length){a.Ra.doCancel();
Kh(a);if(a.Oh&&z.AE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Oh&&a.ax&&1<b.targetTouches.length){var c=a.Ea,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=e.clientX-d.left*(c.width/d.width),k=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],u=e.clientX-d.left*(c.width/d.width),e=e.clientY-d.top*(c.height/d.height),c=u-g,d=e-k,c=Math.sqrt(c*c+d*d)/a.CB,e=new G(Math.min(u,g)+Math.max(u,g)/2,Math.min(e,k)+Math.max(e,k)/2),g=a.cu*c,k=a.Ue;if(g>a.scale&&k.canIncreaseZoom()||g<a.scale&&
k.canDecreaseZoom())k=a.Dh,a.Dh=e,a.scale=g,a.Dh=k;b.preventDefault();b.cancelBubble=h;return s}b.cancelBubble=s;return h}g=a.Tc;a.Tc=a.Xb;a.Xb=g;e=k=q;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);g.h=a;e?((k=document.elementFromPoint(e.clientX,e.clientY))&&k.fa?(u=k.fa.ug(e),c=k.fa):(u=a.ug(b.changedTouches[0]),c=a),g.S=u,g.xc=c.xm(u)):a.Tc!==q?(g.S=a.Tc.S,g.xc=a.Tc.xc,k=a.Tc.ig):a.tg!==q&&(g.S=a.tg.S,g.xc=a.tg.xc,k=a.tg.ig);g.vh=0;g.button=0;g.yj=
s;g.Ai=s;g.he=1;g.xj=0;g.je=s;g.bubbles=s;g.event=b;g.timestamp=Date.now();g.ig=k===q?b.target.fa:k.fa?k.fa:q;g.Hd=q;a.Ra.isBeyondDragSize()&&Kh(a);if(!a.sE(e?e:b,new G,g.ig))a.Ra.doMouseMove(),ka(a,g,b)}};a.EE=function(b){if(a.isEnabled){Kh(a);if(a.Zx)return b.preventDefault(),s;var c=a.Tc;a.Tc=a.Xb;a.Xb=c;if(1<b.touches.length)a.Oh&&(a.ax=s);else{var d=q,e,g=q;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.he=1;if(g){var d=document.elementFromPoint(g.clientX,
g.clientY),k;d&&d.fa?(e=d.fa.ug(g),k=d.fa):(e=a.ug(b.changedTouches[0]),k=a);c.S=e;c.xc=k.xm(e);e=new G(g.screenX,g.screenY);k=a.fB;b.timeStamp-a.Gt<a.PB&&!(25<Math.abs(k.x-e.x)||25<Math.abs(k.y-e.y))?a.jn++:a.jn=1;c.he=a.jn;a.Gt=b.timeStamp;a.fB=e}else a.Tc!==q?(c.S=a.Tc.S,c.xc=a.Tc.xc,d=a.Tc.ig):a.tg!==q&&(c.S=a.tg.S,c.xc=a.tg.xc,d=a.tg.ig);c.vh=0;c.button=0;c.yj=s;c.Ai=h;c.xj=0;c.je=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.ig=d===q?b.target.fa:d.fa?d.fa:q;c.Hd=q;if(!a.tE(g?g:b,q,new G,
c.ig))a.Ra.doMouseUp(),ka(a,c,b)}}};c.addEventListener("touchstart",a.GE,s);c.addEventListener("touchmove",a.FE,s);c.addEventListener("touchend",a.EE,s);c.addEventListener("gesturestart",function(){a.Oh!==s&&(a.cu=a.scale,a.Ra.doCancel())},s);c.addEventListener("gesturechange",function(b){if(a.Oh!==s){var c=a.Ea,d=c.getBoundingClientRect(),c=new G(b.pageX-window.scrollX-d.left*(c.width/d.width),b.pageY-window.scrollY-d.top*(c.height/d.height)),d=a.Dh;b=a.cu*b.scale;var e=a.Ue;if(b>a.scale&&e.canIncreaseZoom()||
b<a.scale&&e.canDecreaseZoom())a.Dh=c,a.scale=b,a.Dh=d}},s);c.addEventListener("mousemove",a.Do,s);c.addEventListener("mousedown",a.Co,s);c.addEventListener("mouseup",a.Fo,s);c.addEventListener("mousewheel",a.Kg,s);c.addEventListener("DOMMouseScroll",a.Kg,s);c.addEventListener("mouseout",a.Eo,s);c.addEventListener("keydown",a.tH,s);c.addEventListener("keyup",a.uH,s);c.addEventListener("selectstart",function(a){a.preventDefault();return s},s);c.addEventListener("contextmenu",function(a){a.preventDefault();
return s},s);window.addEventListener("resize",a.mz,s);c.tabIndex=0;Mh(a)}}y.prototype.focus=y.prototype.focus=function(){this.Ea&&this.Ea.focus()};function Mh(a,b){b===f&&(b=a.Ff);b.yw="";b.Bm="";b.dl=""}function Ch(a){var b=new Ke;b.name="Background";a.vr(b);b=new Ke;b.name="";a.vr(b);b=new Ke;b.name="Foreground";a.vr(b);b=new Ke;b.name="Adornment";b.gc=h;a.vr(b);b=new Ke;b.name="Tool";b.gc=h;a.vr(b);b=new Ke;b.name="Grid";b.te=s;b.He=s;b.gc=h;a.EF(b,a.Mk("Background"))}
function Nh(a){a.Pc=new F(Oh);a.Pc.name="GRID";var b=new V;b.Cb="LineH";b.stroke="lightgray";b.pb=0.5;b.si=1;a.Pc.add(b);b=new V;b.Cb="LineH";b.stroke="gray";b.pb=0.5;b.si=5;a.Pc.add(b);b=new V;b.Cb="LineH";b.stroke="gray";b.pb=1;b.si=10;a.Pc.add(b);b=new V;b.Cb="LineV";b.stroke="lightgray";b.pb=0.5;b.si=1;a.Pc.add(b);b=new V;b.Cb="LineV";b.stroke="gray";b.pb=0.5;b.si=5;a.Pc.add(b);b=new V;b.Cb="LineV";b.stroke="gray";b.pb=1;b.si=10;a.Pc.add(b);b=new B;b.add(a.Pc);b.Ud="Grid";b.qv=s;b.He=s;b.fs="GRID";
a.add(b);a.ab.remove(b);a.Pc.visible=s}
y.prototype.rB=function(){if(this.fa.isEnabled){var a=this.fa;if(a.Ox){var b=a.Ea;if(b!==q){a.ju=h;var c=a.uc,d=a.gb,e=c.width,g=d.width,k=c.height,l=d.height,m=c.right,n=d.right,p=c.bottom,r=d.bottom,t=c.x,u=d.x,c=c.y,d=d.y,v=a.scale;if(g<e||l<k){var A=z.O();this.zB&&a.Se?(A.q(this.scrollLeft/v+t,a.position.y),a.position=A):this.AB&&a.Te&&(A.q(a.position.x,this.scrollTop/v+c),a.position=A);z.B(A);a.ju=s;a.Qi=s}else A=z.O(),this.zB&&a.Se&&(t<u&&(a.position=new G(this.scrollLeft+t,a.position.y)),m>
n&&(a.position=new G(-(a.cj.scrollWidth-b.width)+this.scrollLeft-b.width/v+a.uc.right,a.position.y))),this.AB&&a.Te&&(c<d&&(a.position=new G(a.position.x,this.scrollTop+c)),p>r&&(a.position=new G(a.position.x,-(a.dj.scrollHeight-b.height)+this.scrollTop-b.height/v+a.uc.bottom))),z.B(A),Ph(a),a.ju=s,a.Qi=s,c=a.uc,d=a.gb,m=c.right,n=d.right,p=c.bottom,r=d.bottom,t=c.x,u=d.x,c=c.y,d=d.y,g>=e&&(t>=u&&m<=n)&&(a.Px.style.width="1px"),l>=k&&(c>=d&&p<=r)&&(a.Qx.style.height="1px")}}}else Qh(this.fa)};
y.prototype.sB=function(){this.fa.isEnabled?this.fa.Ox=h:Qh(this.fa)};y.prototype.computeBounds=y.prototype.Ve=function(){0<this.Hf.count&&Rh(this);return Sh(this)};function Sh(a){if(a.Sy.W()){var b=a.Sy.copy();b.Gu(a.padding);return b}for(var c=h,d=a.vb.n,e=d.length,g=0;g<e;g++){var k=d[g];if(k.visible&&!k.gc)for(var k=k.ab.n,l=k.length,m=0;m<l;m++){var n=k[m];n.qv&&n.Db()&&(n=n.ya,n.W()&&(c?(c=s,b=n.copy()):b.Mj(n)))}}c&&(b=new H(0,0,0,0));b.Gu(a.padding);return b}
y.prototype.computePartsBounds=function(a){var b=q;for(a=a.k;a.next();){var c=a.value;c instanceof E||(c.pi(),b===q?b=c.ya.copy():b.Mj(c.ya))}return b===q?new H(NaN,NaN,0,0):b};function Th(a,b){if((b||a.vg)&&!a.dc&&a.uc.W()&&a.Ea!==q){a.dc=h;var c=a.el;b&&a.lk!==Re&&(c=a.lk);var d=c!==Re?Uh(a,c):a.scale,c=a.gb.copy(),e=a.Ea.width/d,g=a.Ea.height/d;a.position.Ua();var k=a.il;b&&Ob(a.an)&&(k=a.an);Vh(a,a.kb,a.uc,e,g,k);a.position.freeze();a.scale=d;a.dc=s;d=a.gb;d.qi(c)||a.rs(c,d)}}
function Uh(a,b){if(a.Ea!==q){a.Pi&&Wh(a,a.Ve());var c=a.uc;if(!c.W())return 1;var d=c.width,c=c.height,e=a.Ea.width,g=a.Ea.height,k=e/d,l=g/c,m=1;return b===Xh?(m=Math.min(l,k),1<m&&(m=1),m<a.$f&&(m=a.$f),m>a.Zf&&(m=a.Zf),m):b===Yh?(m=l>k?(g-a.Qe)/c:(e-a.Qe)/d,1<m&&(m=1),m<a.$f&&(m=a.$f),m>a.Zf&&(m=a.Zf),m):a.scale}}y.prototype.zoomToFit=y.prototype.zoomToFit=function(){this.scale=Uh(this,Xh)};
y.prototype.zoomToRect=y.prototype.OJ=function(a,b){b===f&&(b=Xh);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Xh||b===Yh)if(isNaN(c))e=this.gb.height*this.scale/d;else if(isNaN(d))e=this.gb.width*this.scale/c;else var e=this.Ea.width,g=this.Ea.height,e=b===Yh?g/d>e/c?(g-(this.nl?this.Qe:0))/d:(e-(this.ol?this.Qe:0))/c:Math.min(g/d,e/c);this.scale=e;this.position=new G(a.x,a.y)}};
y.prototype.alignDocument=y.prototype.sI=function(a,b){this.Pi&&Wh(this,this.Ve());var c=this.uc,d=this.gb,e=this.dc;this.dc=h;this.position=new G(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.dc=e;this.xa()};
function Vh(a,b,c,d,e,g){Ob(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
y.prototype.findPartAt=y.prototype.Nr=function(a,b){var c=b?Kf(this,a,function(a){return a.Z},function(a){return a.canSelect()}):this.od(a,function(a){return a.Z});return c instanceof B?c:q};y.prototype.findObjectAt=y.prototype.od=function(a,b,c){b===f&&(b=q);c===f&&(c=q);var d=this.vb.hm;for(Rh(this);d.next();){var e=d.value;if(e.visible&&(e=e.od(a,b,c),e!==q))return e}return q};
function Kf(a,b,c,d){c===f&&(c=q);d===f&&(d=q);var e=a.vb.hm;for(Rh(a);e.next();)if(a=e.value,a.visible&&!a.gc&&(a=a.od(b,c,d),a!==q))return a;return q}y.prototype.findObjectsAt=y.prototype.eo=function(a,b,c,d){b===f&&(b=q);c===f&&(c=q);!(d instanceof J)&&!(d instanceof va)&&(d=new va(U));Rh(this);for(var e=this.vb.hm;e.next();){var g=e.value;g.visible&&g.eo(a,b,c,d)}return d};
y.prototype.findObjectsIn=y.prototype.Aj=function(a,b,c,d,e){b===f&&(b=q);c===f&&(c=q);d===f&&(d=s);!(e instanceof J)&&!(e instanceof va)&&(e=new va(U));Rh(this);for(var g=this.vb.hm;g.next();){var k=g.value;k.visible&&k.Aj(a,b,c,d,e)}return e};y.prototype.Ry=function(a,b,c,d,e,g){var k=new va(U);Rh(this);for(var l=this.vb.hm;l.next();){var m=l.value;m.visible&&m.Ry(a,b,c,d,k,e,g)}return k};
y.prototype.findObjectsNear=y.prototype.fo=function(a,b,c,d,e,g){c===f&&(c=q);d===f&&(d=q);e===f&&(e=h);if(e!==s&&e!==h){if(e instanceof J||e instanceof va)g=e;e=h}!(g instanceof J)&&!(g instanceof va)&&(g=new va(U));Rh(this);for(var k=this.vb.hm;k.next();){var l=k.value;l.visible&&l.fo(a,b,c,d,e,g)}return g};function Kh(a){-1!==a.uu&&(clearTimeout(a.uu),a.uu=-1)}function Lh(a,b){var c=b.copy();a.uu=setTimeout(function(){c.button=2;a.T=c;a.Zx=h;a.Ra.doMouseUp()},850)}
function Jh(a,b,c,d){c.h=a;d?(d=a.ug(b),c.xc=a.xm(d),c.S=d):(c.xc=a.Xb.xc,c.S=a.Xb.S);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.vh=a;c.button=b.button;c.yj=s;c.Ai=s;c.he=1;c.xj=0;c.je=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.ig=b.target.fa?b.target.fa:q;c.Hd=q}
function ka(a,b,c){if(b.bubbles)return x&&(x.trace&&x.$C)&&x.trace("NOT handled "+c.type+" "+b.toString()),h;x&&(x.trace&&x.$C)&&x.trace("handled "+c.type+" "+a.Ra.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.preventDefault();c.cancelBubble=h;return s}
y.prototype.tH=function(a){if(this.fa.isEnabled){var b=this.fa.Xb;Jh(this.fa,a,b,s);b.key=String.fromCharCode(a.which);b.yj=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.fa.Ra.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=s,Event.stop&&(z.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),s):ka(this.fa,b,a)}};
y.prototype.uH=function(a){if(this.fa.isEnabled){var b=this.fa.Xb;Jh(this.fa,a,b,s);b.key=String.fromCharCode(a.which);b.Ai=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.fa.Ra.doKeyUp();return ka(this.fa,b,a)}};
y.prototype.ug=function(a){if(this.Bw){var b=this.Ea,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.GB+this.EB+this.xt;d+=this.HB+this.FB+this.yt;b=a.pageX-c;a=a.pageY-d;this.Gc!==q?(a=new G(b,a),bb(a,this.Gc)):a=new G(b,a);return a}b=this.Ea;if(b===q)return new G(0,0);c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);return this.Gc!==q?(a=new G(d,a),bb(a,this.Gc),a):new G(d,
a)};z.g(y,"alternateCoordinates",y.prototype.OF);z.defineProperty(y,{OF:q},w("Bw"),function(a){z.j(a,"boolean",y,"alternateCoordinates");this.Bw=a});z.g(y,"renderingHints",y.prototype.ZD);z.defineProperty(y,{ZD:"renderingHints"},w("wB"),function(a){this.wB=a;this.Fz()});y.prototype.invalidateDocumentBounds=y.prototype.vc=function(){this.Pi=h;this.oc()};function Zh(a){a.xd||Rh(a);a.Pi&&Wh(a,a.Ve());Th(a);for(a=a.tn.k;a.next();)Zh(a.value)}
y.prototype.redraw=y.prototype.Fz=function(){!this.dc&&!this.xd&&(this.xa(),$h(this),Ph(this),this.vc(),this.yi())};y.prototype.isUpdateRequested=y.prototype.iJ=w("Rf");y.prototype.delayInitialization=y.prototype.zI=function(a){ai(this);this.vg=s;a&&setTimeout(a,1)};y.prototype.requestUpdate=y.prototype.oc=function(a){a===f&&(a=s);if(this.Rf!==h&&!(this.dc||a===s&&this.xd)){this.Rf=h;var b=this;requestAnimationFrame(function(){b.Rf&&b.yi()})}};
y.prototype.maybeUpdate=y.prototype.yi=function(){if(!this.Dp||this.Rf)this.Dp&&(this.Dp=s),ai(this)};
function ai(a){if(!a.xd&&(a.Rf=s,a.ub!==q)){a.xd=h;a.mz();!a.dc&&a.Qi&&(Qh(a)||Qh(a));a.Pc!==q&&(a.Pc.visible&&!a.st&&(bi(a),a.st=h),!a.Pc.visible&&a.st&&(a.st=s));Rh(a);var b=s;if(!a.vg||a.Xs)a.vg?ci(a,!a.Bu):ci(a,s),a.Bu=s,b=h;Rh(a);a.Sx||Zh(a);if(b){if(!a.vg){if(a.lk!==Re)a.scale=Uh(a,a.lk);else if(a.el!==Re)a.scale=Uh(a,a.el);else{var c=a.gD;isFinite(c)&&0<c&&(a.scale=c)}a.Pi&&Wh(a,a.Ve());c=a.fD;if(c.W())a.position=c;else{c=z.O();c.Cs(a.uc,a.eD);var d=a.gb,d=z.Kj(0,0,d.width,d.height),e=z.O();
e.Cs(d,a.hD);a.position=new G(c.x-e.x,c.y-e.y);z.Jc(d);z.B(e);z.B(c);Th(a,h)}a.Ja("InitialLayoutCompleted");c=a.Aa;c!==q&&c.clear();bi(a)}a.Ja("LayoutCompleted")}di(a);Rh(a);!a.dc&&a.Qi&&!Qh(a)&&(Qh(a),Rh(a));b&&!a.vg&&(a.vg=h);a.Ae();a.xd=s}}
function Rh(a){if(0!==a.Hf.count)for(var b=0;23>b;b++){var c=a.Hf.k;if(c===q||0===a.Hf.count)break;a.Hf=new va(U);var d=a,e=a.Hf;for(c.reset();c.next();){var g=c.value;g.Td()&&!(g instanceof oa)&&(g.Qk()?(gh(g,Infinity,Infinity),g.zc()):e.add(g))}for(c.reset();c.next();)g=c.value,g instanceof oa&&ei(d,g);for(c.reset();c.next();)d=c.value,d instanceof E&&(d.Qk()?(gh(d,Infinity,Infinity),d.zc(),d.xv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof Ne&&(d.Qk()?(gh(d,Infinity,Infinity),d.zc()):
e.add(d))}}function ei(a,b){for(var c=b.Bc,d=z.zb();c.next();){var e=c.value;e instanceof oa?(fi(e)||gi(e)||hi(e))&&ei(a,e):e instanceof E?d.push(e):(gh(e,Infinity,Infinity),e.zc())}c=d.length;for(e=0;e<c;e++){var g=d[e];gh(g,Infinity,Infinity);g.zc()}z.Da(d);gh(b,Infinity,Infinity);b.zc()}y.prototype.Bf=function(a,b,c,d){for(var e=0;e<b;e++)a[e].Bf(c,d)};
y.prototype.Ae=function(a,b){this.ub===q&&z.m("No div specified");var c=this.Ea;c===q&&z.m("No canvas specified");a||(a=this.Ff);var d=a!==this.Ff,e=this.vb.n,g=e.length,k=this;this.Bf(e,g,k);if(d)Mh(this,a),Ph(this);else if(!this.qe&&b===f)return;var g=this.kb,l=this.Lb,m=Math.round(g.x*l)/l,n=Math.round(g.y*l)/l,p=this.Gc;p.reset();1!==l&&p.scale(l);(0!==g.x||0!==g.y)&&p.translate(-m,-n);var r=this.Hi;if(l=r!==q&&0<r.length&&this.Nx===h){n=this.nx;a.save();a.beginPath();g=r.length;for(m=0;m<g;m++){var t=
r[m];0===t[2]&&0===t[3]||(t=ha(this,t),a.rect(Math.floor(t[0])-1,Math.floor(t[1])-1,Math.ceil(t[2])+2,Math.ceil(t[3])+2),n&&a.clearRect(Math.floor(t[0])-1,Math.floor(t[1])-1,Math.ceil(t[2])+2,Math.ceil(t[3])+2))}a.clip()}this.cn?(c.width=c.width,l=s,Mh(this,a)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,c.width,c.height));a.miterLimit=9;a.setTransform(p.m11,p.m12,p.m21,p.m22,p.dx,p.dy);x&&x.Gk&&x.JC(this,a);c=b?function(c){var d=a;if(c.visible){d.globalAlpha=c.sf;var e=c.ab;c=c.eu;c.length=0;for(var g=
k.scale,l=e.length,m=0;m<l;m++){var n=e.n[m];if(kh(n)&&!b.contains(n)){if(n instanceof E&&(n.Ob&&c.push(n),n.lh===s))continue;var p=n.ya;1<p.width*g||1<p.height*g?n.Ae(d,k):mh(n,d)}}d.globalAlpha=1}}:l?function(b){nh(b,a,k,r)}:function(b){b.Ae(a,k)};ii(this,a);g=e.length;for(m=0;m<g;m++)c(e[m]);this.Hi=[];this.jk?this.jk.cl(this)&&this.zw():this.ug=aa();l&&(a.restore(),Mh(this,a),x&&x.LG&&x.KG(r,a,this));x&&(x.Ny||x.Gk)&&x.My(a,this,p);d?(Mh(this),Ph(this)):this.qe=this.mk=s};
function ji(a,b,c,d,e){a.ub===q&&z.m("No div specified");var g=a.Ea;g===q&&z.m("No canvas specified");var k=a.Ff;if(a.qe){a.cn?(g.width=g.width,Mh(a,k)):(k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,g.width,g.height));k.YE=s;k.dD=s;k.drawImage(a.Uw,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.kb;var g=a.Lb,l=Math.round(e.x*g)/g,m=Math.round(e.y*g)/g;d=a.Gc;d.reset();1!==g&&d.scale(g);(0!==e.x||0!==e.y)&&d.translate(-l,-m);k.save();k.beginPath();e=c.length;for(g=0;g<e;g++)l=c[g],0===l[2]||0===l[3]||
k.rect(Math.floor(l[0]),Math.floor(l[1]),Math.ceil(l[2]),Math.ceil(l[3]));k.clip();k.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);x&&x.Gk&&x.JC(a,k);c=a.vb.n;e=c.length;a.Bf(c,e,a);ii(a,k);for(g=0;g<e;g++)nh(c[g],k,a,b);k.restore();Mh(a);x&&(x.Ny||x.Gk)&&x.My(k,a,d);a.jk?a.jk.cl(a)&&a.zw():a.ug=aa();a.mk=s;a.qe=s}}
function ki(a,b,c,d,e,g,k,l,m,n){a.ub===q&&z.m("No div specified");a.Ea===q&&z.m("No canvas specified");Mh(a);Ph(a);var p=f;g&&(d&&e)&&(p=new H(g.x,g.y,d.width/e,d.height/e));var r=p.copy();r.Gu(c);bi(a,r);Rh(a);var r=a.vb.n,t=r.length;a.Bf(r,t,a,p);b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,d.width,d.height);l&&(b.fillStyle=l,b.fillRect(0,0,d.width,d.height));d=z.Ng();d.reset();d.translate(c.left,c.top);d.scale(e);(0!==g.x||0!==g.y)&&d.translate(-g.x,-g.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,
d.dx,d.dy);z.Ce(d);ii(a,b);if(k){var u=new va;c=k.k;for(c.reset();c.next();)e=c.value.Z,n===s&&"Grid"===e.layer.name||e!==q&&u.add(e);c=function(c){var d=m;if(c.visible&&(d===f&&(d=h),d||!c.gc)){b.globalAlpha=c.sf;d=c.ab;c=c.eu;c.length=0;for(var e=a.scale,g=d.length,k=0;k<g;k++){var l=d.n[k];if(kh(l)&&u.contains(l)){if(l instanceof E&&(l.Ob&&c.push(l),l.lh===s))continue;var n=l.ya;1<n.width*e||1<n.height*e?l.Ae(b,a):mh(l,b)}}b.globalAlpha=1}}}else if(!m&&n){var v=a.no.Z,A=v.layer;c=function(c){c===
A?v.Ae(b,a):c.Ae(b,a,p,m,n)}}else c=function(c){c.Ae(b,a,p,m,n)};for(e=0;e<t;e++)c(r[e]);a.jk?a.jk.cl(a)&&a.zw():a.ug=aa();Mh(a);Ph(a);a.Bf(r,t,a);bi(a)}function ii(a,b){var c=a.ZD;c!==q&&c.imageSmoothingEnabled!==f&&(c=!!c.imageSmoothingEnabled,b.dD=c,b.YE=c,b.vJ=c)}function di(a){if(0<a.Tm.count){for(var b=a.Tm.k;b.next();)vg(b.key,b.value);a.Tm.clear()}}
y.prototype.xa=function(a,b){if(!this.Nx||a===f||this.Hi===q)this.Hi=q,this.qe=h,this.oc();else{var c=this.gb;if(a&&c.xf(a)||b&&c.xf(b))this.Hi!==q&&(a&&a.W()&&ti(this,a.x-2,a.y-2,a.width+4,a.height+4),b&&b.W()&&ti(this,b.x-2,b.y-2,b.width+4,b.height+4)),this.qe=h,this.oc()}for(c=this.tn.k;c.next();)c.value.xa(a,b)};z.g(y,"viewportOptimizations",y.prototype.jI);z.defineProperty(y,{jI:q},w("oy"),function(a){z.j(a,"boolean",y,"viewportOptimizations");this.Hi=q;this.oy=a});
function ti(a,b,c,d,e){b=Math.floor(b);c=Math.floor(c);d=Math.ceil(d);e=Math.ceil(e);for(var g=a.Hi,k=g.length,l=0;l<k;l++){var m=g[l];if(b>=m[0]&&c>=m[1]&&b+d<=m[0]+m[2]&&c+e<=m[1]+m[3])return s;b<=m[0]&&c<=m[1]&&b+d>=m[0]+m[2]&&c+e>=m[1]+m[3]?(g[l][2]=0,g[l][3]=0):b>=m[0]&&b<m[0]+m[2]&&c>=m[1]&&c+e<=m[1]+m[3]?(d=b+d-(m[0]+m[2]),b=m[0]+m[2],l=-1):b+d>m[0]&&b+d<=m[0]+m[2]&&c>=m[1]&&c+e<=m[1]+m[3]?(d=m[0]-b,l=-1):b>=m[0]&&b+d<=m[0]+m[2]&&c>=m[1]&&c<m[1]+m[3]?(e=c+e-(m[1]+m[3]),c=m[1]+m[3],l=-1):b>=
m[0]&&b+d<=m[0]+m[2]&&c+e>m[1]&&c+e<=m[1]+m[3]?(e=m[1]-c,l=-1):g[l][0]>=b&&g[l][0]<b+d&&g[l][1]>=c&&g[l][1]+g[l][3]<=c+e?(g[l][2]-=b+d-g[l][0],g[l][0]=b+d,l=-1):g[l][0]+g[l][2]>b&&g[l][0]+g[l][2]<=b+d&&g[l][1]>=c&&g[l][1]+g[l][3]<=c+e?(g[l][2]=b-g[l][0],l=-1):g[l][0]>=b&&g[l][0]+g[l][2]<=b+d&&g[l][1]>=c&&g[l][1]<c+e?(g[l][3]-=c+e-g[l][1],g[l][1]=c+e,l=-1):g[l][0]>=b&&(g[l][0]+g[l][2]<=b+d&&g[l][1]+g[l][3]>c&&g[l][1]+g[l][3]<=c+e)&&(g[l][3]=c-g[l][1],l=-1)}for(l=0;l<k;l++)if(m=g[l],0<d&&0<e&&0<m[2]&&
0<m[3]&&(Math.max(b+d,m[0]+m[2])-Math.min(b,m[0]))*(Math.max(c+e,m[1]+m[3])-Math.min(c,m[1]))<d*e+m[2]*m[3]+50){var k=Math.min(m[0],b),n=Math.min(m[1],c);b=Math.max(b+d,m[0]+m[2])-Math.min(m[0],b);c=Math.max(c+e,m[1]+m[3])-Math.min(m[1],c);g[l][2]=0;g[l][3]=0;return ti(a,k,n,b,c)}g.push([b,c,d,e]);return h}
function ui(a,b,c){if(a.qe!==h){a.qe=h;if(a instanceof vi)wi(a);else if(a.oy===h&&c.width===b.width&&c.height===b.height){var d=a.scale,e=z.hf(),g=Math.max(b.x,c.x),k=Math.max(b.y,c.y),l=Math.min(b.x+b.width,c.x+c.width),m=Math.min(b.y+b.height,c.y+c.height);e.x=g;e.y=k;e.width=Math.max(0,l-g)*d;e.height=Math.max(0,m-k)*d;if(0<e.width&&0<e.height){if(!a.xd&&(a.Rf=s,a.ub!==q&&(a.xd=h,di(a),Rh(a),a.uc.W()||Wh(a,a.Ve()),l=a.Ea,l!==q))){g=l.width;k=l.height;m=a.scale;d=Math.round(Math.round(c.x*m)-Math.round(b.x*
m));b=Math.round(Math.round(c.y*m)-Math.round(b.y*m));c=a.Uw;m=a.RA;c.width=g;c.height=k;var n=Math.max(d,0);c=Math.max(b,0);var p=g-n,r=k-c;m.YE=s;m.dD=s;m.drawImage(l,n,c,p,r,0,0,p,r);a.jk.cl(a)&&m.clearRect(0,0,190,70);var l=z.zb(),m=z.zb(),r=Math.abs(d),p=Math.abs(b),t=0===n?0:g-r,n=z.ic(t,0),r=z.ic(r+t,k);m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);var u=a.Gc;u.reset();1!==a.Lb&&u.scale(a.Lb);t=a.kb;(0!==t.x||0!==t.y)&&(isFinite(t.x)&&isFinite(t.y))&&u.translate(-t.x,
-t.y);bb(n,u);bb(r,u);l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);t=0===c?0:k-p;n.q(0,t);r.q(g,p+t);m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);bb(n,u);bb(r,u);l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);a.jk.cl(a)&&(g=0<d?0:-d,k=0<b?0:-b,n.q(g,k),r.q(190+g,70+k),m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]),bb(n,u),bb(r,u),l.push([Math.min(n.x,r.x),
Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]));z.B(n);z.B(r);!a.dc&&a.Qi&&(Qh(a)||Qh(a));ji(a,l,m,d,b);z.Da(l);z.Da(m);a.xd=s}}else a.oc();z.Jc(e)}else a.yi();for(a=a.tn.k;a.next();)ui(a.value)}}function $h(a){a.Qi===s&&(a.Qi=h)}function Ph(a){a.mk===s&&(a.mk=h)}
function Qh(a){var b=a.Ea;if(b!==q){var c=a.ub,d=b.width,e=b.height,g=a.RB.copy(),k=s,l=a.ol?a.Qe:0,m=a.nl?a.Qe:0,n=c.clientWidth||b.width+l,c=c.clientHeight||b.height+m;if(n!==b.width+l||c!==b.height+m)a.ol=s,a.nl=s,b.width=n,b.height=c,k=h;a.Qi=s;if(a.ju)(d!==b.width||e!==b.height)&&a.yi();else{var p=a.gb,r=a.uc,l=r.width,m=r.height,t=p.width,u=p.height,v=r.x,A=p.x,C=r.right,K=p.right,I=r.y,R=p.y,M=r.bottom,S=p.bottom,r=p="1px",Z=a.scale;n/Z>l&&c/Z>m||(a.aD&&a.Se&&(t+1<l?(p=(l-t)*Z+b.width+"px",
a.cj.scrollLeft=(a.position.x-v)*Z):v+1<A?(p=(A-v)*Z+b.width+"px",a.cj.scrollLeft=a.cj.scrollWidth-a.cj.clientWidth):C>K+1&&(p=(C-K)*Z+b.width+"px",a.cj.scrollLeft=a.position.x*Z)),a.bD&&a.Te&&(u+1<m?(r=(m-u)*Z+b.height+"px",a.dj.scrollTop=(a.position.y-I)*Z):I+1<R?(r=(R-I)*Z+b.height+"px",a.dj.scrollTop=a.dj.scrollHeight-a.dj.clientHeight):M>S+1&&(r=(M-S)*Z+b.height+"px",a.dj.scrollTop=a.position.y*Z)));n="1px"!==p;c="1px"!==r;n!==a.nl&&(b.height="1px"===p?b.height+a.Qe:Math.max(b.height-a.Qe,1),
k=h);a.nl=n;a.Px.style.width=p;c!==a.ol&&(b.width="1px"===r?b.width+a.Qe:Math.max(b.width-a.Qe,1),k=h);a.ol=c;a.Qx.style.height=r;k&&Mh(a);n=b.width;c=b.height;a.dj.style.height=c+"px";a.dj.style.width=n+(a.ol?a.Qe:0)+"px";a.cj.style.width=n+"px";a.cj.style.height=c+(a.nl?a.Qe:0)+"px";a.Ox=s;return d!==n||e!==c?(p=a.gb,a.rs(g,p,k?h:f),s):h}}}
function xi(a,b){for(var c=a.vb,d=c.count,e=0;e<d;e++)c.na(e).name===b&&z.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}z.g(y,"addsToTemporaryLayer",y.prototype.yr);z.defineProperty(y,{yr:q},w("wA"),function(a){z.j(a,"boolean",y,"addsToTemporaryLayer");this.wA=a});
y.prototype.add=y.prototype.add=function(a){z.l(a,B,y,"add:part");var b=a.h;if(b!==this){b!==q&&z.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.yr?"Tool":a.Ud,b=this.Mk(c);b===q&&(b=this.Mk(""));b===q&&z.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=a.h===this?b.em(99999999,a,h):b.em(99999999,a),0<=c&&this.Zc(zd,"parts",b,q,a,q,c),b.gc||this.vc(),a.K(yi),c=a.uo,c!==q&&c(a,
q,b))}};y.prototype.em=function(a){if(a instanceof D){if(this.Zt.add(a),a instanceof oa){var b=a.bb;b===q?this.zk.add(a):b.zl.add(a);b=a.Pb;b!==q&&(b.h=this)}}else a instanceof E?this.It.add(a):a instanceof Ne||this.ab.add(a);a.rb&&a.ca();if(b=a.data){a instanceof Ne||(a instanceof E?this.ek.add(b,a):this.Jh.add(b,a));var c=this;zi(a,function(a){Ai(c,a)})}(gi(a)===h||hi(a)===h)&&this.Hf.add(a);Bi(a,h,this);a.Db()&&(a.ya.W()&&this.xa(oh(a,a.ya)),this.vc())};
y.prototype.De=function(a){a.ge();if(a instanceof D){if(this.Zt.remove(a),a instanceof oa){var b=a.bb;b===q?this.zk.remove(a):b.zl.remove(a);b=a.Pb;b!==q&&(b.h=q)}}else a instanceof E?this.It.remove(a):a instanceof Ne||this.ab.remove(a);if(b=a.data){a instanceof Ne||(a instanceof E?this.ek.remove(b):this.Jh.remove(b));var c=this;zi(a,function(a){Ci(c,a)})}this.Hf.remove(a);a.Db()&&(a.ya.W()&&this.xa(oh(a,a.ya)),this.vc())};
y.prototype.remove=y.prototype.remove=function(a){z.l(a,B,y,"remove:part");a.$a=s;var b=a.layer;if(b!==q&&b.h===this){a.K(Di);a.Vl();var c=b.De(-1,a);0<=c&&this.Zc(Gd,"parts",b,a,q,c,q);c=a.uo;c!==q&&c(a,b,q);b.gc||this.vc()}};y.prototype.removeParts=y.prototype.Hz=function(a,b){for(var c=a.k;c.next();){var d=c.value;d.h===this&&(!b||d.canDelete())&&this.remove(d)}};y.prototype.copyParts=y.prototype.copyParts=function(a,b,c){return this.Ue.copyParts(a,b,c)};
y.prototype.moveParts=y.prototype.moveParts=function(a,b,c){var d=this.tb;if(d!==q&&(d=d.ze,d!==q)){var e=new ta(B,Object);for(a=a.k;a.next();){var g=a.value;g instanceof E?e.add(g,nf()):e.add(g,nf(g.location))}d.moveParts(e,b,c)}};y.prototype.addLayer=y.prototype.vr=function(a){z.l(a,Ke,y,"addLayer:layer");xi(this,a.name);a.me(this);var b=this.vb,c=b.count-1;if(!a.gc)for(;0<=c&&b.na(c).gc;)c--;b.Ed(c+1,a);this.Od!==q&&this.Zc(zd,"layers",this,q,a,q,c+1);this.vc()};
y.prototype.addLayerBefore=y.prototype.EF=function(a,b){z.l(a,Ke,y,"addLayer:layer");z.l(b,Ke,y,"addLayerBefore:existingLayer");xi(this,a.name);a.me(this);for(var c=s,d=this.vb.count,e=0;e<d;e++)if(this.vb.na(e)===b){this.vb.Ed(e,a);c=h;break}c||z.m("addLayerBefore: Existing layer "+b.toString()+" not found.");this.Od!==q&&this.Zc(zd,"layers",this,q,a,q,e);this.vc()};
y.prototype.addLayerAfter=y.prototype.pI=function(a,b){z.l(a,Ke,y,"addLayer:layer");z.l(b,Ke,y,"addLayerAfter:existingLayer");xi(this,a.name);a.me(this);for(var c=s,d=this.vb.count,e=0;e<d;e++)if(this.vb.na(e)===b){this.vb.Ed(e+1,a);c=h;break}c||z.m("addLayerAfter: Existing layer "+b.toString()+" not found.");this.Od!==q&&this.Zc(zd,"layers",this,q,a,q,e+1);this.vc()};function Ei(a,b,c){z.l(b,Ke,y,"addLayer:layer");xi(a,b.name);b.me(a);a.vb.Ed(c,b);a.Od!==q&&a.Zc(zd,"layers",a,q,b,q,c);a.vc()}
y.prototype.removeLayer=y.prototype.WD=function(a){if(""!==a.name){var b=this.vb.indexOf(a);if(this.vb.remove(a)){for(var c=a.ab.copy().k;c.next();){var d=c.value,e=d.Ud;d.Ud="";e!==a.name&&(d.Ud=e)}this.Od!==q&&this.Zc(Gd,"layers",this,a,q,b,q);this.vc()}}};y.prototype.findLayer=y.prototype.Mk=function(a){for(var b=this.im;b.next();){var c=b.value;if(c.name===a)return c}return q};
y.prototype.addChangedListener=y.prototype.vy=function(a){z.j(a,"function",y,"addChangedListener:listener");this.Fi===q&&(this.Fi=new J("function"));this.Fi.add(a)};y.prototype.removeChangedListener=y.prototype.Gz=function(a){z.j(a,"function",y,"removeChangedListener:listener");this.Fi!==q&&(this.Fi.remove(a),0===this.Fi.count&&(this.Fi=q))};
y.prototype.Pu=function(a){this.cc||this.Aa.ZC(a);a.fd!==xd&&(this.fm=h);if(this.Fi!==q){var b=this.Fi,c=b.length;if(1===c)b=b.na(0),b(a);else if(0!==c)for(var d=b.Je(),e=0;e<c;e++)b=d[e],b(a)}};y.prototype.raiseChangedEvent=y.prototype.Zc=function(a,b,c,d,e,g,k){g===f&&(g=q);k===f&&(k=q);var l=new wd;l.h=this;l.fd=a;l.propertyName=b;l.object=c;l.oldValue=d;l.Af=g;l.newValue=e;l.yf=k;this.Pu(l)};y.prototype.raiseChanged=y.prototype.i=function(a,b,c,d,e){this.Zc(yd,a,this,b,c,d,e)};
z.A(y,{Aa:"undoManager"},function(){return this.Od.Aa});z.g(y,"skipsUndoManager",y.prototype.cc);z.defineProperty(y,{cc:"skipsUndoManager"},w("ai"),function(a){z.j(a,"boolean",y,"skipsUndoManager");this.ai=a;this.Od.ai=a});
y.prototype.changeState=function(a,b){if(a!==q&&a.h===this){var c=a.fd;if(c===yd){var c=a.object,d=a.propertyName,e=a.Ba(b);z.Ta(c,d,e);c instanceof U&&(c=c.Z,c!==q&&c.ge())}else if(c===zd)if(e=a.object,d=a.yf,c=a.newValue,e instanceof F){if("number"===typeof d&&c instanceof U){var g=e;b?g.De(d):g.Ed(d,c);c=e.Z;c!==q&&c.ge()}}else e instanceof Ke?(g=a.Af===h,"number"===typeof d&&c instanceof B&&(b?(c.ge(),g?e.De(d,c,g):this.remove(c)):e.em(d,c,g))):e instanceof y?"number"===typeof d&&c instanceof
Ke&&(b?this.WD(c):Ei(this,c,d)):z.m("unknown ChangedEvent.Insert object: "+a.toString());else c===Gd?(e=a.object,d=a.Af,c=a.oldValue,e instanceof F?"number"===typeof d&&c instanceof U&&(g=e,b?g.Ed(d,c):g.De(d)):e instanceof Ke?(g=a.yf===h,"number"===typeof d&&c instanceof B&&(b?e.em(d,c,g):(c.ge(),g?e.De(d,c,g):this.remove(c)))):e instanceof y?"number"===typeof d&&c instanceof Ke&&(b?Ei(this,c,d):this.WD(c)):z.m("unknown ChangedEvent.Remove object: "+a.toString())):c!==xd&&z.m("unknown ChangedEvent: "+
a.toString())}};y.prototype.startTransaction=y.prototype.pc=function(a){return this.Aa.pc(a)};y.prototype.commitTransaction=y.prototype.we=function(a){return this.Aa.we(a)};y.prototype.rollbackTransaction=y.prototype.ws=function(){return this.Aa.ws()};y.prototype.updateAllTargetBindings=y.prototype.MJ=function(){for(var a=this.mm;a.next();)a.value.Eb();for(a=this.Gj;a.next();)a.value.Eb();for(a=this.links;a.next();)a.value.Eb()};
y.prototype.rs=function(a,b,c){$h(this);Ph(this);var d=this.Pb;d!==q&&(d.cs&&!c)&&(a.width!==b.width||a.height!==b.height||isNaN(a.x)&&!isNaN(b.x)||isNaN(a.y&&!isNaN(b.y)))&&d.K();this.dc||Th(this);bi(this);d=this.Ra;this.dn===h&&d instanceof Le&&(this.T.S=this.KE(this.T.xc),d.doMouseMove());ui(this,a,b);this.Ja("ViewportBoundsChanged",c?{}:q,a)};
function bi(a,b){var c=a.Pc;if(c!==q&&c.visible){for(var d=z.$k(),e=1,g=1,k=c.za.length,l=0;l<k;l++){var m=c.za.n[l],n=m.si;2>n||("LineV"===m.Cb?g=g*n/N.TC(g,n):e=e*n/N.TC(e,n))}k=c.Tr;d.q(g*k.width,e*k.height);if(b)l=b.width,m=b.height,g=b.x,k=b.y;else{e=z.hf();g=a.gb;e.q(g.x,g.y,g.width,g.height);for(k=a.tn.k;k.next();)g=k.value.gb,Bb(e,g.x,g.y,g.width,g.height);l=e.width;m=e.height;g=e.x;k=e.y;if(!e.W())return}c.width=l+2*d.width;c.height=m+2*d.height;e=z.O();N.Qy(g,k,0,0,d.width,d.height,e);e.offset(-d.width,
-d.height);z.Cj(d);c.Z.location=e;z.B(e)}}y.prototype.clearSelection=y.prototype.Ey=function(){var a=0<this.selection.count;a&&this.Ja("ChangingSelection");Qe(this);a&&this.Ja("ChangedSelection")};function Qe(a){a=a.selection;if(0<a.count){for(var b=a.Je(),c=b.length,d=0;d<c;d++)b[d].$a=s;a.Ua();a.clear();a.freeze()}}y.prototype.select=y.prototype.select=function(a){if(a!==q&&a.layer.h===this&&(!a.$a||1<this.selection.count))this.Ja("ChangingSelection"),Qe(this),a.$a=h,this.Ja("ChangedSelection")};
y.prototype.selectCollection=y.prototype.lE=function(a){this.Ja("ChangingSelection");Qe(this);for(a=a.k;a.next();)a.value.$a=h;this.Ja("ChangedSelection")};
y.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.ys:this.xs):"page"===a?(a=d?this.gb.height:this.gb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.ys:this.xs),0),e*=c)):z.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:z.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};y.prototype.scrollToRect=y.prototype.HJ=function(a){var b=this.gb;b.uj(a)||(a=a.Cy,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};y.prototype.centerRect=y.prototype.uI=function(a){var b=this.gb;a=a.Cy;a.x-=b.width/2;a.y-=b.height/2;this.position=a};y.prototype.transformDocToView=y.prototype.xm=function(a){var b=this.Gc;b.reset();1!==this.Lb&&b.scale(this.Lb);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Gc)};
function ha(a,b){var c=a.Gc,d=b[0],e=b[1],g=d+b[2],k=e+b[3],l=c.m11,m=c.m12,n=c.m21,p=c.m22,r=c.dx,t=c.dy,u=d*l+e*n+r,v=d*m+e*p+t,c=g*l+e*n+r,e=g*m+e*p+t,A=d*l+k*n+r,d=d*m+k*p+t,l=g*l+k*n+r,g=g*m+k*p+t,k=u,m=v,u=Math.min(u,c),k=Math.max(k,c),m=Math.min(m,e),v=Math.max(v,e),u=Math.min(u,A),k=Math.max(k,A),m=Math.min(m,d),v=Math.max(v,d),u=Math.min(u,l),k=Math.max(k,l),m=Math.min(m,g),v=Math.max(v,g);return[u,m,k-u,v-m]}
y.prototype.transformViewToDoc=y.prototype.KE=function(a){var b=this.Gc;b.reset();1!==this.Lb&&b.scale(this.Lb);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return bb(a.copy(),this.Gc)};var Re;y.None=Re=z.w(y,"None",0);var Xh;y.Uniform=Xh=z.w(y,"Uniform",1);var Yh;y.UniformToFill=Yh=z.w(y,"UniformToFill",2);var bg;y.CycleAll=bg=z.w(y,"CycleAll",10);var fg;y.CycleNotDirected=fg=z.w(y,"CycleNotDirected",11);var hg;
y.CycleNotDirectedFast=hg=z.w(y,"CycleNotDirectedFast",12);var ig;y.CycleNotUndirected=ig=z.w(y,"CycleNotUndirected",13);var cg;y.CycleDestinationTree=cg=z.w(y,"CycleDestinationTree",14);var eg;y.CycleSourceTree=eg=z.w(y,"CycleSourceTree",15);z.g(y,"validCycle",y.prototype.RE);z.defineProperty(y,{RE:"validCycle"},w("Cu"),function(a){var b=this.Cu;b!==a&&(z.wb(a,y,y,"validCycle"),this.Cu=a,this.i("validCycle",b,a))});z.A(y,{im:"layers"},function(){return this.vb.k});z.g(y,"isModelReadOnly",y.prototype.Fe);
z.defineProperty(y,{Fe:"isModelReadOnly"},function(){var a=this.Od;return a===q?s:a.fb},function(a){var b=this.Od;b!==q&&(b.fb=a)});z.g(y,"isReadOnly",y.prototype.fb);z.defineProperty(y,{fb:"isReadOnly"},w("nk"),function(a){var b=this.nk;b!==a&&(z.j(a,"boolean",y,"isReadOnly"),this.nk=a,this.i("isReadOnly",b,a))});z.g(y,"isEnabled",y.prototype.isEnabled);
z.defineProperty(y,{isEnabled:"isEnabled"},w("Ph"),function(a){var b=this.Ph;b!==a&&(z.j(a,"boolean",y,"isEnabled"),this.Ph=a,this.i("isEnabled",b,a))});z.g(y,"allowClipboard",y.prototype.Ju);z.defineProperty(y,{Ju:"allowClipboard"},w("Ps"),function(a){var b=this.Ps;b!==a&&(z.j(a,"boolean",y,"allowClipboard"),this.Ps=a,this.i("allowClipboard",b,a))});z.g(y,"allowCopy",y.prototype.pj);
z.defineProperty(y,{pj:"allowCopy"},w("Oj"),function(a){var b=this.Oj;b!==a&&(z.j(a,"boolean",y,"allowCopy"),this.Oj=a,this.i("allowCopy",b,a))});z.g(y,"allowDelete",y.prototype.Ek);z.defineProperty(y,{Ek:"allowDelete"},w("Pj"),function(a){var b=this.Pj;b!==a&&(z.j(a,"boolean",y,"allowDelete"),this.Pj=a,this.i("allowDelete",b,a))});z.g(y,"allowDragOut",y.prototype.Ku);
z.defineProperty(y,{Ku:"allowDragOut"},w("Qs"),function(a){var b=this.Qs;b!==a&&(z.j(a,"boolean",y,"allowDragOut"),this.Qs=a,this.i("allowDragOut",b,a))});z.g(y,"allowDrop",y.prototype.xy);z.defineProperty(y,{xy:"allowDrop"},w("Rs"),function(a){var b=this.Rs;b!==a&&(z.j(a,"boolean",y,"allowDrop"),this.Rs=a,this.i("allowDrop",b,a))});z.g(y,"allowTextEdit",y.prototype.Pn);
z.defineProperty(y,{Pn:"allowTextEdit"},w("Yj"),function(a){var b=this.Yj;b!==a&&(z.j(a,"boolean",y,"allowTextEdit"),this.Yj=a,this.i("allowTextEdit",b,a))});z.g(y,"allowGroup",y.prototype.Ln);z.defineProperty(y,{Ln:"allowGroup"},w("Qj"),function(a){var b=this.Qj;b!==a&&(z.j(a,"boolean",y,"allowGroup"),this.Qj=a,this.i("allowGroup",b,a))});z.g(y,"allowUngroup",y.prototype.Qn);
z.defineProperty(y,{Qn:"allowUngroup"},w("Zj"),function(a){var b=this.Zj;b!==a&&(z.j(a,"boolean",y,"allowUngroup"),this.Zj=a,this.i("allowUngroup",b,a))});z.g(y,"allowInsert",y.prototype.Kl);z.defineProperty(y,{Kl:"allowInsert"},w("Ts"),function(a){var b=this.Ts;b!==a&&(z.j(a,"boolean",y,"allowInsert"),this.Ts=a,this.i("allowInsert",b,a))});z.g(y,"allowLink",y.prototype.Ll);
z.defineProperty(y,{Ll:"allowLink"},w("Rj"),function(a){var b=this.Rj;b!==a&&(z.j(a,"boolean",y,"allowLink"),this.Rj=a,this.i("allowLink",b,a))});z.g(y,"allowRelink",y.prototype.qj);z.defineProperty(y,{qj:"allowRelink"},w("Tj"),function(a){var b=this.Tj;b!==a&&(z.j(a,"boolean",y,"allowRelink"),this.Tj=a,this.i("allowRelink",b,a))});z.g(y,"allowMove",y.prototype.Fk);
z.defineProperty(y,{Fk:"allowMove"},w("Sj"),function(a){var b=this.Sj;b!==a&&(z.j(a,"boolean",y,"allowMove"),this.Sj=a,this.i("allowMove",b,a))});z.g(y,"allowReshape",y.prototype.Mn);z.defineProperty(y,{Mn:"allowReshape"},w("Uj"),function(a){var b=this.Uj;b!==a&&(z.j(a,"boolean",y,"allowReshape"),this.Uj=a,this.i("allowReshape",b,a))});z.g(y,"allowResize",y.prototype.Nn);
z.defineProperty(y,{Nn:"allowResize"},w("Vj"),function(a){var b=this.Vj;b!==a&&(z.j(a,"boolean",y,"allowResize"),this.Vj=a,this.i("allowResize",b,a))});z.g(y,"allowRotate",y.prototype.On);z.defineProperty(y,{On:"allowRotate"},w("Wj"),function(a){var b=this.Wj;b!==a&&(z.j(a,"boolean",y,"allowRotate"),this.Wj=a,this.i("allowRotate",b,a))});z.g(y,"allowSelect",y.prototype.te);
z.defineProperty(y,{te:"allowSelect"},w("Xj"),function(a){var b=this.Xj;b!==a&&(z.j(a,"boolean",y,"allowSelect"),this.Xj=a,this.i("allowSelect",b,a))});z.g(y,"allowUndo",y.prototype.yy);z.defineProperty(y,{yy:"allowUndo"},w("Us"),function(a){var b=this.Us;b!==a&&(z.j(a,"boolean",y,"allowUndo"),this.Us=a,this.i("allowUndo",b,a))});z.g(y,"allowZoom",y.prototype.Rn);
z.defineProperty(y,{Rn:"allowZoom"},w("Ws"),function(a){var b=this.Ws;b!==a&&(z.j(a,"boolean",y,"allowZoom"),this.Ws=a,this.i("allowZoom",b,a))});z.g(y,"hasVerticalScrollbar",y.prototype.bD);z.defineProperty(y,{bD:"hasVerticalScrollbar"},w("wt"),function(a){var b=this.wt;b!==a&&(z.j(a,"boolean",y,"hasVerticalScrollbar"),this.wt=a,this.i("hasVerticalScrollbar",b,a),Th(this))});z.g(y,"hasHorizontalScrollbar",y.prototype.aD);
z.defineProperty(y,{aD:"hasHorizontalScrollbar"},w("vt"),function(a){var b=this.vt;b!==a&&(z.j(a,"boolean",y,"hasHorizontalScrollbar"),this.vt=a,this.i("hasHorizontalScrollbar",b,a),Th(this))});z.g(y,"allowHorizontalScroll",y.prototype.Se);z.defineProperty(y,{Se:"allowHorizontalScroll"},w("Ss"),function(a){var b=this.Ss;b!==a&&(z.j(a,"boolean",y,"allowHorizontalScroll"),this.Ss=a,this.i("allowHorizontalScroll",b,a),Th(this))});z.g(y,"allowVerticalScroll",y.prototype.Te);
z.defineProperty(y,{Te:"allowVerticalScroll"},w("Vs"),function(a){var b=this.Vs;b!==a&&(z.j(a,"boolean",y,"allowVerticalScroll"),this.Vs=a,this.i("allowVerticalScroll",b,a),Th(this))});z.g(y,"scrollHorizontalLineChange",y.prototype.xs);z.defineProperty(y,{xs:"scrollHorizontalLineChange"},w("ku"),function(a){var b=this.ku;b!==a&&(z.j(a,"number",y,"scrollHorizontalLineChange"),0>a&&z.ia(a,">= 0",y,"scrollHorizontalLineChange"),this.ku=a,this.i("scrollHorizontalLineChange",b,a))});
z.g(y,"scrollVerticalLineChange",y.prototype.ys);z.defineProperty(y,{ys:"scrollVerticalLineChange"},w("lu"),function(a){var b=this.lu;b!==a&&(z.j(a,"number",y,"scrollVerticalLineChange"),0>a&&z.ia(a,">= 0",y,"scrollVerticalLineChange"),this.lu=a,this.i("scrollVerticalLineChange",b,a))});z.g(y,"lastInput",y.prototype.T);z.defineProperty(y,{T:"lastInput"},w("Xb"),function(a){x&&z.l(a,ud,y,"lastInput");this.Xb=a});z.g(y,"firstInput",y.prototype.Ac);
z.defineProperty(y,{Ac:"firstInput"},w("tg"),function(a){x&&z.l(a,ud,y,"firstInput");this.tg=a});z.g(y,"currentCursor",y.prototype.Wc);z.defineProperty(y,{Wc:"currentCursor"},w("ht"),function(a){z.j(a,"string",y,"currentCursor");this.Ea===q||(this.ht===a||""===a&&this.ht===this.wp)||(this.ht=a,""!==a?(this.Ea.style.cursor=a,this.ub.style.cursor=a):(this.Ea.style.cursor=this.Iy,this.ub.style.cursor=this.Iy))});z.g(y,"defaultCursor",y.prototype.Iy);
z.defineProperty(y,{Iy:"defaultCursor"},w("wp"),function(a){z.j(a,"string",y,"defaultCursor");var b=this.wp;b!==a&&(this.wp=a,this.i("defaultCursor",b,a))});z.g(y,"hasGestureZoom",y.prototype.cH);z.defineProperty(y,{cH:"hasGestureZoom"},w("Oh"),function(a){var b=this.Oh;b!==a&&(z.j(a,"boolean",y,"hasGestureZoom"),this.Oh=a,this.i("hasGestureZoom",b,a))});z.g(y,"click",y.prototype.click);
z.defineProperty(y,{click:"click"},w("Gh"),function(a){var b=this.Gh;b!==a&&(a!==q&&z.j(a,"function",y,"click"),this.Gh=a,this.i("click",b,a))});z.g(y,"doubleClick",y.prototype.Wl);z.defineProperty(y,{Wl:"doubleClick"},w("Lh"),function(a){var b=this.Lh;b!==a&&(a!==q&&z.j(a,"function",y,"doubleClick"),this.Lh=a,this.i("doubleClick",b,a))});z.g(y,"contextClick",y.prototype.Hr);
z.defineProperty(y,{Hr:"contextClick"},w("Hh"),function(a){var b=this.Hh;b!==a&&(a!==q&&z.j(a,"function",y,"contextClick"),this.Hh=a,this.i("contextClick",b,a))});z.g(y,"mouseOver",y.prototype.ls);z.defineProperty(y,{ls:"mouseOver"},w("Vh"),function(a){var b=this.Vh;b!==a&&(a!==q&&z.j(a,"function",y,"mouseOver"),this.Vh=a,this.i("mouseOver",b,a))});z.g(y,"mouseHover",y.prototype.ks);
z.defineProperty(y,{ks:"mouseHover"},w("Uh"),function(a){var b=this.Uh;b!==a&&(a!==q&&z.j(a,"function",y,"mouseHover"),this.Uh=a,this.i("mouseHover",b,a))});z.g(y,"mouseHold",y.prototype.js);z.defineProperty(y,{js:"mouseHold"},w("Th"),function(a){var b=this.Th;b!==a&&(a!==q&&z.j(a,"function",y,"mouseHold"),this.Th=a,this.i("mouseHold",b,a))});z.g(y,"mouseDragOver",y.prototype.JD);
z.defineProperty(y,{JD:"mouseDragOver"},w("St"),function(a){var b=this.St;b!==a&&(a!==q&&z.j(a,"function",y,"mouseDragOver"),this.St=a,this.i("mouseDragOver",b,a))});z.g(y,"mouseDrop",y.prototype.is);z.defineProperty(y,{is:"mouseDrop"},w("Sh"),function(a){var b=this.Sh;b!==a&&(a!==q&&z.j(a,"function",y,"mouseDrop"),this.Sh=a,this.i("mouseDrop",b,a))});z.g(y,"toolTip",y.prototype.Ls);
z.defineProperty(y,{Ls:"toolTip"},w("ei"),function(a){var b=this.ei;b!==a&&(a!==q&&z.l(a,Ne,y,"toolTip"),this.ei=a,this.i("toolTip",b,a))});z.g(y,"contextMenu",y.prototype.contextMenu);z.defineProperty(y,{contextMenu:"contextMenu"},w("Ih"),function(a){var b=this.Ih;b!==a&&(a!==q&&z.l(a,Ne,y,"contextMenu"),this.Ih=a,this.i("contextMenu",b,a))});z.g(y,"commandHandler",y.prototype.Ue);
z.defineProperty(y,{Ue:"commandHandler"},w("Iw"),function(a){var b=this.Iw;b!==a&&(z.l(a,za,y,"commandHandler"),a.h!==q&&z.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==q&&b.me(q),this.Iw=a,a.me(this))});z.g(y,"toolManager",y.prototype.tb);z.defineProperty(y,{tb:"toolManager"},w("zu"),function(a){var b=this.zu;b!==a&&(z.l(a,Le,y,"toolManager"),a.h!==q&&z.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==q&&b.me(q),this.zu=a,a.me(this))});
z.g(y,"defaultTool",y.prototype.Yu);z.defineProperty(y,{Yu:"defaultTool"},w("Qw"),function(a){var b=this.Qw;b!==a&&(z.l(a,cf,y,"defaultTool"),this.Qw=a,this.Ra===b&&(this.Ra=a))});z.g(y,"currentTool",y.prototype.Ra);z.defineProperty(y,{Ra:"currentTool"},w("Lw"),function(a){var b=this.Lw;b!==q&&(b.oa&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===q&&(a=this.Yu);a!==q&&(z.l(a,cf,y,"currentTool"),this.Lw=a,a.me(this),a.doStart())});z.A(y,{selection:"selection"},w("ou"));
z.g(y,"maxSelectionCount",y.prototype.BD);z.defineProperty(y,{BD:"maxSelectionCount"},w("Nt"),function(a){var b=this.Nt;if(b!==a)if(z.j(a,"number",y,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Nt=a,this.i("maxSelectionCount",b,a),!this.Aa.jb&&(a=this.selection.count-a,0<a)){this.Ja("ChangingSelection");for(var b=this.selection.Je(),c=0;c<a;c++)b[c].$a=s;this.Ja("ChangedSelection")}}else z.ia(a,">= 0",y,"maxSelectionCount")});z.g(y,"nodeSelectionAdornmentTemplate",y.prototype.MD);
z.defineProperty(y,{MD:"nodeSelectionAdornmentTemplate"},w("Yt"),function(a){var b=this.Yt;b!==a&&(z.l(a,Ne,y,"nodeSelectionAdornmentTemplate"),this.Yt=a,this.i("nodeSelectionAdornmentTemplate",b,a))});z.g(y,"groupSelectionAdornmentTemplate",y.prototype.YC);z.defineProperty(y,{YC:"groupSelectionAdornmentTemplate"},w("tt"),function(a){var b=this.tt;b!==a&&(z.l(a,Ne,y,"groupSelectionAdornmentTemplate"),this.tt=a,this.i("groupSelectionAdornmentTemplate",b,a))});
z.g(y,"linkSelectionAdornmentTemplate",y.prototype.yD);z.defineProperty(y,{yD:"linkSelectionAdornmentTemplate"},w("Ht"),function(a){var b=this.Ht;b!==a&&(z.l(a,Ne,y,"linkSelectionAdornmentTemplate"),this.Ht=a,this.i("linkSelectionAdornmentTemplate",b,a))});z.g(y,"isModified",y.prototype.fm);
z.defineProperty(y,{fm:"isModified"},function(){var a=this.Aa;return a===q?this.ox:a.Kk!==q?h:this.ox&&this.kk!==a.Ej},function(a){if(this.ox!==a){z.j(a,"boolean",y,"isModified");this.ox=a;var b=this.Aa;!a&&b&&(this.kk=b.Ej)}});z.g(y,"model",y.prototype.ga);
z.defineProperty(y,{ga:"model"},w("Od"),function(a){var b=this.Od;if(b!==a){z.l(a,L,y,"model");b!==q&&(b.Aa!==a.Aa&&b.Aa.lH)&&z.m("Do not replace a Diagram.model while a transaction is in progress.");this.vg=s;this.Dp=h;this.Rf=s;var c=this.xd;this.xd=h;b!==q&&(b.Gz(this.kB),b instanceof T&&Fi(this,b.Hg),Fi(this,b.bg));this.Od=a;a.vy(this.jB);Gi(this,a.bg);a instanceof T&&Hi(this,a.Hg);a.Gz(this.jB);a.vy(this.kB);this.xd=c;this.dc||this.xa();b!==q&&(a.Aa.isEnabled=b.Aa.isEnabled)}});
z.defineProperty(y,{Wa:q},w("dB"),ba("dB"));
function sh(a,b){if(b.ga===a.ga&&a.Wa){a.Wa=s;try{var c=b.fd,d=b.cf;if(""!==d)if(c===yd){if("linkFromKey"===d){var e=b.object,g=a.vf(e);if(g!==q){var k=b.newValue,l=a.Xf(k);g.da=l}}else if("linkToKey"===d)e=b.object,g=a.vf(e),g!==q&&(k=b.newValue,l=a.Xf(k),g.ja=l);else if("linkFromPortId"===d){if(e=b.object,g=a.vf(e),g!==q){var m=b.newValue;"string"===typeof m&&(g.wf=m)}}else if("linkToPortId"===d)e=b.object,g=a.vf(e),g!==q&&(m=b.newValue,"string"===typeof m&&(g.lg=m));else if("nodeGroupKey"===d){var e=
b.object,n=a.Bj(e);if(n!==q){var p=b.newValue;if(p!==f){var r=a.Xf(p);n.bb=r instanceof oa?r:q}else n.bb=q}}else if("linkLabelKeys"===d){if(e=b.object,g=a.vf(e),g!==q){var t=b.oldValue,u=b.newValue;if(z.isArray(t))for(var v=z.$b(t),A=0;A<v;A++){var C=z.Mb(t,A),l=a.Xf(C);l!==q&&(l.Yc=q)}if(z.isArray(u)){v=z.$b(u);for(A=0;A<v;A++)C=z.Mb(u,A),l=a.Xf(C),l!==q&&(l.Yc=g)}}}else if("nodeParentKey"===d){var K=b.object,I=a.Xf(b.newValue),R=a.Mr(K);if(R!==q){var M=R.Qr();M!==q?I===q?a.remove(M):a.Mc?M.da=I:
M.ja=I:Ii(a,I,R)}}else if("parentLinkCategory"===d){var K=b.object,R=a.Mr(K),S=b.newValue;R!==q&&"string"===typeof S&&(M=R.Qr(),M!==q&&(M.Ic=S))}else if("nodeCategory"===d){var e=b.object,Z=a.Bj(e),S=b.newValue;Z!==q&&"string"===typeof S&&(Z.Ic=S)}else if("linkCategory"===d){var e=b.object,X=a.vf(e),S=b.newValue;X!==q&&"string"===typeof S&&(X.Ic=S)}else if("nodeDataArray"===d){a.xa();var ea=b.oldValue;Fi(a,ea);var ia=b.newValue;Gi(a,ia)}else"linkDataArray"===d&&(a.xa(),ea=b.oldValue,Fi(a,ea),ia=b.newValue,
Hi(a,ia));a.fm=h}else if(c===zd)ia=b.newValue,"nodeDataArray"===d&&z.yb(ia)?Ji(a,ia):"linkDataArray"===d&&z.yb(ia)?Ki(a,ia):"linkLabelKeys"===d&&me(ia)&&(g=a.vf(b.object),l=a.Xf(ia),g!==q&&l!==q&&(l.Yc=g)),a.fm=h;else if(c===Gd)ea=b.oldValue,"nodeDataArray"===d&&z.yb(ea)?Li(a,ea):"linkDataArray"===d&&z.yb(ea)?Li(a,ea):"linkLabelKeys"===d&&me(ea)&&(l=a.Xf(ea),l!==q&&(l.Yc=q)),a.fm=h;else{if(c===xd&&"SourceChanged"===d){var n=a.Bj(b.object),W=b.propertyName;n!==q&&"string"===typeof W&&(n.Eb(W),a.ga instanceof
Ld&&(g=a.vf(b.object),g!==q&&g.Eb(W)))}}else if(c===yd){var xa=b.propertyName,e=b.object;if(e===a.ga){if("nodeKeyProperty"===xa||"nodeCategoryProperty"===xa||"linkFromKeyProperty"===xa||"linkToKeyProperty"===xa||"linkFromPortIdProperty"===xa||"linkToPortIdProperty"===xa||"nodeIsLinkLabelProperty"===xa||"linkLabelKeysProperty"===xa||"nodeIsGroupProperty"===xa||"nodeGroupKeyProperty"===xa||"nodeParentKeyProperty"===xa||"linkCategoryProperty"===xa)a.Aa.jb||a.om()}else rh(a,e,xa);a.fm=h}else if(c===zd||
c===Gd)Mi(a,b),a.fm=h;else if(c===xd){var Oa=b.propertyName;if("S"!==Oa[0]){if("CommittingTransaction"!==Oa&&("FinishedUndo"===Oa||"FinishedRedo"===Oa))a.Aa.Qh=h,Rh(a),a.Aa.Qh=s;a.Bu=h;a.yi();!a.Bx&&"CommittedTransaction"===Oa&&(a.Bx=h,setTimeout(function(){a.Ra.standardMouseOver();a.Bx=s},10))}else"StartingFirstTransaction"===Oa&&(!a.xd&&!a.vg)&&(a.Bu=h,a.Dp&&(a.Rf=h))}}finally{a.Wa=h}}}
function rh(a,b,c){var d=a.Bj(b);if(d!==q&&"string"===typeof c)d.Eb(c),a.ga instanceof Ld&&(b=a.vf(b),b!==q&&b.Eb(c));else if("string"===typeof c){d=q;for(a=a.ul.k;a.next();){for(var e=a.value,g=0;g<e.length;g++){var k=e[g];k.If!==q&&(k=k.If.Ba(b),k!==q&&(d===q&&(d=z.zb()),d.push(k)))}if(d!==q)break}b=d;if(b!==q){for(d=0;d<b.length;d++)b[d].Eb(c);z.Da(b)}}}
function Mi(a,b){var c=b.fd===zd,d=c?b.yf:b.Af,e=c?b.newValue:b.oldValue,g=a.ul.Ba(b.object);if(Array.isArray(g))for(var k=0;k<g.length;k++){var l=g[k];"number"===typeof d&&((l.type===Fg||l.type===Ih)&&d++,c?z.yb(e)&&(Ni(l,e,d),Oi(l,l)):(l.De(d),Oi(l,l)))}}function Ai(a,b){var c=b.ok;if(z.isArray(c)){var d=a.ul.Ba(c);if(d===q)a.ul.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Ci(a,b){var c=b.ok;if(z.isArray(c)){var d=a.ul.Ba(c);if(d!==q)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.ul.remove(c);break}}}
y.prototype.clear=y.prototype.clear=function(){var a=q;this.Pc!==q&&(a=this.Pc.Z);this.ga.clear();for(var b=this.vb.length,c=0;c<b;c++)this.vb.n[c].clear();this.Hf.clear();this.Tm.clear();this.Zt.clear();this.zk.clear();this.It.clear();this.ab.clear();this.Jh.clear();this.ek.clear();this.ul.clear();this.ou.Ua();this.ou.clear();this.ou.freeze();this.Xn=this.zz=q;z.Er=q;this.lt=(new H(NaN,NaN,NaN,NaN)).freeze();a!==q&&(this.add(a),this.ab.remove(a));this.xa()};
y.prototype.reset=y.prototype.reset=function(){this.dc=h;this.clear();this.vb=new J(Ke);this.kb=(new G(NaN,NaN)).freeze();this.Lb=1;this.Pt=1E-4;this.Mt=100;this.Fu=(new G(NaN,NaN)).freeze();this.rt=(new H(NaN,NaN,NaN,NaN)).freeze();this.el=Re;this.il=Zb;this.lk=Re;this.an=Zb;this.At=this.zt=$b;this.Ys=(new ub(16,16,16,16)).freeze();this.Et=h;this.Cu=bg;this.wp="auto";this.Od=this.Ih=this.ei=this.Sh=this.St=this.Th=this.Uh=this.Vh=this.Hh=this.Lh=this.Gh=q;this.nk=s;this.Pj=this.Oj=this.Ps=this.Ph=
h;this.Rs=this.Qs=s;this.Vs=this.Ss=this.wt=this.vt=this.Ws=this.Us=this.Xj=this.Wj=this.Vj=this.Uj=this.Sj=this.Tj=this.Rj=this.Ts=this.Zj=this.Qj=this.Yj=h;this.lu=this.ku=16;this.re=(new ub(5)).freeze();this.Nt=999999999;this.zd=q;Ch(this);Dh(this);this.Pc=q;this.ga=new T;this.ai=h;this.Pb=new Eh;this.dc=this.ai=s;this.xa()};
y.prototype.rebuildParts=y.prototype.om=function(){for(var a=this.zv.k;a.next();){var b=a.value;(!b.Td()||b instanceof oa)&&z.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+a.key+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.kv.k;a.next();)b=a.value,b instanceof oa||z.m('Invalid group template in Diagram.groupTemplateMap: template for "'+a.key+'" must be a Group, not a normal Node or Link: '+b);for(a=this.wv.k;a.next();)b=a.value,b instanceof E||z.m('Invalid link template in Diagram.linkTemplateMap: template for "'+
a.key+'" must be a Link, not a normal Node or simple Part: '+b);a=z.zb();for(b=this.selection.k;b.next();){var c=b.value.data;c&&a.push(c)}b=this.ga;b instanceof T&&Fi(this,b.Hg);Fi(this,b.bg);Gi(this,b.bg);b instanceof T&&Hi(this,b.Hg);for(b=0;b<a.length;b++)if(c=this.Bj(a[b]))c.$a=h;z.Da(a)};
function Gi(a,b){if(b!==q){for(var c=a.ga,d=z.$b(b),e=0;e<d;e++){var g=z.Mb(b,e);c.xe(g)?Ji(a,g,s):c instanceof T&&Ki(a,g)}if(c instanceof T||c instanceof Ld){for(e=0;e<d;e++)g=z.Mb(b,e),c.xe(g)&&Pi(a,g);if(c instanceof T)for(c=a.links;c.next();)Qi(c.value)}Ri(a,s)}}
function Ji(a,b,c){if(!(b===f||b===q)&&!a.Aa.jb&&!a.Jh.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof B&&(Pe(e),e=e.copy(),e instanceof B&&(e.Qg=d,a.add(e),e.data=b,c&&Pi(a,b)))}}y.prototype.getCategoryForNodeData=function(a){var b=this.ga,c=b.getCategoryForNodeData(a),d=s;b instanceof T&&(d=b.ez(a));d&&""===c&&(c="LinkLabel");return c};
y.prototype.findTemplateForNodeData=function(a,b){var c=s,d=this.ga;d instanceof T&&(c=d.cz(a));c?(c=this.kv.Ba(b),c===q&&(c=this.kv.Ba(""),c===q&&(z.UE||(z.UE=h,z.trace('No Group template found for category "'+b+'"'),z.trace("  Using default group template")),c=this.IA))):(c=this.zv.Ba(b),c===q&&(c=this.zv.Ba(""),c===q&&(z.XE||(z.XE=h,z.trace('No Node template found for category "'+b+'"'),z.trace("  Using default node template")),c=this.KA)));return c instanceof B?c:q};
function Pi(a,b){var c=a.ga;if(c instanceof T||c instanceof Ld){var d=c.xb(b);if(d!==f){var e=ne(c,d),g=a.Mr(b);if(e!==q&&g!==q){for(e=e.k;e.next();){var k=e.value;if(c instanceof T)if(c.xe(k)){if(g instanceof oa&&c.ko(k)===d){var l=a.Bj(k);l!==q&&(l.bb=g)}}else{if(l=a.vf(k),l!==q){c.bm(k)===d&&(l.da=g);c.cm(k)===d&&(l.ja=g);for(var k=c.Pk(k),m=0;m<k.length;m++)if(k[m]===d){g.Yc=l;break}}}else c instanceof Ld&&(c.xe(k)&&c.mo(k)===d)&&(l=a.Mr(k),Ii(a,g,l))}pe(c,d)}c instanceof T?(c=c.ko(b),c!==f&&
(c=a.Xf(c),c instanceof oa&&(g.bb=c))):c instanceof Ld&&(c=c.mo(b),c!==f&&(c=a.Xf(c),Ii(a,c,g)))}}}function Ii(a,b,c){if(!(b===q||c===q)){var d=a.tb.kz,e=b,g=c;if(a.Mc)for(b=g.rd;b.next();){var k=b.value;if(k.ja===g)return}else{e=c;g=b;for(b=e.rd;b.next();)if(k=b.value,k.da===e)return}d!==q&&dg(d,e,g,q,h)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof E&&(Pe(b),b=b.copy(),b instanceof E&&(b.Qg=d,b.da=e,b.ja=g,a.add(b),b.data=c.data)))}}
function Hi(a,b){if(b!==q){for(var c=z.$b(b),d=0;d<c;d++)Ki(a,z.Mb(b,d));Ri(a,s)}}
function Ki(a,b){if(!(b===f||b===q)&&!a.Aa.jb&&!a.ek.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof E&&(Pe(d),d=d.copy(),d instanceof E)){d.Qg=c;var c=a.ga,e=c.XG(b);""!==e&&(d.wf=e);e=c.bm(b);e!==f&&(e=a.Xf(e),e instanceof D&&(d.da=e));e=c.$G(b);""!==e&&(d.lg=e);e=c.cm(b);e!==f&&(e=a.Xf(e),e instanceof D&&(d.ja=e));c=c.Pk(b);if(z.isArray(c))for(var e=z.$b(c),g=0;g<e;g++){var k=a.Xf(z.Mb(c,g));k!==q&&(k.Yc=d)}a.add(d);d.data=b}}}
y.prototype.getCategoryForLinkData=function(a){var b=this.ga,c="";b instanceof T?c=b.getCategoryForLinkData(a):b instanceof Ld&&(c=b.ZG(a));return c};y.prototype.findTemplateForLinkData=function(a,b){var c=this.wv.Ba(b);c===q&&(c=this.wv.Ba(""),c===q&&(z.WE||(z.WE=h,z.trace('No Link template found for category "'+b+'"'),z.trace("  Using default link template")),c=this.JA));return c instanceof E?c:q};function Fi(a,b){for(var c=z.$b(b),d=0;d<c;d++)Li(a,z.Mb(b,d))}
function Li(a,b){if(!(b===f||b===q)){var c=a.Bj(b);if(c instanceof B){c.$a=s;var d=c.layer;if(!(d===q||d.h!==a)){var e=a.ga;if(e instanceof T&&c instanceof D){var g=e.xb(c.data);if(g!==f){for(var k=c.rd;k.next();){var l=k.value.data;oe(e,g,l)}c.vi&&(k=c.Yc,k!==q&&(l=k.data,oe(e,g,l)));if(c instanceof oa)for(k=c.Bc;k.next();)l=k.value.data,e.xe(l)&&oe(e,g,l)}}else if(e instanceof Ld&&c instanceof D){k=a.vf(c.data);if(k!==q&&(k.$a=s,l=k.layer,l!==q)){var m=l.De(-1,k);0<=m&&a.Zc(Gd,"parts",l,k,q,m,q);
m=k.uo;m!==q&&m(k,l,q)}k=a.Mc;for(l=c.rd;l.next();)m=l.value,m=(k?m.ja:m.da).data,e.xe(m)&&oe(e,g,m)}e=d.De(-1,c);0<=e&&a.Zc(Gd,"parts",d,c,q,e,q);e=c.uo;e!==q&&e(c,d,q)}}}}y.prototype.findPartForKey=y.prototype.QI=function(a){if(a===q||a===f)return q;a=this.ga.Ye(a);if(a===q)return q;a=this.Jh.Ba(a);return a instanceof B?a:q};y.prototype.findNodeForKey=y.prototype.Xf=function(a){if(a===q||a===f)return q;a=this.ga.Ye(a);if(a===q)return q;a=this.Jh.Ba(a);return a instanceof D?a:q};
y.prototype.findPartForData=y.prototype.Bj=function(a){if(a===q)return q;var b=this.Jh.Ba(a);if(b instanceof B)return b;b=this.ek.Ba(a);return b instanceof B?b:q};y.prototype.findNodeForData=y.prototype.Mr=function(a){if(a===q)return q;a=this.Jh.Ba(a);return a instanceof D?a:q};y.prototype.findLinkForData=y.prototype.vf=function(a){if(a===q)return q;a=this.ek.Ba(a);return a instanceof E?a:q};z.g(y,"nodeTemplate",y.prototype.BH);
z.defineProperty(y,{BH:"nodeTemplate"},function(){return this.Wh.Ba("")},function(a){var b=this.Wh.Ba("");b!==a&&(z.l(a,B,y,"nodeTemplate"),this.Wh.add("",a),this.i("nodeTemplate",b,a),this.Aa.jb||this.om())});z.g(y,"nodeTemplateMap",y.prototype.zv);z.defineProperty(y,{zv:"nodeTemplateMap"},w("Wh"),function(a){var b=this.Wh;b!==a&&(z.l(a,ta,y,"nodeTemplateMap"),this.Wh=a,this.i("nodeTemplateMap",b,a),this.Aa.jb||this.om())});z.g(y,"groupTemplate",y.prototype.bH);
z.defineProperty(y,{bH:"groupTemplate"},function(){return this.hk.Ba("")},function(a){var b=this.hk.Ba("");b!==a&&(z.l(a,oa,y,"groupTemplate"),this.hk.add("",a),this.i("groupTemplate",b,a),this.Aa.jb||this.om())});z.g(y,"groupTemplateMap",y.prototype.kv);z.defineProperty(y,{kv:"groupTemplateMap"},w("hk"),function(a){var b=this.hk;b!==a&&(z.l(a,ta,y,"groupTemplateMap"),this.hk=a,this.i("groupTemplateMap",b,a),this.Aa.jb||this.om())});z.g(y,"linkTemplate",y.prototype.vH);
z.defineProperty(y,{vH:"linkTemplate"},function(){return this.Ti.Ba("")},function(a){var b=this.Ti.Ba("");b!==a&&(z.l(a,E,y,"linkTemplate"),this.Ti.add("",a),this.i("linkTemplate",b,a),this.Aa.jb||this.om())});z.g(y,"linkTemplateMap",y.prototype.wv);z.defineProperty(y,{wv:"linkTemplateMap"},w("Ti"),function(a){var b=this.Ti;b!==a&&(z.l(a,ta,y,"linkTemplateMap"),this.Ti=a,this.i("linkTemplateMap",b,a),this.Aa.jb||this.om())});z.g(y,"isMouseCaptured",y.prototype.pd);
z.defineProperty(y,{pd:"isMouseCaptured"},w("bB"),function(a){var b=this.Ea;b!==q&&(a?(this.T.bubbles=s,b.removeEventListener("mousemove",this.Do,s),b.removeEventListener("mousedown",this.Co,s),b.removeEventListener("mouseup",this.Fo,s),b.removeEventListener("mousewheel",this.Kg,s),b.removeEventListener("DOMMouseScroll",this.Kg,s),b.removeEventListener("mouseout",this.Eo,s),window.addEventListener("mousemove",this.Do,h),window.addEventListener("mousedown",this.Co,h),window.addEventListener("mouseup",
this.Fo,h),window.addEventListener("mousewheel",this.Kg,h),window.addEventListener("DOMMouseScroll",this.Kg,h),window.addEventListener("mouseout",this.Eo,h),window.addEventListener("selectstart",this.preventDefault,s)):(window.removeEventListener("mousemove",this.Do,h),window.removeEventListener("mousedown",this.Co,h),window.removeEventListener("mouseup",this.Fo,h),window.removeEventListener("mousewheel",this.Kg,h),window.removeEventListener("DOMMouseScroll",this.Kg,h),window.removeEventListener("mouseout",
this.Eo,h),window.removeEventListener("selectstart",this.preventDefault,s),b.addEventListener("mousemove",this.Do,s),b.addEventListener("mousedown",this.Co,s),b.addEventListener("mouseup",this.Fo,s),b.addEventListener("mousewheel",this.Kg,s),b.addEventListener("DOMMouseScroll",this.Kg,s),b.addEventListener("mouseout",this.Eo,s)),this.bB=a)});z.g(y,"position",y.prototype.position);
z.defineProperty(y,{position:"position"},w("kb"),function(a){var b=this.kb;if(!b.N(a)){z.l(a,G,y,"position");var c=this.gb.copy();c.x=b.x;c.y=b.y;a=a.copy();b.zj(a)||(this.dc||this.Ea===q||(this.dc=h,b=this.scale,Vh(this,a,this.uc,this.Ea.width/b,this.Ea.height/b,this.il),this.dc=s),b=a);this.kb=b.Y();this.dc||this.rs(c,this.gb)}});z.g(y,"initialPosition",y.prototype.fD);z.defineProperty(y,{fD:"initialPosition"},w("jx"),function(a){this.jx.N(a)||(z.l(a,G,y,"initialPosition"),this.jx=a.Y())});
z.g(y,"initialScale",y.prototype.gD);z.defineProperty(y,{gD:"initialScale"},w("kx"),function(a){this.kx!==a&&(z.j(a,"number",y,"initialScale"),this.kx=a)});z.g(y,"grid",y.prototype.no);
z.defineProperty(y,{no:"grid"},function(){this.Pc===q&&Nh(this);return this.Pc},function(a){var b=this.Pc;if(b!==a){b===q&&(Nh(this),b=this.Pc);z.l(a,F,y,"grid");a.type!==Oh&&z.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.ha;c!==q&&c.remove(b);this.Pc=a;a.name="GRID";c!==q&&c.add(a);this.xa();this.i("grid",b,a)}});z.A(y,{gb:"viewportBounds"},function(){var a=this.Ea,b=this.RB;if(a===q)return b;var c=this.kb,d=this.Lb;b.q(c.x,c.y,Math.max(a.width,0)/d,Math.max(a.height,0)/d);return b});
z.g(y,"fixedBounds",y.prototype.Sy);z.defineProperty(y,{Sy:"fixedBounds"},w("rt"),function(a){var b=this.rt;b.N(a)||(z.l(a,H,y,"fixedBounds"),this.rt=a=a.Y(),this.vc(),this.i("fixedBounds",b,a))});z.A(y,{uc:"documentBounds"},w("lt"));function Wh(a,b){var c=a.lt;c.N(b)||(b=b.Y(),a.lt=b,a.Pi=s,a.Hi=q,Th(a),a.Ja("DocumentBoundsChanged",q,c.copy()),$h(a))}z.g(y,"scale",y.prototype.scale);
z.defineProperty(y,{scale:"scale"},w("Lb"),function(a){var b=this.Lb;z.p(a,y,"scale");a<this.$f&&(a=this.$f);a>this.Zf&&(a=this.Zf);if(b!==a){var c=this.Lb=a;if(!this.dc&&!this.xd){this.dc=h;var d=this.Ea;if(d!==q){a=this.gb.copy();var e=d.width/c,g=d.height/c;a.width=d.width/b;a.height=d.height/b;d=this.Dh.copy();if(isNaN(d.x))switch(this.Uu){case qc:d.x=0;break;case wc:d.x=e-1;break;case cc:d.x=e/2;break;case Zb:case yc:d.x=e/2}if(isNaN(d.y))switch(this.Uu){case pc:d.y=0;break;case xc:d.y=g-1;break;
case cc:d.y=g/2;break;case Zb:case yc:d.y=g/2}var k=this.position,b=new G(k.x+d.x/b-d.x/c,k.y+d.y/b-d.y/c);Vh(this,b,this.uc,e,g,this.il);this.position=b;this.dc=s;this.rs(a,this.gb)}}this.xa();$h(this)}});z.g(y,"autoScale",y.prototype.Nl);z.defineProperty(y,{Nl:"autoScale"},w("el"),function(a){var b=this.el;b!==a&&(z.wb(a,y,y,"autoScale"),this.el=a,this.i("autoScale",b,a),a!==Re&&Th(this))});z.g(y,"initialAutoScale",y.prototype.hH);
z.defineProperty(y,{hH:"initialAutoScale"},w("lk"),function(a){var b=this.lk;b!==a&&(z.wb(a,y,y,"initialAutoScale"),this.lk=a,this.i("initialAutoScale",b,a))});z.g(y,"initialViewportSpot",y.prototype.hD);z.defineProperty(y,{hD:"initialViewportSpot"},w("At"),function(a){var b=this.At;b!==a&&(z.l(a,O,y,"initialViewportSpot"),Ob(a)||z.m("initialViewportSpot must be a real Spot: "+a),this.At=a,this.i("initialViewportSpot",b,a))});z.g(y,"initialDocumentSpot",y.prototype.eD);
z.defineProperty(y,{eD:"initialDocumentSpot"},w("zt"),function(a){var b=this.zt;b!==a&&(z.l(a,O,y,"initialDocumentSpot"),Ob(a)||z.m("initialViewportSpot must be a real Spot: "+a),this.zt=a,this.i("initialDocumentSpot",b,a))});z.g(y,"minScale",y.prototype.$f);z.defineProperty(y,{$f:"minScale"},w("Pt"),function(a){z.p(a,y,"minScale");var b=this.Pt;b!==a&&0<a?(this.Pt=a,this.i("minScale",b,a),a>this.scale&&(this.scale=a)):z.ia(a,"> 0",y,"minScale")});z.g(y,"maxScale",y.prototype.Zf);
z.defineProperty(y,{Zf:"maxScale"},w("Mt"),function(a){z.p(a,y,"maxScale");var b=this.Mt;b!==a&&0<a?(this.Mt=a,this.i("maxScale",b,a),a<this.scale&&(this.scale=a)):z.ia(a,"> 0",y,"maxScale")});z.g(y,"zoomPoint",y.prototype.Dh);z.defineProperty(y,{Dh:"zoomPoint"},w("Fu"),function(a){this.Fu.N(a)||(z.l(a,G,y,"zoomPoint"),this.Fu=a=a.Y())});z.g(y,"contentAlignment",y.prototype.Uu);
z.defineProperty(y,{Uu:"contentAlignment"},w("il"),function(a){var b=this.il;b.N(a)||(z.l(a,O,y,"contentAlignment"),this.il=a=a.Y(),this.i("contentAlignment",b,a),Th(this))});z.g(y,"initialContentAlignment",y.prototype.iH);z.defineProperty(y,{iH:"initialContentAlignment"},w("an"),function(a){var b=this.an;b.N(a)||(z.l(a,O,y,"initialContentAlignment"),this.an=a=a.Y(),this.i("initialContentAlignment",b,a))});z.g(y,"padding",y.prototype.padding);
z.defineProperty(y,{padding:"padding"},w("re"),function(a){"number"===typeof a?a=new ub(a):z.l(a,ub,y,"padding");var b=this.re;b.N(a)||(this.re=a=a.Y(),this.vc(),this.i("padding",b,a))});z.A(y,{Gj:"nodes"},function(){return this.Zt.k});z.A(y,{links:"links"},function(){return this.It.k});z.A(y,{mm:"parts"},function(){return this.ab.k});y.prototype.findTopLevelGroups=y.prototype.SI=function(){return this.zk.k};z.g(y,"layout",y.prototype.Pb);
z.defineProperty(y,{Pb:"layout"},w("zd"),function(a){var b=this.zd;b!==a&&(z.l(a,Eh,y,"layout"),b!==q&&(b.h=q,b.group=q),this.zd=a,a.h=this,a.group=q,this.Xs=h,this.i("layout",b,a),this.oc())});y.prototype.layoutDiagram=y.prototype.jJ=function(a){Rh(this);a&&Ri(this,h);ci(this,s)};function Ri(a,b){for(var c=a.zk.k;c.next();)Si(a,c.value,b);a.Pb!==q&&(b?a.Pb.$e=s:a.Pb.K())}function Si(a,b,c){if(b!==q){for(var d=b.zl.k;d.next();)Si(a,d.value,c);b.Pb!==q&&(c?b.Pb.$e=s:b.Pb.K())}}
function ci(a,b){for(var c=a.zk.k;c.next();)Ti(a,c.value,b);c=a.Pb;if(c!==q&&!c.$e){if(b&&!c.fz)return;c.doLayout(a);Rh(a);c.$e=h}a.Xs=s}function Ti(a,b,c){if(b!==q){for(var d=b.zl.k;d.next();)Ti(a,d.value,c);d=b.Pb;if(d!==q&&!d.$e&&(!c||d.fz))b.qB=!b.location.W(),d.doLayout(b),b.K(Ui),d.$e=h,ei(a,b)}}z.g(y,"isTreePathToChildren",y.prototype.Mc);
z.defineProperty(y,{Mc:"isTreePathToChildren"},w("Et"),function(a){var b=this.Et;if(b!==a&&(z.j(a,"boolean",y,"isTreePathToChildren"),this.Et=a,this.i("isTreePathToChildren",b,a),!this.Aa.jb))for(a=this.Gj;a.next();)Vi(a.value)});y.prototype.findTreeRoots=y.prototype.WI=function(){for(var a=new J(D),b=this.Gj.k;b.next();){var c=b.value;c.so&&c.Qr()===q&&a.add(c)}return a.k};z.g(y,"isCollapsingExpanding",y.prototype.Fd);z.defineProperty(y,{Fd:q},w("ZA"),ba("ZA"));
function qh(a){function b(a){var b=a.toLowerCase(),k=new J("function");c.add(a,k);c.add(b,k);d.add(a,a);d.add(b,a)}var c=new ta("string",J),d=new ta("string","string");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");
b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.Sw=c;a.Rw=d}
function Wi(a,b){var c=a.Sw.Ba(b);if(c!==q)return c;c=a.Sw.Ba(b.toLowerCase());if(c!==q)return c;z.m("Unknown DiagramEvent name: "+b);return q}y.prototype.addDiagramListener=y.prototype.WB=function(a,b){z.j(a,"string",y,"addDiagramListener:name");z.j(b,"function",y,"addDiagramListener:listener");var c=Wi(this,a);c!==q&&c.add(b)};
y.prototype.removeDiagramListener=y.prototype.VD=function(a,b){z.j(a,"string",y,"removeDiagramListener:name");z.j(b,"function",y,"addDiagramListener:listener");var c=Wi(this,a);c!==q&&c.remove(b)};
y.prototype.raiseDiagramEvent=y.prototype.Ja=function(a,b,c){x&&z.j(a,"string",y,"raiseDiagramEvent:name");var d=Wi(this,a),e=new vd;e.h=this;var g=this.Rw.Ba(a);a=g!==q?g:this.Rw.Ba(a.toLowerCase());e.name=a;b!==f&&(e.Sv=b);c!==f&&(e.Dv=c);b=d.length;if(1===b)d=d.na(0),d(e);else if(0!==b){c=d.Je();for(a=0;a<b;a++)d=c[a],d(e)}return e.cancel};
function Nf(a,b){var c=s;a.gb.uj(b)&&(c=h);c=a.Ry(b,function(a){return a.Z},function(a){return a instanceof E},h,function(a){return a instanceof E},c);if(0!==c.count)for(c=c.k;c.next();){var d=c.value;d.xh===Df&&d.bc()}}
function la(a,b,c){a.Bd===q&&(a.Bd=new Xi);c=c!==q?c.bb:q;if(a.Bd.oo||a.Bd.group!==c){if(c===q){b=a.Pi?Sh(a):a.uc.copy();b.Fg(100,100);a.Bd.initialize(b);b=z.hf();for(var d=a.Gj;d.next();){var e=d.value,g=e.layer;g===q||(!g.visible||g.gc)||Yi(a,e,q,b)}}else{b=c.ya.copy();b.Fg(20,20);a.Bd.initialize(b);b=z.hf();for(d=c.Bc;d.next();)e=d.value,e instanceof D&&Yi(a,e,q,b)}z.Jc(b);a.Bd.group=c;a.Bd.oo=s}else b&&Zi(a.Bd);return a.Bd}
function Yi(a,b,c,d){if(b!==c)if(b.canAvoid()){c=b.WG(d);d=a.Bd.Pl;b=a.Bd.Ol;for(var e=c.x+c.width,g=c.y+c.height,k=c.x;k<e;k+=d){for(var l=c.y;l<g;l+=b)$i(a.Bd,k,l);$i(a.Bd,k,g)}for(l=c.y;l<g;l+=b)$i(a.Bd,e,l);$i(a.Bd,e,g)}else if(b instanceof oa)for(b=b.Bc;b.next();)e=b.value,e instanceof D&&Yi(a,e,c,d)}function aj(a,b){if(a.Bd!==q&&!a.Bd.oo&&(b===q||b.canAvoid()))a.Bd.oo=h}
y.prototype.simulatedMouseMove=y.prototype.sE=function(a,b,c){if(kf!==q){c instanceof y||(c=q);var d=lf,e=kf.h;lf=c;if(c!==d){if(d!==q&&d!==e&&d.tb.ze!==q)return d.tb.ze.doSimulatedDragLeave(),s;c!==q&&c.tb.ze!==q&&c.tb.ze.doSimulatedDragEnter()}if(c===q||!c.xy||!c.Kl||c.fb||c===e)return s;d=c.tb.ze;d!==q&&(a!==q&&(b=c.ug(a)),c.Xb.S=b,c.Xb.yj=s,c.Xb.Ai=s,d.doSimulatedDragOver());return h}return s};
y.prototype.simulatedMouseUp=y.prototype.tE=function(a,b,c,d){if(kf!==q){d===q&&(d=b);b=lf;var e=kf.h;if(d!==b){if(b!==q&&b!==e&&b.tb.ze!==q)return b.tb.ze.doSimulatedDragLeave(),s;d!==q&&d.tb.ze!==q&&d.tb.ze.doSimulatedDragEnter()}lf=d;if(d===q)return kf.doCancel(),h;if(d!==this)return a!==q&&(c=d.ug(a)),d.Xb.S=c,d.Xb.yj=s,d.Xb.Ai=h,a=d.tb.ze,a!==q&&a.doSimulatedDrop(),a=kf,a!==q&&(d=a.mayCopy(),a.Ke=d?"Copy":"Move",a.stopTool()),h}return s};z.g(y,"autoScrollRegion",y.prototype.gC);
z.defineProperty(y,{gC:"autoScrollRegion"},w("Ys"),function(a){"number"===typeof a?a=new ub(a):z.l(a,ub,y,"autoScrollRegion");var b=this.Ys;b.N(a)||(this.Ys=a=a.Y(),this.vc(),this.i("autoScrollRegion",b,a))});function Lf(a,b){a.Ew=a.xm(b);bj(a,a.Ew).qi(a.position)?of(a):cj(a)}
function cj(a){if(a.Og===q){a.Og={};var b;b=a.Ra!==a.tb.ze?a.kF:a.lF;a.Og.isEnabled=h;var c=setInterval(function(){var b=c;a.Og!==q&&a.Og.isEnabled&&(a.Og=q,clearInterval(b),b=bj(a,a.Ew),b.qi(a.position)||(a.position=b,a.T.S=a.KE(a.Ew),a.Ra.doMouseMove(),a.Pi=h,Wh(a,a.Ve()),a.qe=h,a.yi(),cj(a)))},b);a.Og.id=c}}function of(a){a.Og!==q&&(a.Og.isEnabled&&clearInterval(a.Og.id),a.Og=q)}
function bj(a,b){var c=a.position,d=a.gC;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.gb,g=a.scale,e=z.Kj(0,0,e.width*g,e.height*g),k=z.ic(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var l=Math.max(a.xs,1),l=l|0;k.x-=l;b.x<e.x+d.left/2&&(k.x-=l);b.x<e.x+d.left/4&&(k.x-=4*l)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(l=Math.max(a.xs,1),l|=0,k.x+=l,b.x>e.x+e.width-d.right/2&&(k.x+=l),b.x>e.x+e.width-d.right/4&&(k.x+=4*l));b.y>=e.y&&b.y<e.y+d.top?(l=Math.max(a.ys,1),l|=0,k.y-=l,b.y<e.y+
d.top/2&&(k.y-=l),b.y<e.y+d.top/4&&(k.y-=4*l)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(l=Math.max(a.ys,1),l|=0,k.y+=l,b.y>e.y+e.height-d.bottom/2&&(k.y+=l),b.y>e.y+e.height-d.bottom/4&&(k.y+=4*l));k.qi(N.Nj)||(c=new G(c.x+k.x/g,c.y+k.y/g));z.Jc(e);z.B(k);return c}y.prototype.makeImage=y.prototype.lJ=function(a){var b=document.createElement("img");b.src=this.wH(a);return b instanceof HTMLImageElement?b:q};
y.prototype.makeImageData=y.prototype.wH=function(a){this.yi();if(this.Ea===q)return"";a===f&&(a={});"object"!==typeof a&&z.m("properties argument must be an Object.");var b=s,c=a.size||q,d=a.scale||q,e=a.maxSize||new qa(2E3,2E3);a.maxSize===f&&(b=h);var g=a.position||q,k=a.parts||q,l=a.padding||1,m=a.background||q,n=a.omitTemporary;n===f&&(n=h);var p=a.showTemporary;p===f&&(p=!n);n=a.showGrid;n===f&&(n=p);c!==q&&(isNaN(c.width)&&isNaN(c.height))&&(c=q);l&&"number"===typeof l&&(l=new ub(l));l||(l=
new ub(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);this.nt=s;Mh(this);var r=document.createElement("canvas"),t=r.getContext("2d");if(!c&&!d&&!k&&!g)return r.width=this.Ea.width+Math.ceil(l.left+l.right),r.height=this.Ea.height+Math.ceil(l.top+l.bottom),ki(this,t,l,new qa(r.width,r.height),this.Lb,this.kb,k,m,p,n),this.nt=h,r.toDataURL(a.type,a.details);var u,v=new G(0,0);u=this.uc.copy();u.aI(this.padding);g!==q&&g.W()?(v=g,d||(d=
1)):(v.x=u.x,v.y=u.y);u.width-=v.x;u.height-=v.y;if(k){var A,g=h,k=k.k;for(k.reset();k.next();){var C=k.value;if(C instanceof B){var K=C.layer;if(!K||K.visible)if((!K||!K.gc)&&C.Db())C=C.ya,C.W()&&(g?(g=s,A=C.copy()):A.Mj(C))}}g&&(A=new H(0,0,0,0));u.width=A.width;u.height=A.height;v.x=A.x;v.y=A.y}g=A=0;l&&(A=l.left+l.right,g=l.top+l.bottom);C=K=0;c&&(K=c.width,C=c.height,isFinite(K)&&(K=Math.max(0,K-A)),isFinite(C)&&(C=Math.max(0,C-g)));c&&d?c.W()?(c=K,u=C):isNaN(C)?(c=K,u=u.height*d):(c=u.width*
d,u=C):c?c.W()?(d=Math.min(K/u.width,C/u.height),c=K,u=C):isNaN(C)?(d=K/u.width,c=K,u=u.height*d):(d=C/u.height,c=u.width*d,u=C):d?(c=u.width*d,u=u.height*d):(d=1,c=u.width,u=u.height);l?(c+=A,u+=g):l=new ub(0);if(e){A=e.width;e=e.height;if(b&&!z.TE&&(c>A||u>e))x.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+c+"x"+u+" vs 2000x2000) Consider increasing the max size."),z.TE=h;isNaN(A)&&(A=2E3);isNaN(e)&&(e=2E3);isFinite(A)&&(c=Math.min(c,A));isFinite(e)&&
(u=Math.min(u,e))}r.width=Math.ceil(c);r.height=Math.ceil(u);ki(this,t,l,new qa(Math.ceil(c),Math.ceil(u)),d,v,k,m,p,n);this.nt=h;return r.toDataURL(a.type,a.details)};y.inherit=function(a,b){z.j(a,"function",y,"inherit");z.j(b,"function",y,"inherit");z.Pa(a,b)};function dj(a){1<arguments.length&&z.m("Palette constructor can only take one optional argument, the DIV HTML element or its id.");y.call(this,a);this.Ku=h;this.Fk=s;this.fb=h;this.Uu=ac;this.Pb=new ej}z.ea("Palette",dj);z.Pa(dj,y);
function vi(a){1<arguments.length&&z.m("Overview constructor can only take one optional argument, the DIV HTML element or its id.");y.call(this,a);this.dc=h;this.Xh=q;this.ot=h;var b=new B,c=new V;c.stroke="magenta";c.pb=2;c.fill=q;c.name="BOXSHAPE";b.Ro="BOXSHAPE";b.fs="BOXSHAPE";b.add(c);this.Fm=b;this.by=document.createElement("canvas");this.xF=this.by.getContext("2d");b=new fj;b.me(this);this.tb.df.Ed(0,b);var d=this;this.OD=function(){gj(d)};this.ND=function(){d.Xh!==q&&(d.vc(),d.xa())};this.fb=
h;this.te=s;this.Nl=Xh;this.tb.lm=ef;this.dc=s}z.ea("Overview",vi);z.Pa(vi,y);
function wi(a){!a.dc&&!a.xd&&a.Rf===s&&(a.Rf=h,requestAnimationFrame(function(){if(a.Rf&&!a.xd&&(a.Rf=s,a.ub!==q)){a.xd=h;Rh(a);a.uc.W()||Wh(a,a.Ve());a.ub===q&&z.m("No div specified");a.Ea===q&&z.m("No canvas specified");if(a.qe&&a.Xh!==q){var b=a.Ff,c=a.by;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Ea.width,a.Ea.height);b.drawImage(c,0,0);c=a.Gc;c.reset();1!==a.Lb&&c.scale(a.scale);(0!==a.position.x||0!==a.position.y)&&c.translate(-a.kb.x,-a.kb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,
c.dy);for(var c=a.vb.length,d=0;d<c;d++)a.vb.n[d].Ae(b,a);a.mk=s;a.qe=s}a.xd=s}}))}
vi.prototype.Ae=function(){this.ub===q&&z.m("No div specified");this.Ea===q&&z.m("No canvas specified");if(this.qe){var a=this.Xh;if(a!==q){var b=a.no;(b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&bi(a);var c=this.Ea,b=this.Ff,d=this.by,e=this.xF;d.width=c.width;d.height=c.height;b.yw="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.Ea.width,this.Ea.height);var g=this.Gc;g.reset();1!==this.Lb&&g.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&g.translate(-this.kb.x,-this.kb.y);
b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var k=this.ot,l=this.gb,m=a.vb.length,n=0;n<m;n++){var p=a.vb.n[n],r=b,t=l,u=k;u===f&&(u=h);if(u||!p.gc)for(var p=p.ab,u=this.scale,v=p.length,A=0;A<v;A++){var C=p.n[A],K=C.ya;K.xf(t)&&(1<K.width*u||1<K.height*u?C.Ae(r,this):mh(C,r))}}e.drawImage(c,0,0);x&&x.Gk&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));a=this.vb.length;for(n=0;n<a;n++)this.vb.n[n].Ae(b,this);x&&(x.Ny||x.Gk)&&x.My(b,this,g);this.qe=this.mk=s}}};z.g(vi,"observed",vi.prototype.CH);
z.defineProperty(vi,{CH:"observed"},w("Xh"),function(a){var b=this.Xh;a!==q&&z.l(a,y,vi,"observed");b!==a&&!(a instanceof vi)&&(b!==q&&(this.remove(this.Uf),b.VD("ViewportBoundsChanged",this.OD),b.VD("DocumentBoundsChanged",this.ND),b.tn.remove(this)),this.Xh=a,a!==q&&(a.WB("ViewportBoundsChanged",this.OD),a.WB("DocumentBoundsChanged",this.ND),a.tn.add(this),this.add(this.Uf),gj(this)),this.vc(),this.i("observed",b,a))});z.g(vi,"box",vi.prototype.Uf);
z.defineProperty(vi,{Uf:"box"},w("Fm"),function(a){var b=this.Fm;b!==a&&(this.Fm=a,this.i("box",b,a))});z.g(vi,"drawsTemporaryLayers",vi.prototype.MG);z.defineProperty(vi,{MG:"drawsTemporaryLayers"},w("ot"),function(a){this.ot!==a&&(this.ot=a,this.Fz())});function gj(a){var b=a.Uf;if(b!==q){var c=a.Xh;if(c!==q){a.qe=h;var c=c.gb,d=b.pm,e=z.$k();e.q(c.width,c.height);d.Fa=e;z.Cj(e);a=2/a.scale;d instanceof V&&(d.pb=a);b.location=new G(c.x-a/2,c.y-a/2)}}}
vi.prototype.Ve=function(){var a=this.Xh;return a===q?N.iF:a.uc};vi.prototype.rs=function(a){this.dc||(Ph(this),this.xa(),$h(this),this.vc(),gj(this),this.Ja("ViewportBoundsChanged",a))};function fj(){cf.call(this);this.name="MoveBox"}z.Pa(fj,cf);fj.prototype.doStart=function(){this.oa=this.h.pd=h};fj.prototype.doMouseMove=function(){if(this.oa){var a=this.h;if(!(a===q||a.Xh===q)){var b=a.Xh,c=b.gb,d=a.T.S;b.position=new G(d.x-c.width/2,d.y-c.height/2);a.oc()}}};
fj.prototype.doMouseUp=function(){this.oa&&this.doMouseMove();this.stopTool()};fj.prototype.doStop=function(){this.oa=s;var a=this.h;a.pd=s;gj(a)};
function Nd(a){1<arguments.length&&z.m("Brush constructor can take at most one optional argument, the Brush type.");z.qc(this);this.hb=s;a===f?(this.aa=Zd,this.Im="black"):"string"===typeof a?(this.aa=Zd,this.Im=a):(x&&z.wb(a,Nd,Nd,"constructor:type"),this.aa=a,this.Im="black");var b=this.aa;b===$d?(this.Cn=ac,this.Vm=fc):this.Vm=b===ae?this.Cn=cc:this.Cn=Wb;this.ru=0;this.pt=NaN;this.AA=this.BA=this.qg=this.gu=this.pg=q}z.ea("Brush",Nd);var Zd;Nd.Solid=Zd=z.w(Nd,"Solid",0);var $d;
Nd.Linear=$d=z.w(Nd,"Linear",1);var ae;Nd.Radial=ae=z.w(Nd,"Radial",2);var hj;Nd.Pattern=hj=z.w(Nd,"Pattern",2);Nd.prototype.copy=function(){var a=new Nd;a.aa=this.aa;a.Im=this.Im;a.Cn=this.Cn;a.Vm=this.Vm;a.ru=this.ru;a.pt=this.pt;this.pg!==q&&(a.pg=this.pg.copy());a.gu=this.gu;return a};Nd.prototype.Oa=function(){this.freeze();Object.freeze(this);return this};Nd.prototype.freeze=function(){this.hb=h;this.pg!==q&&this.pg.freeze();return this};
Nd.prototype.Ua=function(){Object.isFrozen(this)&&z.m("cannot thaw constant: "+this);this.hb=s;this.pg!==q&&this.pg.Ua();return this};Nd.prototype.toString=function(){var a="Brush(";if(this.type===Zd)a+=this.color;else if(a=this.type===$d?a+"Linear ":this.type===ae?a+"Radial ":this.type===hj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Vn!==q)for(var b=this.Vn.k;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Nd.prototype.addColorStop=Nd.prototype.addColorStop=function(a,b){z.J(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&z.ia(a,"0 <= loc <= 1",Nd,"addColorStop:loc");z.j(b,"string",Nd,"addColorStop:color");this.pg===q&&(this.pg=new ta("number","string"));this.pg.add(a,b);this.aa===Zd&&(this.type=$d);this.qg=q};z.g(Nd,"type",Nd.prototype.type);
z.defineProperty(Nd,{type:"type"},w("aa"),function(a){z.J(this,a);z.wb(a,Nd,Nd,"type");this.aa=a;Sb(this.start)&&(a===$d?this.start=ac:a===ae&&(this.start=cc));Sb(this.end)&&(a===$d?this.end=fc:a===ae&&(this.end=cc));this.qg=q});z.g(Nd,"color",Nd.prototype.color);z.defineProperty(Nd,{color:"color"},w("Im"),function(a){z.J(this,a);z.j(a,"string",Nd,"color");this.Im=a;this.qg=q});z.g(Nd,"start",Nd.prototype.start);
z.defineProperty(Nd,{start:"start"},w("Cn"),function(a){z.J(this,a);a instanceof O||z.Rb(a,"Spot",Nd,"start");this.Cn=a.Y();this.qg=q});z.g(Nd,"end",Nd.prototype.end);z.defineProperty(Nd,{end:"end"},w("Vm"),function(a){z.J(this,a);a instanceof O||z.Rb(a,"Spot",Nd,"end");this.Vm=a.Y();this.qg=q});z.g(Nd,"startRadius",Nd.prototype.Uo);z.defineProperty(Nd,{Uo:"startRadius"},w("ru"),function(a){z.J(this,a);z.p(a,Nd,"startRadius");0>a&&z.ia(a,">= zero",Nd,"startRadius");this.ru=a;this.qg=q});
z.g(Nd,"endRadius",Nd.prototype.ao);z.defineProperty(Nd,{ao:"endRadius"},w("pt"),function(a){z.J(this,a);z.p(a,Nd,"endRadius");0>a&&z.ia(a,">= zero",Nd,"endRadius");this.pt=a;this.qg=q});z.g(Nd,"colorStops",Nd.prototype.Vn);z.defineProperty(Nd,{Vn:"colorStops"},w("pg"),function(a){z.J(this,a);x&&z.l(a,ta,Nd,"colorStops");this.pg=a;this.qg=q});z.g(Nd,"pattern",Nd.prototype.pattern);z.defineProperty(Nd,{pattern:"pattern"},w("gu"),function(a){z.J(this,a);this.gu=a;this.qg=q});
Nd.randomColor=function(a,b){a===f&&(a=128);x&&(z.p(a,Nd,"randomColor:min"),(0>a||255<a)&&z.ia(a,"0 <= min <= 255",Nd,"randomColor:min"));b===f&&(b=Math.max(a,255));x&&(z.p(b,Nd,"randomColor:max"),(b<a||255<b)&&z.ia(b,"min <= max <= 255",Nd,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function U(){z.qc(this);this.qa=30723;this.Zh=q;this.Kb="";this.Le=this.bd=q;this.kb=(new G(NaN,NaN)).freeze();this.Me=(new qa(NaN,NaN)).freeze();this.Nd=N.Os;this.Xi=N.hF;this.Gc=new ra;this.Bi=new ra;this.qk=new ra;this.Lb=1;this.Em=0;this.ih=Hg;this.kq=N.ap;this.Dc=(new H(NaN,NaN,NaN,NaN)).freeze();this.Fb=(new H(NaN,NaN,NaN,NaN)).freeze();this.Rc=(new H(0,0,NaN,NaN)).freeze();this.kr=this.Ep=this.R=this.Fq=this.Pd=q;this.lr=this.Fp=Infinity;this.gp=this.Yd=Zb;this.Qq=0;this.yk=1;this.mp=0;this.bk=
1;this.Tq=-Infinity;this.Sq=0;this.Uq=N.Nj;this.Vq=ij;this.sp="";this.Cl=this.ak=this.jl=this.yc=this.Q=q}z.ea("GraphObject",U);
U.prototype.cloneProtected=function(a){a.qa=this.qa|6144;a.Kb=this.Kb;a.bd=this.bd;a.Le=this.Le;a.kb.assign(this.kb);a.Me.assign(this.Me);a.Nd=this.Nd.Y();a.Xi=this.Xi.Y();a.qk=this.qk.copy();a.Lb=this.Lb;a.Em=this.Em;a.ih=this.ih;a.kq=this.kq.Y();a.Dc.assign(this.Dc);a.Fb.assign(this.Fb);a.Rc.assign(this.Rc);a.Fq=this.Fq;a.Yd=this.Yd.Y();a.gp=this.gp.Y();a.Qq=this.Qq;a.yk=this.yk;a.mp=this.mp;a.bk=this.bk;a.Tq=this.Tq;a.Sq=this.Sq;a.Uq=this.Uq.Y();a.Vq=this.Vq;a.sp=this.sp;if(this.Q!==q){var b=this.Q;
a.Q={Gh:b.Gh,Lh:b.Lh,Hh:b.Hh,vq:b.vq,wq:b.wq,Vh:b.Vh,Uh:b.Uh,Th:b.Th,tq:b.tq,uq:b.uq,Sh:b.Sh,cp:b.cp,dp:b.dp,ep:b.ep,bp:b.bp,ei:b.ei,Ih:b.Ih}}this.R!==q&&(b=this.R,a.R={Mi:b.Mi.Y(),lj:b.lj.Y(),Ki:b.Ki,jj:b.jj,Ji:b.Ji,ij:b.ij,Li:b.Li,kj:b.kj});a.Ep=this.Ep;a.Fp=this.Fp;a.kr=this.kr;a.lr=this.lr;a.yc=this.yc;if(Array.isArray(this.jl)){a.jl=this.jl.slice(0);for(b=0;b<this.jl.length;b++){var c=this.jl[b];a[c]=this[c]}}this.ak!==q&&(a.ak=this.ak.copy())};U.prototype.oh=function(a){a.Pd=q;a.Cl=q;a.ca()};
U.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};U.prototype.toString=function(){return z.ph(Object.getPrototypeOf(this))+"#"+z.fc(this)};var jj;U.None=jj=z.w(U,"None",0);var Hg;U.Default=Hg=z.w(U,"Default",0);var kj;U.Vertical=kj=z.w(U,"Vertical",4);var lj;U.Horizontal=lj=z.w(U,"Horizontal",5);var Gc;U.Fill=Gc=z.w(U,"Fill",3);var Ig;U.Uniform=Ig=z.w(U,"Uniform",1);var Jg;U.UniformToFill=Jg=z.w(U,"UniformToFill",2);
function mj(a){a.Q={Gh:q,Lh:q,Hh:q,vq:q,wq:q,Vh:q,Uh:q,Th:q,tq:q,uq:q,Sh:q,cp:q,dp:q,ep:q,bp:q,ei:q,Ih:q}}da=U.prototype;da.ke=function(){this.R={Mi:Wb,lj:Wb,Ki:10,jj:10,Ji:nj,ij:nj,Li:0,kj:0}};
function oj(a,b,c,d,e,g,k){var l=0.001,m=g.length;a.moveTo(b,c);d-=b;l=e-c;0===d&&(d=0.001);e=l/d;for(var n=Math.sqrt(d*d+l*l),p=0,r=h,t=0===k?s:h;0.1<=n;){if(t){l=g[p++%m];for(l-=k;0>l;)l+=g[p++%m],r=!r;t=s}else l=g[p++%m];l>n&&(l=n);var u=Math.sqrt(l*l/(1+e*e));0>d&&(u=-u);b+=u;c+=e*u;r?a.lineTo(b,c):a.moveTo(b,c);n-=l;r=!r}}
da.Zc=function(a,b,c,d,e,g,k){var l=this.Z;if(l!==q&&(l.nm(a,b,c,d,e,g,k),0!==(this.qa&1024)&&(c===this&&a===yd)&&(a=this.io(),a!==q)))for(c=this.yc.k;c.next();)d=c.value,e=a.data,g=d.Hs,g!==q&&(e=a.Be(g)),e!==q&&(d.PE(this,e,b,g!==q?q:l.h),g!==q&&(e=a,""!==g&&(e=a.Be(g)),e!==q&&(g=d.sm,k=a,""!==g&&(k=a.Be(g)),k!==q&&d.QE(k,e,b))))};da.i=function(a,b,c){this.Zc(yd,a,this,b,c)};
function pj(a,b,c,d,e){var g=a.Dc,k=a.qk;k.reset();qj(a,k,b,c,d,e);a.qk=k;g.x=b;g.y=c;g.width=d;g.height=e;k.$r()||k.JE(g)}function rj(a,b,c,d){if(a.He===s)return s;d.multiply(a.transform);return c?a.xf(b,d):a.Sl(b,d)}
da.MC=function(a,b,c){if(this.He===s)return s;var d=this.Ma;b=a.Lk(b);var e=s;c&&(e=cb(a.x,a.y,0,0,0,d.height)<b||cb(a.x,a.y,0,d.height,d.width,d.height)<b||cb(a.x,a.y,d.width,d.height,d.width,0)<b||cb(a.x,a.y,d.width,0,0,0)<b);c||(e=cb(a.x,a.y,0,0,0,d.height)<b&&cb(a.x,a.y,0,d.height,d.width,d.height)<b&&cb(a.x,a.y,d.width,d.height,d.width,0)<b&&cb(a.x,a.y,d.width,0,0,0)<b);return e};da.zi=ca(h);
U.prototype.containsPoint=U.prototype.Ia=function(a){x&&z.l(a,G,U,"containsPoint:p");var b=z.O();b.assign(a);this.transform.Va(b);var c=this.ya;if(!c.W())return s;if(z.Wz){var d=this.Ma,e=this.Dj()*(this.h!==q?this.h.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return a=Cb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y),z.B(b),a}if(this.Hc!==f||this instanceof V?Cb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Ia(b)){if(this.ak&&!this.ak.Ia(b))return s;if(this.Le!==q&&c.Ia(b)||this.bd!==q&&this.Rc.Ia(a))return h;
z.B(b);return this.tj(a)}z.B(b);return s};U.prototype.tj=function(a){var b=this.Ma;return Cb(0,0,b.width,b.height,a.x,a.y)};U.prototype.containsRect=U.prototype.uj=function(a){x&&z.l(a,H,U,"containsRect:r");if(0===this.angle)return this.ya.uj(a);var b=this.Ma,b=z.Kj(0,0,b.width,b.height),c=this.transform,d=s,e=z.ic(a.x,a.y);b.Ia(c.ti(e))&&(e.q(a.x,a.bottom),b.Ia(c.ti(e))&&(e.q(a.right,a.bottom),b.Ia(c.ti(e))&&(e.q(a.right,a.y),b.Ia(c.ti(e))&&(d=h))));z.B(e);z.Jc(b);return d};
U.prototype.containedInRect=U.prototype.Sl=function(a,b){x&&z.l(a,H,U,"containedInRect:r");if(b===f)return a.uj(this.ya);var c=this.Ma,d=s,e=z.ic(0,0);a.Ia(b.Va(e))&&(e.q(0,c.height),a.Ia(b.Va(e))&&(e.q(c.width,c.height),a.Ia(b.Va(e))&&(e.q(c.width,0),a.Ia(b.Va(e))&&(d=h))));return d};
U.prototype.intersectsRect=U.prototype.xf=function(a,b){x&&z.l(a,H,U,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.angle))return a.xf(this.ya);var c=this.Ma,d=b,e=z.ic(0,0),g=z.ic(0,c.height),k=z.ic(c.width,c.height),l=z.ic(c.width,0),m=s;if(a.Ia(d.Va(e))||a.Ia(d.Va(g))||a.Ia(d.Va(k))||a.Ia(d.Va(l)))m=h;else{var c=z.Kj(0,0,c.width,c.height),n=z.ic(a.x,a.y);c.Ia(d.ti(n))?m=h:(n.q(a.x,a.bottom),c.Ia(d.ti(n))?m=h:(n.q(a.right,a.bottom),c.Ia(d.ti(n))?m=h:(n.q(a.right,a.y),c.Ia(d.ti(n))&&(m=
h))));z.B(n);z.Jc(c);if(!m&&(N.nv(a,e,g)||N.nv(a,g,k)||N.nv(a,k,l)||N.nv(a,l,e)))m=h}z.B(e);z.B(g);z.B(k);z.B(l);return m};U.prototype.getDocumentPoint=U.prototype.nb=function(a,b){b===f&&(b=new G);Sb(a)&&z.m("Spot must be real");var c=this.Ma;b.q(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.se.Va(b);return b};U.prototype.getDocumentAngle=U.prototype.Nk=function(){var a=this.se,a=Math.atan2(a.m12,a.m11)*(180/Math.PI);0>a&&(a+=360);return a};
U.prototype.getDocumentScale=U.prototype.Dj=function(){var a=this.Lb;return this.ha!==q?a*this.ha.Dj():a};U.prototype.getLocalPoint=U.prototype.VC=function(a,b){b===f&&(b=new G);b.assign(a);this.se.ti(b);return b};U.prototype.getNearestIntersectionPoint=U.prototype.lo=function(a,b,c){return this.Sr(a.x,a.y,b.x,b.y,c)};da=U.prototype;
da.Sr=function(a,b,c,d,e){var g=this.transform,k=1/(g.m11*g.m22-g.m12*g.m21),l=g.m22*k,m=-g.m12*k,n=-g.m21*k,p=g.m11*k,r=k*(g.m21*g.dy-g.m22*g.dx),t=k*(g.m12*g.dx-g.m11*g.dy);if(this.hi!==q)return g=this.ya,N.lo(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof F)||this instanceof F&&this.background!==q)return k=a*l+b*n+r,a=a*m+b*p+t,l=c*l+d*n+r,c=c*m+d*p+t,e.q(0,0),d=this.Ma,c=N.lo(0,0,d.width,d.height,k,a,l,c,e),e.transform(g),c;if(this instanceof F&&(this.hi===q||this.hi===f)){k=a*
l+b*n+r;a=a*m+b*p+t;l=c*l+d*n+r;d=c*m+d*p+t;e.q(l,d);m=(l-k)*(l-k)+(d-a)*(d-a);c=s;p=this.za.n;t=p.length;n=z.O();for(r=0;r<t;r++)b=p[r],b.visible&&b.Sr(k,a,l,d,n)&&(c=h,b=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),b<m&&(m=b,e.set(n)));z.B(n);e.transform(g);return c}z.m("Unknown GraphObject case");return s};
function gh(a,b,c,d,e){if(fi(a)!==s){var g=a.margin,k=g.top+g.bottom;b=Math.max(b-(g.right+g.left),0);c=Math.max(c-k,0);g=a.Fa;k=0;a.pb&&(k=a.pb);b=isFinite(g.width)?g.width+k:b;c=isFinite(g.height)?g.height+k:c;var g=d,k=e,l=a instanceof F;switch(sj(a)){case jj:k=g=0;l&&(c=b=Infinity);break;case Gc:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(k=c);break;case lj:isFinite(b)&&b>d&&(g=b);k=0;l&&(c=Infinity);break;case kj:isFinite(c)&&c>e&&(k=c),g=0,l&&(b=Infinity)}var l=a.le,m=a.Ge;g>l.width&&m.width<
l.width&&(g=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(g/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.angle;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.Dc.Ua();a.gs(b,c,d,e);a.Dc.freeze();a.Dc.W()||z.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Dc.toString());vj(a,s)}}
da.zc=function(a,b,c,d,e){Ej(this);var g=z.hf();g.assign(this.Fb);this.Fb.Ua();if(gi(this)===s){var k=this.Fb;k.x=a;k.y=b;k.width=c;k.height=d}else this.sj(a,b,c,d);this.Fb.freeze();this.ak=e===f?q:e;c=s;if(e!==f)c=h;else if(this.ha&&(c=this.ha.Rc,e=this.Ga,this.hi!==q&&(e=this.Fb),d=b+e.height,k=a+e.width,c=!(0<=a&&k<=c.width&&0<=b&&d<=c.height),this instanceof ya&&(this.Lt>e.height||this.bq.xi>e.width)))c=h;this.qa=c?this.qa|256:this.qa&-257;this.Fb.W()||z.m("Non-real actualBounds has been set. Object "+
this+", actualBounds: "+this.Fb.toString());Fj(this,g,this.Fb);z.Jc(g)};da.sj=aa();function Gj(a,b,c,d,e){var g=a.ya;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.Fa.W()){g=a.Dc;c=a.margin;b=c.right+c.left;var k=c.top+c.bottom;c=g.width+b;g=g.height+k;d+=b;e+=k;b=sj(a);c===d&&g===e&&(b=jj);switch(b){case jj:if(c>d||g>e)vj(a,h),gh(a,c>d?d:c,g>e?e:g);break;case Gc:vj(a,h);gh(a,d,e,0,0);break;case lj:vj(a,h);gh(a,d,g,0,0);break;case kj:vj(a,h),gh(a,c,e,0,0)}}}
function Fj(a,b,c){Hj(a,s);var d=a.Z;if(d!==q){var e=d.h;if(e!==q)if(Ij(d),a instanceof B){var g=s,d=b.W();if(e.Pi===s){var k=e.uc,l=e.padding,m=k.x+l.left,n=k.y+l.top,p=k.width-2*l.right,k=k.height-2*l.bottom;d&&(b.x>m&&b.y>n&&b.right<p&&b.bottom<k&&c.x>m&&c.y>n&&c.right<p&&c.bottom<k)&&(g=h)}(0!==(a.ba&65536)===h||!b.N(c))&&Bi(a,g,e);!e.Nx||e.Hi===q?e.xa():(g=q,d&&(g=z.hf(),oh(a,b,g)),e.xa(c.W()?oh(a,c):q,g),g!==q&&z.Jc(g))}else Jj(a,d),a.xa(),b=a.Z,b!==q&&(b.pm===a||b.bE===a||b.fE===a)&&Kj(b,h)}}
function Jj(a,b){a.Xd!==q&&Kj(b,h);if(a instanceof F)for(var c=a.za,d=c.length,e=0;e<d;e++)Jj(c.n[e],b)}
da.Ae=function(a,b){if(this.visible)if(this instanceof F&&(this.type===Lj||this.type===Mj)){var c=this.Fb;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.Le!==q&&(Nj(this,a,this.Le,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.bd!==q&&(Nj(this,a,this.bd,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Yl(a,b))}else if(c=this.Fb,!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){x&&(x.Gk&&!(this instanceof Ne))&&x.FG(a,this);var d=this.transform,e=this.ha,g=this.Bi;g.reset();e!==q&&(e.zi()?
g.multiply(e.se):e.ha!==q&&g.multiply(e.ha.se));g.multiply(this.Gc);if(g=0!==(this.qa&256)){x&&x.KC&&x.trace("clip"+this.toString());var k=e.zi()?e.Ma:e.ya;if(this.ak)var l=this.ak,m=l.x,n=l.y,p=l.width,l=l.height;else m=Math.max(c.x,k.x),n=Math.max(c.y,k.y),p=Math.min(c.right,k.right)-m,l=Math.min(c.bottom,k.bottom)-n;if(m>c.width+c.x||c.x>k.width+k.x||n>c.height+c.y||c.y>k.height+k.y)return;x&&x.KC&&x.HG(a,m,n,p,l);a.save();a.beginPath();a.rect(m,n,p,l);a.clip()}k=s;if(this instanceof B){k=h;if(!this.Db())return;
this.Fj&&(m=this.Bn,a.shadowOffsetX=m.x*b.scale,a.shadowOffsetY=m.y*b.scale,a.shadowColor=this.An,a.shadowBlur=this.zn)}m=s;this.Z&&(m=this.Z.Fj);this.Le!==q&&(Nj(this,a,this.Le,h,h),a.fillRect(c.x,c.y,c.width,c.height));d.$r()||a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);if(this.bd!==q){var l=this.Ma,n=c=0,p=l.width,l=l.height,r=0;this instanceof V&&(l=this.Sa.Nb,c=l.x,n=l.y,p=l.width,l=l.height,r=this.de);Nj(this,a,this.bd,h);a.fillRect(c-r/2,n-r/2,p+r,l+r)}x&&x.Gk&&x.GG(a,this);if(m&&(this.bd!==
q||this.Le!==q||e!==q&&0!==(e.qa&512)||e!==q&&e.type===Ih&&e.gj!==this)){this.qa|=512;var t=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.qa&=-513;this.Yl(a,b);m&&0!==(this.qa&512)===h&&(a.shadowOffsetX=t[0],a.shadowOffsetY=t[1],a.shadowBlur=t[2]);k&&m&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);g?(a.restore(),Mh(b,a)):d.$r()||(e=1/(d.m11*d.m22-d.m12*d.m21),a.transform(d.m22*e,-d.m12*e,-d.m21*e,d.m11*e,e*(d.m21*d.dy-d.m22*d.dx),
e*(d.m12*d.dx-d.m11*d.dy)))}};da.Yl=aa();
function Nj(a,b,c,d,e){if(c!==q)if("string"===typeof c)d?b.dl!==c&&(b.fillStyle=c,b.dl=c):b.Bm!==c&&(b.strokeStyle=c,b.Bm=c);else if(c.type===Zd)c=c.color,d?b.dl!==c&&(b.fillStyle=c,b.dl=c):b.Bm!==c&&(b.strokeStyle=c,b.Bm=c);else{var g,k=a.Ma,l=k.width,k=k.height;if(e)var m=a.ya,l=m.width,k=m.height;if(c.qg&&c.type===hj||c.BA===l&&c.AA===k)g=c.qg;else{var n,p,r=p=0;e&&(m=a.ya,l=m.width,k=m.height,p=m.x,r=m.y);c.start instanceof G?(a=c.start.x,e=c.start.y):c.start instanceof O?(a=c.start.x*l,e=c.start.y*
k):(a=cc.x*l,e=cc.y*k);c.end instanceof G?(m=c.end.x,n=c.end.y):c.end instanceof O?(m=c.end.x*l,n=c.end.y*k):c.type===$d?(m=fc.x*l,n=fc.y*k):(m=cc.x*l,n=cc.y*k);a+=p;m+=p;e+=r;n+=r;c.type===$d?g=b.createLinearGradient(a,e,m,n):c.type===ae?(p=isNaN(c.ao)?Math.max(l,k)/2:c.ao,isNaN(c.Uo)?(g=0,p=Math.max(l,k)/2):g=c.Uo,g=b.createRadialGradient(a,e,g,m,n,p)):c.type===hj?g=b.createPattern(c.pattern,"repeat"):z.Rb(c.type,"Brush type");if(c.type!==hj&&(p=c.Vn))for(p=p.k;p.next();)g.addColorStop(p.key,p.value);
c.qg=g;c.BA=l;c.AA=k}d?b.dl!==g&&(b.fillStyle=g,b.dl=g):b.Bm!==g&&(b.strokeStyle=g,b.Bm=g)}}U.prototype.isContainedBy=U.prototype.ui=function(a){if(a instanceof F)a:{if(!(this===a||a===q))for(var b=this.ha;b!==q;){if(b===a){a=h;break a}b=b.ha}a=s}else a=s;return a};U.prototype.isVisibleObject=U.prototype.Rk=function(){if(!this.visible)return s;var a=this.ha;return a!==q?a.Rk():h};
function Oj(a){if(0!==(a.qa&2048)===h){var b=a.Gc;b.reset();if(!a.Fb.W()||!a.Dc.W()){Pj(a,s);return}b.translate(a.Fb.x,a.Fb.y);b.translate(-a.Ga.x,-a.Ga.y);var c=a.Ma;qj(a,b,c.x,c.y,c.width,c.height);Pj(a,s);Qj(a,h)}0!==(a.qa&4096)===h&&(a.ha===q?(a.Bi.set(a.Gc),Qj(a,s)):a.ha.se!==q&&(b=a.Bi,b.reset(),b.multiply(a.ha.Bi),b.multiply(a.Gc),Qj(a,s)))}
function qj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var k=cc;a.af&&Ob(a.af)&&(k=a.af);var l=z.O();if(a instanceof B&&a.Qb!==a){c=a.Qb;d=c.Ma;l.Ds(d.x,d.y,d.width,d.height,k);c.qk.Va(l);l.offset(-c.Ga.x,-c.Ga.y);for(k=c.ha;k!==q&&k!==a;)k.qk.Va(l),l.offset(-k.Ga.x,-k.Ga.y),k=k.ha}else l.Ds(c,d,e,g,k);b.rotate(a.angle,l.x,l.y);z.B(l)}}
U.prototype.ca=function(a){if(fi(this)!==h){vj(this,h);Hj(this,h);var b=this.ha;b!==q?a||b.ca():(a=this.h,a!==q&&(a.Hf.add(this),this instanceof D&&(a.Aa.jb||this.Gg(),this.Yc!==q&&Rj(this.Yc)),a.oc()));if(this instanceof F){var c=q;a=this.za;b=a.length;this.aa===Ih&&(c=Sj(this,a,b))&&c.ca(h);a=a.n;for(c=0;c<b;c++){var d=a[c];fi(d)!==h&&(d.Fa.W()||(d instanceof Gg||d instanceof F||d instanceof ya||sj(d)!==jj)&&d.ca(h))}}}};
function Tj(a){if(fi(a)===s&&(vj(a,h),Hj(a,h),a instanceof F)){a=a.za.n;for(var b=a.length,c=0;c<b;c++)Tj(a[c])}}function Rj(a){if(gi(a)===s){if(a.ha!==q)a.ha.ca();else{var b=a.h;b!==q&&(b.Hf.add(a),a instanceof D&&a.Gg(),b.oc())}Hj(a,h)}}function Ej(a){if(0!==(a.qa&2048)===s&&(Pj(a,h),Qj(a,h),a instanceof F))for(a=a.elements;a.next();)Uj(a.value)}function Uj(a){Qj(a,h);if(a instanceof F)for(a=a.elements;a.next();)Uj(a.value)}
U.prototype.xa=function(){if(this instanceof B){var a=this.h;a!==q&&(!gi(this)&&!hi(this)&&this.Db()&&this.Fb.W())&&a.xa(oh(this,this.Fb))}else this.Z!==q&&this.Z.xa()};function sj(a){var b=a.zh,c=a.ha;if(c&&c.aa===ga)return Vj(a,c.Sd(a.wc),c.Rd(a.column));if(c&&c.aa===Ih){if(c.gj===q){var d=c.za,e=d.length;Sj(c,d,e)}if(c.gj===a)return Gc}if(b===Hg){if(c){c.aa===Fg&&c.gj===q&&(d=c.za,e=d.length,Sj(c,d,e));if(c.gj===a)return Gc;a=c.Jy;return a===Hg?jj:a}return jj}return b}
function Vj(a,b,c){var d=a.zh;if(d!==Hg)return d;var e=d=f;switch(b.zh){case kj:e=h;break;case Gc:e=h}switch(c.zh){case lj:d=h;break;case Gc:d=h}a=a.ha.Jy;d=d===f&&(a===lj||a===Gc)?h:s;e=e===f&&(a===kj||a===Gc)?h:s;return d===h&&e===h?Gc:d===h?lj:e===h?kj:jj}z.g(U,"segmentOrientation",U.prototype.As);z.defineProperty(U,{As:"segmentOrientation"},w("Vq"),function(a){var b=this.Vq;b!==a&&(x&&z.wb(a,E,U,"segmentOrientation"),this.Vq=a,this.ca(),this.i("segmentOrientation",b,a))});
z.g(U,"segmentIndex",U.prototype.ef);z.defineProperty(U,{ef:"segmentIndex"},w("Tq"),function(a){x&&z.j(a,"number",U,"segmentIndex");a=Math.round(a);var b=this.Tq;b!==a&&(this.Tq=a,this.ca(),this.i("segmentIndex",b,a))});z.g(U,"segmentFraction",U.prototype.zs);z.defineProperty(U,{zs:"segmentFraction"},w("Sq"),function(a){x&&z.j(a,"number",U,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Sq;b!==a&&(this.Sq=a,this.ca(),this.i("segmentFraction",b,a))});z.g(U,"segmentOffset",U.prototype.Nz);
z.defineProperty(U,{Nz:"segmentOffset"},w("Uq"),function(a){var b=this.Uq;b.N(a)||(x&&z.l(a,G,U,"segmentOffset"),this.Uq=a=a.Y(),this.ca(),this.i("segmentOffset",b,a))});z.g(U,"stretch",U.prototype.zh);z.defineProperty(U,{zh:"stretch"},w("ih"),function(a){var b=this.ih;b!==a&&(x&&z.wb(a,U,U,"stretch"),this.ih=a,this.ca(),this.i("stretch",b,a))});z.g(U,"name",U.prototype.name);
z.defineProperty(U,{name:"name"},w("Kb"),function(a){var b=this.Kb;b!==a&&(x&&z.j(a,"string",U,"name"),this.Kb=a,this.Z&&(this.Z.tk=q),this.i("name",b,a))});z.g(U,"visible",U.prototype.visible);
z.defineProperty(U,{visible:"visible"},function(){return 0!==(this.qa&1)},function(a){var b=0!==(this.qa&1);b!==a&&(x&&z.j(a,"boolean",U,"visible"),this.qa^=1,this.i("visible",b,a),b=this.ha,b!==q?b.ca():this instanceof B&&(this.ca(),Ij(this),a?(this.K(Wj),this.updateAdornments()):(this.K(Xj),this.ge())),this.xa(),Yj(this))});z.g(U,"pickable",U.prototype.He);
z.defineProperty(U,{He:"pickable"},function(){return 0!==(this.qa&2)},function(a){var b=0!==(this.qa&2);b!==a&&(x&&z.j(a,"boolean",U,"pickable"),this.qa^=2,this.i("pickable",b,a))});z.g(U,"fromLinkableDuplicates",U.prototype.QC);z.defineProperty(U,{QC:"fromLinkableDuplicates"},function(){return 0!==(this.qa&4)},function(a){var b=0!==(this.qa&4);b!==a&&(x&&z.j(a,"boolean",U,"fromLinkableDuplicates"),this.qa^=4,this.i("fromLinkableDuplicates",b,a))});z.g(U,"fromLinkableSelfNode",U.prototype.RC);
z.defineProperty(U,{RC:"fromLinkableSelfNode"},function(){return 0!==(this.qa&8)},function(a){var b=0!==(this.qa&8);b!==a&&(x&&z.j(a,"boolean",U,"fromLinkableSelfNode"),this.qa^=8,this.i("fromLinkableSelfNode",b,a))});z.g(U,"toLinkableDuplicates",U.prototype.BE);z.defineProperty(U,{BE:"toLinkableDuplicates"},function(){return 0!==(this.qa&16)},function(a){var b=0!==(this.qa&16);b!==a&&(x&&z.j(a,"boolean",U,"toLinkableDuplicates"),this.qa^=16,this.i("toLinkableDuplicates",b,a))});
z.g(U,"toLinkableSelfNode",U.prototype.CE);z.defineProperty(U,{CE:"toLinkableSelfNode"},function(){return 0!==(this.qa&32)},function(a){var b=0!==(this.qa&32);b!==a&&(x&&z.j(a,"boolean",U,"toLinkableSelfNode"),this.qa^=32,this.i("toLinkableSelfNode",b,a))});z.g(U,"isPanelMain",U.prototype.rh);z.defineProperty(U,{rh:"isPanelMain"},function(){return 0!==(this.qa&64)},function(a){var b=0!==(this.qa&64);b!==a&&(x&&z.j(a,"boolean",U,"isPanelMain"),this.qa^=64,this.ca(),this.i("isPanelMain",b,a))});
z.g(U,"isActionable",U.prototype.Yr);z.defineProperty(U,{Yr:"isActionable"},function(){return 0!==(this.qa&128)},function(a){var b=0!==(this.qa&128);b!==a&&(x&&z.j(a,"boolean",U,"isActionable"),this.qa^=128,this.i("isActionable",b,a))});z.g(U,"areaBackground",U.prototype.hi);z.defineProperty(U,{hi:"areaBackground"},w("Le"),function(a){var b=this.Le;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.Le=a,this.xa(),this.i("areaBackground",b,a)});
z.g(U,"background",U.prototype.background);z.defineProperty(U,{background:"background"},w("bd"),function(a){var b=this.bd;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.bd=a,this.xa(),this.i("background",b,a)});function Zj(a,b){a.qa=b?a.qa|1024:a.qa&-1025}function Pj(a,b){a.qa=b?a.qa|2048:a.qa&-2049}function Qj(a,b){a.qa=b?a.qa|4096:a.qa&-4097}function fi(a){return 0!==(a.qa&8192)}function vj(a,b){a.qa=b?a.qa|8192:a.qa&-8193}
function gi(a){return 0!==(a.qa&16384)}function Hj(a,b){a.qa=b?a.qa|16384:a.qa&-16385}z.A(U,{Z:"part"},function(){if(this instanceof B)return this;if(this.Cl)return this.Cl;var a;for(a=this.ha;a;){if(a instanceof B)return this.Cl=a;a=a.ha}return q});U.prototype.Xk=ba("Zh");z.A(U,{ha:"panel"},w("Zh"));z.A(U,{layer:"layer"},function(){var a=this.Z;return a!==q?a.layer:q});z.A(U,{h:"diagram"},function(){var a=this.Z;return a!==q?a.h:q},{configurable:h});z.g(U,"position",U.prototype.position);
z.defineProperty(U,{position:"position"},w("kb"),function(a){var b=this.kb;if(!b.N(a))if(x&&z.l(a,G,U,"position"),a=a.Y(),this instanceof B){if(!(this instanceof E)&&a.W()){var c=this.Rh;this.kb=a;if(gi(this)===s){var d=c.copy(),e=this.h;c.q(d.x+(a.x-b.x),d.y+(a.y-b.y));ak(this);Ej(this);bk(this);!c.N(d)&&e&&this.i("location",d,c)}else c.q(NaN,NaN);this.i("position",b,a)}}else this.kb=a,Rj(this),Ej(this),this.i("position",b,a)});z.A(U,{ya:"actualBounds"},w("Fb"));z.g(U,"scale",U.prototype.scale);
z.defineProperty(U,{scale:"scale"},w("Lb"),function(a){var b=this.Lb;b!==a&&(x&&z.p(a,U,"scale"),0>=a&&z.m("GraphObject.scale must be greater than zero"),this.Lb=a,Ej(this),this.ca(),this.i("scale",b,a))});z.g(U,"angle",U.prototype.angle);z.defineProperty(U,{angle:"angle"},w("Em"),function(a){var b=this.Em;b!==a&&(x&&z.p(a,U,"angle"),a%=360,0>a&&(a+=360),this.Em=a,this.ca(),Ej(this),this.i("angle",b,a))});z.g(U,"desiredSize",U.prototype.Fa);
z.defineProperty(U,{Fa:"desiredSize"},w("Me"),function(a){var b=this.Me;b.N(a)||(x&&z.l(a,qa,U,"desiredSize"),this.Me=a=a.Y(),this.ca(),this instanceof V&&this.Yf(),this.i("desiredSize",b,a))});z.g(U,"width",U.prototype.width);z.defineProperty(U,{width:"width"},function(){return this.Me.width},function(a){if(this.Me.width!==a){x&&z.j(a,"number",U,"width");var b=this.Me;this.Me=a=(new qa(a,this.Me.height)).freeze();this.ca();this instanceof V&&this.Yf();this.i("desiredSize",b,a)}});
z.g(U,"height",U.prototype.height);z.defineProperty(U,{height:"height"},function(){return this.Me.height},function(a){if(this.Me.height!==a){x&&z.j(a,"number",U,"height");var b=this.Me;this.Me=a=(new qa(this.Me.width,a)).freeze();this.ca();this instanceof V&&this.Yf();this.i("desiredSize",b,a)}});z.g(U,"minSize",U.prototype.Ge);
z.defineProperty(U,{Ge:"minSize"},w("Nd"),function(a){var b=this.Nd;b.N(a)||(x&&z.l(a,qa,U,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Nd=a,this.ca(),this.i("minSize",b,a))});z.g(U,"maxSize",U.prototype.le);z.defineProperty(U,{le:"maxSize"},w("Xi"),function(a){var b=this.Xi;b.N(a)||(x&&z.l(a,qa,U,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.Xi=a,this.ca(),this.i("maxSize",b,a))});
z.A(U,{Ga:"measuredBounds"},w("Dc"));z.A(U,{Ma:"naturalBounds"},w("Rc"),{configurable:h});z.g(U,"margin",U.prototype.margin);z.defineProperty(U,{margin:"margin"},w("kq"),function(a){"number"===typeof a?a=new ub(a):x&&z.l(a,ub,U,"margin");var b=this.kq;b.N(a)||(this.kq=a=a.Y(),this.ca(),this.i("margin",b,a))});z.A(U,{transform:q},function(){0!==(this.qa&2048)===h&&Oj(this);return this.Gc});z.A(U,{se:q},function(){0!==(this.qa&4096)===h&&Oj(this);return this.Bi});z.g(U,"alignment",U.prototype.alignment);
z.defineProperty(U,{alignment:"alignment"},w("Yd"),function(a){var b=this.Yd;b.N(a)||(x?z.l(a,O,U,"alignment"):Sb(a)&&!Vb(a)&&z.m("alignment must be a real Spot or Spot.Default"),this.Yd=a=a.Y(),Rj(this),this.i("alignment",b,a))});z.g(U,"column",U.prototype.column);z.defineProperty(U,{column:"column"},w("mp"),function(a){x&&z.p(a,U,"column");a=Math.round(a);var b=this.mp;b!==a&&(0>a&&z.ia(a,">= 0",U,"column"),this.mp=a,this.ca(),this.i("column",b,a))});z.g(U,"columnSpan",U.prototype.oC);
z.defineProperty(U,{oC:"columnSpan"},w("bk"),function(a){x&&z.p(a,U,"columnSpan");a=Math.round(a);var b=this.bk;b!==a&&(1>a&&z.ia(a,">= 1",U,"columnSpan"),this.bk=a,this.ca(),this.i("columnSpan",b,a))});z.g(U,"row",U.prototype.wc);z.defineProperty(U,{wc:"row"},w("Qq"),function(a){x&&z.p(a,U,"row");a=Math.round(a);var b=this.Qq;b!==a&&(0>a&&z.ia(a,">= 0",U,"row"),this.Qq=a,this.ca(),this.i("row",b,a))});z.g(U,"rowSpan",U.prototype.rowSpan);
z.defineProperty(U,{rowSpan:"rowSpan"},w("yk"),function(a){x&&z.p(a,U,"rowSpan");a=Math.round(a);var b=this.yk;b!==a&&(1>a&&z.ia(a,">= 1",U,"rowSpan"),this.yk=a,this.ca(),this.i("rowSpan",b,a))});z.g(U,"alignmentFocus",U.prototype.oj);z.defineProperty(U,{oj:"alignmentFocus"},w("gp"),function(a){var b=this.gp;b.N(a)||(x?z.l(a,O,U,"alignmentFocus"):Sb(a)&&!Vb(a)&&z.m("alignmentFocus must be a real Spot or Spot.Default"),this.gp=a=a.Y(),this.ca(),this.i("alignmentFocus",b,a))});z.g(U,"portId",U.prototype.Xd);
z.defineProperty(U,{Xd:"portId"},w("Fq"),function(a){var b=this.Fq;if(b!==a){x&&a!==q&&z.j(a,"string",U,"portId");var c=this.Z;c!==q&&!(c instanceof D)&&(z.m("portID being set on a Link: "+a),c=q);b!==q&&c&&ck(c,this);this.Fq=a;a!==q&&c&&(c.Oi=h,c.Sc===q&&dk(c),ek(c,this));this.i("portId",b,a)}});function fk(a){var b={value:q};gk(a,b);return b.value}function gk(a,b){var c=a.ha;return c===q||!gk(c,b)&&a.visible?(b.value=a,s):h}function Yj(a){var b=a.Z;b instanceof D&&(a=a.h)&&!a.Aa.jb&&b.Gg()}
z.g(U,"toSpot",U.prototype.qb);z.defineProperty(U,{qb:"toSpot"},function(){return this.R!==q?this.R.lj:Wb},function(a){this.R===q&&this.ke();var b=this.R.lj;b.N(a)||(x&&z.l(a,O,U,"toSpot"),a=a.Y(),this.R.lj=a,this.i("toSpot",b,a),Yj(this))});z.g(U,"toEndSegmentLength",U.prototype.wm);
z.defineProperty(U,{wm:"toEndSegmentLength"},function(){return this.R!==q?this.R.jj:10},function(a){this.R===q&&this.ke();var b=this.R.jj;b!==a&&(x&&z.j(a,"number",U,"toEndSegmentLength"),0>a&&z.ia(a,">= 0",U,"toEndSegmentLength"),this.R.jj=a,this.i("toEndSegmentLength",b,a),Yj(this))});z.g(U,"toEndSegmentDirection",U.prototype.Uv);
z.defineProperty(U,{Uv:"toEndSegmentDirection"},function(){return this.R!==q?this.R.ij:nj},function(a){this.R===q&&this.ke();var b=this.R.ij;b!==a&&(x&&z.wb(a,D,U,"toEndSegmentDirection"),this.R.ij=a,this.i("toEndSegmentDirection",b,a),Yj(this))});z.g(U,"toShortLength",U.prototype.Vv);
z.defineProperty(U,{Vv:"toShortLength"},function(){return this.R!==q?this.R.kj:0},function(a){this.R===q&&this.ke();var b=this.R.kj;b!==a&&(x&&z.j(a,"number",U,"toShortLength"),this.R.kj=a,this.i("toShortLength",b,a),Yj(this))});z.g(U,"toLinkable",U.prototype.aA);z.defineProperty(U,{aA:"toLinkable"},w("kr"),function(a){var b=this.kr;b!==a&&(x&&a!==q&&z.j(a,"boolean",U,"toLinkable"),this.kr=a,this.i("toLinkable",b,a))});z.g(U,"toMaxLinks",U.prototype.DE);
z.defineProperty(U,{DE:"toMaxLinks"},w("lr"),function(a){var b=this.lr;b!==a&&(x&&z.p(a,U,"toMaxLinks"),0>a&&z.ia(a,">= 0",U,"toMaxLinks"),this.lr=a,this.i("toMaxLinks",b,a))});z.g(U,"fromSpot",U.prototype.mb);z.defineProperty(U,{mb:"fromSpot"},function(){return this.R!==q?this.R.Mi:Wb},function(a){this.R===q&&this.ke();var b=this.R.Mi;b.N(a)||(x&&z.l(a,O,U,"fromSpot"),a=a.Y(),this.R.Mi=a,this.i("fromSpot",b,a),Yj(this))});z.g(U,"fromEndSegmentLength",U.prototype.am);
z.defineProperty(U,{am:"fromEndSegmentLength"},function(){return this.R!==q?this.R.Ki:10},function(a){this.R===q&&this.ke();var b=this.R.Ki;b!==a&&(x&&z.j(a,"number",U,"fromEndSegmentLength"),0>a&&z.ia(a,">= 0",U,"fromEndSegmentLength"),this.R.Ki=a,this.i("fromEndSegmentLength",b,a),Yj(this))});z.g(U,"fromEndSegmentDirection",U.prototype.hv);
z.defineProperty(U,{hv:"fromEndSegmentDirection"},function(){return this.R!==q?this.R.Ji:nj},function(a){this.R===q&&this.ke();var b=this.R.Ji;b!==a&&(x&&z.wb(a,D,U,"fromEndSegmentDirection"),this.R.Ji=a,this.i("fromEndSegmentDirection",b,a),Yj(this))});z.g(U,"fromShortLength",U.prototype.iv);
z.defineProperty(U,{iv:"fromShortLength"},function(){return this.R!==q?this.R.Li:0},function(a){this.R===q&&this.ke();var b=this.R.Li;b!==a&&(x&&z.j(a,"number",U,"fromShortLength"),this.R.Li=a,this.i("fromShortLength",b,a),Yj(this))});z.g(U,"fromLinkable",U.prototype.Uy);z.defineProperty(U,{Uy:"fromLinkable"},w("Ep"),function(a){var b=this.Ep;b!==a&&(x&&a!==q&&z.j(a,"boolean",U,"fromLinkable"),this.Ep=a,this.i("fromLinkable",b,a))});z.g(U,"fromMaxLinks",U.prototype.SC);
z.defineProperty(U,{SC:"fromMaxLinks"},w("Fp"),function(a){var b=this.Fp;b!==a&&(x&&z.p(a,U,"fromMaxLinks"),0>a&&z.ia(a,">= 0",U,"fromMaxLinks"),this.Fp=a,this.i("fromMaxLinks",b,a))});z.g(U,"cursor",U.prototype.cursor);z.defineProperty(U,{cursor:"cursor"},w("sp"),function(a){var b=this.sp;b!==a&&(z.j(a,"string",U,"cursor"),this.sp=a,this.i("cursor",b,a))});z.g(U,"click",U.prototype.click);
z.defineProperty(U,{click:"click"},function(){return this.Q!==q?this.Q.Gh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Gh;b!==a&&(a!==q&&z.j(a,"function",U,"click"),this.Q.Gh=a,this.i("click",b,a))});z.g(U,"doubleClick",U.prototype.Wl);z.defineProperty(U,{Wl:"doubleClick"},function(){return this.Q!==q?this.Q.Lh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Lh;b!==a&&(a!==q&&z.j(a,"function",U,"doubleClick"),this.Q.Lh=a,this.i("doubleClick",b,a))});z.g(U,"contextClick",U.prototype.Hr);
z.defineProperty(U,{Hr:"contextClick"},function(){return this.Q!==q?this.Q.Hh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Hh;b!==a&&(a!==q&&z.j(a,"function",U,"contextClick"),this.Q.Hh=a,this.i("contextClick",b,a))});z.g(U,"mouseEnter",U.prototype.oz);z.defineProperty(U,{oz:"mouseEnter"},function(){return this.Q!==q?this.Q.vq:q},function(a){this.Q===q&&mj(this);var b=this.Q.vq;b!==a&&(a!==q&&z.j(a,"function",U,"mouseEnter"),this.Q.vq=a,this.i("mouseEnter",b,a))});z.g(U,"mouseLeave",U.prototype.pz);
z.defineProperty(U,{pz:"mouseLeave"},function(){return this.Q!==q?this.Q.wq:q},function(a){this.Q===q&&mj(this);var b=this.Q.wq;b!==a&&(a!==q&&z.j(a,"function",U,"mouseLeave"),this.Q.wq=a,this.i("mouseLeave",b,a))});z.g(U,"mouseOver",U.prototype.ls);z.defineProperty(U,{ls:"mouseOver"},function(){return this.Q!==q?this.Q.Vh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Vh;b!==a&&(a!==q&&z.j(a,"function",U,"mouseOver"),this.Q.Vh=a,this.i("mouseOver",b,a))});z.g(U,"mouseHover",U.prototype.ks);
z.defineProperty(U,{ks:"mouseHover"},function(){return this.Q!==q?this.Q.Uh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Uh;b!==a&&(a!==q&&z.j(a,"function",U,"mouseHover"),this.Q.Uh=a,this.i("mouseHover",b,a))});z.g(U,"mouseHold",U.prototype.js);z.defineProperty(U,{js:"mouseHold"},function(){return this.Q!==q?this.Q.Th:q},function(a){this.Q===q&&mj(this);var b=this.Q.Th;b!==a&&(a!==q&&z.j(a,"function",U,"mouseHold"),this.Q.Th=a,this.i("mouseHold",b,a))});z.g(U,"mouseDragEnter",U.prototype.HD);
z.defineProperty(U,{HD:"mouseDragEnter"},function(){return this.Q!==q?this.Q.tq:q},function(a){this.Q===q&&mj(this);var b=this.Q.tq;b!==a&&(a!==q&&z.j(a,"function",U,"mouseDragEnter"),this.Q.tq=a,this.i("mouseDragEnter",b,a))});z.g(U,"mouseDragLeave",U.prototype.nz);z.defineProperty(U,{nz:"mouseDragLeave"},function(){return this.Q!==q?this.Q.uq:q},function(a){this.Q===q&&mj(this);var b=this.Q.uq;b!==a&&(a!==q&&z.j(a,"function",U,"mouseDragLeave"),this.Q.uq=a,this.i("mouseDragLeave",b,a))});
z.g(U,"mouseDrop",U.prototype.is);z.defineProperty(U,{is:"mouseDrop"},function(){return this.Q!==q?this.Q.Sh:q},function(a){this.Q===q&&mj(this);var b=this.Q.Sh;b!==a&&(a!==q&&z.j(a,"function",U,"mouseDrop"),this.Q.Sh=a,this.i("mouseDrop",b,a))});z.g(U,"actionDown",U.prototype.sy);z.defineProperty(U,{sy:"actionDown"},function(){return this.Q!==q?this.Q.cp:q},function(a){this.Q===q&&mj(this);var b=this.Q.cp;b!==a&&(a!==q&&z.j(a,"function",U,"actionDown"),this.Q.cp=a,this.i("actionDown",b,a))});
z.g(U,"actionUp",U.prototype.uy);z.defineProperty(U,{uy:"actionUp"},function(){return this.Q!==q?this.Q.ep:q},function(a){this.Q===q&&mj(this);var b=this.Q.ep;b!==a&&(a!==q&&z.j(a,"function",U,"actionUp"),this.Q.ep=a,this.i("actionUp",b,a))});z.g(U,"actionMove",U.prototype.ty);z.defineProperty(U,{ty:"actionMove"},function(){return this.Q!==q?this.Q.dp:q},function(a){this.Q===q&&mj(this);var b=this.Q.dp;b!==a&&(a!==q&&z.j(a,"function",U,"actionMove"),this.Q.dp=a,this.i("actionMove",b,a))});
z.g(U,"actionCancel",U.prototype.qy);z.defineProperty(U,{qy:"actionCancel"},function(){return this.Q!==q?this.Q.bp:q},function(a){this.Q===q&&mj(this);var b=this.Q.bp;b!==a&&(a!==q&&z.j(a,"function",U,"actionCancel"),this.Q.bp=a,this.i("actionCancel",b,a))});z.g(U,"toolTip",U.prototype.Ls);z.defineProperty(U,{Ls:"toolTip"},function(){return this.Q!==q?this.Q.ei:q},function(a){this.Q===q&&mj(this);var b=this.Q.ei;b!==a&&(a!==q&&z.l(a,Ne,U,"toolTip"),this.Q.ei=a,this.i("toolTip",b,a))});
z.g(U,"contextMenu",U.prototype.contextMenu);z.defineProperty(U,{contextMenu:"contextMenu"},function(){return this.Q!==q?this.Q.Ih:q},function(a){this.Q===q&&mj(this);var b=this.Q.Ih;b!==a&&(a!==q&&z.l(a,Ne,U,"contextMenu"),this.Q.Ih=a,this.i("contextMenu",b,a))});U.prototype.bind=U.prototype.bind=function(a){a.Of=this;var b=this.io();b!==q&&hk(b)&&z.m("Cannot add a Binding to a template that has already been copied: "+a);this.yc===q&&(this.yc=new J(Fe));this.yc.add(a)};
U.prototype.findTemplateBinder=U.prototype.io=function(){for(var a=this instanceof F?this:this.ha;a!==q;){if(a.fl!==q&&a instanceof F)return a;a=a.ha}return q};U.fromSvg=function(a){return ik(a)};U.setProperties=U.prototype.IJ=function(a){z.Kv(this,a)};var jk;
U.make=jk=function(a,b){var c=q,d=q;if("function"===typeof a)d=a;else if("string"===typeof a){var e=kk.Ba(a);"function"===typeof e?c=e():d=fa[a]}c===q&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&z.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),z.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===q||!d.constructor)&&z.m("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof y&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.oi=q,Gh(c,d),e++):z.m("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],d===f)z.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"===typeof d)if(c instanceof ya)c.text=d;else if(c instanceof V)c.Cb=d;else if(c instanceof lk)c.source=d;else if(c instanceof F){var g=z.Zl(F,d);g!==q?c.type=g:z.m("Unknown Panel type as an argument to GraphObject.make: "+
d)}else c instanceof Nd?(g=z.Zl(Nd,d),g!==q?c.type=g:z.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof Dc?(g=z.Zl(Dc,d),g!==q?c.type=g:z.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof rd?(g=z.Zl(rd,d),g!==q?c.type=g:z.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):z.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof U)c instanceof F||z.m("A GraphObject can only be added to a Panel, not to: "+
c),c.add(d);else if(d instanceof mk)c instanceof F||z.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.sh?c.Sd(d.index):c.Rd(d.index),z.l(d,mk,mk,"copyFrom:pd"),d.sh?g.height=d.height:g.width=d.width,g.uh=d.uh,g.bf=d.bf,g.alignment=d.alignment,g.Fs=d.Fs,g.ej=d.ej===q?q:d.ej.Y(),g.qm=d.qm,g.rm=d.rm,g.eh=q,d.eh&&(g.eh=d.eh.slice(0)),g.background=d.background,g.Wu=d.Wu,g.yc=d.yc;else if(d instanceof pa)c instanceof E&&d.ve===E?d===nk||d===Df?c.xh=d:d===Bg||d===ok||d===pk?c.Xe=
d:d===qk||d===rk||d===sk?c.Hu=d:d===tk||d===ij||z.m("Unknown Link enum value for a Link property: "+d):c instanceof F&&d.ve===F?c.type=d:c instanceof ya&&d.ve===ya?c.gA=d:c instanceof U&&d.ve===E?0===d.name.indexOf("Orient")?c.As=d:z.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof U&&d.ve===U?c.zh=d:c instanceof y&&d.ve===y?c.Nl=d:c instanceof Nd&&d.ve===Nd?c.type=d:c instanceof Dc&&d.ve===Dc?c.type=d:c instanceof rd&&d.ve===rd?c.type=d:c instanceof Fe&&d.ve===
Fe?c.mode=d:c instanceof wd&&d.ve===wd?c.fd=d:c instanceof Y&&d.ve===Y?0===d.name.indexOf("Alignment")?c.alignment=d:0===d.name.indexOf("Arrangement")?c.ue=d:0===d.name.indexOf("Compaction")?c.compaction=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.sorting=d:0===d.name.indexOf("Style")?c.ME=d:z.m("Unknown enum value: "+d):c instanceof uk&&d.ve===uk?0===d.name.indexOf("Aggressive")?c.$B=d:0===d.name.indexOf("Cycle")?c.vC=d:0===d.name.indexOf("Init")?c.iD=d:0===d.name.indexOf("Layer")?
c.sD=d:z.m("Unknown enum value: "+d):c instanceof ej&&d.ve===ej?d===vk||d===wk||d===xk||d===yk?c.sorting=d:d===zk||d===Ak?c.ue=d:d===Bk||d===Ck?c.alignment=d:z.m("Unknown enum value: "+d):c instanceof Dk&&d.ve===Dk?d===Ek||d===Fk||d===Gk||d===Hk||d===Ik?c.sorting=d:d===Jk||d===Kk||d===Lk||d===Mk?c.direction=d:d===Nk||d===Ok||d===Pk||d===Qk?c.ue=d:d===Rk||d===Sk?c.ps=d:z.m("Unknown enum value: "+d):z.m("No property to set for this enum value: "+d);else if(d instanceof Fe)c instanceof U||c instanceof
mk?c.bind(d):z.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof Fc)c instanceof Dc?c.lb.add(d):z.m("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof rd)c instanceof Fc?c.Ha.add(d):z.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(z.yb(d))if(c instanceof Nd){var g={},k;for(k in d){var l=parseFloat(k);isNaN(l)?g[k]=d[k]:c.addColorStop(l,d[k])}z.Kv(c,g)}else c instanceof mk?(d.row!==f?(g=
d.row,(g===f||g===q||Infinity===g||isNaN(g)||0>g)&&z.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.rl=h,c.Zd=g):d.column!==f?(g=d.column,(g===f||g===q||Infinity===g||isNaN(g)||0>g)&&z.m("Must specify non-negative integer column for RowColumnDefinition "+d),c.rl=s,c.Zd=g):z.m("Must specify row or column value in a RowColumnDefinition "+d),g=z.hG(d,"row","column"),z.Kv(c,g)):z.Kv(c,d);else z.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+
c);return c};var kk;U.Builders=kk=new ta("string","function");
kk.add("Button",function(){var a=new Nd($d);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Nd($d);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=jk(F,Ih,{Yr:h},jk(V,{name:"ButtonBorder",Cb:"RoundedRectangle",fill:a,stroke:"gray"}));c.oz=function(a,c){var g=c.na(0),k=c._buttonFillOver;k===f&&(k=b);c._buttonFillNormal=g.fill;g.fill=k;k=c._buttonStrokeOver;k===f&&(k="blue");c._buttonStrokeNormal=g.stroke;g.stroke=k};c.pz=function(b,c){var g=c.na(0),k=c._buttonFillNormal;
k===f&&(k=a);g.fill=k;k=c._buttonStrokeNormal;k===f&&(k="gray");g.stroke=k};return c});
kk.add("TreeExpanderButton",function(){var a=jk("Button",jk(V,{name:"ButtonIcon",Cb:"MinusLine",Fa:N.Am},(new Fe("figure","isTreeExpanded",function(a,c){var d=q,e=c.ha;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).wz("")),{visible:s},(new Fe("visible","isTreeLeaf",function(a){return!a})).wz(""));a.click=function(a,c){var d=c.Z;if(d instanceof D){var e=d.h;e===q||e.fb||(a.je=h,d.Lc?e.Ue.collapseTree(d):e.Ue.expandTree(d))}};return a});
kk.add("SubGraphExpanderButton",function(){var a=jk("Button",jk(V,{name:"ButtonIcon",Cb:"MinusLine",Fa:N.Am},(new Fe("figure","isSubGraphExpanded",function(a,c){var d=q,e=c.ha;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).wz("")));a.click=function(a,c){var d=c.Z;if(d instanceof oa){var e=d.h;e===q||e.fb||(a.je=h,d.Ze?e.Ue.collapseSubGraph(d):e.Ue.expandSubGraph(d))}};return a});
kk.add("ContextMenuButton",function(){var a=jk("Button");a.zh=lj;var b=a.Be("ButtonBorder");b instanceof V&&(b.Cb="Rectangle",b.G=new O(0,0,2,2),b.H=new O(1,1,-2,-2));return a});
function F(a){U.call(this);a===f?0===arguments.length?this.aa=Pg:z.m("invalid argument to Panel constructor: undefined"):(z.wb(a,F,F,"type"),this.aa=a);this.za=new J(U);this.re=N.ap;this.wg=s;this.aa===Oh&&(this.wg=h);this.sf=1;this.vp=Zb;this.jc=Hg;this.aa===ga&&Tk(this);this.Hn=Ig;this.Jp=(new qa(10,10)).freeze();this.Kp=N.Nj;this.fl=this.Km=q;this.ux="";this.xg=this.ok=q;this.gn="category";this.If=q;this.fi=new H(NaN,NaN,NaN,NaN);this.gj=q;this.Oi=s}z.ea("Panel",F);z.Pa(F,U);
function Tk(a){a.Gi=N.ap;a.Ug=1;a.Kh=q;a.ml=q;a.Tg=1;a.Sg=q;a.ll=q;a.Uc=[];a.Nc=[];a.Dl=Uk;a.hl=Uk;a.mj=0;a.Ri=0}
F.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.aa=this.aa;a.re=this.re.Y();a.wg=this.wg;a.sf=this.sf;a.vp=this.vp.Y();a.jc=this.jc;if(a.aa===ga){a.Gi=this.Gi.Y();a.Ug=this.Ug;a.Kh=this.Kh;a.ml=this.ml;a.Tg=this.Tg;a.Sg=this.Sg;a.ll=this.ll;var b=[];if(0<this.Uc.length)for(var c=this.Uc,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Xk(a);b[e]=g}a.Uc=b;b=[];if(0<this.Nc.length){c=this.Nc;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.Xk(a),b[e]=g)}a.Nc=
b;a.Dl=this.Dl;a.hl=this.hl;a.mj=this.mj;a.Ri=this.Ri}a.Hn=this.Hn;a.Jp.assign(this.Jp);a.Kp=this.Kp.Y();a.Km=this.Km;a.fl=this.fl;a.ux=this.ux;a.ok=this.ok;a.xg=this.xg;a.gn=this.gn;a.fi.assign(this.fi);a.Oi=this.Oi;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&
(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};F.prototype.oh=function(a){U.prototype.oh.call(this,a);a.za=this.za;for(var b=a.za.k;b.next();)b.value.Zh=a};
F.prototype.copy=function(){var a=U.prototype.copy.call(this);if(a instanceof F){var b=this.za;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.n[d].copy(),g=a;e.Xk(g);e.Cl=q;var k=g.za,l=k.count;k.Ed(l,e);k=g.Z;if(k!==q){k.tk=q;e.Xd!==q&&k instanceof D&&(k.Oi=h);var m=g.h;m!==q&&m.Aa.jb||k.Zc(zd,"elements",g,q,e,q,l)}}return a}return q};F.prototype.toString=function(){return"Panel("+this.type+")#"+z.fc(this)};var Pg;F.Position=Pg=z.w(F,"Position",0);F.Horizontal=z.w(F,"Horizontal",1);var Hh;
F.Vertical=Hh=z.w(F,"Vertical",2);var Fg;F.Spot=Fg=z.w(F,"Spot",3);var Ih;F.Auto=Ih=z.w(F,"Auto",4);var ga;F.Table=ga=z.w(F,"Table",5);F.Viewbox=z.w(F,"Viewbox",6);var Lj;F.TableRow=Lj=z.w(F,"TableRow",7);var Mj;F.TableColumn=Mj=z.w(F,"TableColumn",8);var ug;F.Link=ug=z.w(F,"Link",9);var Oh;F.Grid=Oh=z.w(F,"Grid",10);z.g(F,"type",F.prototype.type);
z.defineProperty(F,{type:"type"},w("aa"),function(a){var b=this.aa;b!==a&&(x&&z.wb(a,F,F,"type"),(b===Lj||b===Mj)&&z.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.aa=a,this.aa===Oh?this.wg=h:this.aa===ga&&Tk(this),this.ca(),this.i("type",b,a))});z.A(F,{elements:"elements"},function(){return this.za.k});z.A(F,{Ma:"naturalBounds"},w("Rc"));z.g(F,"padding",F.prototype.padding);
z.defineProperty(F,{padding:"padding"},w("re"),function(a){"number"===typeof a?(0>a&&z.ia(a,">= 0",F,"padding"),a=new ub(a)):(z.l(a,ub,F,"padding"),0>a.left&&z.ia(a.left,">= 0",F,"padding:val.left"),0>a.right&&z.ia(a.right,">= 0",F,"padding:val.right"),0>a.top&&z.ia(a.top,">= 0",F,"padding:val.top"),0>a.bottom&&z.ia(a.bottom,">= 0",F,"padding:val.bottom"));var b=this.re;b.N(a)||(this.re=a=a.Y(),this.ca(),this.i("padding",b,a))});z.g(F,"defaultAlignment",F.prototype.wj);
z.defineProperty(F,{wj:"defaultAlignment"},w("vp"),function(a){var b=this.vp;b.N(a)||(x&&z.l(a,O,F,"defaultAlignment"),this.vp=a=a.Y(),this.ca(),this.i("defaultAlignment",b,a))});z.g(F,"defaultStretch",F.prototype.Jy);z.defineProperty(F,{Jy:"defaultStretch"},w("jc"),function(a){var b=this.jc;b!==a&&(z.wb(a,U,F,"defaultStretch"),this.jc=a,this.ca(),this.i("defaultStretch",b,a))});z.g(F,"defaultSeparatorPadding",F.prototype.wG);
z.defineProperty(F,{wG:"defaultSeparatorPadding"},function(){return this.Gi===f?N.ap:this.Gi},function(a){if(this.Gi!==f){"number"===typeof a?a=new ub(a):x&&z.l(a,ub,F,"defaultSeparatorPadding");var b=this.Gi;b.N(a)||(this.Gi=a=a.Y(),this.i("defaultSeparatorPadding",b,a))}});z.g(F,"defaultRowSeparatorStroke",F.prototype.uG);
z.defineProperty(F,{uG:"defaultRowSeparatorStroke"},function(){return this.Kh===f?q:this.Kh},function(a){var b=this.Kh;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.Kh=a,this.i("defaultRowSeparatorStroke",b,a)});z.g(F,"defaultRowSeparatorStrokeWidth",F.prototype.vG);
z.defineProperty(F,{vG:"defaultRowSeparatorStrokeWidth"},function(){return this.Ug===f?1:this.Ug},function(a){if(this.Ug!==f){var b=this.Ug;b!==a&&(this.Ug=a,this.i("defaultRowSeparatorStrokeWidth",b,a))}});z.g(F,"defaultRowSeparatorDashArray",F.prototype.tG);
z.defineProperty(F,{tG:"defaultRowSeparatorDashArray"},function(){return this.ml===f?q:this.ml},function(a){if(this.ml!==f){var b=this.ml;b!==a&&(a instanceof Array||z.Rb(a,"Array",F,"defaultRowSeparatorDashArray:val"),this.ml=a,this.i("defaultRowSeparatorDashArray",b,a))}});z.g(F,"defaultColumnSeparatorStroke",F.prototype.mG);
z.defineProperty(F,{mG:"defaultColumnSeparatorStroke"},function(){return this.Sg===f?q:this.Sg},function(a){if(this.Sg!==f){var b=this.Sg;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.Sg=a,this.i("defaultColumnSeparatorStroke",b,a)}});z.g(F,"defaultColumnSeparatorStrokeWidth",F.prototype.nG);
z.defineProperty(F,{nG:"defaultColumnSeparatorStrokeWidth"},function(){return this.Tg===f?1:this.Tg},function(a){if(this.Tg!==f){var b=this.Tg;b!==a&&(this.Tg=a,this.i("defaultColumnSeparatorStrokeWidth",b,a))}});z.g(F,"defaultColumnSeparatorDashArray",F.prototype.lG);
z.defineProperty(F,{lG:"defaultColumnSeparatorDashArray"},function(){return this.ll===f?q:this.ll},function(a){if(this.ll!==f){var b=this.ll;b!==a&&(a instanceof Array||z.Rb(a,"Array",F,"defaultColumnSeparatorDashArray:val"),this.ll=a,this.i("defaultColumnSeparatorDashArray",b,a))}});z.g(F,"viewboxStretch",F.prototype.iI);z.defineProperty(F,{iI:"viewboxStretch"},w("Hn"),function(a){var b=this.Hn;b!==a&&(z.wb(a,U,F,"viewboxStretch"),this.Hn=a,this.i("viewboxStretch",b,a))});z.g(F,"gridCellSize",F.prototype.Tr);
z.defineProperty(F,{Tr:"gridCellSize"},w("Jp"),function(a){var b=this.Jp;b.N(a)||(z.l(a,qa,F,"gridCellSize"),(!a.W()||0===a.width||0===a.height)&&z.m("Invalid Panel.gridCellSize: "+a),this.Jp=a.Y(),this.h!==q&&this===this.h.no&&bi(this.h),this.xa(),this.i("gridCellSize",b,a))});z.g(F,"gridOrigin",F.prototype.Xy);
z.defineProperty(F,{Xy:"gridOrigin"},w("Kp"),function(a){var b=this.Kp;b.N(a)||(z.l(a,G,F,"gridOrigin"),a.W()||z.m("Invalid Panel.gridOrigin: "+a),this.Kp=a.Y(),this.xa(),this.i("gridOrigin",b,a))});
F.prototype.Yl=function(a,b){var c=this.opacity,d=1;1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c);if(this.aa===Oh){c=this.Dj()*b.scale;0>=c&&(c=1);var e=this.Tr,d=e.width,e=e.height,g=this.Ma,k=g.width,g=g.height,l=Math.ceil(k/d),m=Math.ceil(g/e),n=this.Xy;a.save();a.beginPath();a.rect(0,0,k,g);a.clip();for(var p=[],r=this.za.n,t=this.za.length,u=0;u<t;u++){var v=[];p.push(v);var A=r[u];if(A.visible)for(var A="LineV"===A.Cb,C=u+1;C<t;C++){var K=r[C];K.visible&&"LineV"===K.Cb===A&&(K=K.si,2<=K&&v.push(K))}}r=
this.za.length;for(t=0;t<r;t++)if(u=this.za.n[t],u.visible){v=p[t];A=u.si;C=s;K=u.Vz;if(K!==q){var I=C=h;a.setLineDash!==f?(a.setLineDash(K),a.lineDashOffset=u.Vc):a.webkitLineDash!==f?(a.webkitLineDash=K,a.webkitLineDashOffset=u.Vc):a.mozDash!==f?(a.mozDash=K,a.mozDashOffset=u.Vc):I=s}a.lineWidth=u.pb;Nj(this,a,u.stroke,s);a.beginPath();if("LineV"===u.Cb)for(var R=Math.floor(-n.x/d),M=R;M<=R+l;M++){var S=M*d+n.x;if(0<=S&&(S<k&&Vk(M,A,v))&&(C&&!I?oj(a,S,0,S,g,K,u.Vc):(a.moveTo(S,0),a.lineTo(S,g)),
2>d*A*c))break}else for(M=R=Math.floor(-n.y/e);M<=R+m&&!(S=M*e+n.y,0<=S&&(S<=g&&Vk(M,A,v))&&(C&&!I?oj(a,0,S,k,S,K,u.Vc):(a.moveTo(0,S),a.lineTo(k,S)),2>e*A*c));M++);a.stroke();C&&(a.setLineDash!==f?(a.setLineDash(z.Eh),a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=z.Eh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0))}a.restore();Mh(b,a)}else{this.aa===ga&&(a.lineCap="butt",Wk(this,a,h,this.Uc,h),Wk(this,a,s,this.Nc,h),Xk(this,a,h,this.Uc),Xk(this,a,s,this.Nc),
Wk(this,a,h,this.Uc,s),Wk(this,a,s,this.Nc,s));I=this.za.length;for(e=0;e<I;e++)this.za.n[e].Ae(a,b);x&&x.JG&&this instanceof E&&x.IG(a,b,this);1!==c&&(a.globalAlpha=d)}};
function Xk(a,b,c,d){for(var e=d.length,g,k=a.ya,l=c?a.Sd(0):a.Rd(0),m=0;m<e;m++)if(g=d[m],g!==f&&g!==l&&0!==g.Ub){var n=g.rm;isNaN(n)&&(n=c?a.Ug:a.Tg);var p=g.qm;p===q&&(p=c?a.Kh:a.Sg);if(!(0===n||p===q)){Nj(a,b,p,s);var p=s,r=g.oE;if(r!==q){var t=p=h;b.setLineDash!==f?(b.setLineDash(r),b.lineDashOffset=a.Vc):b.webkitLineDash!==f?(b.webkitLineDash=r,b.webkitLineDashOffset=a.Vc):b.mozDash!==f?(b.mozDash=r,b.mozDashOffset=a.Vc):t=s}b.beginPath();var u=g.position+n;c?u>k.height&&(n-=u-k.height):u>k.width&&
(n-=u-k.width);g=g.position+n/2;b.lineWidth=n;u=a.padding;c?(g+=u.top,n=u.left,u=k.width-u.right,p&&!t?oj(b,n,g,u,g,r,0):(b.moveTo(n,g),b.lineTo(u,g))):(g+=u.left,n=u.top,u=k.height-u.bottom,p&&!t?oj(b,g,n,g,u,r,0):(b.moveTo(g,n),b.lineTo(g,u)));b.stroke();p&&(b.setLineDash!==f?(b.setLineDash(z.Eh),b.lineDashOffset=0):b.webkitLineDash!==f?(b.webkitLineDash=z.Eh,b.webkitLineDashOffset=0):b.mozDash!==f&&(b.mozDash=q,b.mozDashOffset=0))}}}
function Wk(a,b,c,d,e){for(var g=d.length,k,l=a.ya,m=0;m<g;m++)if(k=d[m],k!==f&&k.background!==q&&k.Wu!==e&&0!==k.Ub){var n=c?l.height:l.width;if(!(k.position>n)){var p=Yk(k),r=k.rm;isNaN(r)&&(r=c?a.Ug:a.Tg);var t=k.qm;t===q&&(t=c?a.Kh:a.Sg);t===q&&(r=0);p-=r;r=k.position+r;p+=k.Ub;r+p>n&&(p=n-r);0>=p||(n=a.padding,Nj(a,b,k.background,h),c?b.fillRect(n.left,r+n.top,l.width-(n.left+n.right),p):b.fillRect(r+n.left,n.top,p,l.height-(n.top+n.bottom)))}}}
function Vk(a,b,c){if(0!==a%b)return s;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return s;return h}
F.prototype.gs=function(a,b,c,d){var e=this.fi;e.width=0;e.height=0;var g=this.Fa,k=this.Ge;c===f&&(c=k.width,d=k.height);c=Math.max(c,k.width);d=Math.max(d,k.height);var l=this.le;isNaN(g.width)||(a=Math.min(g.width,l.width));isNaN(g.height)||(b=Math.min(g.height,l.height));a=Math.max(c,a);b=Math.max(d,b);var m=this.padding;a=Math.max(a-m.left-m.right,0);b=Math.max(b-m.top-m.bottom,0);var n=this.za,p=n.length;if(0===p){var r=this.Rc;lb(r,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);pj(this,0,0,r.width,
r.height)}else{var t=this.aa.Kb;switch(t){case "Position":var u=a,v=b,A=c,C=d;e.x=0;e.y=0;e.width=0;for(var K=e.height=0;K<p;K++){var I=n.n[K];if(I.visible||I===this.Qb){var R=I.margin,M=R.right+R.left,S=R.top+R.bottom;gh(I,u,v,A,C);var Z=I.Ga,X=Math.max(Z.width+M,0),ea=Math.max(Z.height+S,0),ia=I.position.x,W=I.position.y;isFinite(ia)||(ia=0);isFinite(W)||(W=0);if(I instanceof V&&I.bz)var xa=I.pb/2,ia=ia-xa,W=W-xa;Bb(e,ia,W,X,ea)}}break;case "Vertical":for(var Oa=a,Qa=c,Sa=z.zb(),Ba=0;Ba<p;Ba++){var Wa=
n.n[Ba];if(Wa.visible||Wa===this.Qb){var Ga=sj(Wa);if(Ga!==jj&&Ga!==kj)Sa.push(Wa);else{var wb=Wa.margin,qf=wb.right+wb.left,rc=wb.top+wb.bottom;gh(Wa,Oa,Infinity,Qa,0);var rf=Wa.Ga,sc=Math.max(rf.width+qf,0),pb=Math.max(rf.height+rc,0);e.width=Math.max(e.width,sc);e.height+=pb}}}var qb=Sa.length;if(0!==qb){this.Fa.width?Oa=Math.min(this.Fa.width,this.le.width):0!==e.width&&(Oa=Math.min(e.width,this.le.width));for(Ba=0;Ba<qb;Ba++)if(Wa=Sa[Ba],Wa.visible||Wa===this.Qb)wb=Wa.margin,qf=wb.right+wb.left,
rc=wb.top+wb.bottom,gh(Wa,Oa,Infinity,Qa,0),rf=Wa.Ga,sc=Math.max(rf.width+qf,0),pb=Math.max(rf.height+rc,0),e.width=Math.max(e.width,sc),e.height+=pb;z.Da(Sa)}break;case "Horizontal":for(var La=b,Pa=d,hb=z.zb(),yb=0;yb<p;yb++){var db=n.n[yb];if(db.visible||db===this.Qb){var Rf=sj(db);if(Rf!==jj&&Rf!==lj)hb.push(db);else{var nd=db.margin,Ad=nd.right+nd.left,Od=nd.top+nd.bottom;gh(db,Infinity,La,0,Pa);var ce=db.Ga,Bd=Math.max(ce.width+Ad,0),de=Math.max(ce.height+Od,0);e.width+=Bd;e.height=Math.max(e.height,
de)}}}var Kg=hb.length;if(0!==Kg){this.Fa.height?La=Math.min(this.Fa.height,this.le.height):0!==e.height&&(La=Math.min(e.height,this.le.height));for(yb=0;yb<Kg;yb++)if(db=hb[yb],db.visible||db===this.Qb)nd=db.margin,Ad=nd.right+nd.left,Od=nd.top+nd.bottom,gh(db,Infinity,La,0,Pa),ce=db.Ga,Bd=Math.max(ce.width+Ad,0),de=Math.max(ce.height+Od,0),e.width+=Bd,e.height=Math.max(e.height,de);z.Da(hb)}break;case "Spot":a:{var Ib=a,sf=b,Pb=c,lc=d,Tb=Sj(this,n,p),Xa=Tb.margin,tc,Se,Sf=Xa.right+Xa.left,og=Xa.top+
Xa.bottom;gh(Tb,Ib,sf,Pb,lc);var Nb=Tb.Ga,od=Nb.width,zc=Nb.height,pd=Math.max(od+Sf,0),eb=Math.max(zc+og,0);e.x=-Xa.left;e.y=-Xa.top;e.width=pd;e.height=eb;for(var nb=0;nb<p;nb++){var ec=n.n[nb];if(ec!==Tb&&(ec.visible||ec===this.Qb)){Xa=ec.margin;tc=Xa.right+Xa.left;Se=Xa.top+Xa.bottom;gh(ec,Ib,sf,0,0);var Nb=ec.Ga,pd=Math.max(Nb.width+tc,0),eb=Math.max(Nb.height+Se,0),zb=ec.alignment;Vb(zb)&&(zb=this.wj);Ob(zb)||(zb=cc);var uc=ec.oj;Vb(uc)&&(uc=cc);Bb(e,zb.x*od+zb.offsetX-(uc.x*Nb.width-uc.offsetX)-
Xa.left,zb.y*zc+zb.offsetY-(uc.y*Nb.height-uc.offsetY)-Xa.top,pd,eb)}}var tf=Tb.zh;tf===Hg&&(tf=sj(Tb));switch(tf){case jj:break a;case Gc:if(!isFinite(Ib)&&!isFinite(sf))break a;break;case lj:if(!isFinite(Ib))break a;break;case kj:if(!isFinite(sf))break a}Nb=Tb.Ga;od=Nb.width;zc=Nb.height;pd=Math.max(od+Sf,0);eb=Math.max(zc+og,0);Xa=Tb.margin;e.x=-Xa.left;e.y=-Xa.top;e.width=pd;e.height=eb;for(nb=0;nb<p;nb++)if(ec=n.n[nb],ec!==Tb&&(ec.visible||ec===this.Qb))Xa=ec.margin,tc=Xa.right+Xa.left,Se=Xa.top+
Xa.bottom,Nb=ec.Ga,pd=Math.max(Nb.width+tc,0),eb=Math.max(Nb.height+Se,0),zb=ec.alignment,Vb(zb)&&(zb=this.wj),Ob(zb)||(zb=cc),uc=ec.oj,Vb(uc)&&(uc=cc),Bb(e,zb.x*od+zb.offsetX-(uc.x*Nb.width-uc.offsetX)-Xa.left,zb.y*zc+zb.offsetY-(uc.y*Nb.height-uc.offsetY)-Xa.top,pd,eb)}break;case "Auto":var Ac=a,Db=b,Pd=c,qe=d,Eb=Sj(this,n,p),Qd=Eb.margin,Te=Qd.right+Qd.left,re=Qd.top+Qd.bottom;gh(Eb,Ac,Db,Pd,qe);var ob=Eb.Ga,uf=Math.max(ob.width+Te,0),Fb=Math.max(ob.height+re,0),fb=Zk(Eb),Xc=fb.x*uf+fb.offsetX,
Ub=fb.y*Fb+fb.offsetY,fb=$k(Eb),Rd=fb.x*uf+fb.offsetX,ee=fb.y*Fb+fb.offsetY,fe=Ac,se=Db;isFinite(Ac)&&(fe=Math.abs(Xc-Rd));isFinite(Db)&&(se=Math.abs(Ub-ee));var Yc=z.$k();Yc.q(0,0);for(var Cd=0;Cd<p;Cd++){var rb=n.n[Cd];if(rb!==Eb&&(rb.visible||rb===this.Qb)){var Qd=rb.margin,Ue=Qd.right+Qd.left,Ve=Qd.top+Qd.bottom;gh(rb,fe,se,Pd,qe);ob=rb.Ga;uf=Math.max(ob.width+Ue,0);Fb=Math.max(ob.height+Ve,0);Yc.q(Math.max(uf,Yc.width),Math.max(Fb,Yc.height))}}if(1===p)e.width=uf,e.height=Fb,z.Cj(Yc);else{var vb=
Zk(Eb),te=$k(Eb),Jb,Bc;te.x!==vb.x&&te.y!==vb.y&&(Jb=Yc.width/Math.abs(te.x-vb.x),Bc=Yc.height/Math.abs(te.y-vb.y));z.Cj(Yc);var Dd=0;Eb instanceof V&&(Dd=Eb.pb*Eb.scale,al(Eb)===Ig&&(Jb=Math.max(Jb,Bc),Bc=Math.max(Jb,Bc)));Jb+=Math.abs(vb.offsetX)+Math.abs(te.offsetX)+Dd;Bc+=Math.abs(vb.offsetY)+Math.abs(te.offsetY)+Dd;var Hc=Eb.zh;Hc===Hg&&(Hc=sj(Eb));switch(Hc){case jj:qe=Pd=0;break;case Gc:isFinite(Ac)&&(Jb=Ac);isFinite(Db)&&(Bc=Db);break;case lj:isFinite(Ac)&&(Jb=Ac);qe=0;break;case kj:Pd=0,
isFinite(Db)&&(Bc=Db)}Eb instanceof V&&!Eb.Fa.W()&&(Eb.Dg?Eb.ck=q:Eb.Sa=q);Tj(Eb);gh(Eb,Jb,Bc,Pd,qe);e.width=Eb.Ga.width+Te;e.height=Eb.Ga.height+re}break;case "Table":for(var Qb=a,ue=b,sb=p,gb=c,We=d,Mc=z.zb(),Sd=z.zb(),ua=0;ua<sb;ua++){var wa=n.n[ua];if(wa instanceof F&&(wa.type===Lj||wa.type===Mj)&&wa.visible){Sd.push(wa);for(var pg=wa.za,Lg=pg.length,Zc=0;Zc<Lg;Zc++){var th=pg.n[Zc];wa.type===Lj?th.wc=wa.wc:wa.type===Mj&&(th.column=wa.column);Mc.push(th)}}else Mc.push(wa)}for(var sb=Mc.length,
Ic=[],ua=0;ua<sb;ua++)wa=Mc[ua],vj(wa,h),Hj(wa,h),Ic[wa.wc]||(Ic[wa.wc]=[]),Ic[wa.wc][wa.column]||(Ic[wa.wc][wa.column]=[]),Ic[wa.wc][wa.column].push(wa);z.Da(Mc);for(var uh=z.zb(),$c=z.zb(),ge=z.zb(),Ed={count:0},he={count:0},qd=Qb,Td=ue,Tf=this.Uc,sb=Tf.length,ua=0;ua<sb;ua++){var ja=Tf[ua];ja!==f&&bl(ja,0)}Tf=this.Nc;sb=Tf.length;for(ua=0;ua<sb;ua++)ja=Tf[ua],ja!==f&&bl(ja,0);for(var Xb,tj=Ic.length,ua=0;ua<tj;ua++)if(Ic[ua]){var uj=Ic[ua].length,ib=this.Sd(ua);bl(ib,0);for(Zc=0;Zc<uj;Zc++)if(Ic[ua][Zc]){var tb=
this.Rd(Zc);uh[Zc]===f&&(bl(tb,0),uh[Zc]=h);for(var li=Ic[ua][Zc],vh=li.length,mi=0;mi<vh;mi++)if(wa=li[mi],wa.visible||wa===this.Qb)if(1<wa.yk||1<wa.bk)$c.push(wa);else{var ie=Vj(wa,ib,tb);if(ie!==jj&&!wa.Fa.W())Ed[Zc]===f&&(Ed[Zc]=-1,Ed.count++),he[ua]===f&&(he[ua]=-1,he.count++),ge.push(wa),gh(wa,Infinity,Infinity,gb,We);else{var ve=isFinite(tb.width)?tb.width:Qb,we=isFinite(ib.height)?ib.height:ue,vc=wa.margin,Uf=vc.right+vc.left,Vf=vc.top+vc.bottom;gh(wa,Infinity,Infinity,gb,We);var Jc=wa.Ga,
xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),ja=this.Sd(ua);Xb=Math.max(Fd-ja.Ub,0);Xb>Td&&(Xb=Td);bl(ja,ja.Ub+Xb);Td=Math.max(Td-Xb,0);ja=this.Rd(Zc);Xb=Math.max(xe-ja.Ub,0);Xb>qd&&(Xb=qd);bl(ja,ja.Ub+Xb);qd=Math.max(qd-Xb,0)}}}}z.Da(uh);for(var Cc=0,Ud=0,sb=this.Su,ua=0;ua<sb;ua++)this.Nc[ua]!==f&&(Cc+=this.Rd(ua).Ab);sb=this.Hv;for(ua=0;ua<sb;ua++)this.Uc[ua]!==f&&(Ud+=this.Sd(ua).Ab);qd=Math.max(Qb-Cc,0);Td=Math.max(ue-Ud,0);sb=ge.length;for(ua=0;ua<sb;ua++){var wa=ge[ua],ib=this.Sd(wa.wc),
tb=this.Rd(wa.column),ni=wa.Ga,vc=wa.margin,Uf=vc.right+vc.left,Vf=vc.top+vc.bottom;Ed[wa.column]=Math.max(ni.width+Uf-tb.Ub,0);he[wa.wc]=Math.max(ni.height+Vf-ib.Ub,0)}var wh=0,xh=0;for(ua in he)"count"!==ua&&(wh+=he[ua]);for(ua in Ed)"count"!==ua&&(xh+=Ed[ua]);for(var Kb=z.$k(),ua=0;ua<sb;ua++)if(wa=ge[ua],wa.visible||wa===this.Qb){ib=this.Sd(wa.wc);tb=this.Rd(wa.column);ve=isFinite(tb.width)?tb.width:isFinite(qd)?tb.Ub+Ed[wa.column]/xh*qd:tb.Ub||qd;we=isFinite(ib.height)?ib.height:isFinite(Td)?
ib.Ub+he[wa.wc]/wh*Td:ib.Ub||Td;ve=Math.max(0,ve-Yk(tb));we=Math.max(0,we-Yk(ib));Kb.q(Math.max(tb.uh,Math.min(ve,tb.bf)),Math.max(ib.uh,Math.min(we,ib.bf)));ie=Vj(wa,ib,tb);switch(ie){case lj:Kb.height=Infinity;break;case kj:Kb.width=Infinity}vc=wa.margin;Uf=vc.right+vc.left;Vf=vc.top+vc.bottom;Tj(wa);gh(wa,Kb.width,Kb.height,tb.uh,ib.uh);var Jc=wa.Ga,xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),xe=Math.min(xe,Kb.width),Fd=Math.min(Fd,Kb.height),Kc;Kc=ib.Ub;bl(ib,Math.max(ib.Ub,Fd));Xb=
ib.Ub-Kc;Td=Math.max(Td-Xb,0);Kc=tb.Ub;bl(tb,Math.max(tb.Ub,xe));Xb=tb.Ub-Kc;qd=Math.max(qd-Xb,0)}z.Da(ge);for(var je=z.$k(),sb=$c.length,ua=0;ua<sb;ua++)if(wa=$c[ua],wa.visible||wa===this.Qb){ib=this.Sd(wa.wc);tb=this.Rd(wa.column);Kb.q(Math.max(tb.uh,Math.min(Qb,tb.bf)),Math.max(ib.uh,Math.min(ue,ib.bf)));ie=Vj(wa,ib,tb);switch(ie){case Gc:0!==tb.Ub&&(Kb.width=Math.min(Kb.width,tb.Ub));0!==ib.Ub&&(Kb.height=Math.min(Kb.height,ib.Ub));break;case lj:0!==tb.Ub&&(Kb.width=Math.min(Kb.width,tb.Ub));
break;case kj:0!==ib.Ub&&(Kb.height=Math.min(Kb.height,ib.Ub))}isFinite(tb.width)&&(Kb.width=tb.width);isFinite(ib.height)&&(Kb.height=ib.height);je.q(0,0);for(var mc=1;mc<wa.yk&&!(wa.wc+mc>=this.Hv);mc++)ja=this.Sd(wa.wc+mc),je.height+=Math.max(ja.uh,isNaN(ja.tf)?ja.bf:Math.min(ja.tf,ja.bf));for(mc=1;mc<wa.bk&&!(wa.column+mc>=this.Su);mc++)ja=this.Rd(wa.column+mc),je.width+=Math.max(ja.uh,isNaN(ja.tf)?ja.bf:Math.min(ja.tf,ja.bf));Kb.width+=je.width;Kb.height+=je.height;vc=wa.margin;Uf=vc.right+vc.left;
Vf=vc.top+vc.bottom;gh(wa,Kb.width,Kb.height,gb,We);for(var Jc=wa.Ga,xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),Vd=0,mc=0;mc<wa.yk;mc++)ja=this.Sd(wa.wc+mc),Vd+=ja.total||0;if(Vd<Fd)for(var ye=Fd-Vd;0<ye;){var ke=ja.Ab||0;isNaN(ja.height)&&ja.bf>ke&&(bl(ja,Math.min(ja.bf,ke+ye)),ja.Ab!==ke&&(ye-=ja.Ab-ke));if(-1===ja.index-1)break;ja=this.Sd(ja.index-1)}for(var Wf=0,mc=0;mc<wa.bk;mc++)ja=this.Rd(wa.column+mc),Wf+=ja.total||0;if(Wf<xe)for(ye=xe-Wf;0<ye;){ke=ja.Ab||0;isNaN(ja.width)&&ja.bf>
ke&&(bl(ja,Math.min(ja.bf,ke+ye)),ja.Ab!==ke&&(ye-=ja.Ab-ke));if(-1===ja.index-1)break;ja=this.Rd(ja.index-1)}}z.Da($c);z.Cj(je);z.Cj(Kb);for(var qg=0,ze=0,ie=sj(this),vf=this.Fa,Mg=this.le,rg=Ud=Cc=0,wf=0,sb=this.Su,ua=0;ua<sb;ua++)this.Nc[ua]!==f&&(ja=this.Rd(ua),isFinite(ja.width)?rg+=ja.width:cl(ja)===dl?rg+=ja.Ab:0!==ja.Ab&&(Cc+=ja.Ab,Cc+=Yk(ja)));var qg=isFinite(vf.width)?Math.min(vf.width,Mg.width):ie!==jj&&isFinite(Qb)?Qb:Cc,qg=Math.max(qg,this.Ge.width),qg=Math.max(qg-rg,0),Wd=Math.max(qg/
Cc,1);isFinite(Wd)||(Wd=1);for(ua=0;ua<sb;ua++)this.Nc[ua]!==f&&(ja=this.Rd(ua),!isFinite(ja.width)&&cl(ja)!==dl&&bl(ja,ja.Ab*Wd),ja.kb=e.width,0!==ja.Ab&&(e.width+=ja.Ab,e.width+=Yk(ja)));sb=this.Hv;for(ua=0;ua<sb;ua++)this.Uc[ua]!==f&&(ja=this.Sd(ua),isFinite(ja.height)?wf+=ja.height:cl(ja)===dl?wf+=ja.Ab:0!==ja.Ab&&(Ud+=ja.Ab,Ud+=Yk(ja)));var ze=isFinite(vf.height)?Math.min(vf.height,Mg.height):ie!==jj&&isFinite(ue)?ue:Ud,ze=Math.max(ze,this.Ge.height),ze=Math.max(ze-wf,0),xf=Math.max(ze/Ud,1);
isFinite(xf)||(xf=1);for(ua=0;ua<sb;ua++)this.Uc[ua]!==f&&(ja=this.Sd(ua),!isFinite(ja.height)&&cl(ja)!==dl&&bl(ja,ja.Ab*xf),ja.kb=e.height,0!==ja.Ab&&(e.height+=ja.Ab,e.height+=Yk(ja)));sb=Sd.length;for(ua=0;ua<sb;ua++){var Nc=Sd[ua];Nc.type===Lj?(ve=e.width,ja=this.Sd(Nc.wc),we=ja.Ub):(ja=this.Rd(Nc.column),ve=ja.Ub,we=e.height);Nc.Dc.q(0,0,ve,we);vj(Nc,s);Ic[Nc.wc]||(Ic[Nc.wc]=[]);Ic[Nc.wc][Nc.column]||(Ic[Nc.wc][Nc.column]=[]);Ic[Nc.wc][Nc.column].push(Nc)}z.Da(Sd);this.vF=Ic;break;case "Viewbox":var Xe=
a,Og=b,sg=c,Ye=d;1<p&&z.m("Viewbox Panel cannot contain more than one GraphObject.");var ad=n.n[0];ad.Lb=1;Tj(ad);gh(ad,Infinity,Infinity,sg,Ye);var Xf=ad.Ga,Ae=ad.margin,oi=Ae.right+Ae.left,ao=Ae.top+Ae.bottom;if(isFinite(Xe)||isFinite(Og)){var Zp=ad.scale,bo=Xf.width,co=Xf.height,eo=Math.max(Xe-oi,0),fo=Math.max(Og-ao,0);ad.Lb=this.Hn===Ig?ad.Lb*Math.min(eo/bo,fo/co):ad.Lb*Math.max(eo/bo,fo/co);Zp!==ad.scale&&(vj(ad,h),gh(ad,Infinity,Infinity,sg,Ye))}Xf=ad.Ga;e.width=isFinite(Xe)?Xe:Math.max(Xf.width+
oi,0);e.height=isFinite(Og)?Og:Math.max(Xf.height+ao,0);break;case "Link":var wj=this instanceof Ne?this.nj:this;if(0===p){var xj=this.Rc;lb(xj,0,0);var Xd=this.Ga;Xd.q(0,0,0,0)}else{var yj=this.Ip(),Ze=this.Ni(),Be=this.fi;Be.assign(Ze);Be.x=0;Be.y=0;var yh,pi=this.bx();yh=this.ta!==f?this.ta:pi.count;this.Rh.q(Ze.x,Ze.y);this.Fh.clear();yj!==q&&(el(yj,Ze.width,Ze.height),Xd=yj.Ga,Be.Mj(Xd),this.Fh.add(Xd));for(var zh=z.Ng(),tg=z.O(),Yf=z.O(),kl=0;kl<p;kl++){var Yb=n.n[kl];if(Yb!==yj)if(Yb.rh&&Yb instanceof
V)el(Yb,Ze.width,Ze.height),Xd=Yb.Ga,Be.Mj(Xd),this.Fh.add(Xd);else if(2>yh)gh(Yb,Infinity,Infinity),Xd=Yb.Ga,Be.Mj(Xd),this.Fh.add(Xd);else{var Zf=Yb.ef,io=Yb.zs,ll=Yb.oj;Sb(ll)&&(ll=cc);var zj=Yb.As,$p=Yb.Nz,qi,ri,Aj=0;if(Zf<-yh||Zf>=yh){var jo=wj.FD,Bj=wj.ED;zj!==ij&&(Aj=wj.computeAngle(Yb,zj,Bj),Yb.angle=Aj);qi=jo.x-Ze.x;ri=jo.y-Ze.y}else{var yf,Ah;if(0<=Zf)yf=pi.n[Zf],Ah=Zf<yh-1?pi.n[Zf+1]:yf;else{var ml=yh+Zf;yf=pi.n[ml];Ah=0<ml?pi.n[ml-1]:yf}Bj=0<=Zf?yf.ni(Ah):Ah.ni(yf);zj!==ij&&(Aj=wj.computeAngle(Yb,
zj,Bj),Yb.Em=Aj);qi=yf.x+(Ah.x-yf.x)*io-Ze.x;ri=yf.y+(Ah.y-yf.y)*io-Ze.y}gh(Yb,Infinity,Infinity);var Xd=Yb.Ga,xj=Yb.Ma,si=0;Yb instanceof V&&(si=Yb.pb);var ko=xj.width+si,lo=xj.height+si;zh.reset();zh.translate(-Xd.x,-Xd.y);zh.scale(Yb.scale,Yb.scale);zh.rotate(Yb.angle,ko/2,lo/2);var Bh=new H(0,0,ko,lo);tg.Cs(Bh,ll);zh.Va(tg);var aq=-tg.x+si/2,bq=-tg.y+si/2;Yf.assign($p);isNaN(Yf.x)&&(Yf.x=0<=Zf?tg.x+3:-(tg.x+3));isNaN(Yf.y)&&(Yf.y=-(tg.y+3));Yf.rotate(Bj);qi+=Yf.x;ri+=Yf.y;Bh.set(Xd);Bh.x=qi+aq;
Bh.y=ri+bq;this.Fh.add(Bh);Be.Mj(Bh)}}if(this.Pe)for(var mo=this.wi;mo.next();)gh(mo.value,Infinity,Infinity);this.fi=Be;var Cj=this.Rh;Cj&&Cj.q(Cj.x+Be.x,Cj.y+Be.y);lb(e,Be.width||0,Be.height||0);z.Ce(zh);z.B(tg);z.B(Yf)}break;case "Grid":break;case "TableRow":case "TableColumn":z.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:z.m("Unknown panel type: "+t)}var Ce=e.width,De=e.height,Dj=this.padding,cq=
Dj.top+Dj.bottom,Ce=Ce+(Dj.left+Dj.right),De=De+cq;isFinite(g.width)&&(Ce=g.width);isFinite(g.height)&&(De=g.height);Ce=Math.min(l.width,Ce);De=Math.min(l.height,De);Ce=Math.max(k.width,Ce);De=Math.max(k.height,De);Ce=Math.max(c,Ce);De=Math.max(d,De);e.width=Ce;e.height=De;r=this.Rc;lb(r,Ce,De);pj(this,0,0,Ce,De)}};F.prototype.findMainElement=F.prototype.SG=function(){this.gj===q&&Sj(this,this.za,this.za.length);return this.gj};
function Sj(a,b,c){for(var d=0;d<c;d++){var e=b.n[d];if(e.rh===h)return a.gj=e}b=b.n[0];return a.gj=b}
F.prototype.sj=function(a,b,c,d){var e=this.fi,g=this.za,k=g.length,l=z.Kj(0,0,0,0);if(0===k){var m=this.ya;m.x=a;m.y=b;m.width=c;m.height=d}else{if(!this.Fa.W()){var n=sj(this),p=this.Dc,r=p.width,t=p.height,u=this.margin,v=u.left+u.right,A=u.top+u.bottom;r===c&&t===d&&(n=jj);switch(n){case jj:if(r>c||t>d)this.ca(),gh(this,r>c?c:r,t>d?d:t);break;case Gc:vj(this,h);gh(this,c+v,d+A,0,0);break;case lj:vj(this,h);gh(this,c+v,t+A,0,0);break;case kj:vj(this,h),gh(this,r+v,d+A,0,0)}}m=this.ya;m.x=a;m.y=
b;m.width=c;m.height=d;var C=this.aa.Kb;switch(C){case "Position":for(var K=e.x-this.padding.left,I=e.y-this.padding.top,R=0;R<k;R++){var M=g.n[R],S=M.Ga,Z=M.margin,X=M.position.x,ea=M.position.y;l.x=isNaN(X)?-K:X-K;l.y=isNaN(ea)?-I:ea-I;if(M instanceof V&&M.bz){var ia=M.pb/2;l.x-=ia;l.y-=ia}l.x+=Z.left;l.y+=Z.top;l.width=S.width;l.height=S.height;M.visible&&M.zc(l.x,l.y,l.width,l.height)}break;case "Vertical":for(var W=this.padding.left,xa=this.padding.top,Oa=0;Oa<k;Oa++){var Qa=W,Sa=g.n[Oa],Ba=
Sa.Ga,Wa=Sa.margin,Ga=Wa.left+Wa.right,wb=W+this.padding.right,qf=Ba.width,rc=sj(Sa);if(isNaN(Sa.Fa.width)&&rc===Gc||rc===lj)qf=Math.max(e.width-Ga-wb,0);var rf=qf+Ga+wb,sc=Sa.alignment;Vb(sc)&&(sc=this.wj);Ob(sc)||(sc=cc);l.x=Qa+sc.offsetX+Wa.left+(e.width*sc.x-rf*sc.x);l.y=xa+sc.offsetY+Wa.top;l.width=qf;l.height=Ba.height;Sa.visible&&(Sa.zc(l.x,l.y,l.width,l.height),xa+=Ba.height+Wa.bottom+Wa.top)}break;case "Horizontal":for(var pb=this.padding.top,qb=this.padding.left,La=0;La<k;La++){var Pa=pb,
hb=g.n[La],yb=hb.Ga,db=hb.margin,Rf=db.top+db.bottom,nd=pb+this.padding.bottom,Ad=yb.height,Od=sj(hb);if(isNaN(hb.Fa.height)&&Od===Gc||Od===kj)Ad=Math.max(e.height-Rf-nd,0);var ce=Ad+Rf+nd,Bd=hb.alignment;Vb(Bd)&&(Bd=this.wj);Ob(Bd)||(Bd=cc);l.x=qb+Bd.offsetX+db.left;l.y=Pa+Bd.offsetY+db.top+(e.height*Bd.y-ce*Bd.y);l.width=yb.width;l.height=Ad;hb.visible&&(hb.zc(l.x,l.y,l.width,l.height),qb+=yb.width+db.left+db.right)}break;case "Spot":var de=Sj(this,g,k),Kg=de.Ga,Ib=Kg.width,sf=Kg.height,Pb=this.padding,
lc=Pb.left,Tb=Pb.top;l.x=lc-e.x;l.y=Tb-e.y;de.zc(l.x,l.y,Ib,sf);for(var Xa=0;Xa<k;Xa++){var tc=g.n[Xa];if(tc!==de){var Se=tc.Ga,Sf=Se.width,og=Se.height,Nb=tc.alignment;Vb(Nb)&&(Nb=this.wj);Ob(Nb)||(Nb=cc);var od=tc.oj;Vb(od)&&(od=cc);l.x=Nb.x*Ib+Nb.offsetX-(od.x*Sf-od.offsetX);l.y=Nb.y*sf+Nb.offsetY-(od.y*og-od.offsetY);l.x-=e.x;l.y-=e.y;tc.visible&&tc.zc(lc+l.x,Tb+l.y,Sf,og)}}break;case "Auto":var zc=Sj(this,g,k),pd=zc.Ga,eb=z.hf();eb.q(0,0,1,1);var nb=zc.margin,ec=nb.left,zb=nb.top,uc=this.padding,
tf=uc.left,Ac=uc.top;l.x=ec;l.y=zb;l.width=pd.width;l.height=pd.height;zc.zc(tf+l.x,Ac+l.y,l.width,l.height);var Db=Zk(zc),Pd=$k(zc),qe=0+Db.y*pd.height+Db.offsetY,Eb=0+Pd.x*pd.width+Pd.offsetX,Qd=0+Pd.y*pd.height+Pd.offsetY;eb.x=0+Db.x*pd.width+Db.offsetX;eb.y=qe;Bb(eb,Eb,Qd,0,0);eb.x+=ec+tf;eb.y+=zb+Ac;for(var Te=0;Te<k;Te++){var re=g.n[Te];if(re!==zc){var ob=re.Ga,nb=re.margin,uf=Math.max(ob.width+nb.right+nb.left,0),Fb=Math.max(ob.height+nb.top+nb.bottom,0),fb=re.alignment;Vb(fb)&&(fb=this.wj);
Ob(fb)||(fb=cc);l.x=eb.width*fb.x+fb.offsetX-uf*fb.x+nb.left+eb.x;l.y=eb.height*fb.y+fb.offsetY-Fb*fb.y+nb.top+eb.y;l.width=eb.width;l.height=eb.height;re.visible&&(Cb(eb.x,eb.y,eb.width,eb.height,l.x,l.y,ob.width,ob.height)?re.zc(l.x,l.y,ob.width,ob.height):re.zc(l.x,l.y,ob.width,ob.height,new H(eb.x,eb.y,eb.width,eb.height)))}}z.Jc(eb);break;case "Table":for(var Xc=this.padding,Ub=Xc.left,Rd=Xc.top,ee=this.vF,fe,se,Yc=ee.length,Cd=0,rb=0;rb<Yc;rb++)ee[rb]&&(Cd=Math.max(Cd,ee[rb].length));for(var Ue=
Math.min(this.mj,Yc-1);Ue!==Yc&&(this.Uc[Ue]===f||0===this.Uc[Ue].Ab);)Ue++;for(var Ue=Math.min(Ue,Yc-1),Ve=-this.Uc[Ue].kb,vb=Math.min(this.Ri,Cd-1);vb!==Cd&&(this.Nc[vb]===f||0===this.Nc[vb].Ab);)vb++;for(var vb=Math.min(vb,Cd-1),te=-this.Nc[vb].kb,Jb=z.$k(),rb=0;rb<Yc;rb++)if(ee[rb]){var Cd=ee[rb].length,Bc=this.Sd(rb);se=Bc.kb+Ve+Rd+fl(Bc);for(var Dd=0;Dd<Cd;Dd++)if(ee[rb][Dd]){var Hc=this.Rd(Dd);fe=Hc.kb+te+Ub+fl(Hc);for(var Qb=ee[rb][Dd],ue=Qb.length,sb=0;sb<ue;sb++){var gb=Qb[sb],We=gb.Ga;
if(gb instanceof F&&(gb.type===Lj||gb.type===Mj)){gb.Fb.Ua();var Mc=gb.Fb;Mc.x=gb.type===Lj?Ub:fe;Mc.y=gb.type===Mj?Rd:se;Mc.width=We.width;Mc.height=We.height;gb.Fb.freeze();Hj(gb,s)}else{Jb.q(0,0);for(var Sd=1;Sd<gb.rowSpan&&!(rb+Sd>=this.Hv);Sd++){var ua=this.Sd(rb+Sd);Jb.height+=ua.total}for(Sd=1;Sd<gb.oC&&!(Dd+Sd>=this.Su);Sd++){var wa=this.Rd(Dd+Sd);Jb.width+=wa.total}var pg=Hc.Ab+Jb.width,Lg=Bc.Ab+Jb.height;l.x=fe;l.y=se;l.width=pg;l.height=Lg;se+Lg>e.height&&(Lg=Math.max(e.height-se,0));fe+
pg>e.width&&(pg=Math.max(e.width-fe,0));var Zc=fe,th=se,Ic=pg,uh=Lg,$c=gb.alignment,ge,Ed,he,qd;if(Vb($c)){$c=this.wj;Ob($c)||($c=cc);ge=$c.x;Ed=$c.y;he=$c.offsetX;qd=$c.offsetY;var Td=Hc.alignment,Tf=Bc.alignment;Ob(Td)&&(ge=Td.x,he=Td.offsetX);Ob(Tf)&&(Ed=Tf.y,qd=Tf.offsetY)}else ge=$c.x,Ed=$c.y,he=$c.offsetX,qd=$c.offsetY;if(isNaN(ge)||isNaN(Ed))Ed=ge=0.5,qd=he=0;var ja=We.width,Xb=We.height,tj=gb.le,uj=gb.Ge,ja=Math.min(tj.width,ja),Xb=Math.min(tj.height,Xb),ja=Math.max(uj.width,ja),Xb=Math.max(uj.height,
Xb),ib=gb.margin,tb=ib.left+ib.right,li=ib.top+ib.bottom,vh=Vj(gb,Bc,Hc);if(isNaN(gb.Fa.width)&&vh===Gc||vh===lj)ja=Math.max(pg-tb,0);if(isNaN(gb.Fa.height)&&vh===Gc||vh===kj)Xb=Math.max(Lg-li,0);var mi=Xb+li;l.x+=l.width*ge-(ja+tb)*ge+he+ib.left;l.y+=l.height*Ed-mi*Ed+qd+ib.top;gb.visible&&(Cb(Zc,th,Ic,uh,l.x,l.y,ja,Xb)?gb.zc(l.x,l.y,ja,Xb):gb.zc(l.x,l.y,ja,Xb,new H(Zc,th,Ic,uh)))}}}}z.Cj(Jb);for(rb=0;rb<k;rb++)if(gb=g.n[rb],gb instanceof F&&(gb.type===Lj||gb.type===Mj))Mc=gb.Fb,gb.Rc.Ua(),gb.Rc.So(0,
0,Mc.width,Mc.height),gb.Rc.freeze();break;case "Viewbox":var ie=g.n[0],ve=ie.Ga,we=ie.margin,vc=we.top+we.bottom,Uf=Math.max(ve.width+(we.right+we.left),0),Vf=Math.max(ve.height+vc,0),Jc=ie.alignment;Vb(Jc)&&(Jc=this.wj);Ob(Jc)||(Jc=cc);l.x=e.width*Jc.x-Uf*Jc.x+Jc.offsetX;l.y=e.height*Jc.y-Vf*Jc.y+Jc.offsetY;l.width=ve.width;l.height=ve.height;ie.zc(l.x,l.y,l.width,l.height);break;case "Link":var xe=this.Ip(),Fd=0;if(xe!==q&&Fd<this.Fh.count){var Cc=this.Fh.n[Fd];Fd++;xe.zc(Cc.x-this.fi.x,Cc.y-this.fi.y,
Cc.width,Cc.height)}for(var Ud=0;Ud<k;Ud++){var ni=g.n[Ud];ni!==xe&&Fd<this.Fh.count&&(Cc=this.Fh.n[Fd],Fd++,ni.zc(Cc.x-this.fi.x,Cc.y-this.fi.y,Cc.width,Cc.height))}var wh=this.bx(),xh=wh.count;if(2<=xh&&this.Pe)for(var Kb=this.wi;Kb.next();){var Kc=Kb.value,je=xh,mc=wh,Vd=Kc.ef,ye=Kc.zs,ke=Kc.oj;Sb(ke)&&(ke=cc);var Wf=Kc.As,qg=Kc.Nz,ze=f,vf=f,Mg=0;if(Vd<-je||Vd>=je){var rg=this.FD,wf=this.ED;Wf!==ij&&(Mg=this.computeAngle(Kc,Wf,wf),Kc.angle=Mg);ze=rg.x;vf=rg.y}else{var Wd=f,xf=f;if(0<=Vd)Wd=mc.n[Vd],
xf=Vd<je-1?mc.n[Vd+1]:Wd;else var Nc=je+Vd,Wd=mc.n[Nc],xf=0<Nc?mc.n[Nc-1]:Wd;wf=0<=Vd?Wd.ni(xf):xf.ni(Wd);Wf!==ij&&(Mg=this.computeAngle(Kc,Wf,wf),Kc.angle=Mg);ze=Wd.x+(xf.x-Wd.x)*ye;vf=Wd.y+(xf.y-Wd.y)*ye}var Xe=z.Ng();Xe.reset();Xe.scale(Kc.scale,Kc.scale);Xe.rotate(Kc.angle,0,0);var Og=Kc.Ma,sg=z.Kj(0,0,Og.width,Og.height),Ye=z.O();Ye.Cs(sg,ke);Xe.Va(Ye);var ad=-Ye.x,Xf=-Ye.y,Ae=qg.copy();isNaN(Ae.x)&&(Ae.x=0<=Vd?Ye.x+3:-(Ye.x+3));isNaN(Ae.y)&&(Ae.y=-(Ye.y+3));Ae.rotate(wf);ze+=Ae.x;vf+=Ae.y;Xe.JE(sg);
var ad=ad+sg.x,Xf=Xf+sg.y,oi=z.ic(ze+ad,vf+Xf);Kc.move(oi);z.B(oi);z.B(Ye);z.Jc(sg);z.Ce(Xe)}this.xv();break;case "Grid":break;case "TableRow":case "TableColumn":z.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:z.m("Unknown panel type: "+C)}z.Jc(l)}};
F.prototype.tj=function(a){var b=this.Ma;if(Cb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.za.length,b=z.ic(0,0);c--;){var d=this.za.n[0];if(d.visible||d===this.Qb)if(bb(b.set(a),d.transform),d.Ia(b))return z.B(b),h}z.B(b);return this.bd===q&&this.Le===q?s:h}return s};function gl(a,b,c){c(a,b);if(b instanceof F)for(b=b.elements;b.next();)gl(a,b.value,c)}function zi(a,b){hl(a,a,b)}function hl(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof F&&hl(a,d,c)}}
function il(a,b,c){if(c(b))return b;if(b instanceof F)for(b=b.elements;b.next();){var d=il(a,b.value,c);if(d!==q)return b.sg(),d}return q}F.prototype.findObject=F.prototype.Be=function(a){if(this.name===a)return this;for(var b=this.za.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof F&&!e.nD()&&(e=e.Be(a),e!==q))return e}return q};function af(a,b){return b(a)?a:jl(a,b)}
function jl(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof F&&(d=jl(d,b),d!==q))return d}return q}
function nl(a){a=a.za.n;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof F)c=Math.max(c,nl(e));else if(e instanceof V){a:{if(!e.Dg)switch(e.Wm){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=0;
break a}e=e.de/2*e.Gl*e.Dj()}c=Math.max(c,e)}}return c}da=F.prototype;da.zi=function(){return!(this.type===Lj||this.type===Mj)};
da.od=function(a,b,c){if(this.He===s)return q;b===f&&(b=q);c===f&&(c=q);if(gi(this))return q;var d=this.Ma,e=1/this.Dj(),g=this.zi(),k=g?a:bb(z.ic(a.x,a.y),this.transform);if(Cb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,k.x,k.y)){if(!this.wg){for(var l=this.za.length,e=z.O();l--;){var m=this.za.n[l];if(m.visible||m===this.Qb){m.zi()?bb(e.set(a),m.transform):e.set(a);var n=q;m instanceof F?n=m.od(e,b,c):m.He===h&&m.Ia(e)&&(n=m);if(n!==q&&(b!==q&&(n=b(n)),n&&(c===q||c(n))))return z.B(e),g||z.B(k),n}}z.B(e)}if(this.background===
q&&this.hi===q)return g||z.B(k),q;a=Cb(0,0,d.width,d.height,k.x,k.y)?this:q;g||z.B(k);return a}g||z.B(k);return q};
da.eo=function(a,b,c,d){if(this.He===s)return s;b===f&&(b=q);c===f&&(c=q);!(d instanceof J)&&!(d instanceof va)&&(d=new J(U));var e=this.Ma,g=this.zi(),k=g?a:bb(z.ic(a.x,a.y),this.transform);if(Cb(0,0,e.width,e.height,k.x,k.y)){if(!this.wg){for(var l=this.za.length,e=z.O();l--;){var m=this.za.n[l];if(m.visible||m===this.Qb)if(m.zi()?bb(e.set(a),m.transform):e.set(a),(m instanceof F?m.eo(e,b,c,d):m.Ia(e))&&m.He!==s)b!==q&&(m=b(m)),m&&(c===q||c(m))&&d.add(m)}z.B(e)}g||z.B(k);return this.background!==
q||this.hi!==q}g||z.B(k);return s};
da.Aj=function(a,b,c,d,e,g){if(this.He===s)return s;b===f&&(b=q);c===f&&(c=q);var k=g;g===f&&(k=z.Ng(),k.reset());k.multiply(this.transform);if(this.Sl(a,k))return ol(this,b,c,e),g===f&&z.Ce(k),h;if(this.xf(a,k)){if(!this.wg)for(var l=this.za.length;l--;){var m=this.za.n[l];if(m.visible||m===this.Qb){var n=m.ya,p=this.Ma;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=z.Ng();n.set(k);if(m instanceof F?m.Aj(a,b,c,d,e,n):rj(m,a,d,n))b!==q&&(m=b(m)),m&&(c===q||c(m))&&e.add(m);z.Ce(n)}}}g===
f&&z.Ce(k);return d}g===f&&z.Ce(k);return s};function ol(a,b,c,d){for(var e=a.za.length;e--;){var g=a.za.n[e];if(g.visible){var k=g.ya,l=a.Ma;k.x>l.width||(k.y>l.height||0>k.x+k.width||0>k.y+k.height)||(g instanceof F&&ol(g,b,c,d),b!==q&&(g=b(g)),g&&(c===q||c(g))&&d.add(g))}}}
da.fo=function(a,b,c,d,e,g){if(this.He===s)return s;c===f&&(c=q);d===f&&(d=q);var k=this.Ma,l=this.zi(),m=l?a:bb(z.ic(a.x,a.y),this.transform),n=l?b:bb(z.ic(b.x,b.y),this.transform),p=m.Lk(n),r=0<m.x&&m.x<k.width&&0<m.y&&m.y<k.height||cb(m.x,m.y,0,0,0,k.height)<p||cb(m.x,m.y,0,k.height,k.width,k.height)<p||cb(m.x,m.y,k.width,k.height,k.width,0)<p||cb(m.x,m.y,k.width,0,0,0)<p,k=0<m.x&&m.x<k.width&&0<m.y&&m.y<k.height&&cb(m.x,m.y,0,0,0,k.height)<p&&cb(m.x,m.y,0,k.height,k.width,k.height)<p&&cb(m.x,
m.y,k.width,k.height,k.width,0)<p&&cb(m.x,m.y,k.width,0,0,0)<p;l||(z.B(m),z.B(n));if(r){if(!this.wg){l=z.O();m=z.O();for(n=this.za.length;n--;)if(p=this.za.n[n],p.visible||p===this.Qb){var t=p.ya,u=this.Ma;if(!(t.x>u.width||t.y>u.height||0>t.x+t.width||0>t.y+t.height))if(p.zi()?(t=p.transform,bb(l.set(a),t),bb(m.set(b),t)):(l.set(a),m.set(b)),p instanceof F?p.fo(l,m,c,d,e,g):p.MC(l,m,e))c!==q&&(p=c(p)),p&&(d===q||d(p))&&g.add(p)}z.B(l);z.B(m)}return e?r:k}return s};
function Zk(a){var b=a.G;if(b===f||b===Zb)b=q;b===q&&a instanceof V&&(a=a.Sa,a!==q&&(b=a.G));b===q&&(b=$b);return b}function $k(a){var b=a.H;if(b===f||b===Zb)b=q;b===q&&a instanceof V&&(a=a.Sa,a!==q&&(b=a.H));b===q&&(b=gc);return b}F.prototype.add=F.prototype.add=function(a){z.l(a,U,F,"add:element");this.Ed(this.za.count,a)};F.prototype.elt=F.prototype.na=function(a){return this.za.na(a)};
F.prototype.insertAt=F.prototype.Ed=function(a,b){b instanceof B&&z.m("Cannot add a Part to a Panel: "+b);if(this===b||this.ui(b))this===b&&z.m("Cannot make a Panel contain itself: "+this.toString()),z.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.ha;c!==q&&c!==this&&z.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.aa===Oh&&!(b instanceof V)&&z.m("Can only add Shapes to a Grid Panel, not: "+b);b.Xk(this);b.Cl=q;if(this.ds!==q){var d=b.data;d!==q&&"object"===typeof d&&(this.If===q&&(this.If=new ta(Object,F)),this.If.add(d,b))}var e=this.za,d=-1;if(c===this){for(var g=-1,k=e.count,l=0;l<k;l++)if(e.n[l]===b){g=l;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.sd(g);d=g}else z.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=
e.count;e.Ed(a,b);this.ca();b.ca();b.Xd!==q&&(this.Oi=h);b instanceof F&&b.Oi===h&&(this.Oi=h);c=this.Z;c!==q&&(c.tk=q,c.Wi=NaN,b.Xd!==q&&c instanceof D&&(c.Oi=h),e=this.h,e!==q&&e.Aa.jb||(-1!==d&&c.Zc(Gd,"elements",this,b,q,d,q),c.Zc(zd,"elements",this,q,b,q,a)))};F.prototype.remove=F.prototype.remove=function(a){z.l(a,U,F,"remove:element");for(var b=this.za,c=b.count,d=-1,e=0;e<c;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.De(d)};
F.prototype.removeAt=F.prototype.sd=function(a){x&&z.p(a,F,"removeAt:idx");0<=a&&this.De(a)};F.prototype.De=function(a){var b=this.za,c=b.na(a);c.Cl=q;c.Xk(q);if(this.If!==q){var d=c.data;"object"===typeof d&&this.If.remove(d)}b.sd(a);vj(this,s);this.ca();b=this.Z;b!==q&&(b.tk=q,b.Wi=NaN,d=this.h,d!==q&&d.Aa.jb||b.Zc(Gd,"elements",this,c,q,a,q))};z.A(F,{Hv:"rowCount"},function(){return this.Uc===f?0:this.Uc.length});
F.prototype.getRowDefinition=F.prototype.Sd=function(a){if(this.Uc===f)return q;x&&z.p(a,F,"getRowDefinition:idx");0>a&&z.ia(a,">= 0",F,"getRowDefinition:idx");a=Math.round(a);var b=this.Uc;if(b[a]===f){var c=new mk;c.Xk(this);c.rl=h;c.Zd=a;b[a]=c}return b[a]};F.prototype.removeRowDefinition=F.prototype.FJ=function(a){if(this.Uc!==f){x&&z.p(a,F,"removeRowDefinition:idx");0>a&&z.ia(a,">= 0",F,"removeRowDefinition:idx");a=Math.round(a);var b=this.Uc;b[a]&&(b[a]=f)}};
z.A(F,{Su:"columnCount"},function(){return this.Nc===f?0:this.Nc.length});F.prototype.getColumnDefinition=F.prototype.Rd=function(a){if(this.Nc===f)return q;x&&z.p(a,F,"getColumnDefinition:idx");0>a&&z.ia(a,">= 0",F,"getColumnDefinition:idx");a=Math.round(a);var b=this.Nc;if(b[a]===f){var c=new mk;c.Xk(this);c.rl=s;c.Zd=a;b[a]=c}return b[a]};
F.prototype.removeColumnDefinition=F.prototype.EJ=function(a){if(this.Nc!==f){x&&z.p(a,F,"removeColumnDefinition:idx");0>a&&z.ia(a,">= 0",F,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Nc;b[a]&&(b[a]=f)}};z.g(F,"rowSizing",F.prototype.iE);
z.defineProperty(F,{iE:"rowSizing"},function(){return this.Dl===f?Uk:this.Dl},function(a){if(this.Dl!==f){var b=this.Dl;b!==a&&(a!==Uk&&a!==dl&&z.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Dl=a,this.ca(),this.i("rowSizing",b,a))}});z.g(F,"columnSizing",F.prototype.nC);
z.defineProperty(F,{nC:"columnSizing"},function(){return this.hl===f?Uk:this.hl},function(a){if(this.hl!==f){var b=this.hl;b!==a&&(a!==Uk&&a!==dl&&z.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.hl=a,this.ca(),this.i("columnSizing",b,a))}});z.g(F,"topIndex",F.prototype.cA);
z.defineProperty(F,{cA:"topIndex"},function(){return this.mj===f?0:this.mj},function(a){if(this.mj!==f){var b=this.mj;b!==a&&((!isFinite(a)||0>a)&&z.m("topIndex must be greater than zero and a real number. Was "+a),this.mj=a,Rj(this),this.i("topIndex",b,a))}});z.g(F,"leftIndex",F.prototype.gz);
z.defineProperty(F,{gz:"leftIndex"},function(){return this.Ri===f?0:this.Ri},function(a){if(this.Ri!==f){var b=this.Ri;b!==a&&((!isFinite(a)||0>a)&&z.m("leftIndex must be greater than zero and a real number. Was "+a),this.Ri=a,Rj(this),this.i("leftIndex",b,a))}});F.prototype.findRowForLocalY=F.prototype.RI=function(a){if(0>a)return-1;if(this.type!==ga)return NaN;for(var b=0,c=this.Uc,d=c.length,e=this.mj;e<d;e++){var g=c[e];if(g!==f&&(b+=g.total,a<b))return e}return-1};
F.prototype.findColumnForLocalX=F.prototype.II=function(a){if(0>a)return-1;if(this.type!==ga)return NaN;for(var b=0,c=this.Nc,d=c.length,e=this.Ri;e<d;e++){var g=c[e];if(g!==f&&(b+=g.total,a<b))return e}return-1};z.g(F,"data",F.prototype.data);
z.defineProperty(F,{data:"data"},w("Km"),function(a){var b=this.Km;if(b!==a){var c=this instanceof B&&!(this instanceof Ne);c&&z.j(a,"object",F,"data");Pe(this);this.Km=a;var d=this.h;d!==q&&(c?this instanceof E?(b!==q&&d.ek.remove(b),a!==q&&d.ek.add(a,this)):(b!==q&&d.Jh.remove(b),a!==q&&d.Jh.add(a,this)):(c=this.ha,c!==q&&c.If!==q&&(b!==q&&c.If.remove(b),a!==q&&c.If.add(a,this))));this.i("data",b,a);d!==q&&d.Aa.jb||a!==q&&this.Eb()}});function hk(a){a=a.fl;return a!==q&&a.hb}
function Pe(a){var b=a.fl;if(b===q)a.data!==q&&z.m("Template cannot have .data be non-null: "+a),a.fl=b=new J(Fe);else if(b.hb)return;var c=new J(U);gl(a,a,function(a,d){var e=d.yc;if(e!==q){Zj(d,s);for(var g=e.k;g.next();){e=g.value;e.mode===He&&Zj(d,h);var k=e.Hs;if(k!==q){var t=a;""!==k&&(t=a.Be(k));t!==q&&(c.add(t),t.fr===f&&(t.fr=new J(Fe)),t.fr.add(e))}b.add(e)}}if(d instanceof F&&d.type===ga){if(0<d.Uc.length){g=d.Uc;k=g.length;for(t=0;t<k;t++){var u=g[t];if(u!==f&&u.yc!==q)for(var v=u.yc.k;v.next();)e=
v.value,e.Of=u,e.$x=2,e.vu=u.index,b.add(e)}}if(0<d.Nc.length){g=d.Nc;k=g.length;for(t=0;t<k;t++)if(u=g[t],u!==f&&u.yc!==q)for(v=u.yc.k;v.next();)e=v.value,e.Of=u,e.$x=1,e.vu=u.index,b.add(e)}}});for(var d=c.k;d.next();){var e=d.value;if(e.fr!==f){Zj(e,h);for(var g=e.fr.k;g.next();){var k=g.value;e.yc===q&&(e.yc=new J(Fe));e.yc.add(k)}}delete e.fr}for(d=b.k;d.next();)e=d.value,g=e.Of,g!==q&&(e.Of=q,g===a?e.sm="":(g instanceof mk&&(g=g.ha),e.sm=""!==g.name?g.name:g.name="_"+z.fc(g)));b.freeze();a instanceof
B&&a.Td()&&(gh(a,Infinity,Infinity),a.zc())}
F.prototype.updateTargetBindings=F.prototype.Eb=function(a){var b=this.fl;if(b!==q){a===f&&(a="");for(b=b.k;b.next();){var c=b.value,d=c.Tz;if(!(""!==a&&d!==a)&&(d=c.Xz,!(c.pC===q&&""===d))){var d=this.data,e=c.Hs;e!==q&&(d=this.Be(e));if(d===q)x&&z.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.sm;if(""!==g){if(e=this.Be(g),e===q)continue}else c.Of!==q&&(e=c.Of);g=c.$x;if(0!==g){if(!(e instanceof F))continue;1===g?e=e.Rd(c.vu):2===g&&(e=e.Sd(c.vu))}e!==
f&&c.QE(e,d)}}}}};z.g(F,"itemArray",F.prototype.ds);z.defineProperty(F,{ds:"itemArray"},w("ok"),function(a){var b=this.ok;if(b!==a){x&&(a!==q&&!z.isArray(a))&&z.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;c!==q&&b!==q&&Ci(c,this);this.ok=a;c!==q&&a!==q&&Ai(c,this);this.i("itemArray",b,a);c!==q&&c.Aa.jb||this.Ez()}});
F.prototype.rebuildItemElements=F.prototype.Ez=function(){var a=0;if(this.type===Fg||this.type===Ih||this.type===ug)a=1;for(;this.za.length>a;)this.De(a);a=this.ds;if(a!==q)for(var b=z.$b(a),c=0;c<b;c++)Ni(this,z.Mb(a,c))};
function Ni(a,b,c){if(!(b===f||b===q)){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof F&&(Pe(e),e=e.copy(),"object"===typeof b&&(a.If===q&&(a.If=new ta(Object,F)),a.If.add(b,e)),"number"===typeof c?((a.type===Fg||a.type===Ih)&&c++,a.Ed(c,e),pl(e,c),Oi(a,c)):(a.add(e),pl(e,a.za.count-1)),e.ux=d,e.data=b)}}function Oi(a,b){for(var c=a.za,d=b+1;d<c.length;){var e=c.na(d);e instanceof F&&pl(e,d);d++}}function pl(a,b){a.type===Lj?a.wc=b:a.type===Mj&&(a.column=b)}
F.prototype.isItemPanel=F.prototype.nD=function(){return this.ok!==q||this.xg!==q};z.g(F,"itemTemplate",F.prototype.rH);z.defineProperty(F,{rH:"itemTemplate"},function(){return this.xg===q?q:this.xg.Ba("")},function(a){if(this.xg===q){if(a===q)return;this.xg=new ta("string",F)}var b=this.xg.Ba("");b!==a&&(z.l(a,F,F,"itemTemplate"),a instanceof B&&z.m("itemTemplate must not be a Part: "+a),this.xg.add("",a),this.i("itemTemplate",b,a),a=this.h,a!==q&&a.Aa.jb||this.Ez())});z.g(F,"itemTemplateMap",F.prototype.qD);
z.defineProperty(F,{qD:"itemTemplateMap"},w("xg"),function(a){var b=this.xg;if(b!==a){z.l(a,ta,F,"itemTemplateMap");for(var c=a.k;c.next();){var d=c.value;d instanceof B&&z.m("Template in itemTemplateMap must not be a Part: "+d)}this.xg=a;this.i("itemTemplateMap",b,a);a=this.h;a!==q&&a.Aa.jb||this.Ez()}});z.g(F,"itemCategoryProperty",F.prototype.qH);
z.defineProperty(F,{qH:"itemCategoryProperty"},w("gn"),function(a){var b=this.gn;b!==a&&("string"!==typeof a&&"function"!==typeof a&&z.Rb(a,"string or function",F,"itemCategoryProperty"),this.gn=a,this.i("itemCategoryProperty",b,a))});
F.prototype.getCategoryForItemData=function(a){if(a===q)return"";var b=this.gn;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=z.cb(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;x&&z.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
F.prototype.findTemplateForItemData=function(a,b){var c=this.qD,d=q;c!==q&&(d=c.Ba(b));d===q&&(z.VE||(z.VE=h,z.trace('No item template Panel found for category "'+b+'" on '+this),z.trace("  Using default item template."),c=new F,d=new ya,d.bind(new Fe("text","",Hd)),c.add(d),z.xC=c),d=z.xC);return d instanceof F?d:q};z.g(F,"isAtomic",F.prototype.kH);z.defineProperty(F,{kH:"isAtomic"},w("wg"),function(a){var b=this.wg;b!==a&&(z.j(a,"boolean",F,"isAtomic"),this.wg=a,this.i("isAtomic",b,a))});
z.g(F,"opacity",F.prototype.opacity);z.defineProperty(F,{opacity:"opacity"},w("sf"),function(a){var b=this.sf;b!==a&&(z.j(a,"number",F,"opacity"),(0>a||1<a)&&z.ia(a,"0 <= val <= 1",F,"opacity"),this.sf=a,this.i("opacity",b,a),a=this.h,b=this.Z,a!==q&&b!==q&&a.xa(oh(b,b.ya)))});function mk(){z.qc(this);this.Zh=q;this.rl=h;this.Zd=0;this.tf=NaN;this.xl=0;this.wl=Infinity;this.Yd=Zb;this.kb=this.Ab=0;this.yc=q;this.cr=ql;this.ih=Hg;this.$q=this.ej=q;this.ar=NaN;this.bd=this.eh=q;this.rp=s}
z.ea("RowColumnDefinition",mk);mk.prototype.copy=function(){var a=new mk;a.rl=this.rl;a.Zd=this.Zd;a.tf=this.tf;a.xl=this.xl;a.wl=this.wl;a.Yd=this.Yd;a.Ab=this.Ab;a.kb=this.kb;a.ih=this.ih;a.cr=this.cr;a.ej=this.ej===q?q:this.ej.Y();a.$q=this.$q;a.ar=this.ar;a.eh=q;this.eh&&(a.eh=this.eh.slice(0));a.bd=this.bd;a.rp=this.rp;a.yc=this.yc;return a};mk.prototype.toString=function(){return"RowColumnDefinition "+(this.sh?"(Row ":"(Column ")+this.index+") #"+z.fc(this)};var ql;
mk.Default=ql=z.w(mk,"Default",0);var dl;mk.None=dl=z.w(mk,"None",1);var Uk;mk.ProportionalExtra=Uk=z.w(mk,"ProportionalExtra",2);mk.prototype.Xk=ba("Zh");function bl(a,b){a.Ab=isNaN(a.tf)?Math.max(Math.min(a.wl,b),a.xl):Math.max(Math.min(a.wl,a.tf),a.xl)}function fl(a){var b=a.Zh,c=a.qm;c===q&&(c=a.sh?b.Kh:b.Sg);var d=a.rm;isNaN(d)&&(d=a.sh?b.Ug:b.Tg);d=c!==q?d:0;0===a.index&&(d=0);c=a.Pz;c===q&&(c=b.Gi);return d+(a.sh?c.top:c.left)}
function Yk(a){var b=a.Zh,c=a.qm;c===q&&(c=a.sh?b.Kh:b.Sg);var d=a.rm;isNaN(d)&&(d=a.sh?b.Ug:b.Tg);d=c!==q?d:0;0===a.index&&(d=0);c=a.Pz;c===q&&(c=b.Gi);return d+(a.sh?c.top+c.bottom:c.left+c.right)}mk.prototype.Ec=function(a,b,c,d,e){var g=this.Zh;if(g!==q){g.ca();for(var k=this.sh,l=g.za,m=l.length,n=0;n<m;n++){var p=l.n[n];(k?p.wc:p.column)===this.index&&p.ca()}g.Zc(yd,a,this,b,c,d,e);if(this.yc!==q&&(b=g.io(),b!==q&&(b=b.data,b!==q)))for(c=this.yc.k;c.next();)c.value.PE(this,b,a,q)}};
z.A(mk,{ha:"panel"},w("Zh"));z.A(mk,{sh:"isRow"},w("rl"));z.A(mk,{index:"index"},w("Zd"));z.g(mk,"height",mk.prototype.height);z.defineProperty(mk,{height:"height"},w("tf"),function(a){var b=this.tf;b!==a&&(x&&z.j(a,"number",mk,"height"),0>a&&z.ia(a,">= 0",mk,"height"),this.tf=a,bl(this,this.Ab),this.Ec("size",b,a))});z.g(mk,"width",mk.prototype.width);
z.defineProperty(mk,{width:"width"},w("tf"),function(a){var b=this.tf;b!==a&&(x&&z.j(a,"number",mk,"width"),0>a&&z.ia(a,">= 0",mk,"width"),this.tf=a,bl(this,this.Ab),this.Ec("size",b,a))});z.g(mk,"minimum",mk.prototype.uh);z.defineProperty(mk,{uh:"minimum"},w("xl"),function(a){var b=this.xl;b!==a&&(x&&z.j(a,"number",mk,"minimum"),(0>a||!isFinite(a))&&z.ia(a,">= 0",mk,"minimum"),this.xl=a,bl(this,this.Ab),this.Ec("minimum",b,a))});z.g(mk,"maximum",mk.prototype.bf);
z.defineProperty(mk,{bf:"maximum"},w("wl"),function(a){var b=this.wl;b!==a&&(x&&z.j(a,"number",mk,"maximum"),0>a&&z.ia(a,">= 0",mk,"maximum"),this.wl=a,bl(this,this.Ab),this.Ec("maximum",b,a))});z.g(mk,"alignment",mk.prototype.alignment);z.defineProperty(mk,{alignment:"alignment"},w("Yd"),function(a){var b=this.Yd;b.N(a)||(x&&z.l(a,O,mk,"alignment"),this.Yd=a.Y(),this.Ec("alignment",b,a))});z.g(mk,"stretch",mk.prototype.zh);
z.defineProperty(mk,{zh:"stretch"},w("ih"),function(a){var b=this.ih;b!==a&&(x&&z.wb(a,U,mk,"stretch"),this.ih=a,this.Ec("stretch",b,a))});z.g(mk,"separatorPadding",mk.prototype.Pz);z.defineProperty(mk,{Pz:"separatorPadding"},w("ej"),function(a){"number"===typeof a?a=new ub(a):a!==q&&x&&z.l(a,ub,mk,"separatorPadding");var b=this.ej;if(a===q||b===q||!b.N(a))a!==q&&(a=a.Y()),this.ej=a,this.Ec("separatorPadding",b,a)});z.g(mk,"separatorStroke",mk.prototype.qm);
z.defineProperty(mk,{qm:"separatorStroke"},w("$q"),function(a){var b=this.$q;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.$q=a,this.ha&&this.ha.xa(),this.Ec("separatorStroke",b,a)});z.g(mk,"separatorStrokeWidth",mk.prototype.rm);z.defineProperty(mk,{rm:"separatorStrokeWidth"},w("ar"),function(a){var b=this.ar;b!==a&&(this.ar=a,this.ha&&this.ha.xa(),this.Ec("separatorStrokeWidth",b,a))});z.g(mk,"separatorDashArray",mk.prototype.oE);
z.defineProperty(mk,{oE:"separatorDashArray"},w("eh"),function(a){var b=this.eh;b!==a&&(a instanceof Array||z.Rb(a,"Array",mk,"separatorDashArray:val"),this.eh=a,this.ha&&this.ha.xa(),this.Ec("separatorDashArray",b,a))});z.g(mk,"background",mk.prototype.background);z.defineProperty(mk,{background:"background"},w("bd"),function(a){var b=this.bd;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.bd=a,this.ha&&this.ha.xa(),this.Ec("background",b,a)});
z.g(mk,"coversSeparators",mk.prototype.Wu);z.defineProperty(mk,{Wu:"coversSeparators"},w("rp"),function(a){var b=this.rp;b!==a&&(z.j(a,"boolean",mk,"coversSeparators"),this.rp=a,this.Ec("coversSeparators",b,a))});z.g(mk,"sizing",mk.prototype.Fs);z.defineProperty(mk,{Fs:"sizing"},w("cr"),function(a){var b=this.cr;b!==a&&(x&&z.wb(a,mk,mk,"sizing"),this.cr=a,this.Ec("sizing",b,a))});function cl(a){if(a.Fs===ql){var b=a.Zh;return a.sh?b.iE:b.nC}return a.Fs}z.A(mk,{Ub:"actual"},w("Ab"));
z.A(mk,{total:"total"},function(){return this.Ab+Yk(this)});z.A(mk,{position:"position"},w("kb"));mk.prototype.bind=mk.prototype.bind=function(a){a.Of=this;var b=this.ha;b!==q&&(b=b.io(),b!==q&&hk(b)&&z.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.yc===q&&(this.yc=new J(Fe));this.yc.add(a)};
function V(){U.call(this);this.Sa=q;this.Wm="None";this.Dg=s;this.Hp=Hg;this.ck=q;this.tc=this.Oe="black";this.de=1;this.En="butt";this.Fn="miter";this.Gl=10;this.Fl=q;this.Vc=0;this.ci=this.bi=Zb;this.Cq=this.Bq=0;this.Np=s;this.Sp=h;this.Eq=q;this.Ym=this.Gn="None";this.Lp=1}z.ea("Shape",V);z.Pa(V,U);
V.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.Sa=this.Sa;a.Wm=this.Wm;a.Dg=this.Dg;a.Hp=this.Hp;a.ck=this.ck;a.Oe=this.Oe;a.tc=this.tc;a.de=this.de;a.En=this.En;a.Fn=this.Fn;a.Gl=this.Gl;a.Fl=q;this.Fl&&(a.Fl=this.Fl.slice(0));a.Vc=this.Vc;a.bi=this.bi.Y();a.ci=this.ci.Y();a.Bq=this.Bq;a.Cq=this.Cq;a.Np=this.Np;a.Sp=this.Sp;a.Eq=this.Eq;a.Gn=this.Gn;a.Ym=this.Ym;a.Lp=this.Lp};
V.prototype.toString=function(){return"Shape("+("None"!==this.Cb?this.Cb:"None"!==this.vm?this.vm:this.gv)+")#"+z.fc(this)};
function rl(a,b,c,d){var e=0.001,g=d.Ga,k=g.width,g=g.height,l,m,n,p=c.length;if(!(2>p)){l=c[0][0];m=c[0][1];for(var r,t,u,v,A=0,C=z.zb(),K=1;K<p;K++)r=c[K],e=r[0],n=r[1],r=e-l,l=n-m,0===r&&(r=0.001),t=l/r,v=Math.atan2(l,r),l=Math.sqrt(r*r+l*l),C.push([r,v,t,l]),A+=l,l=e,m=n;l=c[0][0];m=c[0][1];c=0;e=k;p=k/2;K=0===p?s:h;n=0;u=C[n];r=u[0];v=u[1];t=u[2];u=u[3];for(var I=0;0.1<=A;){0===I&&(K?(e=k,c++,e-=p,A-=p,K=s):(e=k,c++),0===e&&(e=1));if(e>A){z.Da(C);return}e>u?(I=e-u,e=u):I=0;var R=Math.sqrt(e*
e/(1+t*t));0>r&&(R=-R);l+=R;m+=t*R;a.translate(l,m);a.rotate(v);a.translate(-(k/2),-(g/2));0===I&&d.Yl(a,b);a.translate(k/2,g/2);a.rotate(-v);a.translate(-l,-m);A-=e;u-=e;if(0!==I){n++;if(n===C.length){z.Da(C);return}u=C[n];r=u[0];v=u[1];t=u[2];u=u[3];e=I}}z.Da(C)}}
V.prototype.Yl=function(a,b){if(!(this.tc===q&&this.Oe===q)){this.Oe!==q&&Nj(this,a,this.Oe,h);this.tc!==q&&Nj(this,a,this.tc,s);var c=this.de;if(0===c){var d=this.Z;d instanceof Ne&&(d.type===ug&&d.Hc instanceof V)&&(c=d.Hc.pb)}a.lineWidth=c;a.lineJoin=this.Fn;a.lineCap=this.En;a.miterLimit=this.Gl;var e=s;this.Z&&(e=this.Z.Fj);var g=h;this.tc!==q&&this.Oe===q&&(g=s);c=s;d=this.Vz;if(d!==q){var k=c=h;a.setLineDash!==f?(a.setLineDash(d),a.lineDashOffset=this.Vc):a.webkitLineDash!==f?(a.webkitLineDash=
d,a.webkitLineDashOffset=this.Vc):a.mozDash!==f?(a.mozDash=d,a.mozDashOffset=this.Vc):k=s}var l=this.Sa;if(l!==q){if(l.aa===Lc)a.beginPath(),c&&!k?oj(a,l.Zb,l.ec,l.dd,l.md,d,this.Vc):(a.moveTo(l.Zb,l.ec),a.lineTo(l.dd,l.md)),this.Oe!==q&&a.fill(),this.tc!==q&&a.stroke();else if(l.aa===Oc){var m=l.Zb,n=l.ec,p=l.dd,l=l.md,r=Math.min(m,p),t=Math.min(n,l),m=Math.abs(p-m),n=Math.abs(l-n);this.Oe!==q&&a.fillRect(r,t,m,n);if(this.tc!==q){if(g&&e){var u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}c&&!k?(k=[[r,t],[r+m,t],[r+m,t+n],[r,t+n],[r,t]],a.beginPath(),sl(a,k,d,this.Vc),a.stroke()):a.strokeRect(r,t,m,n);g&&e&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2])}}else if(l.aa===Pc)m=l.Zb,n=l.ec,p=l.dd,l=l.md,r=Math.abs(p-m)/2,t=Math.abs(l-n)/2,m=Math.min(m,p)+r,n=Math.min(n,l)+t,a.beginPath(),a.moveTo(m,n-t),a.bezierCurveTo(m+N.ua*r,n-t,m+r,n-N.ua*t,m+r,n),a.bezierCurveTo(m+r,n+N.ua*t,m+N.ua*r,n+t,m,n+t),a.bezierCurveTo(m-N.ua*r,n+t,m-r,n+N.ua*
t,m-r,n),a.bezierCurveTo(m-r,n-N.ua*t,m-N.ua*r,n-t,m,n-t),a.closePath(),this.Oe!==q&&a.fill(),c&&!k&&(k=z.zb(),N.fe(m,n-t,m+N.ua*r,n-t,m+r,n-N.ua*t,m+r,n,0.5,k),N.fe(m+r,n,m+r,n+N.ua*t,m+N.ua*r,n+t,m,n+t,0.5,k),N.fe(m,n+t,m-N.ua*r,n+t,m-r,n+N.ua*t,m-r,n,0.5,k),N.fe(m-r,n,m-r,n-N.ua*t,m-N.ua*r,n-t,m,n-t,0.5,k),a.beginPath(),sl(a,k,d,this.Vc),z.Da(k)),this.tc!==q&&(g&&e&&(u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),g&&e&&(a.shadowOffsetX=
u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2]));else if(l.aa===Ec){for(var r=l.gk,t=r.length,v=0;v<t;v++){var A=r.n[v];a.beginPath();a.moveTo(A.la,A.ma);for(var C=A.Ha.n,K=C.length,I=q,R=0;R<K;R++){var M=C[R];switch(M.aa){case gd:a.moveTo(M.D,M.F);break;case Rc:a.lineTo(M.D,M.F);break;case hd:a.bezierCurveTo(M.Bg,M.Cg,M.wk,M.xk,M.ae,M.be);break;case id:a.quadraticCurveTo(M.Bg,M.Cg,M.ae,M.be);break;case jd:if(M.radiusX===M.radiusY)I=Math.PI/180,a.arc(M.Gm,M.Hm,M.radiusX,M.hg*I,(M.hg+M.Ah)*I,0>M.Ah);
else for(var I=ld(M,A),S=I.length,Z=0;Z<S;Z++){var X=I[Z];0===Z&&a.lineTo(X.x1,X.y1);a.bezierCurveTo(X.x2,X.y2,X.Jd,X.Kd,X.Hb,X.Ib)}break;case kd:I&&I.type===jd?(I=ld(I,A),I=I[I.length-1]||q,I!==q&&(m=I.Hb,p=I.Ib)):(m=I?I.D:A.la,p=I?I.F:A.ma);I=md(M,A,m,p);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],a.bezierCurveTo(X.x2,X.y2,X.Jd,X.Kd,X.Hb,X.Ib);break;default:z.m("Segment not of valid type")}M.Yg&&a.closePath();I=M}e?A.en?(A.pl===h&&this.Oe!==q?(a.fill(),g=h):g=s,this.tc!==q&&(g&&(u=[a.shadowOffsetX,a.shadowOffsetY,
a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),(!c||k)&&a.stroke(),g&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2]))):(g&&(u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),A.pl===h&&this.Oe!==q&&a.fill(),this.tc!==q&&(!c||k)&&a.stroke(),g&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2])):(A.pl===h&&this.Oe!==q&&a.fill(),this.tc!==q&&(!c||k)&&a.stroke())}if(c&&!k){u=g;k=l.gk;g=k.length;for(l=0;l<g;l++){m=
k.n[l];a.beginPath();p=z.zb();p.push([m.la,m.ma]);r=m.la;t=m.ma;v=r;A=t;C=m.Ha.n;K=C.length;for(R=0;R<K;R++){M=C[R];switch(M.aa){case gd:sl(a,p,d,this.Vc);p.length=0;p.push([M.D,M.F]);r=M.D;t=M.F;v=r;A=t;break;case Rc:p.push([M.D,M.F]);r=M.D;t=M.F;break;case hd:N.fe(r,t,M.Bg,M.Cg,M.wk,M.xk,M.ae,M.be,0.5,p);r=M.D;t=M.F;break;case id:N.Lo(r,t,M.Bg,M.Cg,M.ae,M.be,0.5,p);r=M.D;t=M.F;break;case jd:I=ld(M,m);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],N.fe(r,t,X.x2,X.y2,X.Jd,X.Kd,X.Hb,X.Ib,0.5,p),r=X.Hb,t=X.Ib;break;
case kd:I=md(M,m,r,t);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],N.fe(r,t,X.x2,X.y2,X.Jd,X.Kd,X.Hb,X.Ib,0.5,p),r=X.Hb,t=X.Ib;break;default:z.m("Segment not of valid type")}M.Yg&&(p.push([v,A]),sl(a,p,d,this.Vc))}sl(a,p,d,this.Vc);z.Da(p);this.tc!==q&&(u&&e&&(n=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),u&&e&&(a.shadowOffsetX=n[0],a.shadowOffsetY=n[1],a.shadowBlur=n[2]))}}}c&&(a.setLineDash!==f?(a.setLineDash(z.Eh),a.lineDashOffset=0):a.webkitLineDash!==
f?(a.webkitLineDash=z.Eh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0));if(this.xz){c=this.xz;gh(c,Infinity,Infinity);d=c.Ga;c.zc(0,0,d.width,d.height);a.save();d=this.Xc.lb.sb();a.beginPath();n=z.zb();n.push([d.la,d.ma]);u=d.la;e=d.ma;k=u;g=e;l=d.Ha.n;m=l.length;for(p=0;p<m;p++){r=l[p];switch(r.aa){case gd:rl(a,b,n,c);n.length=0;n.push([r.D,r.F]);u=r.D;e=r.F;k=u;g=e;break;case Rc:n.push([r.D,r.F]);u=r.D;e=r.F;break;case hd:N.fe(u,e,r.Bg,r.Cg,r.wk,r.xk,r.ae,r.be,0.5,n);
u=r.D;e=r.F;break;case id:N.Lo(u,e,r.Bg,r.Cg,r.ae,r.be,0.5,n);u=r.D;e=r.F;break;case jd:t=ld(r,d);v=t.length;for(A=0;A<v;A++)C=t[A],N.fe(u,e,C.x2,C.y2,C.Jd,C.Kd,C.Hb,C.Ib,0.5,n),u=C.Hb,e=C.Ib;break;case kd:t=md(r,d,u,e);v=t.length;for(A=0;A<v;A++)C=t[A],N.fe(u,e,C.x2,C.y2,C.Jd,C.Kd,C.Hb,C.Ib,0.5,n),u=C.Hb,e=C.Ib;break;default:z.m("Segment not of valid type")}r.Yg&&(n.push([k,g]),rl(a,b,n,c))}rl(a,b,n,c);z.Da(n);a.restore()}}}};
function sl(a,b,c,d){var e=0.001,g=c.length,k,l,m,n=b.length;if(!(2>n))if(k=b[0][0],l=b[0][1],2===n)oj(a,k,l,b[1][0],b[1][1],c,d);else{a.moveTo(k,l);for(var p,r,t,u=0,v=z.zb(),A=1;A<n;A++)p=b[A],e=p[0],m=p[1],p=e-k,k=m-l,0===p&&(p=0.001),r=k/p,k=Math.sqrt(p*p+k*k),v.push([p,r,k]),u+=k,k=e,l=m;k=b[0][0];l=b[0][1];b=0;n=h;e=c[b%g];A=0!==d;m=0;t=v[m];p=t[0];r=t[1];t=t[2];for(var C=0;0.1<=u;){0===C&&(e=c[b%g],b++,A&&(d%=e,e-=d,A=s));e>u&&(e=u);e>t?(C=e-t,e=t):C=0;var K=Math.sqrt(e*e/(1+r*r));0>p&&(K=
-K);k+=K;l+=r*K;n?a.lineTo(k,l):a.moveTo(k,l);u-=e;t-=e;if(0!==C){m++;if(m===v.length){z.Da(v);return}t=v[m];p=t[0];r=t[1];t=t[2];e=C}else n=!n}z.Da(v)}}V.prototype.getDocumentPoint=V.prototype.nb=function(a,b){b===f&&(b=new G);Sb(a)&&z.m("Spot must be real");var c=this.Ma,d=this.pb;b.q(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.se.Va(b);return b};
V.prototype.tj=function(a,b){var c=this.Sa;if(c===q||this.fill===q&&this.stroke===q)return s;var d=c.Nb,e=this.pb/2;c.type===Lc&&!b&&(e+=2);var g=z.hf();g.assign(d);g.Fg(e+2,e+2);if(!g.Ia(a))return z.Jc(g),s;d=e+1E-4;if(c.type===Lc){if(this.stroke===q)return s;g=(c.D-c.la)*(a.x-c.la)+(c.F-c.ma)*(a.y-c.ma);return 0>(c.la-c.D)*(a.x-c.D)+(c.ma-c.F)*(a.y-c.F)||0>g?s:N.qd(c.la,c.ma,c.D,c.F,e,a.x,a.y)}if(c.type===Oc){var k=c.la,l=c.ma,m=c.D,n=c.F,c=Math.min(k,m),p=Math.min(l,n),k=Math.abs(m-k),l=Math.abs(n-
l);g.x=c;g.y=p;g.width=k;g.height=l;if(this.fill===q){g.Fg(-d,-d);if(g.Ia(a))return s;g.Fg(d,d)}this.stroke!==q&&g.Fg(e,e);e=g.Ia(a);z.Jc(g);return e}if(c.type===Pc){k=c.la;l=c.ma;m=c.D;n=c.F;c=Math.min(k,m);p=Math.min(l,n);k=Math.abs(m-k);l=Math.abs(n-l);g=k/2;l/=2;c=a.x-(c+g);p=a.y-(p+l);if(this.fill===q){g-=d;l-=d;if(0>=g||0>=l||1>=c*c/(g*g)+p*p/(l*l))return s;g+=d;l+=d}this.stroke!==q&&(g+=e,l+=e);return 0>=g||0>=l?s:1>=c*c/(g*g)+p*p/(l*l)}if(c.type===Ec)return this.fill===q?td(c,a.x,a.y,e):c.Ia(a,
e,1<this.pb,b);z.m("Unknown Geometry type");return s};
V.prototype.gs=function(a,b,c,d){var e=this.Fa,g=this.de;a=Math.max(a,0);b=Math.max(b,0);var k;if(this.Dg)k=this.Sa.Nb;else{var l=this.Cb,m=N.yz[l];if(m===f){var n=N.ri[l];"string"===typeof n&&(n=N.ri[n]);"function"===typeof n?(m=n(q,100,100),N.yz[l]=m):z.m("Unsupported Figure:"+l)}k=m.Nb}var l=k.width,m=k.height,n=k.width,p=k.height;switch(sj(this)){case jj:d=c=0;break;case Gc:n=Math.max(a-g,0);p=Math.max(b-g,0);break;case lj:n=Math.max(a-g,0);d=0;break;case kj:c=0,p=Math.max(b-g,0)}isFinite(e.width)&&
(n=e.width);isFinite(e.height)&&(p=e.height);e=this.le;k=this.Ge;c=Math.max(c,k.width)-g;d=Math.max(d,k.height)-g;n=Math.min(e.width,n);p=Math.min(e.height,p);n=isFinite(n)?Math.max(c,n):Math.max(l,c);p=isFinite(p)?Math.max(d,p):Math.max(m,d);c=al(this);switch(c){case jj:break;case Gc:l=n;m=p;break;case Ig:c=Math.min(n/l,p/m);isFinite(c)||(c=1);l*=c;m*=c;break;default:z.m(c+" is not a valid geometryStretch.")}if(this.Dg){k=this.Xc;d=l;e=m;c=k.copy();k=k.Nb;d/=k.width;e/=k.height;isFinite(d)||(d=1);
isFinite(e)||(e=1);if(!(1===d&&1===e))switch(c.type){case Lc:case Oc:case Pc:c.la*=d;c.ma*=e;c.D*=d;c.F*=e;break;case Ec:k=c.lb;for(var r=k.length,t=0;t<r;t++){var u=k.n[t];u.la*=d;u.ma*=e;for(var u=u.Ha,v=u.length,A=0;A<v;A++){var C=u.n[A];switch(C.type){case Rc:case gd:C.D*=d;C.F*=e;break;case hd:C.ob*=d;C.Gb*=e;C.Vd*=d;C.Wd*=e;C.D*=d;C.F*=e;break;case id:C.ob*=d;C.Gb*=e;C.D*=d;C.F*=e;break;case jd:C.Ca*=d;C.Ka*=e;C.radiusX*=d;C.radiusY!==f&&(C.radiusY*=e);break;case kd:C.D*=d;C.F*=e;C.radiusX*=
d;C.radiusY*=e;break;default:z.m("Unknown Segment type: "+C.type)}}}}this.Sa=c}else if(this.Sa===q||this.Sa.Ct!==a-g||this.Sa.Bt!==b-g)this.Sa=N.makeGeometry(this,l,m);k=this.Sa.Nb;Infinity===a||Infinity===b?pj(this,k.x-g/2,k.y-g/2,0===a&&0===l?0:k.width+g,0===b&&0===m?0:k.height+g):pj(this,-(g/2),-(g/2),n+g,p+g)};
function el(a,b,c){if(fi(a)!==s){a.Dc.Ua();var d=a.de;if(0===d){var e=a.Z;e instanceof Ne&&(e.type===ug&&e.Hc instanceof V)&&(d=e.Hc.pb)}d*=a.Lb;pj(a,-(d/2),-(d/2),b+d,c+d);b=a.Dc;c=a.le;d=a.Ge;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Dc.freeze();a.Dc.W()||z.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Dc.toString());vj(a,s)}}
function al(a){var b=a.jv;return a.Dg?b===Hg?Gc:b:b===Hg?N.yz[a.Cb].jc:b}V.prototype.sj=function(a,b,c,d){Gj(this,a,b,c,d)};V.prototype.getNearestIntersectionPoint=V.prototype.lo=function(a,b,c){return this.Sr(a.x,a.y,b.x,b.y,c)};
V.prototype.Sr=function(a,b,c,d,e){var g=this.transform,k=1/(g.m11*g.m22-g.m12*g.m21),l=g.m22*k,m=-g.m12*k,n=-g.m21*k,p=g.m11*k,r=k*(g.m21*g.dy-g.m22*g.dx),t=k*(g.m12*g.dx-g.m11*g.dy),g=a*l+b*n+r,k=a*m+b*p+t,l=c*l+d*n+r,m=c*m+d*p+t,n=this.pb/2,r=this.Sa;r===q&&(gh(this,Infinity,Infinity),r=this.Sa);t=r.Nb;p=s;if(r.type===Lc)if(1.5>=this.pb)p=N.Lg(r.Zb,r.ec,r.dd,r.md,g,k,l,m,e);else{var u,v;r.Zb===r.dd?(u=n,v=0):(b=(r.md-r.ec)/(r.dd-r.Zb),v=n/Math.sqrt(1+b*b),u=v*b);d=z.zb();b=new G;N.Lg(r.Zb+u,r.ec+
v,r.dd+u,r.md+v,g,k,l,m,b)&&d.push(b);b=new G;N.Lg(r.Zb-u,r.ec-v,r.dd-u,r.md-v,g,k,l,m,b)&&d.push(b);b=new G;N.Lg(r.Zb+u,r.ec+v,r.Zb-u,r.ec-v,g,k,l,m,b)&&d.push(b);b=new G;N.Lg(r.dd+u,r.md+v,r.dd-u,r.md-v,g,k,l,m,b)&&d.push(b);b=d.length;if(0===b)return z.Da(d),s;p=h;v=Infinity;for(u=0;u<b;u++){var l=d[u],A=(l.x-g)*(l.x-g)+(l.y-k)*(l.y-k);A<v&&(v=A,e.x=l.x,e.y=l.y)}z.Da(d)}else if(r.type===Oc)b=t.x-n,p=N.lo(b,t.y-n,t.x+t.width+n,t.y+t.height+n,g,k,l,m,e);else if(r.type===Pc)a:if(b=t.copy().Fg(n,n),
0===b.width)p=N.Lg(b.x,b.y,b.x,b.y+b.height,g,k,l,m,e);else if(0===b.height)p=N.Lg(b.x,b.y,b.x+b.width,b.y,g,k,l,m,e);else{a=b.width/2;var C=b.height/2;d=b.x+a;b=b.y+C;c=9999;g!==l&&(c=(k-m)/(g-l));if(9999>Math.abs(c)){p=k-b-c*(g-d);if(0>a*a*c*c+C*C-p*p){e.x=NaN;e.y=NaN;p=s;break a}n=Math.sqrt(a*a*c*c+C*C-p*p);l=(-(a*a*c*p)+a*C*n)/(C*C+a*a*c*c)+d;a=(-(a*a*c*p)-a*C*n)/(C*C+a*a*c*c)+d;m=c*(l-d)+p+b;b=c*(a-d)+p+b;d=Math.abs((g-l)*(g-l))+Math.abs((k-m)*(k-m));k=Math.abs((g-a)*(g-a))+Math.abs((k-b)*(k-
b));d<k?(e.x=l,e.y=m):(e.x=a,e.y=b)}else{l=C*C;m=g-d;l-=l/(a*a)*m*m;if(0>l){e.x=NaN;e.y=NaN;p=s;break a}n=Math.sqrt(l);m=b+n;b-=n;d=Math.abs(m-k);k=Math.abs(b-k);d<k?(e.x=g,e.y=m):(e.x=g,e.y=b)}p=h}else if(r.type===Ec){var K,I,R,t=z.O();u=l-g;v=m-k;v=u*u+v*v;e.x=l;e.y=m;for(u=0;u<r.lb.count;u++){var M=r.lb.n[u],S=M.Ha;K=M.la;I=M.ma;for(var Z=K,X=I,ea,ia,W=0;W<S.count;W++){ea=S.n[W];ia=ea.type;A=ea.D;R=ea.F;var xa=s;switch(ia){case gd:Z=A;X=R;break;case Rc:xa=tl(K,I,A,R,g,k,l,m,t);break;case hd:xa=
ea.ob;ia=ea.Gb;var Oa=ea.Vd,Qa=ea.Wd,xa=N.Br(K,I,xa,ia,Oa,Qa,A,R,g,k,l,m,0.5,t);break;case id:xa=(K+2*ea.ob)/3;ia=(I+2*ea.Gb)/3;Oa=(2*ea.ob+A)/3;Qa=(2*ea.ob+A)/3;xa=N.Br(K,I,xa,ia,Oa,Qa,A,R,g,k,l,m,0.5,t);break;case jd:case kd:R=ea.type===jd?ld(ea,M):md(ea,M,K,I);ia=R.length;for(Oa=0;Oa<ia;Oa++)C=R[Oa],0===Oa&&tl(K,I,C.x1,C.y1,g,k,l,m,t)&&(A=ul(g,k,t,v,e),A<v&&(v=A,p=h)),N.Br(C.x1,C.y1,C.x2,C.y2,C.Jd,C.Kd,C.Hb,C.Ib,g,k,l,m,0.5,t)&&(A=ul(g,k,t,v,e),A<v&&(v=A,p=h));A=C.Hb;R=C.Ib;break;default:z.m("Unknown Segment type: "+
ea.type)}K=A;I=R;xa&&(A=ul(g,k,t,v,e),A<v&&(v=A,p=h));ea.Zr&&(A=Z,R=X,tl(K,I,A,R,g,k,l,m,t)&&(A=ul(g,k,t,v,e),A<v&&(v=A,p=h)))}}g=c-a;k=d-b;b=Math.sqrt(g*g+k*k);0!==b&&(g/=b,k/=b);e.x-=g*n;e.y-=k*n;z.B(t)}else z.m("Invalid Geometry type");if(!p)return s;this.transform.Va(e);return h};function ul(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function tl(a,b,c,d,e,g,k,l,m){var n=s,p=(e-k)*(b-d)-(g-l)*(a-c);if(0===p)return s;m.x=((e*l-g*k)*(a-c)-(e-k)*(a*d-b*c))/p;m.y=((e*l-g*k)*(b-d)-(g-l)*(a*d-b*c))/p;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(m.y>e||N.La(m.y,e))&&(m.y<a||N.La(m.y,a)))n=h}else if(e=a<c?a:c,a=a<c?c:a,(m.x>e||N.La(m.x,e))&&(m.x<a||N.La(m.x,a)))n=h;return n}
V.prototype.containedInRect=V.prototype.Sl=function(a,b){if(b===f)return a.uj(this.ya);var c=this.Sa;c===q&&(gh(this,Infinity,Infinity),c=this.Sa);var c=c.Nb,d=this.pb/2,e=s,g=z.O();g.q(c.x-d,c.y-d);a.Ia(b.Va(g))&&(g.q(c.x-d,c.bottom+d),a.Ia(b.Va(g))&&(g.q(c.right+d,c.bottom+d),a.Ia(b.Va(g))&&(g.q(c.right+d,c.y-d),a.Ia(b.Va(g))&&(e=h))));z.B(g);return e};
V.prototype.intersectsRect=V.prototype.xf=function(a,b){if(this.Sl(a,b)||b===f&&(b=this.transform,a.uj(this.ya)))return h;var c=z.Ng();c.set(b);c.az();var d=a.left,e=a.right,g=a.top,k=a.bottom,l=z.O();l.q(d,g);c.Va(l);if(this.tj(l,h))return z.B(l),h;l.q(e,g);c.Va(l);if(this.tj(l,h))return z.B(l),h;l.q(d,k);c.Va(l);if(this.tj(l,h))return z.B(l),h;l.q(e,k);c.Va(l);if(this.tj(l,h))return z.B(l),h;var m=z.O(),n=z.O();c.set(b);c.rz(this.transform);c.az();m.x=e;m.y=g;m.transform(c);l.x=d;l.y=g;l.transform(c);
var p=s;vl(this,l,m,n)?p=h:(l.x=e,l.y=k,l.transform(c),vl(this,l,m,n)?p=h:(m.x=d,m.y=k,m.transform(c),vl(this,l,m,n)?p=h:(l.x=d,l.y=g,l.transform(c),vl(this,l,m,n)&&(p=h))));z.B(l);z.Ce(c);z.B(m);z.B(n);return p};function vl(a,b,c,d){if(!a.lo(b,c,d))return s;a=b.x;b=b.y;var e=c.x,g=c.y;c=d.x;d=d.y;if(a===e){var k;b<g?(k=b,a=g):(k=g,a=b);return d>=k&&d<=a}a<e?(k=a,a=e):k=e;return c>=k&&c<=a}
V.prototype.MC=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d++){var g=a[d];if(b.Kr(g[0],g[1])>e)return h}return s}if(c&&this.fill!==q&&this.tj(a,h))return h;var e=a.Lk(b);b=e;1.5<this.pb&&(e=this.pb/2+Math.sqrt(e),e*=e);var g=this.Sa;g===q&&(gh(this,Infinity,Infinity),g=this.Sa);if(!c){var k=g.Nb,l=k.x,m=k.y,n=k.x+k.width,k=k.y+k.height;if(jb(a.x,a.y,l,m)<=e&&jb(a.x,a.y,n,m)<=e&&jb(a.x,a.y,l,k)<=e&&jb(a.x,a.y,n,k)<=e)return h}l=g.Zb;m=g.ec;n=g.dd;k=g.md;if(g.type===Lc){if(c=cb(a.x,
a.y,l,m,n,k),g=(l-n)*(a.x-n)+(m-k)*(a.y-k),c<=(0<=(n-l)*(a.x-l)+(k-m)*(a.y-m)&&0<=g?e:b))return h}else{if(g.type===Oc)return b=s,c&&(b=cb(a.x,a.y,l,m,l,k)<=e||cb(a.x,a.y,l,m,n,m)<=e||cb(a.x,a.y,n,m,n,k)<=e||cb(a.x,a.y,l,k,n,k)<=e),b;if(g.type===Pc){b=a.x-(l+n)/2;var g=a.y-(m+k)/2,p=Math.abs(n-l)/2,r=Math.abs(k-m)/2;if(0===p||0===r)return c=cb(a.x,a.y,l,m,n,k),c<=e?h:s;if(c){if(a=N.CG(p,r,b,g),a*a<=e)return h}else return jb(b,g,-p,0)>=e||jb(b,g,0,-r)>=e||jb(b,g,0,r)>=e||jb(b,g,p,0)>=e?s:h}else if(g.type===
Ec){k=g.Nb;l=k.x;m=k.y;n=k.x+k.width;k=k.y+k.height;if(a.x>n&&a.x<l&&a.y>k&&a.y<m&&cb(a.x,a.y,l,m,l,k)>e&&cb(a.x,a.y,l,m,n,m)>e&&cb(a.x,a.y,n,k,l,k)>e&&cb(a.x,a.y,n,k,n,m)>e)return s;b=Math.sqrt(e);if(c){if(this.fill===q?td(g,a.x,a.y,b):g.Ia(a,b,h))return h}else{c=g.lb;for(b=0;b<c.count;b++){l=c.n[b];p=l.la;r=l.ma;if(a.Kr(p,r)>e)return s;m=l.Ha.n;n=m.length;for(k=0;k<n;k++){var t=m[k];switch(t.type){case gd:case Rc:p=t.D;r=t.F;if(a.Kr(p,r)>e)return s;break;case hd:g=z.zb();N.fe(p,r,t.ob,t.Gb,t.Vd,
t.Wd,t.D,t.F,0.8,g);p=d(g,a);z.Da(g);if(p)return s;p=t.D;r=t.F;if(a.Kr(p,r)>e)return s;break;case id:g=z.zb();N.Lo(p,r,t.ob,t.Gb,t.D,t.F,0.8,g);p=d(g,a);z.Da(g);if(p)return s;p=t.D;r=t.F;if(a.Kr(p,r)>e)return s;break;case jd:case kd:var t=t.type===jd?ld(t,l):md(t,l,p,r),u=t.length,v=q,g=z.zb();for(b=0;b<u;b++)if(v=t[b],g.length=0,N.fe(v.x1,v.y1,v.x2,v.y2,v.Jd,v.Kd,v.Hb,v.Ib,0.8,g),d(g,a))return z.Da(g),s;z.Da(g);v!==q&&(p=v.Hb,r=v.Ib);break;default:z.m("Unknown Segment type: "+t.type)}}}return h}}}return s};
z.g(V,"geometry",V.prototype.Xc);z.defineProperty(V,{Xc:"geometry"},function(){return this.ck?this.ck:this.Sa},function(a){var b=this.Sa;if(b!==a){a!==q?(x&&z.l(a,Dc,V,"geometry"),this.ck=this.Sa=a.freeze()):this.ck=this.Sa=q;var c=this.Z;c&&(c.Wi=NaN);this.Dg=h;this.ca();this.i("geometry",b,a)}});z.g(V,"geometryString",V.prototype.UC);
z.defineProperty(V,{UC:"geometryString"},function(){return this.Xc.toString()},function(a){var b=Uc(a);a=b.normalize();this.Xc=b;var b=z.O(),c=this.position;c.W()?b.q(c.x-a.x,c.y-a.y):b.q(-a.x,-a.y);this.position=b;z.B(b)});z.defineProperty(V,{bz:"isGeometryPositioned"},w("Np"),function(a){x&&z.j(a,"boolean",V,"isGeometryPositioned");var b=this.Np;b!==a&&(this.Np=a,this.ca(),this.i("isGeometryPositioned",b,a))});V.prototype.Yf=function(){this.Dg?this.ck=q:this.Sa=q;this.ca()};z.g(V,"fill",V.prototype.fill);
z.defineProperty(V,{fill:"fill"},w("Oe"),function(a){var b=this.Oe;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.Oe=a,this.xa(),this.i("fill",b,a)});z.g(V,"stroke",V.prototype.stroke);z.defineProperty(V,{stroke:"stroke"},w("tc"),function(a){var b=this.tc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.tc=a,this.xa(),this.i("stroke",b,a)});z.g(V,"strokeWidth",V.prototype.pb);
z.defineProperty(V,{pb:"strokeWidth"},w("de"),function(a){var b=this.de;if(b!==a&&(x&&z.p(a,V,"strokeWidth"),0<=a)){this.de=a;this.ca();var c=this.Z;c&&(c.Wi=NaN);this.i("strokeWidth",b,a)}});z.g(V,"strokeCap",V.prototype.yE);z.defineProperty(V,{yE:"strokeCap"},w("En"),function(a){var b=this.En;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.En=a,this.xa(),this.i("strokeCap",b,a)):z.ia(a,'"butt", "round", or "square"',V,"strokeCap"))});z.g(V,"strokeJoin",V.prototype.ZH);
z.defineProperty(V,{ZH:"strokeJoin"},w("Fn"),function(a){var b=this.Fn;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.Fn=a,this.xa(),this.i("strokeJoin",b,a)):z.ia(a,'"miter", "bevel", or "round"',V,"strokeJoin"))});z.g(V,"strokeMiterLimit",V.prototype.$H);z.defineProperty(V,{$H:"strokeMiterLimit"},w("Gl"),function(a){var b=this.Gl;if(b!==a&&(x&&z.p(a,V,"strokeMiterLimit"),0<a)){this.Gl=a;this.xa();var c=this.Z;c&&(c.Wi=NaN);this.i("strokeMiterLimit",b,a)}});
z.g(V,"strokeDashArray",V.prototype.Vz);z.defineProperty(V,{Vz:"strokeDashArray"},w("Fl"),function(a){var b=this.Fl;if(b!==a){a!==q&&!(a instanceof Array)&&z.Rb(a,"Array",V,"strokeDashArray:val");if(a!==q)for(var c=a.length,d=0;d<c;d++)("number"!==typeof a[d]||0>=a[d])&&z.m("strokeDashArray:val "+a[d]+" is a negative number or not a number.");this.Fl=a;this.xa();this.i("strokeDashArray",b,a)}});z.g(V,"strokeDashOffset",V.prototype.YH);
z.defineProperty(V,{YH:"strokeDashOffset"},w("Vc"),function(a){var b=this.Vc;b!==a&&(x&&z.p(a,V,"strokeDashOffset"),0<a&&(this.Vc=a,this.xa(),this.i("strokeDashOffset",b,a)))});z.g(V,"figure",V.prototype.Cb);z.defineProperty(V,{Cb:"figure"},w("Wm"),function(a){var b=this.Wm;if(b!==a){x&&z.j(a,"string",V,"figure");var c=N.ri[a];"function"===typeof c?c=a:(c=N.ri[a.toLowerCase()])||z.m("Unknown Shape.figure: "+a);if(b!==c){if(a=this.Z)a.Wi=NaN;this.Wm=c;this.Dg=s;this.Yf();this.i("figure",b,c)}}});
z.g(V,"toArrow",V.prototype.vm);z.defineProperty(V,{vm:"toArrow"},w("Gn"),function(a){var b=this.Gn;a===h?a="Standard":a===s&&(a="None");if(b!==a){x&&z.j(a,"string",V,"toArrow");var c=N.co(a);c instanceof Dc?c=a:(c=N.co(a.toLowerCase()))||z.m("Unknown Shape.toArrow: "+a);b!==c&&(this.Gn=c,this.Dg=s,this.Yf(),wl(this,c),this.i("toArrow",b,c))}});z.g(V,"fromArrow",V.prototype.gv);
z.defineProperty(V,{gv:"fromArrow"},w("Ym"),function(a){var b=this.Ym;a===h?a="Standard":a===s&&(a="None");if(b!==a){x&&z.j(a,"string",V,"fromArrow");var c=N.co(a);c instanceof Dc?c=a:(c=N.co(a.toLowerCase()))||z.m("Unknown Shape.fromArrow: "+a);b!==c&&(this.Ym=c,this.Dg=s,this.Yf(),wl(this,c),this.i("fromArrow",b,c))}});
function wl(a,b){var c=a.h;if(!(c!==q&&c.Aa.jb)){a.As=xl;c=jc;switch(b){case "halfarrowtop":c=gc;break;case "halftriangletop":c=gc;break;case "openrighttriangletop":c=gc;break;case "opentriangletop":c=gc}"None"!==a.Gn?(a.ef=-1,a.oj=c):"None"!==a.Ym&&(a.ef=0,a.oj=new O(1-c.x,c.y))}}z.defineProperty(V,{G:"spot1"},w("bi"),function(a){z.l(a,O,V,"spot1");var b=this.bi;b.N(a)||(this.bi=a=a.Y(),this.ca(),this.i("spot1",b,a))});
z.defineProperty(V,{H:"spot2"},w("ci"),function(a){z.l(a,O,V,"spot2");var b=this.ci;b.N(a)||(this.ci=a=a.Y(),this.ca(),this.i("spot2",b,a))});z.defineProperty(V,{nc:"parameter1"},w("Bq"),function(a){var b=this.Bq;b!==a&&(this.Bq=a,this.ca(),this.i("parameter1",b,a))});z.defineProperty(V,{ss:"parameter2"},w("Cq"),function(a){var b=this.Cq;b!==a&&(this.Cq=a,this.ca(),this.i("parameter2",b,a))});
z.A(V,{Ma:"naturalBounds"},function(){if(this.Sa!==q)return this.Rc.assign(this.Sa.Nb),this.Rc;var a=this.Fa;return new H(0,0,a.width,a.height)});z.g(V,"isRectangular",V.prototype.mH);z.defineProperty(V,{mH:"isRectangular"},w("Sp"),function(a){var b=this.Sp;b!==a&&(x&&z.j(a,"boolean",V,"isRectangular"),this.Sp=a,this.ca(),this.i("isRectangular",b,a))});z.g(V,"pathObject",V.prototype.xz);
z.defineProperty(V,{xz:"pathObject"},w("Eq"),function(a){var b=this.Eq;b!==a&&(x&&z.l(a,U,V,"pathObject"),this.Eq=a,this.xa(),this.i("pathObject",b,a))});z.g(V,"geometryStretch",V.prototype.jv);z.defineProperty(V,{jv:"geometryStretch"},w("Hp"),function(a){var b=this.Hp;b!==a&&(z.wb(a,U,V,"geometryStretch"),this.Hp=a,this.i("geometryStretch",b,a))});z.g(V,"interval",V.prototype.si);
z.defineProperty(V,{si:"interval"},w("Lp"),function(a){var b=this.Lp;x&&z.p(a,V,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.Lp=a,this.ca(),this.i("interval",b,a))});function ya(){U.call(this);this.Qd="";this.tc="black";this.Nh="13px sans-serif";this.Cd="start";this.Pp=h;this.sl=this.tl=s;this.Jl=yl;this.Lt=this.aq=0;this.Xm=this.xx=this.yx=q;this.bq={};this.Ap=s;this.Ne=this.hj=this.jr=q}z.ea("TextBlock",ya);z.Pa(ya,U);
ya.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.Qd=this.Qd;a.tc=this.tc;a.Nh=this.Nh;a.Cd=this.Cd;a.Pp=this.Pp;a.tl=this.tl;a.sl=this.sl;a.Jl=this.Jl;a.aq=this.aq;a.Lt=this.Lt;a.yx=this.yx;a.xx=this.xx;a.Xm=this.Xm;a.bq=this.bq;a.Ap=this.Ap;a.jr=this.jr;a.hj=this.hj;a.Ne=this.Ne};ya.prototype.toString=function(){return 22<this.Qd.length?'TextBlock("'+this.Qd.substring(0,20)+'"...)':'TextBlock("'+this.Qd+'")'};var zl;ya.None=zl=z.w(ya,"None",0);var Al;
ya.WrapFit=Al=z.w(ya,"WrapFit",1);var yl;ya.WrapDesiredSize=yl=z.w(ya,"WrapDesiredSize",2);ya.prototype.ca=function(){U.prototype.ca.call(this);this.xx=this.yx=q};z.g(ya,"font",ya.prototype.font);z.defineProperty(ya,{font:"font"},w("Nh"),function(a){var b=this.Nh;b!==a&&(x&&z.j(a,"string",ya,"font"),this.Nh=a,this.Xm=q,this.ca(),this.i("font",b,a))});z.g(ya,"text",ya.prototype.text);
z.defineProperty(ya,{text:"text"},w("Qd"),function(a){var b=this.Qd;a=a!==q&&a!==f?a.toString():"";b!==a&&(this.Qd=a,this.ca(),this.i("text",b,a))});z.g(ya,"textAlign",ya.prototype.textAlign);z.defineProperty(ya,{textAlign:"textAlign"},w("Cd"),function(a){var b=this.Cd;b!==a&&(x&&z.j(a,"string",ya,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Cd=a,this.xa(),this.i("textAlign",b,a)):z.ia(a,'"start", "end", "left", "right", or "center"',ya,"textAlign"))});
z.A(ya,{Ma:"naturalBounds"},function(){if(!this.Rc.W()){var a=Bl(this,this.Qd,{},999999).width,b=Cl(this,a,{}),c=this.Fa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);lb(this.Rc,a,b)}return this.Rc});z.g(ya,"isMultiline",ya.prototype.tv);z.defineProperty(ya,{tv:"isMultiline"},w("Pp"),function(a){var b=this.Pp;b!==a&&(x&&z.j(a,"boolean",ya,"isMultiline"),this.Pp=a,this.ca(),this.i("isMultiline",b,a))});z.g(ya,"isUnderline",ya.prototype.oH);
z.defineProperty(ya,{oH:"isUnderline"},w("tl"),function(a){var b=this.tl;b!==a&&(x&&z.j(a,"boolean",ya,"isUnderline"),this.tl=a,this.xa(),this.i("isUnderline",b,a))});z.g(ya,"isStrikethrough",ya.prototype.nH);z.defineProperty(ya,{nH:"isStrikethrough"},w("sl"),function(a){var b=this.sl;b!==a&&(x&&z.j(a,"boolean",ya,"isStrikethrough"),this.sl=a,this.xa(),this.i("isStrikethrough",b,a))});z.g(ya,"wrap",ya.prototype.gA);
z.defineProperty(ya,{gA:"wrap"},w("Jl"),function(a){var b=this.Jl;b!==a&&(x&&z.wb(a,ya,ya,"wrap"),this.Jl=a,this.ca(),this.i("wrap",b,a))});z.g(ya,"stroke",ya.prototype.stroke);z.defineProperty(ya,{stroke:"stroke"},w("tc"),function(a){var b=this.tc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Nd))a instanceof Nd&&a.freeze(),this.tc=a,this.xa(),this.i("stroke",b,a)});z.A(ya,{uD:"lineCount"},w("aq"));z.g(ya,"editable",ya.prototype.av);
z.defineProperty(ya,{av:"editable"},w("Ap"),function(a){var b=this.Ap;b!==a&&(x&&z.j(a,"boolean",ya,"editable"),this.Ap=a,this.i("editable",b,a))});z.g(ya,"textEditor",ya.prototype.Zz);z.defineProperty(ya,{Zz:"textEditor"},w("jr"),function(a){var b=this.jr;b!==a&&(a instanceof HTMLElement||z.m("textEditor must be an HTMLElement"),this.jr=a,this.i("textEditor",b,a))});z.g(ya,"errorFunction",ya.prototype.Lr);
z.defineProperty(ya,{Lr:"errorFunction"},w("Ne"),function(a){var b=this.Ne;b!==a&&(a!==q&&z.j(a,"function",ya,"errorFunction"),this.Ne=a,this.i("errorFunction",b,a))});
ya.prototype.Yl=function(a,b){if(this.tc!==q&&0!==this.Qd.length){var c=this.Nh;if(c!==q){var d=this.Ma.width,e=hh(this);a.yw!==c&&(a.font=c,a.yw=c);a.textAlign=this.Cd;Nj(this,a,this.tc,h);(this.tl||this.sl)&&Nj(this,a,this.tc,s);var c=this.bq,g=0,k=s,l=z.ic(0,0);this.se.Va(l);var m=z.ic(0,e);this.se.Va(m);var n=l.Lk(m);z.B(l);z.B(m);l=b.scale;8>n*l*l&&(k=h);n=c.rj.length;for(l=0;l<n;l++){var p=c.rj[l],m=c.Sn[l];p>d&&(p=d);var r=m,m=a,t=g,u=d,v=e,A=0;k?("start"===this.Cd||"left"===this.Cd?A=0:"end"===
this.Cd||"right"===this.Cd?A=u-p:"center"===this.Cd?A=(u-p)/2:z.m("textAlign must be start, end, left, right, or center"),m.fillRect(0+A,t+0.25*v,p,1)):("start"===this.Cd||"left"===this.Cd?A=0:"end"===this.Cd||"right"===this.Cd?A=u:"center"===this.Cd?A=u/2:z.m("textAlign must be start, end, left, right, or center"),m.fillText(r,0+A,t+v-0.25*v),r=v/20|0,this.tl&&("end"===this.Cd||"right"===this.Cd?A-=p:"center"===this.Cd&&(A-=p/2),m.beginPath(),m.lineWidth=r,m.moveTo(0+A,t+v-0.2*v),m.lineTo(0+A+p,
t+v-0.2*v),m.stroke()),this.sl&&(m.beginPath(),m.lineWidth=r,t=t+v-v/2.2|0,0!==r%2&&(t+=0.5),m.moveTo(0,t),m.lineTo(0+p,t),m.stroke()));g+=e}}}};
ya.prototype.gs=function(a,b,c,d){var e={},g=0,k=0;if(isNaN(this.Fa.width)){g=this.Qd;if(0===g.length)g=0;else if(this.tv){for(var l=k=0,m=s,n={Ch:0};!m;){var p=Dl(g,l,n);-1===p&&(p=g.length,m=h);l=El(g.substr(l,p-l).replace(/^\s+|\s+$/g,""),this.Nh);l>k&&(k=l);l=n.Ch}g=k}else k=Dl(g,0,{}),0<=k&&(g=g.substr(0,k)),g=l=El(g,this.Nh);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.Fa.width;this.ha&&(g=Math.min(g,this.ha.le.width),g=Math.max(g,this.ha.Ge.width));k=Cl(this,g,e);k=isNaN(this.Fa.height)?
Math.min(k,b/this.scale):this.Fa.height;if(this.gA===Al||isNaN(this.Fa.width))g=e.xi,isNaN(this.Fa.width)&&(g=Math.max(8,g));g=Math.max(c,g);k=Math.max(d,k);lb(this.Rc,g,k);pj(this,0,0,g,k);this.bq=e};ya.prototype.sj=function(a,b,c,d){Gj(this,a,b,c,d)};
function Bl(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");c.xi===f&&(c.xi=0);c.rj===f&&(c.rj=[]);c.Sn===f&&(c.Sn=[]);var e=0,g,k=a.Nh;if(a.Jl===zl)return c.Ch=1,c.xi=El(b,k),c.rj.push(c.xi),c.Sn.push(b),new qa(c.xi,hh(a));a=hh(a);var l=b,m=0;0===l.length&&(m=1,c.rj.push(0),c.Sn.push(l));for(;0<l.length;){for(var n=Fl(l),l=l.substr(n.length);El(n,k)>d;){var p=1;b=El(n.substr(0,p),k);for(g=0;b<=d;)p++,g=b,b=El(n.substr(0,p),k);1===p?(c.rj[m]=b,e=Math.max(e,b)):(c.rj[m]=g,e=Math.max(e,g));p--;1>p&&(p=1);c.Sn[m]=
n.substr(0,p);m++;n=n.substr(p)}g=Fl(l);for(b=El(n+g,k);0<g.length&&b<=d;)n+=g,l=l.substr(g.length),g=Fl(l),b=El((n+g).replace(/^\s+|\s+$/g,""),k);n=n.replace(/^\s+|\s+$/g,"");""!==n&&(0===g.length?(c.rj.push(b),e=Math.max(e,b)):(g=El(n,k),c.rj.push(g),e=Math.max(e,g)),c.Sn.push(n),m++)}c.Ch=m;c.xi=Math.max(c.xi,e);return new qa(c.xi,a*c.Ch)}function Fl(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function El(a,b){z.Pv!==b&&(z.Ov.font=b,z.Pv=b);return z.Ov.measureText(a).width}function hh(a){if(a.Xm!==q)return a.Xm;var b=a.Nh;z.Pv!==b&&(z.Ov.font=b,z.Pv=b);var c=0;z.Ty[b]!==f&&5E3>z.PC?c=z.Ty[b]:(c=1.3*z.Ov.measureText("M").width,z.Ty[b]=c,z.PC++);return a.Xm=c}function Dl(a,b,c){c.Ch===f&&(c.Ch=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.Ch="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function Cl(a,b,c){var d=a.Qd,e=hh(a);if(0===d.length)return c.xi=0,a.aq=1,e;if(!a.tv){var g=Dl(d,0,{});0<=g&&(d=d.substr(0,g))}for(var k=g=0,l=0,m=-1,n={Ch:0},p=s;!p;)m=Dl(d,l,n),-1===m&&(m=d.length,p=h),l<=m&&(l=d.substr(l,m-l),a.Jl!==zl?(c.Ch=0,l=Bl(a,l,c,b),g+=l.height,k+=c.Ch):(Bl(a,l,c,Infinity),g+=e,k++)),l=n.Ch;a.aq=k;return a.Lt=g}z.g(ya,"textValidation",ya.prototype.Ks);
z.defineProperty(ya,{Ks:"textValidation"},w("hj"),function(a){var b=this.hj;b!==a&&(a!==q&&z.j(a,"function",ya,"textValidation"),this.hj=a,this.i("textValidation",b,a))});function lk(){U.call(this);this.Vg=q;this.er="";this.fj=(new H(NaN,NaN,NaN,NaN)).freeze();this.$m=Gc;this.hr=this.Ne=q;this.Dt=this.pn=s}z.ea("Picture",lk);z.Pa(lk,U);lk.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.element=this.Vg;a.er=this.er;a.fj.assign(this.fj);a.$m=this.$m;a.Ne=this.Ne};
lk.prototype.toString=function(){return"Picture("+this.source+")#"+z.fc(this)};z.g(lk,"element",lk.prototype.element);
z.defineProperty(lk,{element:"element"},w("Vg"),function(a){var b=this.Vg;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||z.m("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a instanceof HTMLCanvasElement?this.Dt=h:(this.Dt=s,a.onerror=function(a){c.Ne!==q&&c.Ne(c,a)});this.Vg=a;a.complete===h||a.complete===f?(this.pn=h,this.Fa.W()||(vj(this,s),this.ca())):(z.dA.push(this),z.Ev===q&&(z.Ev=setInterval(function(){for(var a=
[],b=z.dA,c=b.length,k=0;k<c;k++){var l=b[k],m;m=l;var n=m.Vg;if(n)if(n.complete){m.pn=h;m.Fa.W()||(vj(m,s),m.ca());if(m.h)m.Fa.W()||m.h.vc(),m.h.xa();else{m=z.DC;var p=m.length;if(0===p)for(var p=document.getElementsByTagName("canvas"),r=p.length,n=0;n<r;n++){var t=p[n];t.parentElement&&t.parentElement.fa&&m.push(t.parentElement.fa)}p=m.length;for(n=0;n<p;n++)m[n].xa()}m=h}else m=s;else m=h;m||a.push(l)}0===a.length&&(clearInterval(z.Ev),z.Ev=q);z.dA=a},200)));this.i("element",b,a);this.xa()}});
z.g(lk,"source",lk.prototype.source);z.defineProperty(lk,{source:"source"},w("er"),function(a){var b=this.er;if(b!==a){z.j(a,"string",lk,"source");this.er=a;var c=z.eH;if(c[a]!==f)this.element=c[a];else{var d=document.createElement("img");d.src=a;c[a]=d;d instanceof HTMLImageElement&&(this.element=d)}this.xa();this.i("source",b,a)}});z.g(lk,"sourceRect",lk.prototype.yh);
z.defineProperty(lk,{yh:"sourceRect"},w("fj"),function(a){var b=this.fj;b.N(a)||(z.l(a,H,lk,"sourceRect"),this.fj=a=a.Y(),this.xa(),this.i("sourceRect",b,a))});z.g(lk,"imageStretch",lk.prototype.fH);z.defineProperty(lk,{fH:"imageStretch"},w("$m"),function(a){var b=this.$m;b!==a&&(z.wb(a,U,lk,"imageStretch"),this.$m=a,this.xa(),this.i("imageStretch",b,a))});z.g(lk,"errorFunction",lk.prototype.Lr);
z.defineProperty(lk,{Lr:"errorFunction"},w("Ne"),function(a){var b=this.Ne;if(b!==a){a!==q&&z.j(a,"function",lk,"errorFunction");this.Ne=a;if(this.Vg){var c=this;this.Vg.onerror=function(a){c.Ne!==q&&c.Ne(c,a)}}this.i("errorFunction",b,a)}});
lk.prototype.Yl=function(a,b){if(!b.nt){if(this.hr===q)if(this.Vg===q)this.hr=s;else{var c=document.createElement("canvas").getContext("2d");c.drawImage(this.Vg,0,0);try{c.getImageData(0,0,1,1),this.hr=s}catch(d){this.hr=h}}if(this.hr)return}c=this.Vg;if(c!==q){var e=c.src;(e===q||""===e)&&z.m("Element has no source attribute: "+c);var e=this.Ma,g=0,k=0,l=this.Dt,m=l?+c.width:c.naturalWidth,l=l?+c.height:c.naturalHeight;if(!(0===m||0===l)){m===f&&c.videoWidth&&(m=c.videoWidth||e.width);l===f&&c.videoHeight&&
(l=c.videoHeight||e.height);this.yh.W()&&(g=this.fj.x,k=this.fj.y,m=this.fj.width,l=this.fj.height);var n=m,p=l,r=this.$m;switch(r){case jj:if(this.yh.W())break;g+=Math.max((n-e.width)/2,0);k+=Math.max((p-e.height)/2,0);m=Math.min(e.width,n);l=Math.min(e.height,p);break;case Gc:n=e.width;p=e.height;break;case Ig:case Jg:r===Ig?(r=Math.min(e.height/p,e.width/n),n*=r,p*=r):r===Jg&&(r=Math.max(e.height/p,e.width/n),n*=r,p*=r,g+=(n-e.width)/2,k+=(p-e.height)/2,m*=1/(n/e.width),l*=1/(p/e.height),n=e.width,
p=e.height)}a.drawImage(c,g,k,m,l,Math.max((e.width-n)/2,0),Math.max((e.height-p)/2,0),Math.min(e.width,n),Math.min(e.height,p))}}};z.A(lk,{Ma:"naturalBounds"},w("Rc"));
lk.prototype.gs=function(a,b,c,d){var e=this.Fa,g=sj(this),k=this.Vg,l=this.Dt;if(l||!this.pn&&k&&k.complete)this.pn=h;k===q&&(b=a=0);g!==Gc&&g!==lj?isFinite(e.width)?a=e.width:k!==q&&this.pn!==s&&(a=this.yh.W()?this.yh.width:l?+k.width:k.naturalWidth):(isFinite(a)||(a=this.yh.W()?this.yh.width:l?+k.width:k.naturalWidth),c=0);g!==Gc&&g!==kj?isFinite(e.height)?b=e.height:k!==q&&this.pn!==s&&(b=this.yh.W()?this.yh.height:l?+k.height:k.naturalHeight):(isFinite(b)||(b=this.yh.W()?this.yh.height:l?+k.height:
k.naturalHeight),d=0);e=this.le;g=this.Ge;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);k!==q&&!k.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));lb(this.Rc,a,b);pj(this,0,0,a,b)};lk.prototype.sj=function(a,b,c,d){Gj(this,a,b,c,d)};function sa(){this.s=new Dc;this.Jb=q}sa.prototype.reset=function(){this.s=new Dc;this.Jb=q};
function P(a,b,c,d,e,g){a.s===q&&z.m("StreamGeometryContext has been closed");e!==f&&e===h?(a.Jb===q&&z.m("Need to call beginFigure first"),d=new rd(gd),d.D=b,d.F=c,a.Jb.Ha.add(d)):(a.Jb=new Fc,a.Jb.la=b,a.Jb.ma=c,a.Jb.qo=d,a.s.lb.add(a.Jb));g!==f&&(a.Jb.en=g)}function bd(a){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");var b=a.Jb.Ha.length;0<b&&a.Jb.Ha.n[b-1].close()}
function cd(a){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");0<a.Jb.Ha.length&&(a.Jb.qo=h)}function dd(a){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");a.Jb.Fj=s}sa.prototype.moveTo=function(a,b,c){this.s===q&&z.m("StreamGeometryContext has been closed");this.Jb===q&&z.m("Need to call beginFigure first");var d=new rd(gd);d.D=a;d.F=b;c&&d.close();this.Jb.Ha.add(d)};
sa.prototype.lineTo=function(a,b,c){this.s===q&&z.m("StreamGeometryContext has been closed");this.Jb===q&&z.m("Need to call beginFigure first");var d=new rd(Rc);d.D=a;d.F=b;c&&d.close();this.Jb.Ha.add(d)};function Q(a,b,c,d,e,g,k,l){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");var m=new rd(hd);m.ob=b;m.Gb=c;m.Vd=d;m.Wd=e;m.D=g;m.F=k;l&&m.close();a.Jb.Ha.add(m)}
function Vc(a,b,c,d,e){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");var g=new rd(id);g.ob=b;g.Gb=c;g.D=d;g.F=e;a.Jb.Ha.add(g)}sa.prototype.arcTo=function(a,b,c,d,e,g,k){this.s===q&&z.m("StreamGeometryContext has been closed");this.Jb===q&&z.m("Need to call beginFigure first");var l=new rd(jd);l.hg=a;l.Ah=b;l.Ca=c;l.Ka=d;l.radiusX=e;l.radiusY=g?g:e;k&&l.close();this.Jb.Ha.add(l)};
function Wc(a,b,c,d,e,g,k,l){a.s===q&&z.m("StreamGeometryContext has been closed");a.Jb===q&&z.m("Need to call beginFigure first");b=new rd(kd,k,l,b,c,d,e,g);a.Jb.Ha.add(b)}
N.makeGeometry=function(a,b,c){var d=a.Fa,e=d.width,d=d.height;b!==f&&(!isNaN(b)&&isFinite(b))&&(e=b);c!==f&&(!isNaN(c)&&isFinite(c))&&(d=c);isFinite(e)||(e=100);isFinite(d)||(d=100);var g=f;if("None"!==a.vm)g=N.co(a.vm);else if("None"!==a.gv)g=N.co(a.gv);else{var k=N.ri[a.Cb];"string"===typeof k&&(k=N.ri[k]);k===f&&z.m("Unknown Shape.figure: "+a.Cb);g=k(a,e,d);g.Nd=new qa(e,d)}g===f&&(k=N.ri.Rectangle)&&(g=k(a,e,d));g.Ct=b;g.Bt=c;return g};
N.ki=function(a,b,c,d,e,g,k,l,m,n,p,r,t,u){var v=1-m;a=a*v+c*m;b=b*v+d*m;c=c*v+e*m;d=d*v+g*m;e=e*v+k*m;g=g*v+l*m;l=a*v+c*m;k=b*v+d*m;c=c*v+e*m;d=d*v+g*m;n.x=a;n.y=b;p.x=l;p.y=k;r.x=l*v+c*m;r.y=k*v+d*m;t.x=c;t.y=d;u.x=e;u.y=g};N.Wn=function(a){a=N.Tl(a);var b=z.zb();b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];z.Da(a);return b};
N.Tl=function(a){var b=N.Ik(a),c=z.zb(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var g=0;g<e;g++){var k=b[g],l=b[g+1],m=b[(d+g-1)%e],n=b[(d+g+a)%e];c[2*g]=k;c[2*g+1]=N.Ok(k.x,k.y,m.x,m.y,l.x,l.y,n.x,n.y,new G)}c[c.length]=c[0];z.Da(b);return c};N.Ok=function(a,b,c,d,e,g,k,l,m){c=a-c;k=e-k;0===c||0===k?0===c?(k=(g-l)/k,l=a,e=k*l+(g-k*e)):(d=(b-d)/c,l=e,e=d*l+(b-d*a)):(d=(b-d)/c,k=(g-l)/k,a=b-d*a,l=(g-k*e-a)/(d-k),e=d*l+a);m.q(l,e);return m};
N.Ik=function(a){for(var b=z.zb(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new G(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b};N.kA=(new O(0.156,0.156)).Oa();N.lA=(new O(0.844,0.844)).Oa();
N.ri={None:"Rectangle",Rectangle:function(a,b,c){a=new Dc;a.type=Oc;a.la=0;a.ma=0;a.D=b;a.F=c;return a},Square:function(a,b,c){a=new Dc;a.jc=Ig;a.type=Oc;a.la=0;a.ma=0;a.D=b;a.F=c;return a},Ellipse:function(a,b,c){a=new Dc;a.type=Pc;a.la=0;a.ma=0;a.D=b;a.F=c;a.G=N.kA;a.H=N.lA;return a},Circle:function(a,b,c){a=new Dc;a.jc=Ig;a.type=Pc;a.la=0;a.ma=0;a.D=b;a.F=c;a.G=N.kA;a.H=N.lA;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Dc;var d=new Fc,e=new rd;e.D=b;e.F=0.5*c;d.Ha.add(e);b=
new rd;b.D=0;b.F=c;d.Ha.add(b.close());a.lb.add(d);a.G=new O(0,0.25);a.H=new O(0.5,0.75);return a},TriangleDown:function(a,b,c){a=new Dc;var d=new Fc,e=new rd;e.D=b;e.F=0;d.Ha.add(e);e=new rd;e.D=0.5*b;e.F=c;d.Ha.add(e.close());a.lb.add(d);a.G=new O(0.25,0);a.H=new O(0.75,0.5);return a},TriangleLeft:function(a,b,c){a=new Dc;var d=new Fc;d.la=b;d.ma=c;var e=new rd;e.D=0;e.F=0.5*c;d.Ha.add(e);c=new rd;c.D=b;c.F=0;d.Ha.add(c.close());a.lb.add(d);a.G=new O(0.5,0.25);a.H=new O(1,0.75);return a},TriangleUp:function(a,
b,c){a=new Dc;var d=new Fc;d.la=b;d.ma=c;var e=new rd;e.D=0;e.F=c;d.Ha.add(e);c=new rd;c.D=0.5*b;c.F=0;d.Ha.add(c.close());a.lb.add(d);a.G=new O(0.25,0.5);a.H=new O(0.75,1);return a},Line1:function(a,b,c){a=new Dc;a.type=Lc;a.la=0;a.ma=0;a.D=b;a.F=c;return a},Line2:function(a,b,c){a=new Dc;a.type=Lc;a.la=b;a.ma=0;a.D=0;a.F=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Dc;a.type=Lc;a.la=0;a.ma=c/2;a.D=b;a.F=c/2;return a},LineV:function(a,b,c){a=new Dc;a.type=Lc;a.la=b/2;a.ma=0;a.D=b/2;
a.F=c;return a},Curve1:function(a,b,c){var d=N.ua;a=z.u();P(a,0,0,s);Q(a,d*b,0,1*b,(1-d)*c,b,c);b=a.s;z.v(a);return b},Curve2:function(a,b,c){var d=N.ua;a=z.u();P(a,0,0,s);Q(a,0,d*c,(1-d)*b,c,b,c);b=a.s;z.v(a);return b},Curve3:function(a,b,c){var d=N.ua;a=z.u();P(a,1*b,0,s);Q(a,1*b,d*c,d*b,1*c,0,1*c);b=a.s;z.v(a);return b},Curve4:function(a,b,c){var d=N.ua;a=z.u();P(a,1*b,0,s);Q(a,(1-d)*b,0,0,(1-d)*c,0,1*c);b=a.s;z.v(a);return b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=
z.u();P(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.s;b.G=new O(0.25,0.5);b.H=new O(0.75,1);z.v(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.s;b.G=new O(0.25,0.25);b.H=new O(0.75,0.75);z.v(a);return b},Pentagon:function(a,b,c){var d=N.Ik(5);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.2,0.22);b.H=new O(0.8,0.9);z.v(a);return b},
DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=N.Ik(6);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.07,0.25);b.H=new O(0.93,0.75);z.v(a);return b},Heptagon:function(a,b,c){var d=N.Ik(7);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.2,0.15);b.H=new O(0.8,0.85);z.v(a);return b},Octagon:function(a,b,c){var d=N.Ik(8);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=
1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.15,0.15);b.H=new O(0.85,0.85);z.v(a);return b},Nonagon:function(a,b,c){var d=N.Ik(9);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.17,0.13);b.H=new O(0.82,0.82);z.v(a);return b},Decagon:function(a,b,c){var d=N.Ik(10);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.16,0.16);b.H=new O(0.84,0.84);z.v(a);
return b},Dodecagon:function(a,b,c){var d=N.Ik(12);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.16,0.16);b.H=new O(0.84,0.84);z.v(a);return b},FivePointedStar:function(a,b,c){var d=N.Tl(5);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.312,0.383);b.H=new O(0.693,0.765);z.v(a);return b},SixPointedStar:function(a,b,c){var d=N.Tl(6);a=z.u();P(a,d[0].x*b,d[0].y*c,h);
for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.17,0.251);b.H=new O(0.833,0.755);z.v(a);return b},SevenPointedStar:function(a,b,c){var d=N.Tl(7);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.363,0.361);b.H=new O(0.641,0.709);z.v(a);return b},EightPointedStar:function(a,b,c){var d=N.Tl(8);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.252,
0.255);b.H=new O(0.75,0.75);z.v(a);return b},NinePointedStar:function(a,b,c){var d=N.Tl(9);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.355,0.361);b.H=new O(0.645,0.651);z.v(a);return b},TenPointedStar:function(a,b,c){var d=N.Tl(10);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.281,0.261);b.H=new O(0.723,0.748);z.v(a);return b},FivePointedBurst:function(a,b,c){var d=
N.Wn(5);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.312,0.383);b.H=new O(0.693,0.765);z.v(a);return b},SixPointedBurst:function(a,b,c){var d=N.Wn(6);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.17,0.251);b.H=new O(0.833,0.755);z.v(a);return b},SevenPointedBurst:function(a,
b,c){var d=N.Wn(7);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.363,0.361);b.H=new O(0.641,0.709);z.v(a);return b},EightPointedBurst:function(a,b,c){var d=N.Wn(8);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.252,0.255);b.H=new O(0.75,0.75);z.v(a);return b},NinePointedBurst:function(a,
b,c){var d=N.Wn(9);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.355,0.361);b.H=new O(0.645,0.651);z.v(a);return b},TenPointedBurst:function(a,b,c){var d=N.Wn(10);a=z.u();P(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Da(d);bd(a);b=a.s;b.G=new O(0.281,0.261);b.H=new O(0.723,0.748);z.v(a);return b},Cloud:function(a,
b,c){a=z.u();P(a,0.08034461*b,0.1944299*c,h);Q(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);Q(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);Q(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);Q(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);Q(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);Q(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*
c);Q(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);Q(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);Q(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);Q(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);Q(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);Q(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);Q(a,-0.01812061*b,0.6089503*c,-0.00606892*
b,0.4555777*c,0.06427569*b,0.4265613*c);Q(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);bd(a);b=a.s;b.G=new O(0.1,0.1);b.H=new O(0.9,0.9);z.v(a);return b},Gate:"Crescent",Crescent:function(a,b,c){a=z.u();P(a,0,0,h);Q(a,1*b,0,1*b,1*c,0,1*c);Q(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);bd(a);b=a.s;b.G=new O(0.511,0.19);b.H=new O(0.776,0.76);z.v(a);return b},FramedRectangle:function(a,b,c){var d=z.u(),e=a?a.nc:0;a=a?a.ss:0;0===e&&(e=0.1);0===a&&(a=0.1);P(d,0,0,h);d.lineTo(1*b,
0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);P(d,e*b,a*c,s,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.s;b.G=new O(e,a);b.H=new O(1-e,1-a);z.v(d);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=N.ua;a=z.u();P(a,0,0,h);Q(a,d*b,0,1*b,(0.5-d/2)*c,1*b,0.5*c);Q(a,1*b,(0.5+d/2)*c,d*b,1*c,0,1*c);bd(a);b=a.s;b.G=new O(0,0.2);b.H=new O(0.75,0.8);z.v(a);return b},Heart:function(a,b,c){a=z.u();P(a,0.5*b,1*c,h);Q(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);Q(a,0*b,0,0.45*b,0,
0.5*b,0.3*c);Q(a,0.55*b,0,1*b,0,1*b,0.3*c);Q(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);bd(a);b=a.s;b.G=new O(0.15,0.29);b.H=new O(0.86,0.68);z.v(a);return b},Spade:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);Q(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);Q(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);Q(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);Q(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);Q(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);Q(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);bd(a);b=a.s;b.G=new O(0.19,0.26);
b.H=new O(0.8,0.68);z.v(a);return b},Club:function(a,b,c){a=z.u();P(a,0.4*b,0.6*c,h);Q(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);Q(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,k=d*(4*(Math.SQRT2-1)/3);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*
b,(0.5-k+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;k=d*(4*(Math.SQRT2-1)/3);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;k=d*(4*(Math.SQRT2-1)/3);Q(a,(0.5+d+e-0.05)*b,(0.5-k+g-0.02)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+
g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,0.4*b,0.6*c);bd(a);b=a.s;b.G=new O(0.06,0.39);b.H=new O(0.93,0.58);z.v(a);return b},YinYang:function(a,b,c){var d=0.5;a=z.u();d=0.5;P(a,0.5*b,0,h);a.arcTo(270,180,0.5*b,0.5*b,0.5*b);Q(a,1*b,d*c,0,d*c,d*b,0,h);var d=0.1,e=0.25;P(a,(0.5+d)*b,e*c,h,h);a.arcTo(0,-360,0.5*b,c*e,d*b);bd(a);P(a,0.5*
b,0,s);a.arcTo(270,-180,0.5*b,0.5*b,0.5*b);dd(a);e=0.75;P(a,(0.5+d)*b,e*c,h);a.arcTo(0,360,0.5*b,c*e,d*b);bd(a);b=a.s;b.jc=Ig;z.v(a);return b},Peace:function(a,b,c){a=z.u();var d=0.5*(4*(Math.SQRT2-1)/3);P(a,b,0.5*c,h);Q(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);Q(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);Q(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);Q(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);P(a,0.5*b,0.1*c,h,h);Q(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);Q(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*
b,0.9*c);Q(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);Q(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,k=d*(4*(Math.SQRT2-1)/3);P(a,(0.5+d+e)*b,(0.5+g)*c,h);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*
0.11;g=0.707*0.11;k=d*(4*(Math.SQRT2-1)/3);P(a,(0.5+d+e)*b,(0.5+g)*c,h);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;k=d*(4*(Math.SQRT2-1)/3);P(a,(0.5+d+e)*b,(0.5+g)*c,h);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-
d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.s;b.G=new O(0.146,0.146);b.H=new O(0.853,0.853);b.jc=Ig;z.v(a);return b},NotAllowed:function(a,b,c){var d=N.ua,e=0.5*d,g=0.5;a=z.u();P(a,0.5*b,(0.5-g)*c,h);Q(a,(0.5-e)*b,(0.5-g)*c,(0.5-g)*b,(0.5-e)*c,(0.5-g)*b,0.5*c);Q(a,(0.5-g)*b,(0.5+e)*c,(0.5-
e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);Q(a,(0.5+g)*b,(0.5-e)*c,(0.5+e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);var g=0.4,e=0.4*d,d=z.O(),k=z.O(),l=z.O(),m=z.O();N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.42,d,k,l,m,m);var n=z.O(),p=z.O(),r=z.O();N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.58,m,m,r,n,p);var t=z.O(),u=z.O(),v=z.O();N.ki(0.5,0.5+g,0.5-e,0.5+g,0.5-g,0.5+e,0.5-g,0.5,0.42,t,u,v,m,m);var A=z.O(),C=z.O(),K=z.O();N.ki(0.5,0.5+g,0.5-
e,0.5+g,0.5-g,0.5+e,0.5-g,0.5,0.58,m,m,K,A,C);P(a,K.x*b,K.y*c,h,h);Q(a,A.x*b,A.y*c,C.x*b,C.y*c,(0.5-g)*b,0.5*c);Q(a,(0.5-g)*b,(0.5-e)*c,(0.5-e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);Q(a,d.x*b,d.y*c,k.x*b,k.y*c,l.x*b,l.y*c);a.lineTo(K.x*b,K.y*c);bd(a);P(a,v.x*b,v.y*c,h,h);a.lineTo(r.x*b,r.y*c);Q(a,n.x*b,n.y*c,p.x*b,p.y*c,(0.5+g)*b,0.5*c);Q(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,t.x*b,t.y*c,u.x*b,u.y*c,v.x*b,v.y*c);bd(a);z.B(d);z.B(k);z.B(l);z.B(m);z.B(n);z.B(p);z.B(r);z.B(t);z.B(u);
z.B(v);z.B(A);z.B(C);z.B(K);b=a.s;z.v(a);b.jc=Ig;return b},Fragile:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);Q(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);Q(a,0.25*b,0.5*c,0,0.25*c,0,0);bd(a);
b=a.s;b.G=new O(0.25,0);b.H=new O(0.75,0.4);z.v(a);return b},HourGlass:function(a,b,c){a=z.u();P(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);bd(a);b=a.s;z.v(a);return b},Lightning:function(a,b,c){a=z.u();P(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);bd(a);b=a.s;z.v(a);return b},Parallelogram1:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=z.u();P(d,a*b,0,
h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);bd(d);b=d.s;b.G=new O(a,0);b.H=new O(1-a,1);z.v(d);return b},Input:"Output",Output:function(a,b,c){a=z.u();P(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);bd(a);b=a.s;b.G=new O(0.1,0);b.H=new O(0.9,1);z.v(a);return b},Parallelogram2:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.25);var d=z.u();P(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);bd(d);b=d.s;b.G=new O(a,0);b.H=new O(1-a,1);z.v(d);return b},ThickCross:function(a,
b,c){a=a?a.nc:0;0===a&&(a=0.25);var d=z.u();P(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);bd(d);b=d.s;b.G=new O(0.5-a/2,0.5-a/2);b.H=new O(0.5+a/2,0.5+a/2);z.v(d);return b},ThickX:function(a,b,c){a=0.25/Math.SQRT2;
var d=z.u();P(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);bd(d);b=d.s;b.G=new O(0.5-a,0.5-a);b.H=new O(0.5+a,0.5+a);z.v(d);return b},ThinCross:function(a,b,c){var d=a?a.nc:0;0===d&&(d=0.1);a=z.u();P(a,(0.5-d/2)*b,0,h);a.lineTo((0.5+d/2)*b,0);a.lineTo((0.5+d/2)*b,(0.5-d/2)*c);a.lineTo(1*b,(0.5-d/2)*c);a.lineTo(1*
b,(0.5+d/2)*c);a.lineTo((0.5+d/2)*b,(0.5+d/2)*c);a.lineTo((0.5+d/2)*b,1*c);a.lineTo((0.5-d/2)*b,1*c);a.lineTo((0.5-d/2)*b,(0.5+d/2)*c);a.lineTo(0,(0.5+d/2)*c);a.lineTo(0,(0.5-d/2)*c);a.lineTo((0.5-d/2)*b,(0.5-d/2)*c);bd(a);b=a.s;z.v(a);return b},ThinX:function(a,b,c){a=z.u();P(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,
0.1*c);bd(a);return a.s},RightTriangle:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);bd(a);b=a.s;b.G=new O(0,0.5);b.H=new O(0.5,1);z.v(a);return b},RoundedIBeam:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(1*b,0);Q(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);Q(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);bd(a);b=a.s;z.v(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.nc:0;0>=d&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*N.ua;var e=z.u();P(e,d,0,h);e.lineTo(b-d,0);Q(e,
b-a,0,b,a,b,d);e.lineTo(b,c-d);Q(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);Q(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);Q(e,0,a,a,0,d,0);bd(e);b=e.s;1<a?(b.G=new O(0,0,a,a),b.H=new O(1,1,-a,-a)):(b.G=$b,b.H=gc);z.v(e);return b},Border:function(a,b,c){var d=a?a.nc:0;0>=d&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=z.u();P(a,d,0,h);a.lineTo(b-d,0);Q(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);Q(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);Q(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);Q(a,0,0,0,0,d,0);bd(a);b=a.s;b.G=$b;b.H=gc;z.v(a);return b},SquareIBeam:function(a,
b,c){var d=a?a.nc:0;0===d&&(d=0.2);a=z.u();P(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((0.5+d/2)*b,d*c);a.lineTo((0.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((0.5-d/2)*b,(1-d)*c);a.lineTo((0.5-d/2)*b,d*c);a.lineTo(0,d*c);bd(a);b=a.s;z.v(a);return b},Trapezoid:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.2);var d=z.u();P(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);b=d.s;b.G=new O(a,0);b.H=new O(1-a,1);z.v(d);
return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.nc:0;a=z.u();P(a,d,0,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);bd(a);b=a.s;b.G=new O(0.1,0);b.H=new O(0.9,1);z.v(a);return b},GenderMale:function(a,b,c){a=z.u();var d=N.ua,e=0.4*d,g=0.4,k=z.O(),l=z.O(),m=z.O(),n=z.O();P(a,(0.5-g)*b,0.5*c,h);Q(a,(0.5-g)*b,(0.5-e)*c,(0.5-e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.44,m,n,l,k,k);Q(a,m.x*b,m.y*c,n.x*b,
n.y*c,l.x*b,l.y*c);var p=z.ic(l.x,l.y);N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.56,k,k,l,m,n);var r=z.ic(l.x,l.y);a.lineTo((0.1*p.x+0.855)*b,0.1*p.y*c);a.lineTo(0.85*b,0.1*p.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*r.x+0.9)*b,0.15*c);a.lineTo((0.1*r.x+0.9)*b,(0.1*r.y+0.05*0.9)*c);a.lineTo(r.x*b,r.y*c);Q(a,m.x*b,m.y*c,n.x*b,n.y*c,(0.5+g)*b,0.5*c);Q(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,(0.5-e)*b,(0.5+g)*c,(0.5-g)*b,(0.5+e)*c,(0.5-
g)*b,0.5*c);g=0.35;e=0.35*d;P(a,0.5*b,(0.5-g)*c,h,h);Q(a,(0.5-e)*b,(0.5-g)*c,(0.5-g)*b,(0.5-e)*c,(0.5-g)*b,0.5*c);Q(a,(0.5-g)*b,(0.5+e)*c,(0.5-e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);Q(a,(0.5+g)*b,(0.5-e)*c,(0.5+e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);P(a,(0.5-g)*b,0.5*c,h);z.B(k);z.B(l);z.B(m);z.B(n);z.B(p);z.B(r);b=a.s;b.G=new O(0.202,0.257);b.H=new O(0.692,0.839);b.jc=Ig;z.v(a);return b},GenderFemale:function(a,b,c){a=z.u();var d=0.375,e=0,g=-0.125,
k=d*(4*(Math.SQRT2-1)/3);P(a,(0.525+e)*b,(0.5+d+g)*c,h);Q(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);Q(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*
b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);bd(a);d=0.325;e=0;g=-0.125;k=d*(4*(Math.SQRT2-1)/3);P(a,(0.5+d+e)*b,(0.5+g)*c,h,h);Q(a,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);Q(a,(0.5-k+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-d+e)*b,(0.5+g)*c);Q(a,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);Q(a,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+d+e)*b,(0.5+g)*c);P(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.s;
b.G=new O(0.232,0.136);b.H=new O(0.782,0.611);b.jc=Ig;z.v(a);return b},PlusLine:function(a,b,c){a=z.u();P(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);b=a.s;z.v(a);return b},XLine:function(a,b,c){a=z.u();P(a,0,1*c,s);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},AsteriskLine:function(a,b,c){a=z.u();var d=0.2/Math.SQRT2;P(a,d*b,(1-d)*c,s);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*
b,0*c);a.lineTo(0.5*b,1*c);b=a.s;z.v(a);return b},CircleLine:function(a,b,c){var d=0.5*N.ua;a=z.u();P(a,1*b,0.5*c,s);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new O(0.146,0.146);b.H=new O(0.853,0.853);b.jc=Ig;z.v(a);return b},Pie:function(a,b,c){a=z.u();var d=0.5*(4*(Math.SQRT2-1)/3);P(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);Q(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*
c);Q(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);Q(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);Q(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);bd(a);b=a.s;z.v(a);return b},PiePiece:function(a,b,c){var d=0.5*(N.ua/Math.SQRT2),e=Math.SQRT2/2,g=1-Math.SQRT2/2;a=z.u();P(a,b,c,h);Q(a,b,(1-d)*c,(e+d)*b,(g+d)*c,e*b,g*c);a.lineTo(0,c);bd(a);b=a.s;z.v(a);return b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=z.u();P(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,
(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);bd(d);b=d.s;b.G=new O(a/2,a/2);b.H=new O(1-a/2,1-a/2);z.v(d);return b},LogicImplies:function(a,b,c){var d=a?a.nc:0;0===d&&(d=0.2);a=z.u();P(a,(1-d)*b,0*c,s);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);b=a.s;b.G=$b;b.H=new O(0.8,0.5);z.v(a);return b},LogicIff:function(a,b,c){var d=a?a.nc:0;0===d&&(d=0.2);a=z.u();P(a,(1-d)*b,0*c,s);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,0.5*
c);a.lineTo(b,0.5*c);a.moveTo(d*b,0);a.lineTo(0,0.5*c);a.lineTo(d*b,c);b=a.s;b.G=new O(0.2,0);b.H=new O(0.8,0.5);z.v(a);return b},LogicNot:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},LogicAnd:function(a,b,c){a=z.u();P(a,0,1*c,s);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.s;b.G=new O(0.25,0.5);b.H=new O(0.75,1);z.v(a);return b},LogicOr:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.s;b.G=new O(0.219,0);b.H=new O(0.78,0.409);z.v(a);
return b},LogicXor:function(a,b,c){a=z.u();P(a,0.5*b,0,s);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*N.ua;Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.jc=Ig;z.v(a);return b},LogicTruth:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);b=a.s;z.v(a);return b},LogicFalsity:function(a,b,c){a=z.u();P(a,0,1*c,s);a.lineTo(1*
b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);b=a.s;z.v(a);return b},LogicThereExists:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.s;z.v(a);return b},LogicForAll:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.s;b.G=new O(0.25,0);b.H=new O(0.75,0.5);z.v(a);return b},LogicIsDefinedAs:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(b,
0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.s;b.G=new O(0.01,0.01);b.H=new O(0.99,0.49);z.v(a);return b},LogicIntersect:function(a,b,c){var d=0.5*N.ua;a=z.u();P(a,0,1*c,s);a.lineTo(0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);a.lineTo(1*b,1*c);b=a.s;b.G=new O(0,0.5);b.H=gc;z.v(a);return b},LogicUnion:function(a,b,c){var d=0.5*N.ua;a=z.u();P(a,1*b,0,s);a.lineTo(1*b,0.5*c);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*
c,0,(0.5+d)*c,0,0.5*c);a.lineTo(0,0);b=a.s;b.G=$b;b.H=new O(1,0.5);z.v(a);return b},Arrow:function(a,b,c){var d=a?a.nc:0,e=a?a.ss:0;0===d&&(d=0.3);0===e&&(e=0.3);a=z.u();P(a,0,(0.5-e/2)*c,h);a.lineTo((1-d)*b,(0.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(0.5+e/2)*c);a.lineTo(0,(0.5+e/2)*c);bd(a);b=a.s;b.G=new O(0,0.5-e/2);d=N.Ok(0,0.5+e/2,1,0.5+e/2,1-d,1,1,0.5,z.O());b.H=new O(d.x,d.y);z.B(d);z.v(a);return b},ISOProcess:"Chevron",Chevron:function(a,b,
c){a=z.u();P(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);bd(a);b=a.s;z.v(a);return b},DoubleArrow:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);bd(a);P(a,0.3*b,0.214*c,s);a.lineTo(0.3*b,0.786*c);dd(a);b=a.s;z.v(a);return b},DoubleEndArrow:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*
b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);bd(a);b=a.s;c=N.Ok(0,0.5,0.3,0,0,0.3,0.3,0.3,z.O());b.G=new O(c.x,c.y);c=N.Ok(0.7,1,1,0.5,0.7,0.7,1,0.7,c);b.H=new O(c.x,c.y);z.B(c);z.v(a);return b},IBeamArrow:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*
c);a.lineTo(0.7*b,0);bd(a);b=a.s;b.G=new O(0,0.3);c=N.Ok(0.7,1,1,0.5,0.7,0.7,1,0.7,z.O());b.H=new O(c.x,c.y);z.B(c);z.v(a);return b},Pointer:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);bd(a);b=a.s;b.G=new O(0.2,0.35);c=N.Ok(0.2,0.65,1,0.65,0,1,1,0.5,z.O());b.H=new O(c.x,c.y);z.B(c);z.v(a);return b},RoundedPointer:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0,1*c);Q(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);bd(a);b=a.s;b.G=new O(0.4,0.35);c=N.Ok(0.2,0.65,
1,0.65,0,1,1,0.5,z.O());b.H=new O(c.x,c.y);z.B(c);z.v(a);return b},SplitEndArrow:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);bd(a);b=a.s;b.G=new O(0.2,0.3);c=N.Ok(0.7,1,1,0.5,0.7,0.7,1,0.7,z.O());b.H=new O(c.x,c.y);z.B(c);z.v(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(0.7*b,0);bd(a);b=a.s;b.G=$b;b.H=new O(0.7,1);z.v(a);return b},Cone1:function(a,b,c){var d=N.ua;a=0.5*d;var e=0.1*d,d=z.u();P(d,0,0.9*c,h);d.lineTo(0.5*b,0);d.lineTo(1*b,0.9*c);Q(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);Q(d,(0.5-a)*b,1*c,0,(0.9+e)*c,0,0.9*c);bd(d);b=d.s;b.G=new O(0.25,0.5);b.H=new O(0.75,0.97);z.v(d);return b},Cone2:function(a,b,c){a=z.u();P(a,0,0.9*c,h);Q(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);bd(a);P(a,0,0.9*c,s);Q(a,(1-0.85/
0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);dd(a);b=a.s;b.G=new O(0.25,0.5);b.H=new O(0.75,0.82);z.v(a);return b},Cube1:function(a,b,c){a=z.u();P(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);bd(a);P(a,0.5*b,1*c,s);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);dd(a);b=a.s;b.G=new O(0,0.3);b.H=new O(0.5,0.85);z.v(a);return b},Cube2:function(a,b,c){a=z.u();P(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*
b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);bd(a);P(a,0,0.3*c,s);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);dd(a);b=a.s;b.G=new O(0,0.3);b.H=new O(0.7,1);z.v(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=N.ua;a=0.5*d;var e=0.1*d,d=z.u();P(d,0,0.1*c,h);Q(d,0,(0.1-e)*c,(0.5-a)*b,0,0.5*b,0);Q(d,(0.5+a)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);d.lineTo(b,0.9*c);Q(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);Q(d,(0.5-a)*b,1*c,0,(0.9+e)*
c,0,0.9*c);d.lineTo(0,0.1*c);P(d,0,0.1*c,s);Q(d,0,(0.1+e)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);Q(d,(0.5+a)*b,0.2*c,1*b,(0.1+e)*c,1*b,0.1*c);dd(d);b=d.s;b.G=new O(0,0.2);b.H=new O(1,0.9);z.v(d);return b},Cylinder2:function(a,b,c){var d=N.ua;a=0.5*d;var e=0.1*d,d=z.u();P(d,0,0.9*c,h);d.lineTo(0,0.1*c);Q(d,0,(0.1-e)*c,(0.5-a)*b,0,0.5*b,0);Q(d,(0.5+a)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);d.lineTo(1*b,0.9*c);Q(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);Q(d,(0.5-a)*b,1*c,0,(0.9+e)*c,0,0.9*c);P(d,0,0.9*c,s);Q(d,0,(0.9-
e)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);Q(d,(0.5+a)*b,0.8*c,1*b,(0.9-e)*c,1*b,0.9*c);dd(d);b=d.s;b.G=new O(0,0.1);b.H=new O(1,0.8);z.v(d);return b},Cylinder3:function(a,b,c){var d=N.ua;a=0.1*d;var e=0.5*d,d=z.u();P(d,0.1*b,0,h);d.lineTo(0.9*b,0);Q(d,(0.9+a)*b,0,1*b,(0.5-e)*c,1*b,0.5*c);Q(d,1*b,(0.5+e)*c,(0.9+a)*b,1*c,0.9*b,1*c);d.lineTo(0.1*b,1*c);Q(d,(0.1-a)*b,1*c,0,(0.5+e)*c,0,0.5*c);Q(d,0,(0.5-e)*c,(0.1-a)*b,0,0.1*b,0);P(d,0.1*b,0,s);Q(d,(0.1+a)*b,0,0.2*b,(0.5-e)*c,0.2*b,0.5*c);Q(d,0.2*b,(0.5+e)*c,(0.1+
a)*b,1*c,0.1*b,1*c);dd(d);b=d.s;b.G=new O(0.2,0);b.H=new O(0.9,1);z.v(d);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=N.ua;a=0.1*d;var e=0.5*d,d=z.u();P(d,0.9*b,0,h);Q(d,(0.9+a)*b,0,1*b,(0.5-e)*c,1*b,0.5*c);Q(d,1*b,(0.5+e)*c,(0.9+a)*b,1*c,0.9*b,1*c);d.lineTo(0.1*b,1*c);Q(d,(0.1-a)*b,1*c,0,(0.5+e)*c,0,0.5*c);Q(d,0,(0.5-e)*c,(0.1-a)*b,0,0.1*b,0);d.lineTo(0.9*b,0);P(d,0.9*b,0,s);Q(d,(0.9-a)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);Q(d,0.8*b,(0.5+e)*c,(0.9-a)*b,1*c,0.9*b,1*c);dd(d);b=d.s;
b.G=new O(0.1,0);b.H=new O(0.8,1);z.v(d);return b},Prism1:function(a,b,c){a=z.u();P(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);bd(a);P(a,0.25*b,0.25*c,s);a.lineTo(0.5*b,c);dd(a);b=a.s;b.G=new O(0.408,0.172);b.H=new O(0.833,0.662);z.v(a);return b},Prism2:function(a,b,c){a=z.u();P(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);bd(a);P(a,0,c,s);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*
b,0.5*c);dd(a);b=a.s;b.G=new O(0.25,0.5);b.H=new O(0.75,0.75);z.v(a);return b},Pyramid1:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);bd(a);P(a,0.5*b,0,s);a.lineTo(0.5*b,1*c);dd(a);b=a.s;b.G=new O(0.25,0.367);b.H=new O(0.75,0.875);z.v(a);return b},Pyramid2:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);bd(a);P(a,0.5*b,0,s);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,
0.85*c);dd(a);b=a.s;b.G=new O(0.25,0.367);b.H=new O(0.75,0.875);z.v(a);return b},Actor:function(a,b,c){var d=N.ua,e=0.2*d,g=0.1*d,k=0.5,l=0.1;a=z.u();P(a,k*b,(l+0.1)*c,h);Q(a,(k-e)*b,(l+0.1)*c,(k-0.2)*b,(l+g)*c,(k-0.2)*b,l*c);Q(a,(k-0.2)*b,(l-g)*c,(k-e)*b,(l-0.1)*c,k*b,(l-0.1)*c);Q(a,(k+e)*b,(l-0.1)*c,(k+0.2)*b,(l-g)*c,(k+0.2)*b,l*c);Q(a,(k+0.2)*b,(l+g)*c,(k+e)*b,(l+0.1)*c,k*b,(l+0.1)*c);e=0.05;g=d*e;P(a,0.5*b,0.2*c,h);a.lineTo(0.95*b,0.2*c);k=0.95;l=0.25;Q(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*
b,l*c);a.lineTo(1*b,0.6*c);a.lineTo(0.85*b,0.6*c);a.lineTo(0.85*b,0.35*c);e=0.025;g=d*e;k=0.825;l=0.35;Q(a,(k+e)*b,(l-g)*c,(k+g)*b,(l-e)*c,k*b,(l-e)*c);Q(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.8*b,1*c);a.lineTo(0.55*b,1*c);a.lineTo(0.55*b,0.7*c);e=0.05;g=d*e;k=0.5;l=0.7;Q(a,(k+e)*b,(l-g)*c,(k+g)*b,(l-e)*c,k*b,(l-e)*c);Q(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.45*b,1*c);a.lineTo(0.2*b,1*c);a.lineTo(0.2*b,0.35*c);e=0.025;g=d*e;k=0.175;l=0.35;Q(a,(k+e)*b,(l-g)*c,
(k+g)*b,(l-e)*c,k*b,(l-e)*c);Q(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.15*b,0.6*c);a.lineTo(0*b,0.6*c);a.lineTo(0*b,0.25*c);e=0.05;g=d*e;k=0.05;l=0.25;Q(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);a.lineTo(0.5*b,0.2*c);b=a.s;b.G=new O(0.2,0.2);b.H=new O(0.8,0.65);z.v(a);return b},Card:function(a,b,c){a=z.u();P(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);bd(a);b=a.s;b.G=new O(0,0.2);b.H=gc;z.v(a);return b},Collate:function(a,b,c){a=
z.u();P(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);P(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.s;b.G=new O(0.25,0);b.H=new O(0.75,0.25);z.v(a);return b},CreateRequest:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);P(d,0,a*c,s);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);dd(d);b=d.s;b.G=new O(0,a);b.H=new O(1,1-a);z.v(d);return b},Database:function(a,
b,c){a=z.u();var d=N.ua,e=0.5*d,d=0.1*d;P(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);Q(a,1*b,(0.9+d)*c,(0.5+e)*b,1*c,0.5*b,1*c);Q(a,(0.5-e)*b,1*c,0,(0.9+d)*c,0,0.9*c);a.lineTo(0,0.1*c);Q(a,0,(0.1-d)*c,(0.5-e)*b,0,0.5*b,0);Q(a,(0.5+e)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);P(a,1*b,0.1*c,s);Q(a,1*b,(0.1+d)*c,(0.5+e)*b,0.2*c,0.5*b,0.2*c);Q(a,(0.5-e)*b,0.2*c,0,(0.1+d)*c,0,0.1*c);a.moveTo(1*b,0.2*c);Q(a,1*b,(0.2+d)*c,(0.5+e)*b,0.3*c,0.5*b,0.3*c);Q(a,(0.5-e)*b,0.3*c,0,(0.2+d)*c,0,0.2*c);a.moveTo(1*b,0.3*c);Q(a,1*b,(0.3+
d)*c,(0.5+e)*b,0.4*c,0.5*b,0.4*c);Q(a,(0.5-e)*b,0.4*c,0,(0.3+d)*c,0,0.3*c);dd(a);b=a.s;b.G=new O(0,0.4);b.H=new O(1,0.9);z.v(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.75*b,0);Q(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);Q(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);bd(a);b=a.s;b.G=new O(0.226,0);b.H=new O(0.81,1);z.v(a);return b},DiskStorage:function(a,b,c){a=z.u();var d=N.ua,e=0.5*d,d=0.1*d;P(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);Q(a,1*b,(0.9+d)*c,(0.5+e)*
b,1*c,0.5*b,1*c);Q(a,(0.5-e)*b,1*c,0,(0.9+d)*c,0,0.9*c);a.lineTo(0,0.1*c);Q(a,0,(0.1-d)*c,(0.5-e)*b,0,0.5*b,0);Q(a,(0.5+e)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);P(a,1*b,0.1*c,s);Q(a,1*b,(0.1+d)*c,(0.5+e)*b,0.2*c,0.5*b,0.2*c);Q(a,(0.5-e)*b,0.2*c,0,(0.1+d)*c,0,0.1*c);a.moveTo(1*b,0.2*c);Q(a,1*b,(0.2+d)*c,(0.5+e)*b,0.3*c,0.5*b,0.3*c);Q(a,(0.5-e)*b,0.3*c,0,(0.2+d)*c,0,0.2*c);dd(a);b=a.s;b.G=new O(0,0.3);b.H=new O(1,0.9);z.v(a);return b},Display:function(a,b,c){a=z.u();P(a,0.25*b,0,h);a.lineTo(0.75*b,0);Q(a,1*
b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);bd(a);b=a.s;b.G=new O(0.25,0);b.H=new O(0.75,1);z.v(a);return b},DividedEvent:function(a,b,c){a=a?a.nc:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=z.u(),e=0.2*N.ua;P(d,0,0.2*c,h);Q(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);Q(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);Q(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);Q(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);P(d,0,a*c,s);d.lineTo(1*b,a*c);
dd(d);b=d.s;b.G=new O(0,a);b.H=new O(1,1-a);z.v(d);return b},DividedProcess:function(a,b,c){a=a?a.nc:0;0.1>a&&(a=0.1);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);P(d,0,a*c,s);d.lineTo(1*b,a*c);dd(d);b=d.s;b.G=new O(0,a);b.H=gc;z.v(d);return b},Document:function(a,b,c){c/=0.8;a=z.u();P(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);Q(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);bd(a);b=a.s;b.G=$b;b.H=new O(1,0.6);z.v(a);return b},ExternalOrganization:function(a,
b,c){a=a?a.nc:0;0.2>a&&(a=0.2);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);P(d,a*b,0,s);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);dd(d);b=d.s;b.G=new O(a/2,a/2);b.H=new O(1-a/2,1-a/2);z.v(d);return b},ExternalProcess:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);bd(a);P(a,0.1*b,0.4*c,s);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*
b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);dd(a);b=a.s;b.G=new O(0.25,0.25);b.H=new O(0.75,0.75);z.v(a);return b},File:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);bd(a);P(a,0.75*b,0,s);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);dd(a);b=a.s;b.G=new O(0,0.25);b.H=gc;z.v(a);return b},Interrupt:function(a,b,c){a=z.u();P(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(1*b,0.5*c);P(a,1*b,0.5*c,s);a.lineTo(1*b,1*c);P(a,1*b,0.5*c,s);a.lineTo(1*b,0);b=a.s;b.G=new O(0,0.25);b.H=new O(0.5,0.75);z.v(a);return b},InternalStorage:function(a,b,c){var d=a?a.nc:0;a=a?a.ss:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=z.u();P(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);bd(e);P(e,d*b,0,s);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);dd(e);b=e.s;b.G=new O(d,a);b.H=gc;z.v(e);return b},Junction:function(a,b,c){a=z.u();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/
2,g=0.5*N.ua;P(a,1*b,0.5*c,h);Q(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);Q(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);Q(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);Q(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);P(a,(e+d)*b,(e+d)*c,s);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);dd(a);b=a.s;b.jc=Ig;z.v(a);return b},LinedDocument:function(a,b,c){c/=0.8;a=z.u();P(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);Q(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);bd(a);P(a,0.1*b,0,s);a.lineTo(0.1*b,0.75*c);
dd(a);b=a.s;b.G=new O(0.1,0);b.H=new O(1,0.6);z.v(a);return b},LoopLimit:function(a,b,c){a=z.u();P(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);bd(a);b=a.s;b.G=new O(0,0.25);b.H=gc;z.v(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,0.5*b,1*c,h);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);Q(a,1*b,(0.5+d)*c,(0.5+d)*
b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.s;b.G=new O(0.15,0.15);b.H=new O(0.85,0.8);z.v(a);return b},ManualInput:function(a,b,c){a=z.u();P(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);bd(a);b=a.s;b.G=new O(0,0.25);b.H=gc;z.v(a);return b},MessageFromUser:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.7);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);b=d.s;b.G=$b;b.H=new O(a,1);z.v(d);return b},
MicroformProcessing:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.25);var d=z.u();P(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);bd(d);b=d.s;b.G=new O(0,a);b.H=new O(1,1-a);z.v(d);return b},MicroformRecording:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);bd(a);b=a.s;b.G=new O(0,0.25);b.H=new O(1,0.75);z.v(a);return b},MultiDocument:function(a,b,c){c/=0.8;
a=z.u();P(a,b,0,h);a.lineTo(b,0.5*c);Q(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);Q(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);Q(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);bd(a);P(a,0.1*b,0.2*c,s);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);dd(a);b=a.s;b.G=new O(0,0.25);b.H=new O(0.8,0.77);z.v(a);
return b},MultiProcess:function(a,b,c){a=z.u();P(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);bd(a);P(a,0.2*b,0.1*c,s);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);dd(a);b=a.s;b.G=new O(0,0.2);b.H=new O(0.8,1);z.v(a);return b},OfflineStorage:function(a,
b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=1-a,e=z.u();P(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);bd(e);P(e,0.5*a*b,a*c,s);e.lineTo((1-0.5*a)*b,a*c);dd(e);b=e.s;b.G=new O(d/4+0.5*a,a);b.H=new O(3*d/4+0.5*a,a+0.5*d);z.v(e);return b},OffPageConnector:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);bd(a);b=a.s;b.G=$b;b.H=new O(0.75,1);z.v(a);return b},Or:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,1*b,0.5*c,h);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*
c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);P(a,1*b,0.5*c,s);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);dd(a);b=a.s;b.jc=Ig;z.v(a);return b},PaperTape:function(a,b,c){c/=0.8;a=z.u();P(a,0,0.7*c,h);a.lineTo(0,0.3*c);Q(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);Q(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);bd(a);b=a.s;b.G=new O(0,0.49);b.H=new O(1,0.75);z.v(a);return b},PrimitiveFromCall:function(a,b,c){var d=
a?a.nc:0;a=a?a.ss:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=z.u();P(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);bd(e);b=e.s;b.G=new O(d,0);b.H=new O(1-a,1);z.v(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.nc:0;a=a?a.ss:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=z.u();P(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);bd(e);b=e.s;b.G=new O(d,0);b.H=new O(1-a,1);z.v(e);return b},Subroutine:"Procedure",Procedure:function(a,
b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);P(d,(1-a)*b,0,s);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);dd(d);b=d.s;b.G=new O(a,0);b.H=new O(1-a,1);z.v(d);return b},Process:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);bd(d);P(d,a*b,0,s);d.lineTo(a*b,1*c);dd(d);b=d.s;b.G=new O(a,0);b.H=gc;z.v(d);return b},Sort:function(a,b,c){a=z.u();P(a,0.5*b,0,h);a.lineTo(1*
b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);bd(a);P(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);dd(a);b=a.s;b.G=new O(0.25,0.25);b.H=new O(0.75,0.5);z.v(a);return b},Start:function(a,b,c){a=z.u();P(a,0.25*b,0,h);a.lineTo(0.75*b,0);Q(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);Q(a,0,1*c,0,0,0.25*b,0);P(a,0.25*b,0,s);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);dd(a);b=a.s;b.G=new O(0.25,0);b.H=new O(0.75,1);z.v(a);return b},Terminator:function(a,b,c){a=z.u();P(a,0.25*b,0,h);a.lineTo(0.75*
b,0);Q(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);Q(a,0,1*c,0,0,0.25*b,0);b=a.s;b.G=new O(0.23,0);b.H=new O(0.77,1);z.v(a);return b},TransmittalTape:function(a,b,c){a=a?a.nc:0;0===a&&(a=0.1);var d=z.u();P(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);bd(d);b=d.s;b.G=$b;b.H=new O(1,1-a);z.v(d);return b},AndGate:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,0,0,h);a.lineTo(0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,
0.5*b,1*c);a.lineTo(0,1*c);bd(a);b=a.s;b.G=$b;b.H=new O(0.55,1);z.v(a);return b},Buffer:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);bd(a);b=a.s;b.G=new O(0,0.25);b.H=new O(0.5,0.75);z.v(a);return b},Clock:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,1*b,0.5*c,h);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);P(a,1*b,0.5*c,s);a.lineTo(1*b,0.5*c);P(a,0.8*b,0.75*c,
s);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);dd(a);b=a.s;b.jc=Ig;z.v(a);return b},Ground:function(a,b,c){a=z.u();P(a,0.5*b,0,s);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);b=a.s;z.v(a);return b},Inverter:function(a,b,c){a=z.u();var d=0.1*N.ua;P(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);
a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);P(a,1*b,0.5*c,h);Q(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);Q(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);Q(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);Q(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new O(0,0.25);b.H=new O(0.4,0.75);z.v(a);return b},NandGate:function(a,b,c){a=z.u();var d=N.ua,e=0.5*d,g=0.4*d,d=0.1*d;P(a,0.8*b,0.5*c,h);Q(a,0.8*b,(0.5+g)*c,(0.4+e)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);Q(a,(0.4+e)*b,0,0.8*
b,(0.5-g)*c,0.8*b,0.5*c);P(a,1*b,0.5*c,h);Q(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);Q(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);Q(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);Q(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new O(0,0.05);b.H=new O(0.55,0.95);z.v(a);return b},NorGate:function(a,b,c){a=z.u();var d=N.ua,e=0.5,g=d*e,k=0,l=0.5;P(a,0.8*b,0.5*c,h);Q(a,0.7*b,(l+g)*c,(k+g)*b,(l+e)*c,0,1*c);Q(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);Q(a,(k+g)*b,(l-e)*c,0.7*b,(l-g)*c,0.8*b,0.5*c);
e=0.1;g=0.1*d;k=0.9;l=0.5;P(a,(k-e)*b,l*c,h);Q(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);Q(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*b,l*c);Q(a,(k+e)*b,(l+g)*c,(k+g)*b,(l+e)*c,k*b,(l+e)*c);Q(a,(k-g)*b,(l+e)*c,(k-e)*b,(l+g)*c,(k-e)*b,l*c);b=a.s;b.G=new O(0.2,0.25);b.H=new O(0.6,0.75);z.v(a);return b},OrGate:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,0,0,h);Q(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);Q(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);Q(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);bd(a);b=a.s;b.G=new O(0.2,
0.25);b.H=new O(0.75,0.75);z.v(a);return b},XnorGate:function(a,b,c){a=z.u();var d=N.ua,e=0.5,g=d*e,k=0.2,l=0.5;P(a,0.1*b,0,s);Q(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);P(a,0.8*b,0.5*c,h);Q(a,0.7*b,(l+g)*c,(k+g)*b,(l+e)*c,0.2*b,1*c);Q(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);Q(a,(k+g)*b,(l-e)*c,0.7*b,(l-g)*c,0.8*b,0.5*c);e=0.1;g=0.1*d;k=0.9;l=0.5;P(a,(k-e)*b,l*c,h);Q(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);Q(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*b,l*c);Q(a,(k+e)*b,(l+g)*c,(k+g)*b,(l+e)*c,
k*b,(l+e)*c);Q(a,(k-g)*b,(l+e)*c,(k-e)*b,(l+g)*c,(k-e)*b,l*c);b=a.s;b.G=new O(0.4,0.25);b.H=new O(0.65,0.75);z.v(a);return b},XorGate:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,0.1*b,0,s);Q(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);P(a,0.2*b,0,h);Q(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);Q(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);Q(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);bd(a);b=a.s;b.G=new O(0.4,0.25);b.H=new O(0.8,0.75);z.v(a);return b},Capacitor:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(0,
1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},Resistor:function(a,b,c){a=z.u();P(a,0,0.5*c,s);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);b=a.s;z.v(a);return b},Inductor:function(a,b,c){a=z.u();var d=0.1*N.ua,e=0.1,g=0.5;P(a,(e-0.5*d)*b,(g+0.1)*c,s);Q(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;Q(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);Q(a,(e-d)*b,(g+0.1)*
c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;Q(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);Q(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;Q(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);Q(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;Q(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);b=a.s;z.v(a);return b},ACvoltageSource:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,0*b,0.5*c,s);Q(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);Q(a,
(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);Q(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.s;b.jc=Ig;z.v(a);return b},DCvoltageSource:function(a,b,c){a=z.u();P(a,0,0.75*c,s);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},Diode:function(a,b,c){a=z.u();P(a,1*b,0,s);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.s;b.G=new O(0,0.25);
b.H=new O(0.5,0.75);z.v(a);return b},Wifi:function(a,b,c){var d=b,e=c;b*=0.38;c*=0.6;a=z.u();var g=N.ua,k=0.8*g,l=0.8,m=0,n=0.5,d=(d-b)/2,e=(e-c)/2;P(a,m*b+d,(n+l)*c+e,h);Q(a,(m-k)*b+d,(n+l)*c+e,(m-l)*b+d,(n+k)*c+e,(m-l)*b+d,n*c+e);Q(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);Q(a,m*b+d,(n-l)*c+e,(m-l+0.5*k)*b+d,(n-k)*c+e,(m-l+0.5*k)*b+d,n*c+e);Q(a,(m-l+0.5*k)*b+d,(n+k)*c+e,m*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);bd(a);k=0.4*g;l=0.4;m=0.2;n=0.5;P(a,m*b+d,(n+l)*c+e,h);Q(a,(m-k)*b+d,(n+l)*c+
e,(m-l)*b+d,(n+k)*c+e,(m-l)*b+d,n*c+e);Q(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);Q(a,m*b+d,(n-l)*c+e,(m-l+0.5*k)*b+d,(n-k)*c+e,(m-l+0.5*k)*b+d,n*c+e);Q(a,(m-l+0.5*k)*b+d,(n+k)*c+e,m*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);bd(a);k=0.2*g;l=0.2;n=m=0.5;P(a,(m-l)*b+d,n*c+e,h);Q(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);Q(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);Q(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);Q(a,(m-k)*b+d,(n+l)*c+e,(m-l)*b+d,(n+
k)*c+e,(m-l)*b+d,n*c+e);k=0.4*g;l=0.4;m=0.8;n=0.5;P(a,m*b+d,(n-l)*c+e,h);Q(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);Q(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);Q(a,m*b+d,(n+l)*c+e,(m+l-0.5*k)*b+d,(n+k)*c+e,(m+l-0.5*k)*b+d,n*c+e);Q(a,(m+l-0.5*k)*b+d,(n-k)*c+e,m*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);bd(a);k=0.8*g;l=0.8;m=1;n=0.5;P(a,m*b+d,(n-l)*c+e,h);Q(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);Q(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);
Q(a,m*b+d,(n+l)*c+e,(m+l-0.5*k)*b+d,(n+k)*c+e,(m+l-0.5*k)*b+d,n*c+e);Q(a,(m+l-0.5*k)*b+d,(n-k)*c+e,m*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);bd(a);b=a.s;z.v(a);return b},Email:function(a,b,c){a=z.u();P(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);bd(a);P(a,0,0,s);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);dd(a);b=a.s;z.v(a);return b},Ethernet:function(a,b,c){a=z.u();P(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*
b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);bd(a);P(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);bd(a);P(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);bd(a);P(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);dd(a);b=a.s;z.v(a);return b},Power:function(a,b,c){a=z.u();
var d=N.ua,e=0.4*d,g=0.4,k=z.O(),l=z.O(),m=z.O(),n=z.O();N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.5,k,k,l,m,n);var p=z.ic(l.x,l.y);P(a,l.x*b,l.y*c,h);Q(a,m.x*b,m.y*c,n.x*b,n.y*c,(0.5+g)*b,0.5*c);Q(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,(0.5-e)*b,(0.5+g)*c,(0.5-g)*b,(0.5+e)*c,(0.5-g)*b,0.5*c);N.ki(0.5-g,0.5,0.5-g,0.5-e,0.5-e,0.5-g,0.5,0.5-g,0.5,m,n,l,k,k);Q(a,m.x*b,m.y*c,n.x*b,n.y*c,l.x*b,l.y*c);e=0.3*d;g=0.3;N.ki(0.5-g,0.5,0.5-g,0.5-e,0.5-e,0.5-g,0.5,0.5-g,0.5,m,
n,l,k,k);a.lineTo(l.x*b,l.y*c);Q(a,n.x*b,n.y*c,m.x*b,m.y*c,(0.5-g)*b,0.5*c);Q(a,(0.5-g)*b,(0.5+e)*c,(0.5-e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);Q(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);N.ki(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.5,k,k,l,m,n);Q(a,n.x*b,n.y*c,m.x*b,m.y*c,l.x*b,l.y*c);bd(a);P(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);bd(a);z.B(k);z.B(l);z.B(m);z.B(n);z.B(p);b=a.s;b.G=new O(0.25,0.55);b.H=new O(0.75,0.8);z.v(a);return b},Fallout:function(a,
b,c){a=z.u();var d=0.5*N.ua;P(a,0*b,0.5*c,h);Q(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);Q(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;P(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;bd(a);P(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;bd(a);P(a,
(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);bd(a);b=a.s;b.jc=Ig;z.v(a);return b},IrritationHazard:function(a,b,c){a=z.u();P(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);bd(a);b=a.s;b.G=new O(0.3,0.3);b.H=new O(0.7,0.7);z.v(a);return b},
ElectricalHazard:function(a,b,c){a=z.u();P(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);bd(a);b=a.s;z.v(a);return b},FireHazard:function(a,b,c){a=z.u();P(a,0.1*b,1*c,h);Q(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);Q(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);Q(a,0.59*b,0.29*c,
0.58*b,0.28*c,0.59*b,0.18*c);Q(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);Q(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);Q(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);bd(a);b=a.s;b.G=new O(0.05,0.645);b.H=new O(0.884,0.908);z.v(a);return b},BpmnActivityLoop:function(a,b,c){a=z.u();var d=0.5*(4*(Math.SQRT2-1)/3);P(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,s);Q(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);Q(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);Q(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);Q(a,
0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);b=a.s;z.v(a);return b},BpmnActivityParallel:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},BpmnActivitySequential:function(a,b,c){a=z.u();P(a,0,0,s);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.s;z.v(a);return b},BpmnActivityAdHoc:function(a,b,
c){a=z.u();P(a,0,0,s);P(a,1*b,1*c,s);P(a,0,0.5*c,s);Q(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);Q(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);b=a.s;z.v(a);return b},BpmnActivityCompensation:function(a,b,c){a=z.u();P(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);bd(a);b=a.s;z.v(a);return b},BpmnTaskMessage:function(a,b,c){a=z.u();P(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);bd(a);
P(a,0,0.2*c,s);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);dd(a);b=a.s;z.v(a);return b},BpmnTaskScript:function(a,b,c){a=z.u();P(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);Q(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);Q(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);bd(a);P(a,0.45*b,0.73*c,s);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);dd(a);b=a.s;z.v(a);return b},BpmnTaskUser:function(a,b,c){a=z.u();P(a,0,0,s);P(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*
b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);Q(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);Q(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;Q(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);Q(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);Q(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);Q(a,(0.5+
d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);P(a,0.2*b,1*c,s);a.lineTo(0.2*b,0.8*c);P(a,0.8*b,1*c,s);a.lineTo(0.8*b,0.8*c);b=a.s;z.v(a);return b},BpmnEventConditional:function(a,b,c){a=z.u();P(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);bd(a);P(a,0.2*b,0.2*c,s);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*
b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);dd(a);b=a.s;z.v(a);return b},BpmnEventError:function(a,b,c){a=z.u();P(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);bd(a);b=a.s;z.v(a);return b},BpmnEventEscalation:function(a,b,c){a=z.u();P(a,0,0,s);P(a,1*b,1*c,s);P(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);bd(a);b=a.s;z.v(a);return b},BpmnEventTimer:function(a,b,c){a=z.u();var d=0.5*N.ua;P(a,1*
b,0.5*c,h);Q(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);Q(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);Q(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);Q(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);P(a,0.5*b,0,s);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);dd(a);b=a.s;b.jc=Ig;z.v(a);return b}};
for(var Gl in N.ri)N.ri[Gl.toLowerCase()]=Gl;
N.Mu={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""};N.yz={};N.Nu={};N.co=function(a){if(N.Mu){for(var b in N.Mu){var c=Uc(N.Mu[b],s);N.Nu[b]=c;N.Nu[b.toLowerCase()]=b}N.Mu=f}return N.Nu[a]};V.FigureGenerators=N.ri;V.ArrowheadGeometries=N.Nu;
function B(a){0===arguments.length?F.call(this):F.call(this,a);this.ba=49663;this.ln=this.Qg="";this.Oq=this.Lq=this.Xq=this.Zp=q;this.Zq="";this.ng=this.Yq=this.El=q;this.Nq="";this.wn=q;this.Mq=(new qa(NaN,NaN)).freeze();this.Pq="";this.xn=q;this.Qd="";this.kn=this.pp=this.dk=q;this.Rh=(new G(NaN,NaN)).freeze();this.iq="";this.rk=q;this.jq=$b;this.sq=N.dF;this.lq=N.cF;this.xp=q;this.$p=Hl;this.Bn=(new G(6,6)).freeze();this.An="gray";this.zn=4;this.rF=-1;this.oF=new H;this.tk=q;this.Wi=NaN}
z.ea("Part",B);z.Pa(B,F);B.prototype.cloneProtected=function(a){F.prototype.cloneProtected.call(this,a);a.ba=this.ba&-4097|49152;a.Qg=this.Qg;a.ln=this.ln;a.Zp=this.Zp;a.Xq=this.Xq;a.Lq=this.Lq;a.Oq=this.Oq;a.Zq=this.Zq;a.Yq=this.Yq;a.ng=q;a.Nq=this.Nq;a.Mq.assign(this.Mq);a.Pq=this.Pq;a.Qd=this.Qd;a.pp=this.pp;a.Rh.assign(this.Rh);a.iq=this.iq;a.jq=this.jq.Y();a.sq=this.sq.Y();a.lq=this.lq.Y();a.xp=this.xp;a.$p=this.$p;a.Bn.assign(this.Bn);a.An=this.An;a.zn=this.zn};
B.prototype.oh=function(a){F.prototype.oh.call(this,a);Ij(a);a.El=q;a.wn=q;a.xn=q;a.rk=q;a.tk=q};B.prototype.toString=function(){var a=z.ph(Object.getPrototypeOf(this))+"#"+z.fc(this);this.data&&(a+="("+Hd(this.data)+")");return a};B.LayoutNone=0;var yi;B.LayoutAdded=yi=1;var Di;B.LayoutRemoved=Di=2;var Wj;B.LayoutShown=Wj=4;var Xj;B.LayoutHidden=Xj=8;B.LayoutNodeSized=16;var Ui;B.LayoutGroupLayout=Ui=32;var Hl;B.LayoutStandard=Hl=yi|Di|Wj|Xj|16|Ui;
B.prototype.nm=function(a,b,c,d,e,g,k){var l=this.h;l!==q&&(a===zd&&"elements"===b?e instanceof F&&zi(e,function(a){Ai(l,a)}):a===Gd&&"elements"===b&&e instanceof F&&zi(e,function(a){Ci(l,a)}),l.Zc(a,b,c,d,e,g,k))};B.prototype.updateTargetBindings=B.prototype.Eb=function(a){F.prototype.Eb.call(this,a);if(this.data!==q)for(a=this.elements;a.next();){var b=a.value;b instanceof F&&zi(b,function(a){a.data!==q&&a.Eb()})}};z.A(B,{Iu:"adornments"},function(){return this.ng===q?z.mg:this.ng.k});
B.prototype.findAdornment=B.prototype.bo=function(a){x&&z.j(a,"string",B,"findAdornment:category");var b=this.ng;return b===q?q:b.Ba(a)};B.prototype.addAdornment=B.prototype.Bk=function(a,b){if(b!==q){x&&(z.j(a,"string",B,"addAdornment:category"),z.l(b,Ne,B,"addAdornment:ad"));var c=q,d=this.ng;d!==q&&(c=d.Ba(a));if(c!==b){if(c!==q){var e=c.h;e!==q&&e.remove(c)}d===q&&(this.ng=d=new ta("string",Ne));b.Qg!==a&&(b.Ic=a);d.add(a,b);c=this.h;c!==q&&(c.add(b),b.data=this.data)}}};
B.prototype.removeAdornment=B.prototype.Wk=function(a){x&&z.j(a,"string",B,"removeAdornment:category");var b=this.ng;if(b!==q){var c=b.Ba(a);if(c!==q){var d=c.h;d!==q&&d.remove(c)}b.remove(a);0===b.count&&(this.ng=q)}};B.prototype.clearAdornments=B.prototype.ge=function(){var a=this.ng;if(a!==q){for(var b=z.zb(),a=a.k;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Wk(b[c]);z.Da(b)}};
B.prototype.updateAdornments=function(){var a=this.h;if(a!==q){a:{var b=q;if(this.$a&&this.Oz){var c=this.pm;if(!(c===q||!this.ya.W()||!this.Db()||!c.Rk()||!c.ya.W())){b=this.bo("Selection");if(b===q){b=this.mE;b===q&&(this instanceof E?b=a.yD:this instanceof B&&(b=this instanceof oa?a.YC:a.MD));if(!(b instanceof Ne))break a;Pe(b);b=b.copy();if(!(b instanceof Ne))break a;b.Ic="Selection";b.gm=h;b.Hc=c}if(b!==q){var d=b.placeholder;if(d!==q){var e=c.Dj(),g=0;c instanceof V&&(g=c.pb);var k=z.$k();k.q((c.Ma.width+
g)*e,(c.Ma.height+g)*e);d.Fa=k;z.Cj(k)}b.angle=c.Nk();b.type!==ug?(d=z.O(),b.location=c.nb($b,d),z.B(d)):b.ca()}this.Bk("Selection",b)}}else this.Wk("Selection")}a=a.tb.df.n;c=a.length;for(b=0;b<c;b++)d=a[b],d.isEnabled&&d.updateAdornments(this);for(a=this.Iu;a.next();)c=a.value,c.gm||c.rb!==q&&c.ca()}};z.A(B,{layer:"layer"},w("kn"));z.A(B,{h:"diagram"},function(){var a=this.kn;return a!==q?a.h:q});z.g(B,"layerName",B.prototype.Ud);
z.defineProperty(B,{Ud:"layerName"},w("ln"),function(a){var b=this.ln;if(b!==a){z.j(a,"string",B,"layerName");var c=this.h;if(!(c!==q&&c.Mk(a)===q)&&(this.ln=a,this.i("layerName",b,a),b=this.layer,b!==q&&b.name!==a&&(c=b.h,c!==q&&(a=c.Mk(a),a!==q&&a!==b)))){var d=b.De(-1,this,h);0<=d&&c.Zc(Gd,"parts",b,this,q,d,h);d=a.em(99999999,this,h);0<=d&&c.Zc(zd,"parts",a,q,this,h,d);d=this.uo;if(d!==q){var e=c.Wa;c.Wa=h;d(this,b,a);c.Wa=e}}}});z.g(B,"layerChanged",B.prototype.uo);
z.defineProperty(B,{uo:"layerChanged"},w("Zp"),function(a){var b=this.Zp;b!==a&&(a!==q&&z.j(a,"function",B,"layerChanged"),this.Zp=a,this.i("layerChanged",b,a))});z.A(B,{gc:"isTemporary"},function(){return this.kn!==q?this.kn.gc:s});function Il(a){var b=a.h;b!==q&&(Ph(b),0!==(a.ba&16384)!==h&&(a.ba|=16384,a.xa(),b.Hf.add(a),b.oc()))}function lh(a){0!==(a.ba&16384)!==s&&(a.updateAdornments(),a.ba&=-16385,a=a.h,a!==q&&(a.qe=h))}z.g(B,"location",B.prototype.location);
z.defineProperty(B,{location:"location"},w("Rh"),function(a){var b=this.Rh;if(!b.N(a)&&!(this instanceof E)){x&&z.l(a,G,B,"location");a=a.Y();var c=this.h;this.Rh=a;if(gi(this)===s){var d=this.kb,e=a.x-b.x,g=a.y-b.y,k=d.copy();d.q(k.x+e,k.y+g);ak(this);!d.N(k)&&c&&this.i("position",k,d)}this.i("location",b,a)}});function ak(a){if(hi(a)===s){var b=a.h;b!==q&&(b.Hf.add(a),a instanceof D&&!b.Aa.jb&&a.Gg(),b.oc());Jl(a,h)}}
function bk(a){if(hi(a)!==s){var b=a.position,c=a.location;if(!c.W()||!b.W())Kl(a,b,c),Ej(a);var b=a.kb,c=a.Fb,d=c.copy();c.Ua();c.x=b.x;c.y=b.y;c.freeze();Fj(a,d,c);Jl(a,s)}}z.A(B,{Qb:"locationObject"},function(){if(this.rk===q){var a=this.fs;a!==f&&a!==q&&""!==a?(a=this.Be(a),this.rk=a!==q?a:this):this.rk=this instanceof Ne&&this.aa!==ug&&this.rb!==q?this.rb:this}return this.rk.visible?this.rk:this});z.g(B,"minLocation",B.prototype.GD);
z.defineProperty(B,{GD:"minLocation"},w("sq"),function(a){var b=this.sq;b.N(a)||(x&&z.l(a,G,B,"minLocation"),this.sq=a=a.Y(),this.i("minLocation",b,a))});z.g(B,"maxLocation",B.prototype.AD);z.defineProperty(B,{AD:"maxLocation"},w("lq"),function(a){var b=this.lq;b.N(a)||(x&&z.l(a,G,B,"maxLocation"),this.lq=a=a.Y(),this.i("maxLocation",b,a))});z.g(B,"locationObjectName",B.prototype.fs);
z.defineProperty(B,{fs:"locationObjectName"},w("iq"),function(a){var b=this.iq;b!==a&&(x&&z.j(a,"string",B,"locationObjectName"),this.iq=a,this.rk=q,Rj(this),this.i("locationObjectName",b,a))});z.g(B,"locationSpot",B.prototype.af);z.defineProperty(B,{af:"locationSpot"},w("jq"),function(a){var b=this.jq;b.N(a)||(x&&(z.l(a,O,B,"locationSpot"),Ob(a)||z.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.jq=a=a.Y(),Rj(this),this.i("locationSpot",b,a))});
B.prototype.move=B.prototype.move=ba("position");B.prototype.moveTo=B.prototype.moveTo=function(a,b){var c=z.ic(a,b);this.move(c);z.B(c)};
B.prototype.isVisible=B.prototype.Db=function(){if(!this.visible)return s;var a=this.layer;if(a!==q&&!a.visible)return s;a=this.bb;if(a!==q&&(!a.Ze||!a.Db()))return s;if(this instanceof D){a=this.OC();if(a!==q&&!a.Lc)return s;a=this.Yc;if(a!==q){var b={};b[z.fc(this)]=h;return Ll(a,b)}}else if(this instanceof E){var b=h,c=this.h;c!==q&&(b=c.Mc);c=this.da;if(c!==q){if(this.mc&&b&&!c.Lc)return s;c=Ml(c);if(c===q||c===a)return s}c=this.ja;if(c!==q){if(this.mc&&!b&&!c.Lc)return s;b=Ml(c);if(b===q||b===
a)return s}}return h};function Ll(a,b){var c=a.da;if(c!==q){var d=c.Yc;if(d!==q)b[z.fc(c)]||(b[z.fc(c)]=h,Ll(d,b));else if(Ml(c)===q)return s}c=a.ja;if(c!==q)if(d=c.Yc,d!==q)b[z.fc(c)]||(b[z.fc(c)]=h,Ll(d,b));else if(Ml(c)===q)return s;return h}
B.prototype.findObject=B.prototype.Be=function(a){if(this.name===a)return this;this.tk===q&&(this.tk={});var b=this.tk;if(b[a]!==f)return b[a];for(var c=this.za.n,d=c.length,e=0;e<d;e++){var g=c[e];if(g.name===a)return b[a]=g;if(g instanceof F&&!g.nD()&&(g=g.Be(a),g!==q))return b[a]=g}return b[a]=q};
function Nl(a,b,c,d){d===f&&(d=new G);Sb(c)&&(c=cc);var e=b.Ma;d.q(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(b===q||b===a)return d;b.transform.Va(d);for(b=b.ha;b!==q&&b!==a;)b.transform.Va(d),b=b.ha;a.qk.Va(d);d.offset(-a.Dc.x,-a.Dc.y);return d}B.prototype.ensureBounds=B.prototype.pi=function(){gh(this,Infinity,Infinity);this.zc()};
function oh(a,b,c){c=c===f?a.oF:c;var d;isNaN(a.Wi)&&(a.Wi=nl(a));d=a.Wi;var e=2*d;if(!a.Fj)return c.q(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,g=b.width;b=b.height;var k=a.shadowBlur;a=a.rE;g+=k;b+=k;d-=k/2;e-=k/2;0<a.x?g+=a.x:(d+=a.x,g-=a.x);0<a.y?b+=a.y:(e+=a.y,b-=a.y);c.q(d-1,e-1,g+2,b+2);return c}
B.prototype.zc=function(){Ej(this);if(gi(this)===s)bk(this);else{var a=z.hf();a.assign(this.Fb);Oj(this);this.Fb.Ua();var b=kh(this);this.sj(0,0,this.Dc.width,this.Dc.height);var c=this.position;Kl(this,c,this.location);var d=this.Fb;d.x=c.x;d.y=c.y;d.freeze();Ej(this);Fj(this,a,d);a.N(d)?this.Bf(b):this.Td()&&(!N.I(a.width,d.width)||!N.I(a.height,d.height))&&this.K(16);z.Jc(a);Jl(this,s)}};
function Kl(a,b,c){var d=NaN,e=NaN,g=z.O(),e=a.af,d=a.Qb;Sb(e)&&z.m("Spot must be real: "+e.toString());var k=d.Ma;g.Ds(0,0,k.width,k.height,e);if(d!==a){d.transform.Va(g);d.pb&&(e=d.de/2,g.offset(-e,-e));for(d=d.ha;d!==q&&d!==a;)d.transform.Va(g),d=d.ha}a.qk.Va(g);g.offset(-a.Dc.x,-a.Dc.y);c.W()?(d=c.x-g.x,e=c.y-g.y,b.q(d,e)):b.W()&&(d=b.x,e=b.y,c.q(d+g.x,e+g.y));z.B(g)}
function Bi(a,b,c){Kj(a,s);a instanceof D&&aj(c,a);!a.layer.gc&&!b&&c.vc();b=a.Fb;var d=c.gb;d.W()?(kh(a)?Ab(b,d)||(a.Bf(s),Il(a)):b.xf(d)&&a.Bf(h),a.updateAdornments()):c.mk=h}B.prototype.Qk=ca(h);
function mh(a,b){if(a.visible){var c=a.Fb;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=a.transform,e=a.ha,g=a.Bi;g.reset();e!==q&&(e.zi()?g.multiply(e.se):e.ha!==q&&g.multiply(e.ha.se));g.multiply(a.Gc);a.Le!==q&&(Nj(a,b,a.Le,h,h),b.fillRect(c.x,c.y,c.width,c.height));a.Le===q&&a.bd===q&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));a.bd!==q&&(d.$r()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Ma,c=e.width,e=e.height,Nj(a,b,a.bd,h),b.fillRect(0,0,c+
0,e+0),d.$r()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}}B.prototype.Td=ca(h);z.g(B,"category",B.prototype.Ic);
z.defineProperty(B,{Ic:"category"},w("Qg"),function(a){var b=this.Qg;if(b!==a){z.j(a,"string",B,"category");this.Qg=a;this.i("category",b,a);var c=this.h,d=this.data;if(c!==q&&d!==q){var e=c.ga;this instanceof E?(e instanceof T?e.pE(d,a):e instanceof Ld&&e.VH(d,a),c=c.findTemplateForLinkData(d,a),c instanceof E&&(Pe(c),c=c.copy(),c instanceof E&&Ol(this,c,b,a))):this instanceof Ne||(e!==q&&e.Jv(d,a),c=c.findTemplateForNodeData(d,a),c instanceof B&&(Pe(c),c=c.copy(),c instanceof B&&!(c instanceof E)&&
Ol(this,c,b,a)))}this instanceof Ne&&(a=this.nj,a!==q&&(c=a.ng,c!==q&&c.remove(b),a.Bk(this.Qg,this)))}});
function Ol(a,b,c,d){b.constructor!==a.constructor&&!z.SE&&(z.SE=h,z.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),z.trace("  Old class: "+z.ph(a)+", new class: "+z.ph(b)+", part: "+a.toString()));a.ge();var e=a.data;c=a.Ud;var g=a.$a,k=h,l=h,m=s;a instanceof D&&(k=a.th,l=a.Lc,m=a.ym);b.oh(a);b.cloneProtected(a);a.Qg=d;a.ca();a.xa();b=a.h;d=h;b!==q&&(d=b.cc,b.cc=h);a.Km=e;e!==q&&a.Eb();b!==q&&(b.cc=d);e=a.Ud;e!==c&&(a.ln=c,a.Ud=e);a instanceof D&&
(a.th=k,a.Lc=l,a.ym=m);a.$a=g}B.prototype.canCopy=function(){if(!this.Hy)return s;var a=this.layer;if(a===q)return h;if(!a.pj)return s;a=a.h;return a===q?h:!a.pj?s:h};B.prototype.canDelete=function(){if(!this.Ky)return s;var a=this.layer;if(a===q)return h;if(!a.Ek)return s;a=a.h;return a===q?h:!a.Ek?s:h};B.prototype.canEdit=function(){if(!this.Yz)return s;var a=this.layer;if(a===q)return h;if(!a.Pn)return s;a=a.h;return a===q?h:!a.Pn?s:h};
B.prototype.canGroup=function(){if(!this.Zy)return s;var a=this.layer;if(a===q)return h;if(!a.Ln)return s;a=a.h;return a===q?h:!a.Ln?s:h};B.prototype.canMove=function(){if(!this.qz)return s;var a=this.layer;if(a===q)return h;if(!a.Fk)return s;a=a.h;return a===q?h:!a.Fk?s:h};B.prototype.canReshape=function(){if(!this.Jz)return s;var a=this.layer;if(a===q)return h;if(!a.Mn)return s;a=a.h;return a===q?h:!a.Mn?s:h};
B.prototype.canResize=function(){if(!this.Kz)return s;var a=this.layer;if(a===q)return h;if(!a.Nn)return s;a=a.h;return a===q?h:!a.Nn?s:h};B.prototype.canRotate=function(){if(!this.Lz)return s;var a=this.layer;if(a===q)return h;if(!a.On)return s;a=a.h;return a===q?h:!a.On?s:h};B.prototype.canSelect=function(){if(!this.Ij)return s;var a=this.layer;if(a===q)return h;if(!a.te)return s;a=a.h;return a===q?h:!a.te?s:h};z.g(B,"copyable",B.prototype.Hy);
z.defineProperty(B,{Hy:"copyable"},function(){return 0!==(this.ba&1)},function(a){var b=0!==(this.ba&1);b!==a&&(x&&z.j(a,"boolean",B,"copyable"),this.ba^=1,this.i("copyable",b,a))});z.g(B,"deletable",B.prototype.Ky);z.defineProperty(B,{Ky:"deletable"},function(){return 0!==(this.ba&2)},function(a){var b=0!==(this.ba&2);b!==a&&(x&&z.j(a,"boolean",B,"deletable"),this.ba^=2,this.i("deletable",b,a))});z.g(B,"textEditable",B.prototype.Yz);
z.defineProperty(B,{Yz:"textEditable"},function(){return 0!==(this.ba&4)},function(a){var b=0!==(this.ba&4);b!==a&&(x&&z.j(a,"boolean",B,"textEditable"),this.ba^=4,this.i("textEditable",b,a),this.updateAdornments())});z.g(B,"groupable",B.prototype.Zy);z.defineProperty(B,{Zy:"groupable"},function(){return 0!==(this.ba&8)},function(a){var b=0!==(this.ba&8);b!==a&&(x&&z.j(a,"boolean",B,"groupable"),this.ba^=8,this.i("groupable",b,a))});z.g(B,"movable",B.prototype.qz);
z.defineProperty(B,{qz:"movable"},function(){return 0!==(this.ba&16)},function(a){var b=0!==(this.ba&16);b!==a&&(x&&z.j(a,"boolean",B,"movable"),this.ba^=16,this.i("movable",b,a))});z.g(B,"selectionAdorned",B.prototype.Oz);z.defineProperty(B,{Oz:"selectionAdorned"},function(){return 0!==(this.ba&32)},function(a){var b=0!==(this.ba&32);b!==a&&(x&&z.j(a,"boolean",B,"selectionAdorned"),this.ba^=32,this.i("selectionAdorned",b,a),this.updateAdornments())});z.g(B,"isInDocumentBounds",B.prototype.qv);
z.defineProperty(B,{qv:"isInDocumentBounds"},function(){return 0!==(this.ba&64)},function(a){var b=0!==(this.ba&64);b!==a&&(x&&z.j(a,"boolean",B,"isInDocumentBounds"),this.ba^=64,this.i("isInDocumentBounds",b,a))});z.g(B,"isLayoutPositioned",B.prototype.sv);z.defineProperty(B,{sv:"isLayoutPositioned"},function(){return 0!==(this.ba&128)},function(a){var b=0!==(this.ba&128);b!==a&&(x&&z.j(a,"boolean",B,"isLayoutPositioned"),this.ba^=128,this.i("isLayoutPositioned",b,a),this.K(a?Wj:Xj))});
z.g(B,"selectable",B.prototype.Ij);z.defineProperty(B,{Ij:"selectable"},function(){return 0!==(this.ba&256)},function(a){var b=0!==(this.ba&256);b!==a&&(x&&z.j(a,"boolean",B,"selectable"),this.ba^=256,this.i("selectable",b,a),this.updateAdornments())});z.g(B,"reshapable",B.prototype.Jz);z.defineProperty(B,{Jz:"reshapable"},function(){return 0!==(this.ba&512)},function(a){var b=0!==(this.ba&512);b!==a&&(x&&z.j(a,"boolean",B,"selectable"),this.ba^=512,this.i("selectable",b,a),this.updateAdornments())});
z.g(B,"resizable",B.prototype.Kz);z.defineProperty(B,{Kz:"resizable"},function(){return 0!==(this.ba&1024)},function(a){var b=0!==(this.ba&1024);b!==a&&(x&&z.j(a,"boolean",B,"selectable"),this.ba^=1024,this.i("selectable",b,a),this.updateAdornments())});z.g(B,"rotatable",B.prototype.Lz);z.defineProperty(B,{Lz:"rotatable"},function(){return 0!==(this.ba&2048)},function(a){var b=0!==(this.ba&2048);b!==a&&(x&&z.j(a,"boolean",B,"selectable"),this.ba^=2048,this.i("selectable",b,a),this.updateAdornments())});
z.g(B,"isSelected",B.prototype.$a);z.defineProperty(B,{$a:"isSelected"},function(){return 0!==(this.ba&4096)},function(a){var b=0!==(this.ba&4096);if(b!==a){x&&z.j(a,"boolean",B,"isSelected");var c=this.h;if(!a||this.canSelect()&&!(c!==q&&c.selection.count>=c.BD)){this.ba^=4096;var d=s;if(c!==q){d=c.cc;c.cc=h;var e=c.selection;e.Ua();a?e.add(this):e.remove(this);e.freeze()}this.i("isSelected",b,a);Il(this);a=this.nE;a!==q&&a(this);c!==q&&(c.oc(),c.cc=d)}}});z.g(B,"isShadowed",B.prototype.Fj);
z.defineProperty(B,{Fj:"isShadowed"},function(){return 0!==(this.ba&8192)},function(a){var b=0!==(this.ba&8192);b!==a&&(x&&z.j(a,"boolean",B,"isShadowed"),this.ba^=8192,this.i("isShadowed",b,a),this.xa())});function hi(a){return 0!==(a.ba&32768)}function Jl(a,b){a.ba=b?a.ba|32768:a.ba&-32769}function Kj(a,b){a.ba=b?a.ba|65536:a.ba&-65537}function kh(a){return 0!==(a.ba&131072)}B.prototype.Bf=function(a){this.ba=a?this.ba|131072:this.ba&-131073};z.g(B,"selectionObjectName",B.prototype.Ro);
z.defineProperty(B,{Ro:"selectionObjectName"},w("Zq"),function(a){var b=this.Zq;b!==a&&(x&&z.j(a,"string",B,"selectionObjectName"),this.Zq=a,this.El=q,this.i("selectionObjectName",b,a))});z.g(B,"selectionAdornmentTemplate",B.prototype.mE);z.defineProperty(B,{mE:"selectionAdornmentTemplate"},w("Xq"),function(a){var b=this.Xq;b!==a&&(x&&z.l(a,Ne,B,"selectionAdornmentTemplate"),this instanceof E&&(a.type=ug),this.Xq=a,this.i("selectionAdornmentTemplate",b,a))});
z.A(B,{pm:"selectionObject"},function(){if(this.El===q){var a=this.Ro;a!==q&&""!==a?(a=this.Be(a),this.El=a!==q?a:this):this instanceof E?(a=this.path,this.El=a!==q?a:this):this.El=this}return this.El});z.g(B,"selectionChanged",B.prototype.nE);z.defineProperty(B,{nE:"selectionChanged"},w("Yq"),function(a){var b=this.Yq;b!==a&&(a!==q&&z.j(a,"function",B,"selectionChanged"),this.Yq=a,this.i("selectionChanged",b,a))});z.g(B,"resizeAdornmentTemplate",B.prototype.$D);
z.defineProperty(B,{$D:"resizeAdornmentTemplate"},w("Lq"),function(a){var b=this.Lq;b!==a&&(x&&z.l(a,Ne,B,"resizeAdornmentTemplate"),this.Lq=a,this.i("resizeAdornmentTemplate",b,a))});z.g(B,"resizeObjectName",B.prototype.cE);z.defineProperty(B,{cE:"resizeObjectName"},w("Nq"),function(a){var b=this.Nq;b!==a&&(x&&z.j(a,"string",B,"resizeObjectName"),this.Nq=a,this.wn=q,this.i("resizeObjectName",b,a))});
z.A(B,{bE:"resizeObject"},function(){if(this.wn===q){var a=this.cE;a!==q&&""!==a?(a=this.Be(a),this.wn=a!==q?a:this):this.wn=this}return this.wn});z.g(B,"resizeCellSize",B.prototype.aE);z.defineProperty(B,{aE:"resizeCellSize"},w("Mq"),function(a){var b=this.Mq;b.N(a)||(x&&z.l(a,qa,B,"resizeCellSize"),this.Mq=a=a.Y(),this.i("resizeCellSize",b,a))});z.g(B,"rotateAdornmentTemplate",B.prototype.eE);
z.defineProperty(B,{eE:"rotateAdornmentTemplate"},w("Oq"),function(a){var b=this.Oq;b!==a&&(x&&z.l(a,Ne,B,"rotateAdornmentTemplate"),this.Oq=a,this.i("rotateAdornmentTemplate",b,a))});z.g(B,"rotateObjectName",B.prototype.gE);z.defineProperty(B,{gE:"rotateObjectName"},w("Pq"),function(a){var b=this.Pq;b!==a&&(x&&z.j(a,"string",B,"rotateObjectName"),this.Pq=a,this.xn=q,this.i("rotateObjectName",b,a))});
z.A(B,{fE:"rotateObject"},function(){if(this.xn===q){var a=this.gE;a!==q&&""!==a?(a=this.Be(a),this.xn=a!==q?a:this):this.xn=this}return this.xn});z.g(B,"text",B.prototype.text);z.defineProperty(B,{text:"text"},w("Qd"),function(a){var b=this.Qd;b!==a&&(x&&z.j(a,"string",B,"text"),this.Qd=a,this.i("text",b,a))});z.g(B,"containingGroup",B.prototype.bb);
z.defineProperty(B,{bb:"containingGroup"},w("dk"),function(a){if(this.Td()){var b=this.dk;if(b!==a){x&&a!==q&&z.l(a,oa,B,"containingGroup");if(a!==q&&(this===a||a.as(this)))this===a&&z.m("Cannot make a Group a member of itself: "+this.toString()),z.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.K(Di);var c=this.h;b!==q?Pl(b,this):this instanceof oa&&c!==q&&c.zk.remove(this);this.dk=a;a!==q?Ql(a,this):this instanceof oa&&c!==q&&c.zk.add(this);
this.K(yi);if(c!==q){var d=this.data,e=c.ga;d!==q&&e instanceof T&&e.Qz(d,e.xb(a!==q?a.data:q))}d=this.Gy;d!==q&&(e=h,c!==q&&(e=c.Wa,c.Wa=h),d(this,b,a),c!==q&&(c.Wa=e));if(this instanceof oa){c=new va(B);Me(c,this,h,0);for(c=c.k;c.next();)if(d=c.value,d instanceof D)for(d=d.rd;d.next();)e=d.value,Qi(e)}if(this instanceof D)for(d=this.rd;d.next();)e=d.value,Qi(e);this.i("containingGroup",b,a);a!==q&&a.Qv()}}else z.m("cannot set the Part.containingGroup of a Link or Adornment")});
function Ij(a){a=a.bb;a!==q&&(a.ca(),a.rb!==q&&a.rb.ca(),a.Gg())}B.prototype.Wr=function(){var a=this.dk;a!==q&&Ql(a,this)};B.prototype.Xr=function(){var a=this.dk;a!==q&&Pl(a,this)};B.prototype.Vl=function(){var a=this.data;if(a!==q){var b=this.h;b!==q&&(b=b.ga,b!==q&&b.XD(a))}};z.g(B,"containingGroupChanged",B.prototype.Gy);
z.defineProperty(B,{Gy:"containingGroupChanged"},w("pp"),function(a){var b=this.pp;b!==a&&(a!==q&&z.j(a,"function",B,"containingGroupChanged"),this.pp=a,this.i("containingGroupChanged",b,a))});z.A(B,{LJ:"topLevelPart"},function(){return Rl(this,this)});B.prototype.findTopLevelPart=B.prototype.TI=function(){return Rl(this,this)};function Rl(a,b){var c=b.bb;return c!==q?Rl(a,c):b instanceof D&&(c=b.Yc,c!==q)?Rl(a,c):b}
z.A(B,{so:"isTopLevel"},function(){return this.bb!==q||this instanceof D&&this.vi?s:h});B.prototype.isMemberOf=B.prototype.as=function(a){return!(a instanceof oa)?s:Sl(this,this,a)};function Sl(a,b,c){if(b===c||c===q)return s;var d=b.bb;return d!==q&&(d===c||Sl(a,d,c))?h:b instanceof D&&(b=b.Yc,b!==q)?Sl(a,b,c):s}B.prototype.findCommonContainingGroup=B.prototype.QG=function(a){return Tl(this,this,a)};
function Tl(a,b,c){if(b===q||c===q)return q;var d=b.bb;if(d===q)return q;if(b===c)return d;var e=c.bb;return e===q?q:d===e?e:Sl(a,c,d)?d:Sl(a,b,e)?e:Tl(a,d,e)}z.g(B,"layoutConditions",B.prototype.tD);z.defineProperty(B,{tD:"layoutConditions"},w("$p"),function(a){var b=this.$p;b!==a&&(x&&z.j(a,"number",B,"layoutConditions"),this.$p=a,this.i("layoutConditions",b,a))});
B.prototype.canLayout=function(){if(!this.sv||!this.Db())return s;var a=this.layer;return a!==q&&a.gc||this instanceof D&&this.vi?s:h};B.prototype.invalidateLayout=B.prototype.K=function(a){a===f&&(a=16777215);var b;!this.sv||0===(a&this.tD)?b=s:(b=this.layer,b!==q&&b.gc||this instanceof D&&this.vi?b=s:(b=this.h,b=b!==q&&b.Aa.jb?s:h));if(b)if(b=this.dk,b!==q){var c=b.Pb;c!==q?c.K():b.K(a)}else a=this.h,a!==q&&(c=a.Pb,c!==q&&c.K())};z.g(B,"dragComputation",B.prototype.Ly);
z.defineProperty(B,{Ly:"dragComputation"},w("xp"),function(a){var b=this.xp;b!==a&&(a!==q&&z.j(a,"function",B,"dragComputation"),this.xp=a,this.i("dragComputation",b,a))});z.g(B,"shadowOffset",B.prototype.rE);z.defineProperty(B,{rE:"shadowOffset"},w("Bn"),function(a){var b=this.Bn;b.N(a)||(x&&z.l(a,G,B,"shadowOffset"),this.Bn=a=a.Y(),this.xa(),this.i("shadowOffset",b,a))});z.g(B,"shadowColor",B.prototype.shadowColor);
z.defineProperty(B,{shadowColor:"shadowColor"},w("An"),function(a){var b=this.An;b!==a&&(x&&z.j(a,"string",B,"shadowColor"),this.An=a,this.xa(),this.i("shadowColor",b,a))});z.g(B,"shadowBlur",B.prototype.shadowBlur);z.defineProperty(B,{shadowBlur:"shadowBlur"},w("zn"),function(a){var b=this.zn;b!==a&&(x&&z.j(a,"number",B,"shadowBlur"),this.zn=a,this.xa(),this.i("shadowBlur",b,a))});
function Ne(a){0===arguments.length?B.call(this,Pg):B.call(this,a);this.Ud="Adornment";this.Qa=q;this.ba&=-257;this.Rh=new G(NaN,NaN);this.Fh=new J(H);this.rb=q;this.qx=s}z.ea("Adornment",Ne);z.Pa(Ne,B);da=Ne.prototype;da.toString=function(){var a=this.nj;return"Adornment("+this.Ic+")"+(a!==q?a.toString():"")};da.Ni=function(){return this.Qa&&this.Qa.Z instanceof E?this.Qa.Z.Ni():q};da.Ip=ca(q);
da.xv=function(){var a=this.Hc.Z,b=this.Hc;if(a instanceof E&&b instanceof V){var c=a.path,b=c.Sa;a.xv();for(var b=c.Sa,a=this.za,c=a.length,d=0;d<c;d++){var e=a.n[d];e.rh&&e instanceof V&&(e.Sa=b)}}};da.bx=function(){var a=this.nj;return a instanceof E?a.sc:q};z.A(Ne,{placeholder:"placeholder"},w("rb"));z.g(Ne,"isStandard",Ne.prototype.gm);z.defineProperty(Ne,{gm:"isStandard"},w("qx"),function(a){var b=this.qx;b!==a&&(x&&z.j(a,"boolean",Ne,"isStandard"),this.qx=a,this.i("isStandard",b,a))});
z.g(Ne,"adornedObject",Ne.prototype.Hc);z.defineProperty(Ne,{Hc:"adornedObject"},w("Qa"),function(a){x&&a!==q&&z.l(a,U,B,"adornedObject:val");var b=this.nj,c=q;a!==q&&(c=a.Z);b!==q&&(a===q||b!==c)&&b.Wk(this.Ic);this.Qa=a;c&&c.Bk(this.Ic,this)});z.A(Ne,{nj:"adornedPart"},function(){var a=this.Qa;return a!==q?a.Z:q});Ne.prototype.Qk=function(){var a=this.Qa;if(a===q)return h;a=a.Z;return a===q||!gi(a)};Ne.prototype.Td=ca(s);z.A(Ne,{bb:"containingGroup"},ca(q));
Ne.prototype.nm=function(a,b,c,d,e,g,k){if(a===zd&&"elements"===b)if(e instanceof Gg)this.rb===q?this.rb=e:this.rb!==e&&z.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof F){var l=il(e,e,function(a){return a instanceof Gg});l instanceof Gg&&(this.rb===q?this.rb=l:this.rb!==l&&z.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===Gd&&"elements"===b&&this.rb!==q&&(d===this.rb?this.rb=q:d instanceof F&&this.rb.ui(d)&&
(this.rb=q));B.prototype.nm.call(this,a,b,c,d,e,g,k)};Ne.prototype.updateAdornments=aa();Ne.prototype.Vl=aa();function D(a){0===arguments.length?B.call(this,Pg):B.call(this,a);this.Yb=new J(E);this.hn=this.eq=this.dq=q;this.Up=h;this.sr=s;this.nr=q;this.kp=this.Vp=h;this.lp=N.gF;this.Sc=this.Pg=q;this.kh=s}z.ea("Node",D);z.Pa(D,B);
D.prototype.cloneProtected=function(a){B.prototype.cloneProtected.call(this,a);a.dq=this.dq;a.eq=this.eq;a.Up=this.Up;a.sr=this.sr;a.nr=this.nr;a.Vp=this.Vp;a.kp=this.kp;a.lp=this.lp.Y()};D.prototype.oh=function(a){B.prototype.oh.call(this,a);a.Gg();a.Pg=this.Pg;a.Sc=q};var Ul;D.DirectionDefault=Ul=z.w(D,"DirectionDefault",0);D.DirectionAbsolute=z.w(D,"DirectionAbsolute",1);var Vl;D.DirectionRotatedNode=Vl=z.w(D,"DirectionRotatedNode",2);var nj;
D.DirectionRotatedNodeOrthogonal=nj=z.w(D,"DirectionRotatedNodeOrthogonal",3);function Wl(a,b){b!==q&&(a.Pg===q&&(a.Pg=new va(Xl)),a.Pg.add(b))}D.prototype.nm=function(a,b,c,d,e,g,k){a===zd&&"elements"===b?this.Sc=q:a===Gd&&"elements"===b&&(this.h===q?this.Sc=q:d instanceof U&&gl(this,d,function(a,b){ck(a,b,h)}));B.prototype.nm.call(this,a,b,c,d,e,g,k)};
D.prototype.invalidateConnectedLinks=D.prototype.Gg=function(a){a===f&&(a=q);for(var b=this.rd;b.next();){var c=b.value;if(!(a!==q&&a.contains(c))){var d=c.Kc;d!==q&&(d.Pd=q);var e=c.td;e!==q&&e!==d&&(e.Pd=q);c.bc()}}};D.prototype.Qk=ca(h);z.g(D,"avoidable",D.prototype.By);z.defineProperty(D,{By:"avoidable"},w("kp"),function(a){var b=this.kp;if(b!==a){x&&z.j(a,"boolean",D,"avoidable");this.kp=a;var c=this.h;c!==q&&aj(c,this);this.i("avoidable",b,a)}});z.g(D,"avoidableMargin",D.prototype.hC);
z.defineProperty(D,{hC:"avoidableMargin"},w("lp"),function(a){"number"===typeof a?a=new ub(a):z.l(a,ub,D,"avoidableMargin");var b=this.lp;if(!b.N(a)){this.lp=a=a.Y();var c=this.h;c!==q&&aj(c,this);this.i("avoidableMargin",b,a)}});D.prototype.canAvoid=function(){return this.By&&!this.vi};D.prototype.getAvoidableRectangle=D.prototype.WG=function(a){a.set(this.ya);a.Gu(this.hC);return a};function Ml(a){for(;a!==q&&!a.Db();)a=a.bb;return a}z.A(D,{rd:"linksConnected"},function(){return this.Yb.k});
D.prototype.findLinksConnected=D.prototype.RG=function(a){a===f&&(a=q);if(a===q)return this.Yb.k;x&&z.j(a,"string",D,"findLinksConnected:pid");var b=new Na(this.Yb),c=this;b.Vk=function(b){return b.da===c&&b.wf===a||b.ja===c&&b.lg===a};return b};D.prototype.findLinksOutOf=D.prototype.ev=function(a){a===f&&(a=q);x&&a!==q&&z.j(a,"string",D,"findLinksOutOf:pid");var b=new Na(this.Yb),c=this;b.Vk=function(b){return b.da!==c?s:a===q?h:b.wf===a};return b};
D.prototype.findLinksInto=D.prototype.Wf=function(a){a===f&&(a=q);x&&a!==q&&z.j(a,"string",D,"findLinksInto:pid");var b=new Na(this.Yb),c=this;b.Vk=function(b){return b.ja!==c?s:a===q?h:b.lg===a};return b};
D.prototype.findNodesConnected=D.prototype.LC=function(a){a===f&&(a=q);x&&a!==q&&z.j(a,"string",D,"findNodesConnected:pid");for(var b=q,c=q,d=this.Yb.k;d.next();){var e=d.value;if(e.da===this){if(a===q||e.wf===a)e=e.ja,b!==q?b.add(e):c!==q&&c!==e?(b=new va(D),b.add(c),b.add(e)):c=e}else if(e.ja===this&&(a===q||e.lg===a))e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new va(D),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Ma(c):z.mg};
D.prototype.findNodesOutOf=D.prototype.OI=function(a){a===f&&(a=q);x&&a!==q&&z.j(a,"string",D,"findNodesOutOf:pid");for(var b=q,c=q,d=this.Yb.k;d.next();){var e=d.value;if(e.da===this&&(a===q||e.wf===a))e=e.ja,b!==q?b.add(e):c!==q&&c!==e?(b=new va(D),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Ma(c):z.mg};
D.prototype.findNodesInto=D.prototype.NI=function(a){a===f&&(a=q);x&&a!==q&&z.j(a,"string",D,"findNodesInto:pid");for(var b=q,c=q,d=this.Yb.k;d.next();){var e=d.value;if(e.ja===this&&(a===q||e.lg===a))e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new va(D),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Ma(c):z.mg};
D.prototype.findLinksBetween=D.prototype.LI=function(a,b,c){b===f&&(b=q);c===f&&(c=q);x&&(z.l(a,D,D,"findLinksBetween:othernode"),b!==q&&z.j(b,"string",D,"findLinksBetween:pid"),c!==q&&z.j(c,"string",D,"findLinksBetween:otherpid"));var d=new Na(this.Yb),e=this;d.Vk=function(d){return d.da===e&&d.ja===a&&(b===q||d.wf===b)&&(c===q||d.lg===c)||d.da===a&&d.ja===e&&(c===q||d.wf===c)&&(b===q||d.lg===b)?h:s};return d};
D.prototype.findLinksTo=D.prototype.MI=function(a,b,c){b===f&&(b=q);c===f&&(c=q);x&&(z.l(a,D,D,"findLinksTo:othernode"),b!==q&&z.j(b,"string",D,"findLinksTo:pid"),c!==q&&z.j(c,"string",D,"findLinksTo:otherpid"));var d=new Na(this.Yb),e=this;d.Vk=function(d){return d.da!==e||d.ja!==a||b!==q&&d.wf!==b||c!==q&&d.lg===c?s:h};return d};z.g(D,"linkConnected",D.prototype.vD);
z.defineProperty(D,{vD:"linkConnected"},w("dq"),function(a){var b=this.dq;b!==a&&(a!==q&&z.j(a,"function",D,"linkConnected"),this.dq=a,this.i("linkConnected",b,a))});z.g(D,"linkDisconnected",D.prototype.wD);z.defineProperty(D,{wD:"linkDisconnected"},w("eq"),function(a){var b=this.eq;b!==a&&(a!==q&&z.j(a,"function",D,"linkDisconnected"),this.eq=a,this.i("linkDisconnected",b,a))});
function Yl(a,b,c){if(!a.Yb.contains(b)){a.Yb.add(b);var d=a.vD;if(d!==q){var e=h,g=a.h;g!==q&&(e=g.Wa,g.Wa=h);d(a,b,c);g!==q&&(g.Wa=e)}b.mc&&(c=b.da,b=b.ja,c!==q&&(b!==q&&c!==b)&&(d=h,g=a.h,g!==q&&(d=g.Mc),a=d?b:c,e=d?c:b,a.kh||(a.kh=e),e.th&&!(g!==q&&g.Aa.jb)&&(d?c===e&&(e.th=s):b===e&&(e.th=s))))}}
function Zl(a,b,c){if(a.Yb.remove(b)){var d=a.wD,e=a.h;if(d!==q){var g=h;e!==q&&(g=e.Wa,e.Wa=h);d(a,b,c);e!==q&&(e.Wa=g)}b.mc&&(c=h,e!==q&&(c=e.Mc),a=c?b.ja:b.da,b=c?b.da:b.ja,a!==q&&(a.kh=s),b!==q&&!b.th&&(0===b.Yb.count?(b.kh=q,e!==q&&e.Aa.jb||(b.th=h)):Vi(b)))}}function Vi(a){a.kh=s;if(0!==a.Yb.count){var b=h,c=a.h;if(!(c!==q&&c.Aa.jb)){c!==q&&(b=c.Mc);for(c=a.Yb.k;c.next();){var d=c.value;if(d.mc)if(b){if(d.da===a){a.th=s;return}}else if(d.ja===a){a.th=s;return}}a.th=h}}}
D.prototype.Wr=function(){B.prototype.Wr.call(this);Vi(this);var a=this.hn;a!==q&&$l(a,this)};D.prototype.Xr=function(){B.prototype.Xr.call(this);var a=this.hn;a!==q&&a.Pe!==q&&(a.Pe.remove(this),a.ca())};D.prototype.Vl=function(){if(0<this.Yb.count){var a=this.h;if(a===q)return;for(var b=this.Yb.copy().k;b.next();)a.remove(b.value)}this.Yc=q;B.prototype.Vl.call(this)};z.A(D,{vi:"isLinkLabel"},function(){return this.hn!==q});z.g(D,"labeledLink",D.prototype.Yc);
z.defineProperty(D,{Yc:"labeledLink"},w("hn"),function(a){var b=this.hn;if(b!==a){x&&a!==q&&z.l(a,E,D,"labeledLink");var c=this.h,d=this.data;if(b!==q&&(b.Pe!==q&&(b.Pe.remove(this),b.ca()),c!==q&&d!==q&&!c.Aa.jb)){var e=b.data,g=c.ga;if(e!==q&&g instanceof T){var k=g.xb(d);k!==f&&g.OH(e,k)}}this.hn=a;a!==q&&($l(a,this),c!==q&&(d!==q&&!c.Aa.jb)&&(e=a.data,g=c.ga,e!==q&&g instanceof T&&(k=g.xb(d),k!==f&&g.XB(e,k))));Rj(this);this.i("labeledLink",b,a)}});
D.prototype.findPort=D.prototype.Pr=function(a){x&&z.j(a,"string",D,"findPort:pid");if(this.Sc===q){if(""===a&&this.Oi===s)return this;dk(this)}if(this.Sc!==q){var b=this.Sc.Ba(a);if(b!==q)return b}if(""!==a&&this.Sc!==q&&(b=this.Sc.Ba(""),b!==q))return b;this.Sc===q&&dk(this);return this};z.A(D,{port:"port"},function(){return this.Pr("")});z.A(D,{ports:"ports"},function(){this.Sc===q&&dk(this);return this.Sc!==q?this.Sc.k:z.mg});
function dk(a){a.Sc!==q&&a.Sc.clear();gl(a,a,function(a,c){ek(a,c)})}function ek(a,b){var c=b.Xd;c!==q&&(a.Sc===q&&(a.Sc=new ta("string",U)),a.Sc.add(c,b))}function ck(a,b,c){var d=b.Xd;if(d!==q&&(a.Sc!==q&&a.Sc.remove(d),b=a.h,b!==q&&c)){c=q;for(a=a.RG(d);a.next();)c===q&&(c=z.zb()),c.push(a.value);if(c!==q){for(a=0;a<c.length;a++)b.remove(c[a]);z.Da(c)}}}
D.prototype.isInTreeOf=D.prototype.gJ=function(a){if(a===q||a===this)return s;var b=h,c=this.h;c!==q&&(b=c.Mc);c=this;if(b)for(;c!==a;){for(var b=q,d=c.Yb.k;d.next();){var e=d.value;if(e.mc&&(b=e.da,b!==c&&b!==this))break}if(b===this||b===q||b===c)return s;c=b}else for(;c!==a;){b=q;for(d=c.Yb.k;d.next()&&!(e=d.value,e.mc&&(b=e.ja,b!==c&&b!==this)););if(b===this||b===q||b===c)return s;c=b}return h};
D.prototype.findTreeRoot=D.prototype.VI=function(){var a=h,b=this.h;b!==q&&(a=b.Mc);b=this;if(a)for(;;){for(var a=q,c=b.Yb.k;c.next();){var d=c.value;if(d.mc&&(a=d.da,a!==b&&a!==this))break}if(a===this)return this;if(a===q||a===b)return b;b=a}else for(;;){a=q;for(c=b.Yb.k;c.next()&&!(d=c.value,d.mc&&(a=d.ja,a!==b&&a!==this)););if(a===this)return this;if(a===q||a===b)return b;b=a}};
D.prototype.findTreeParentLink=D.prototype.Qr=function(){var a=h,b=this.h;b!==q&&(a=b.Mc);b=this.Yb.k;if(a)for(;b.next();){if(a=b.value,a.mc&&a.da!==this)return a}else for(;b.next();)if(a=b.value,a.mc&&a.ja!==this)return a;return q};
D.prototype.findTreeParentNode=D.prototype.OC=function(){if(this.kh===q||this.kh instanceof D)return this.kh;var a=h,b=this.h;b!==q&&(a=b.Mc);var b=this.Yb.n,c=b.length;if(a)for(a=0;a<c;a++){var d=b[a];if(d.mc&&(d=d.da,d!==this))return this.kh=d}else for(a=0;a<c;a++)if(d=b[a],d.mc&&(d=d.ja,d!==this))return this.kh=d;return this.kh=q};
D.prototype.findTreeChildrenLinks=D.prototype.fv=function(){var a=h,b=this.h;b!==q&&(a=b.Mc);if(a){var a=new Na(this.Yb),c=this;a.Vk=function(a){return!a.mc||a.da!==c?s:h}}else a=new Na(this.Yb),c=this,a.Vk=function(a){return!a.mc||a.ja!==c?s:h};return a};
D.prototype.findTreeChildrenNodes=D.prototype.NC=function(){var a=h,b=this.h;b!==q&&(a=b.Mc);var c=b=q,d=this.Yb.k;if(a)for(;d.next();)a=d.value,a.mc&&a.da===this&&(a=a.ja,b!==q?b.add(a):c!==q&&c!==a?(b=new J(D),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.mc&&a.ja===this&&(a=a.da,b!==q?b.add(a):c!==q&&c!==a?(b=new J(D),b.add(c),b.add(a)):c=a);return b!==q?b.k:c!==q?new Ma(c):z.mg};
D.prototype.findTreeParts=D.prototype.UI=function(a){a===f&&(a=Infinity);z.j(a,"number",D,"collapseTree:level");var b=new va(B);Me(b,this,s,a);return b};D.prototype.collapseTree=D.prototype.collapseTree=function(a){a===f&&(a=1);z.p(a,D,"collapseTree:level");1>a&&(a=1);var b=this.h;if(b!==q&&!b.Fd){b.Fd=h;var c=b.Mc,d=new va(D);d.add(this);am(this,d,c,a,this.Lc);b.Fd=s;b.xa()}};
function am(a,b,c,d,e){if(1<d)for(e=c?a.ev():a.Wf();e.next();){var g=e.value;g.mc&&(g=g.Wy(a),g!==q&&(g!==a&&!b.contains(g))&&(b.add(g),am(g,b,c,d-1,g.Lc)))}else bm(a,b,c,e)}function bm(a,b,c,d){a.Lc=s;for(var e=c?a.ev():a.Wf();e.next();){var g=e.value;d&&g.ge();g.mc&&(g=g.Wy(a),g!==q&&(g!==a&&!b.contains(g))&&(b.add(g),d&&(g.xa(),g.ge(),Ij(g),g.K(Xj)),g.Lc&&(g.ym=g.Lc,bm(g,b,c,g.ym))))}}
D.prototype.expandTree=D.prototype.expandTree=function(a){a===f&&(a=2);z.p(a,D,"collapseTree:level");2>a&&(a=2);var b=this.h;if(b!==q&&!b.Fd){b.Fd=h;var c=b.Mc,d=new va(D);d.add(this);cm(this,d,c,a,this.Lc);b.Fd=s}};function cm(a,b,c,d,e){a.Lc=h;for(var g=c?a.ev():a.Wf();g.next();){var k=g.value;if(k.mc&&(e||k.updateAdornments(),k=k.Wy(a),k!==q&&(k!==a&&!b.contains(k))&&(b.add(k),e||(k.xa(),k.updateAdornments(),Ij(k),k.K(Wj)),2<d||k.ym)))k.ym=s,cm(k,b,c,d-1,k.Lc)}}z.g(D,"isTreeExpanded",D.prototype.Lc);
z.defineProperty(D,{Lc:"isTreeExpanded"},w("Up"),function(a){var b=this.Up;if(b!==a){x&&z.j(a,"boolean",D,"isTreeExpanded");this.Up=a;var c=this.h;this.i("isTreeExpanded",b,a);b=this.LE;if(b!==q){var d=h;c!==q&&(d=c.Wa,c.Wa=h);b(this);c!==q&&(c.Wa=d)}c!==q&&c.Aa.jb||(a?(a=2,2>a&&(a=2),c!==q&&!c.Fd&&(c.Fd=h,b=c.Mc,d=new va(D),d.add(this),cm(this,d,b,a,s),c.Fd=s)):(a=1,1>a&&(a=1),c!==q&&!c.Fd&&(c.Fd=h,b=c.Mc,d=new va(D),d.add(this),am(this,d,b,a,h),c.Fd=s)))}});z.g(D,"wasTreeExpanded",D.prototype.ym);
z.defineProperty(D,{ym:"wasTreeExpanded"},w("sr"),function(a){var b=this.sr;b!==a&&(x&&z.j(a,"boolean",D,"wasTreeExpanded"),this.sr=a,this.i("wasTreeExpanded",b,a))});z.g(D,"treeExpandedChanged",D.prototype.LE);z.defineProperty(D,{LE:"treeExpandedChanged"},w("nr"),function(a){var b=this.nr;b!==a&&(a!==q&&z.j(a,"function",D,"treeExpandedChanged"),this.nr=a,this.i("treeExpandedChanged",b,a))});z.g(D,"isTreeLeaf",D.prototype.th);
z.defineProperty(D,{th:"isTreeLeaf"},w("Vp"),function(a){var b=this.Vp;b!==a&&(x&&z.j(a,"boolean",D,"isTreeLeaf"),this.Vp=a,this.i("isTreeLeaf",b,a))});
function E(){B.call(this,ug);this.Gf=q;this.Wg="";this.Pf=this.Gp=q;this.jh="";this.mr=q;this.Kq=this.Jq=this.Iq=s;this.Wp=h;this.fp=ij;this.qp=0;this.tp=ij;this.up=NaN;this.yn=tk;this.dr=0.5;this.$h=this.Pe=q;this.sc=(new J(G)).freeze();this.$d=q;this.lh=s;this.Mx=q;this.Yx=s;this.gl=this.Mh=this.Sa=q;this.oe=0;this.Fh=new J(H);this.ey=new G;this.LB=this.JB=q;this.Jw=s;this.R=q}z.ea("Link",E);z.Pa(E,B);
E.prototype.cloneProtected=function(a){B.prototype.cloneProtected.call(this,a);a.Wg=this.Wg;a.Gp=this.Gp;a.jh=this.jh;a.mr=this.mr;a.Iq=this.Iq;a.Jq=this.Jq;a.Kq=this.Kq;a.Wp=this.Wp;a.fp=this.fp;a.qp=this.qp;a.tp=this.tp;a.up=this.up;a.yn=this.yn;a.dr=this.dr};E.prototype.oh=function(a){B.prototype.oh.call(this,a);this.Wg=a.Wg;this.jh=a.jh;a.$h=q;a.$d=q;a.bc();a.gl=this.gl;a.oe=this.oe};var tk;E.Normal=tk=z.w(E,"Normal",1);var nk;E.Orthogonal=nk=z.w(E,"Orthogonal",2);var Df;
E.AvoidsNodes=Df=z.w(E,"AvoidsNodes",3);var ij;E.None=ij=z.w(E,"None",0);var Bg;E.Bezier=Bg=z.w(E,"Bezier",9);var ok;E.JumpGap=ok=z.w(E,"JumpGap",10);var pk;E.JumpOver=pk=z.w(E,"JumpOver",11);var qk;E.End=qk=z.w(E,"End",17);var rk;E.Scale=rk=z.w(E,"Scale",18);var sk;E.Stretch=sk=z.w(E,"Stretch",19);var xl;E.OrientAlong=xl=z.w(E,"OrientAlong",21);var dm;E.OrientPlus90=dm=z.w(E,"OrientPlus90",22);var em;E.OrientMinus90=em=z.w(E,"OrientMinus90",23);var fm;E.OrientOpposite=fm=z.w(E,"OrientOpposite",24);
var gm;E.OrientUpright=gm=z.w(E,"OrientUpright",25);var hm;E.OrientPlus90Upright=hm=z.w(E,"OrientPlus90Upright",26);var im;E.OrientMinus90Upright=im=z.w(E,"OrientMinus90Upright",27);var jm;E.OrientUpright45=jm=z.w(E,"OrientUpright45",28);E.prototype.ke=function(){this.R={Mi:Zb,lj:Zb,Ki:NaN,jj:NaN,Ji:Ul,ij:Ul,Li:NaN,kj:NaN}};E.prototype.Qk=function(){var a=this.da;if(a!==q&&(gi(a)||hi(a)))return s;a=this.ja;return a!==q&&(gi(a)||hi(a))?s:h};E.prototype.Td=ca(s);
E.prototype.computeAngle=function(a,b,c){switch(b){default:case ij:a=0;break;case xl:a=c;break;case dm:a=c+90;break;case em:a=c-90;break;case fm:a=c+180;break;case gm:a=N.qs(c);90<a&&270>a&&(a-=180);break;case hm:a=N.qs(c+90);90<a&&270>a&&(a-=180);break;case im:a=N.qs(c-90);90<a&&270>a&&(a-=180);break;case jm:a=N.qs(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return N.qs(a)};z.g(E,"fromNode",E.prototype.da);
z.defineProperty(E,{da:"fromNode"},w("Gf"),function(a){var b=this.Gf;if(b!==a){x&&a!==q&&z.l(a,D,E,"fromNode");var c=this.Kc;b!==q&&(this.Pf!==b&&Zl(b,this,c),c!==q&&(c.Pd=q),km(this),b.K(Di));this.Gf=a;this.Mh=q;this.bc();var d=this.h;if(d!==q){var e=this.data,g=d.ga;if(e!==q)if(g instanceof T){var k=a!==q?a.data:q;g.Mv(e,g.xb(k))}else g instanceof Ld&&(k=a!==q?a.data:q,d.Mc?g.Cf(e,g.xb(k)):(b!==q&&g.Cf(b.data,f),g.Cf(k,g.xb(this.Pf!==q?this.Pf.data:q))))}e=this.Kc;g=this.Vy;g!==q&&(k=h,d!==q&&(k=
d.Wa,d.Wa=h),g(this,c,e),d!==q&&(d.Wa=k));a!==q&&(this.Pf!==a&&Yl(a,this,e),e!==q&&(e.Pd=q),lm(this),a.K(yi));this.i("fromNode",b,a);Qi(this)}});z.g(E,"fromPortId",E.prototype.wf);
z.defineProperty(E,{wf:"fromPortId"},w("Wg"),function(a){var b=this.Wg;if(b!==a){x&&z.j(a,"string",E,"fromPortId");var c=this.Kc;c!==q&&(c.Pd=q);km(this);this.Wg=a;var d=this.Kc;d!==q&&(d.Pd=q);var e=this.h;if(e!==q){var g=this.data,k=e.ga;g!==q&&k instanceof T&&k.Bs(g,a)}c!==d&&(this.Mh=q,this.bc(),g=this.Vy,g!==q&&(k=h,e!==q&&(k=e.Wa,e.Wa=h),g(this,c,d),e!==q&&(e.Wa=k)));lm(this);this.i("fromPortId",b,a)}});z.A(E,{Kc:"fromPort"},function(){var a=this.Gf;return a===q?q:a.Pr(this.Wg)});
z.g(E,"fromPortChanged",E.prototype.Vy);z.defineProperty(E,{Vy:"fromPortChanged"},w("Gp"),function(a){var b=this.Gp;b!==a&&(a!==q&&z.j(a,"function",E,"fromPortChanged"),this.Gp=a,this.i("fromPortChanged",b,a))});z.g(E,"toNode",E.prototype.ja);
z.defineProperty(E,{ja:"toNode"},w("Pf"),function(a){var b=this.Pf;if(b!==a){x&&a!==q&&z.l(a,D,E,"toNode");var c=this.td;b!==q&&(this.Gf!==b&&Zl(b,this,c),c!==q&&(c.Pd=q),km(this),b.K(Di));this.Pf=a;this.Mh=q;this.bc();var d=this.h;if(d!==q){var e=this.data,g=d.ga;if(e!==q)if(g instanceof T){var k=a!==q?a.data:q;g.Nv(e,g.xb(k))}else g instanceof Ld&&(k=a!==q?a.data:q,d.Mc?(b!==q&&g.Cf(b.data,f),g.Cf(k,g.xb(this.Gf!==q?this.Gf.data:q))):g.Cf(e,g.xb(k)))}e=this.td;g=this.bA;g!==q&&(k=h,d!==q&&(k=d.Wa,
d.Wa=h),g(this,c,e),d!==q&&(d.Wa=k));a!==q&&(this.Gf!==a&&Yl(a,this,e),e!==q&&(e.Pd=q),lm(this),a.K(yi));this.i("toNode",b,a);Qi(this)}});z.g(E,"toPortId",E.prototype.lg);
z.defineProperty(E,{lg:"toPortId"},w("jh"),function(a){var b=this.jh;if(b!==a){x&&z.j(a,"string",E,"toPortId");var c=this.td;c!==q&&(c.Pd=q);km(this);this.jh=a;var d=this.td;d!==q&&(d.Pd=q);var e=this.h;if(e!==q){var g=this.data,k=e.ga;g!==q&&k instanceof T&&k.Es(g,a)}c!==d&&(this.Mh=q,this.bc(),g=this.bA,g!==q&&(k=h,e!==q&&(k=e.Wa,e.Wa=h),g(this,c,d),e!==q&&(e.Wa=k)));lm(this);this.i("toPortId",b,a)}});z.A(E,{td:"toPort"},function(){var a=this.Pf;return a===q?q:a.Pr(this.jh)});
z.g(E,"toPortChanged",E.prototype.bA);z.defineProperty(E,{bA:"toPortChanged"},w("mr"),function(a){var b=this.mr;b!==a&&(a!==q&&z.j(a,"function",E,"toPortChanged"),this.mr=a,this.i("toPortChanged",b,a))});z.defineProperty(E,{mb:"fromSpot"},function(){return this.R!==q?this.R.Mi:Zb},function(a){this.R===q&&this.ke();var b=this.R.Mi;b.N(a)||(x&&z.l(a,O,E,"fromSpot"),a=a.Y(),this.R.Mi=a,this.i("fromSpot",b,a),this.bc())});
z.defineProperty(E,{am:"fromEndSegmentLength"},function(){return this.R!==q?this.R.Ki:NaN},function(a){this.R===q&&this.ke();var b=this.R.Ki;b!==a&&(x&&z.j(a,"number",E,"fromEndSegmentLength"),0>a&&z.ia(a,">= 0",E,"fromEndSegmentLength"),this.R.Ki=a,this.i("fromEndSegmentLength",b,a),this.bc())});
z.defineProperty(E,{hv:"fromEndSegmentDirection"},function(){return this.R!==q?this.R.Ji:Ul},function(a){this.R===q&&this.ke();var b=this.R.Ji;b!==a&&(x&&z.wb(a,D,E,"fromEndSegmentDirection"),this.R.Ji=a,this.i("fromEndSegmentDirection",b,a),this.bc())});z.defineProperty(E,{iv:"fromShortLength"},function(){return this.R!==q?this.R.Li:NaN},function(a){this.R===q&&this.ke();var b=this.R.Li;b!==a&&(x&&z.j(a,"number",E,"fromShortLength"),this.R.Li=a,this.i("fromShortLength",b,a),this.bc())});
z.defineProperty(E,{qb:"toSpot"},function(){return this.R!==q?this.R.lj:Zb},function(a){this.R===q&&this.ke();var b=this.R.lj;b.N(a)||(x&&z.l(a,O,E,"toSpot"),a=a.Y(),this.R.lj=a,this.i("toSpot",b,a),this.bc())});z.defineProperty(E,{wm:"toEndSegmentLength"},function(){return this.R!==q?this.R.jj:NaN},function(a){this.R===q&&this.ke();var b=this.R.jj;b!==a&&(x&&z.j(a,"number",E,"toEndSegmentLength"),0>a&&z.ia(a,">= 0",E,"toEndSegmentLength"),this.R.jj=a,this.i("toEndSegmentLength",b,a),this.bc())});
z.defineProperty(E,{Uv:"toEndSegmentDirection"},function(){return this.R!==q?this.R.ij:Ul},function(a){this.R===q&&this.ke();var b=this.R.ij;b!==a&&(x&&z.wb(a,D,E,"toEndSegmentDirection"),this.R.ij=a,this.i("toEndSegmentDirection",b,a),this.bc())});z.defineProperty(E,{Vv:"toShortLength"},function(){return this.R!==q?this.R.kj:NaN},function(a){this.R===q&&this.ke();var b=this.R.kj;b!==a&&(x&&z.j(a,"number",E,"toShortLength"),this.R.kj=a,this.i("toShortLength",b,a),this.bc())});
function Qi(a){var b=a.da,c=a.ja;b!==q&&c!==q?mm(a,b.QG(c)):mm(a,q)}function mm(a,b){var c=a.dk;if(c!==b){c!==q&&Pl(c,a);a.dk=b;b!==q&&Ql(b,a);var d=a.Gy;if(d!==q){var e=h,g=a.h;g!==q&&(e=g.Wa,g.Wa=h);d(a,c,b);g!==q&&(g.Wa=e)}a.lh&&(a.JB===c||a.LB===c)&&a.bc()}}E.prototype.getOtherNode=E.prototype.Wy=function(a){x&&z.l(a,D,E,"getOtherNode:node");var b=this.da;return a===b?this.ja:b};
E.prototype.getOtherPort=E.prototype.YI=function(a){x&&z.l(a,U,E,"getOtherPort:port");var b=this.Kc;return a===b?this.td:b};z.A(E,{hJ:"isLabeledLink"},function(){return this.Pe===q?s:0<this.Pe.count});z.A(E,{wi:"labelNodes"},function(){return this.Pe===q?z.mg:this.Pe.k});function $l(a,b){a.Pe===q&&(a.Pe=new va(D));a.Pe.add(b);a.ca()}
E.prototype.Wr=function(){B.prototype.Wr.call(this);nm(this)&&vg(this,this.ya);var a=this.Gf,b=this.Pf;if(a!==q){var c=this.Kc;c!==q&&(c.Pd=q);Yl(a,this,c);lm(this)}b!==q&&(c=this.td,c!==q&&(c.Pd=q),Yl(b,this,c),lm(this))};E.prototype.Xr=function(){B.prototype.Xr.call(this);nm(this)&&vg(this,this.ya);var a=this.Gf,b=this.Pf;if(a!==q){var c=this.Kc;c!==q&&(c.Pd=q);Zl(a,this,c);km(this)}b!==q&&(c=this.td,c!==q&&(c.Pd=q),Zl(b,this,c),km(this))};
E.prototype.Vl=function(){if(this.Pe!==q){var a=this.h;if(a===q)return;for(var b=this.Pe.copy().k;b.next();)a.remove(b.value)}b=this.data;b!==q&&(a=this.h,a!==q&&(a=a.ga,a instanceof T?a.PH(b):a instanceof Ld&&a.Cf(b,f)))};E.prototype.move=E.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;B.prototype.move.call(this,a);this.Sk(c,b);for(a=this.wi;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};z.g(E,"relinkableFrom",E.prototype.SD);
z.defineProperty(E,{SD:"relinkableFrom"},w("Iq"),function(a){var b=this.Iq;b!==a&&(x&&z.j(a,"boolean",E,"relinkableFrom"),this.Iq=a,this.i("relinkableFrom",b,a))});z.g(E,"relinkableTo",E.prototype.TD);z.defineProperty(E,{TD:"relinkableTo"},w("Jq"),function(a){var b=this.Jq;b!==a&&(x&&z.j(a,"boolean",E,"relinkableTo"),this.Jq=a,this.i("relinkableTo",b,a))});E.prototype.canRelinkFrom=function(){if(!this.SD)return s;var a=this.layer;if(a!==q&&!a.qj)return s;a=a.h;return a!==q&&!a.qj?s:h};
E.prototype.canRelinkTo=function(){if(!this.TD)return s;var a=this.layer;if(a!==q&&!a.qj)return s;a=a.h;return a!==q&&!a.qj?s:h};z.g(E,"resegmentable",E.prototype.Fv);z.defineProperty(E,{Fv:"resegmentable"},w("Kq"),function(a){var b=this.Kq;b!==a&&(x&&z.j(a,"boolean",E,"resegmentable"),this.Kq=a,this.i("resegmentable",b,a))});z.g(E,"isTreeLink",E.prototype.mc);
z.defineProperty(E,{mc:"isTreeLink"},w("Wp"),function(a){var b=this.Wp;b!==a&&(x&&z.j(a,"boolean",E,"isTreeLink"),this.Wp=a,this.i("isTreeLink",b,a))});z.A(E,{path:"path"},function(){var a=this.$h;if(a!==q)return a;a=this.za;a=Sj(this,a,a.length);return a instanceof V?this.$h=a:q});E.prototype.Ip=w("path");E.prototype.bx=w("sc");E.prototype.Ni=function(){this.updateRoute();var a=new H;this.Ve(a);return this.Mx=a};
E.prototype.Ve=function(a){var b=Infinity,c=Infinity,d=this.ta;if(0===d)return a.q(NaN,NaN,0,0),a;if(1===d)d=this.o(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.q(d.x,d.y,0,0);else if(2===d){var e=this.o(0),g=this.o(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y);a.q(e.x,e.y,0,0);a.Lj(g)}else if(this.computeCurve()===Bg&&3<=d&&!this.Ob)if(e=this.o(0),b=e.x,c=e.y,a.q(b,c,0,0),3===d)d=this.o(1),b=Math.min(d.x,b),c=Math.min(d.y,c),g=this.o(2),b=Math.min(g.x,b),c=Math.min(g.y,c),N.Tn(e.x,e.y,d.x,d.y,d.x,d.y,g.x,
g.y,0.5,a);else for(var k,l,m=3;m<d;m+=3)k=this.o(m-2),m+3>=d&&(m=d-1),l=this.o(m-1),g=this.o(m),N.Tn(e.x,e.y,k.x,k.y,l.x,l.y,g.x,g.y,0.5,a),b=Math.min(g.x,b),c=Math.min(g.y,c),e=g;else{e=this.o(0);g=this.o(1);b=Math.min(e.x,g.x);c=Math.min(e.y,g.y);a.q(e.x,e.y,0,0);a.Lj(g);for(m=2;m<d;m++)e=this.o(m),b=Math.min(e.x,b),c=Math.min(e.y,c),a.Lj(e)}this.ey.q(b-a.x,c-a.y);return a};z.A(E,{FD:"midPoint"},function(){this.updateRoute();return this.computeMidPoint(new G)});
E.prototype.computeMidPoint=function(a){var b=this.ta;if(0===b)return a.assign(N.eF),a;if(1===b)return a.assign(this.o(0)),a;if(2===b){var c=this.o(0),d=this.o(1);a.q((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Bg&&3<=b&&!this.Ob){if(3===b)return this.o(1);var b=(b-1)/3|0,e=3*(b/2|0);1===b%2?(c=this.o(e),d=this.o(e+1),b=this.o(e+2),e=this.o(e+3),N.bG(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.o(e));return a}for(var e=0,g=z.zb(),k=0;k<b-1;k++)c=this.o(k),d=this.o(k+1),N.La(c.x,
d.x)?(c=d.y-c.y,0>c&&(c=-c)):N.La(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Lk(d)),g.push(c),e+=c;for(d=k=c=0;c<e/2&&k<b;){d=g[k];if(c+d>e/2)break;c+=d;k++}z.Da(g);b=this.o(k);g=this.o(k+1);b.x===g.x?b.y>g.y?a.q(b.x,b.y-(e/2-c)):a.q(b.x,b.y+(e/2-c)):b.y===g.y?b.x>g.x?a.q(b.x-(e/2-c),b.y):a.q(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.q(b.x+e*(g.x-b.x),b.y+e*(g.y-b.y)));return a};z.A(E,{ED:"midAngle"},function(){this.updateRoute();return this.computeMidAngle()});
E.prototype.computeMidAngle=function(){var a=this.ta;if(2>a)return NaN;if(this.computeCurve()===Bg&&4<=a&&!this.Ob){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.o(c),b=this.o(c+1),d=this.o(c+2),c=this.o(c+3);return N.aG(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(0<c&&c+1<a)return a=this.o(c-1),b=this.o(c+1),a.ni(b)}d=a/2|0;if(0===a%2)return a=this.o(d-1),b=this.o(d),a.ni(b);var a=this.o(d-1),b=this.o(d),d=this.o(d+1),c=a.Lk(b),e=b.Lk(d);return c>e?a.ni(b):b.ni(d)};z.g(E,"points",E.prototype.points);
z.defineProperty(E,{points:"points"},w("sc"),function(a){x&&z.l(a,J,E,"points");var b=this.sc;if(b!==a&&a!==q){a=a.copy();for(var c=a.k;c.next();)c.value.freeze();a.freeze();this.sc=a;this.Yf();om(this);this.i("points",b,a)}});z.A(E,{ta:"pointsCount"},function(){return this.sc.count});E.prototype.getPoint=E.prototype.o=function(a){return this.sc.n[a]};
E.prototype.setPoint=E.prototype.ff=function(a,b){x&&(z.l(b,G,E,"setPoint"),b.W()||z.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.gg(a,b)};E.prototype.setPointAt=E.prototype.U=function(a,b,c){x&&(z.p(b,E,"setPointAt:x"),z.p(c,E,"setPointAt:y"));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.gg(a,new G(b,c))};
E.prototype.insertPoint=E.prototype.cJ=function(a,b){x&&(z.l(b,G,E,"insertPoint"),b.W()||z.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.Ed(a,b)};E.prototype.insertPointAt=E.prototype.C=function(a,b,c){x&&(z.p(b,E,"insertPointAt:x"),z.p(c,E,"insertPointAt:y"));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.Ed(a,new G(b,c))};
E.prototype.addPoint=E.prototype.mh=function(a){x&&(z.l(a,G,E,"addPoint"),a.W()||z.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.add(a)};E.prototype.addPointAt=E.prototype.Ck=function(a,b){x&&(z.p(a,E,"insertPointAt:x"),z.p(b,E,"insertPointAt:y"));this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.add(new G(a,b))};
E.prototype.removePoint=E.prototype.YD=function(a){this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.sd(a)};E.prototype.clearPoints=E.prototype.Un=function(){this.$d===q&&z.m("Call Link.startRoute before modifying the points of the route.");this.sc.clear()};E.prototype.movePoints=E.prototype.Sk=function(a,b){for(var c=new J(G),d=this.sc.k;d.next();){var e=d.value;c.add(new G(e.x+a,e.y+b))}this.points=c};
E.prototype.startRoute=E.prototype.Zk=function(){this.$d===q&&(this.$d=this.sc,this.sc=this.sc.copy())};
E.prototype.commitRoute=E.prototype.li=function(){if(this.$d!==q){for(var a=this.$d,b=this.sc,c=Infinity,d=Infinity,e=a.count,g=0;g<e;g++)var k=a.n[g],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.count,g=0;g<n;g++)k=b.n[g],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(n===e)for(g=0;g<n;g++)if(e=a.n[g],k=b.n[g],e.x-c!==k.x-l||e.y-d!==k.y-m){this.Yf();break}this.$d=q;om(this);this.i("points",a,b)}};
E.prototype.rollbackRoute=E.prototype.RH=function(){this.$d!==q&&(this.sc=this.$d,this.$d=q)};function om(a){0===a.sc.count?a.lh=s:(a.lh=h,pm(a,s))}E.prototype.invalidateRoute=E.prototype.bc=function(){if(!this.Yx&&(!this.h||!this.h.Aa.jb)){var a=this.Ip();a!==q&&(this.lh=s,this.Yf(),a.ca())}};z.defineProperty(E,{Js:q},w("Yx"),ba("Yx"));E.prototype.updateRoute=function(){if(!this.lh&&!this.Jw){var a=h;try{this.Jw=h,this.Zk(),a=this.computePoints()}finally{this.Jw=s,a?this.li():this.RH()}}};
E.prototype.computePoints=function(){var a=this.da,b=q,b=a===q?q:this.Kc;if(b!==q){var c=fk(b);c===a||!a.Db()?(c=Ml(a),c!==q&&c!==a?(a=c,b=c.Pr("")):a=c):b=c}this.JB=a;if(a===q||b===q||!a.location.W())return s;var c=this.ja,d=q,d=c===q?q:this.td;if(d!==q){var e=fk(d);e===c||!c.Db()?(e=Ml(c),e!==q&&e!==c?(c=e,d=e.Pr("")):c=e):d=e}this.LB=c;if(c===q||d===q||!c.location.W())return s;var e=this.ta,g=qm(this,b),k=rm(this,d),l=b===d,m=this.Ob,n=this.Xe===Bg;this.Mh=l&&!m?n=h:s;var p=this.Hu===ij||l;if(!m&&
g===Wb&&k===Wb&&!l){if(g=s,!p&&3<=e&&(p=this.getLinkPoint(a,b,Wb,h,s,c,d),g=this.getLinkPoint(c,d,Wb,s,s,a,b),g=this.adjustPoints(0,p,e-1,g)),!g)if(this.Un(),n){var e=this.getLinkPoint(a,b,Wb,h,s,c,d),p=this.getLinkPoint(c,d,Wb,s,s,a,b),g=p.x-e.x,k=p.y-e.y,l=this.computeCurviness(),n=m=0,r=e.x+g/3,t=e.y+k/3,u=r,v=t;N.I(k,0)?v=0<g?v-l:v+l:(m=-g/k,n=Math.sqrt(l*l/(m*m+1)),0>l&&(n=-n),u=(0>k?-1:1)*n+r,v=m*(u-r)+t);var r=e.x+2*g/3,t=e.y+2*k/3,A=r,C=t;N.I(k,0)?C=0<g?C-l:C+l:(A=(0>k?-1:1)*n+r,C=m*(A-r)+
t);this.Un();this.mh(e);this.Ck(u,v);this.Ck(A,C);this.mh(p);this.ff(0,this.getLinkPoint(a,b,Wb,h,s,c,d));this.ff(3,this.getLinkPoint(c,d,Wb,s,s,a,b))}else e=c,c=this.getLinkPoint(a,b,Wb,h,s,e,d),d=this.getLinkPoint(e,d,Wb,s,s,a,b),!isNaN(this.Xu)||0!==this.oe&&!this.Ob?(k=d.x-c.x,a=d.y-c.y,b=this.computeCurviness(),e=c.x+k/2,p=c.y+a/2,g=e,l=p,N.I(a,0)?l=0<k?l-b:l+b:(k=-k/a,g=Math.sqrt(b*b/(k*k+1)),0>b&&(g=-g),g=(0>a?-1:1)*g+e,l=k*(g-e)+p),this.mh(c),this.Ck(g,l)):this.mh(c),this.mh(d)}else{n=this.xh===
Df;p&&(m&&n||l)&&this.Un();var K=this.computeCurviness(),r=this.getLinkPoint(a,b,g,h,m,c,d),t=v=u=0;if(m||g!==Wb||l)if(A=this.computeEndSegmentLength(a,b,g,h),t=this.getLinkDirection(a,b,r,g,h,m,c,d),l&&(t-=m?90:30,0>K&&(t-=180)),0>t?t+=360:360<=t&&(t-=360),l&&(A+=Math.abs(K)),0===t?u=A:90===t?v=A:180===t?u=-A:270===t?v=-A:(u=A*Math.cos(t*Math.PI/180),v=A*Math.sin(t*Math.PI/180)),Sb(g)&&l){var I=b.nb(cc,z.O()),R=z.ic(I.x+1E3*u,I.y+1E3*v);this.getLinkPointFromPoint(a,b,I,R,h,r);z.B(I);z.B(R)}var A=
this.getLinkPoint(c,d,k,s,m,a,b),M=C=0,S=0;if(m||k!==Wb||l)I=this.computeEndSegmentLength(c,d,k,s),S=this.getLinkDirection(c,d,A,k,s,m,a,b),l&&(S+=m?0:30,0>K&&(S+=180)),0>S?S+=360:360<=S&&(S-=360),l&&(I+=Math.abs(K)),0===S?C=I:90===S?M=I:180===S?C=-I:270===S?M=-I:(C=I*Math.cos(S*Math.PI/180),M=I*Math.sin(S*Math.PI/180)),Sb(k)&&l&&(I=d.nb(cc,z.O()),R=z.ic(I.x+1E3*C,I.y+1E3*M),this.getLinkPointFromPoint(c,d,I,R,s,A),z.B(I),z.B(R));d=r;if(m||g!==Wb||l)d=new G(r.x+u,r.y+v);b=A;if(m||k!==Wb||l)b=new G(A.x+
C,A.y+M);!p&&!m&&Sb(g)&&3<e&&this.adjustPoints(0,r,e-2,b)?this.ff(e-1,A):!p&&!m&&Sb(k)&&3<e&&this.adjustPoints(1,d,e-1,A)?this.ff(0,r):!p&&!m&&4<e&&this.adjustPoints(1,d,e-2,b)?(this.ff(0,r),this.ff(e-1,A)):!p&&m&&6<=e&&!n&&this.adjustPoints(1,d,e-2,b)?(this.ff(0,r),this.ff(e-1,A)):(this.Un(),this.mh(r),(m||g!==Wb||l)&&this.mh(d),m&&this.addOrthoPoints(d,t,b,S,a,c),(m||k!==Wb||l)&&this.mh(b),this.mh(A))}return h};
function sm(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
E.prototype.getLinkPointFromPoint=function(a,b,c,d,e,g){g===f&&(g=new G);if(a===q||b===q)return g.assign(c),g;a.Db()||(e=Ml(a),e!==q&&e!==a&&(b=e.port));var k;a=q;if(b.ha===q)e=d.x,d=d.y,k=c.x,c=c.y;else{a=b.ha.se;e=1/(a.m11*a.m22-a.m12*a.m21);k=a.m22*e;var l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),r=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;d=d.x*l+d.y*n+r;k=c.x*k+c.y*m+p;c=c.x*l+c.y*n+r}b.Sr(e,d,k,c,g);a&&g.transform(a);return g};
function tm(a,b){var c=a.Pd;c===q&&(c=new um,c.port=a,c.Cc=a.Z,a.Pd=c);return vm(c,b)}E.prototype.getLinkPoint=function(a,b,c,d,e,g,k,l){l===f&&(l=new G);if(Ob(c))return b.nb(c,l),l;if(Rb(c)&&(c=tm(b,this),c!==q))return l.assign(c.zo),l;c=b.nb(cc,z.O());g=q;this.ta>(e?6:2)?(k=d?this.o(1):this.o(this.ta-2),e&&(k=sm(c,k.copy()))):(g=z.O(),k=k.nb(cc,g),e&&(k=sm(c,k)));this.getLinkPointFromPoint(a,b,c,k,d,l);z.B(c);g!==q&&z.B(g);return l};
E.prototype.getLinkDirection=function(a,b,c,d,e,g,k,l){a:if(Ob(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:0.5>d.x?225:0.5<d.x?45:0;else{if(Rb(d)&&(a=tm(b,this),a!==q))switch(a.ne){case z.ud:c=270;break a;case z.$c:c=180;break a;default:case z.jd:c=0;break a;case z.hd:c=90;break a}a=b.nb(cc,z.O());d=q;this.ta>(g?6:2)?(l=e?this.o(1):this.o(this.ta-2),l=g?sm(a,l.copy()):c):(d=z.O(),l=l.nb(cc,d));c=Math.abs(l.x-a.x)>Math.abs(l.y-a.y)?l.x>=a.x?0:180:l.y>=a.y?90:270;
z.B(a);d!==q&&z.B(d)}g=Ul;g=e?this.hv:this.Uv;g===Ul&&(g=e?b.hv:b.Uv);switch(g){case Vl:b=b.Nk();c+=b;360<=c&&(c-=360);break;case Ul:case nj:b=b.Nk();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};E.prototype.computeEndSegmentLength=function(a,b,c,d){if(Rb(c)&&(a=tm(b,this),a!==q))return a.bv;a=NaN;a=d?this.am:this.wm;isNaN(a)&&(a=d?b.am:b.wm);isNaN(a)&&(a=10);return a};
E.prototype.computeSpot=function(a){return a?qm(this,this.Kc):rm(this,this.td)};function qm(a,b){var c=a.mb;Vb(c)&&(b===f&&(b=a.Kc),b!==q&&(c=b.mb));return c===Zb?Wb:c}function rm(a,b){var c=a.qb;Vb(c)&&(b===f&&(b=a.td),b!==q&&(c=b.qb));return c===Zb?Wb:c}E.prototype.computeShortLength=function(a){return a?wm(this):xm(this)};function wm(a){var b=a.iv;isNaN(b)&&(a=a.Kc,a!==q&&(b=a.iv));return isNaN(b)?0:b}function xm(a){var b=a.Vv;isNaN(b)&&(a=a.td,a!==q&&(b=a.Vv));return isNaN(b)?0:b}
E.prototype.Aj=function(a,b,c,d,e,g){if(this.He===s)return s;b===f&&(b=q);c===f&&(c=q);var k=g;g===f&&(k=z.Ng(),k.reset());k.multiply(this.transform);if(this.Sl(a,k))return ol(this,b,c,e),g===f&&z.Ce(k),h;if(this.xf(a,k)){var l=s;if(!this.wg)for(var m=this.za.length;m--;){var n=this.za.n[m];if(n.visible||n===this.Qb){var p=n.ya,r=this.Ma;if(!(p.x>r.width||p.y>r.height||0>p.x+p.width||0>p.y+p.height)){p=z.Ng();p.set(k);if(n instanceof F)l=n.Aj(a,b,c,d,e,p);else if(this.path===n){var l=n,t=a,u=d,r=
p;if(l.He===s)l=s;else if(r.multiply(l.transform),u)b:{var v=t,A=r;if(l.Sl(v,A))l=h;else{if(A===f&&(A=l.transform,v.uj(l.ya))){l=h;break b}var r=v.left,t=v.right,u=v.top,v=v.bottom,C=z.O(),K=z.O(),I=z.O(),R=z.Ng();R.set(A);R.rz(l.transform);R.az();K.x=t;K.y=u;K.transform(R);C.x=r;C.y=u;C.transform(R);A=s;vl(l,C,K,I)?A=h:(C.x=t,C.y=v,C.transform(R),vl(l,C,K,I)?A=h:(K.x=r,K.y=v,K.transform(R),vl(l,C,K,I)?A=h:(C.x=r,C.y=u,C.transform(R),vl(l,C,K,I)&&(A=h))));z.Ce(R);z.B(C);z.B(K);z.B(I);l=A}}else l=
l.Sl(t,r)}else l=rj(n,a,d,p);l&&(b!==q&&(n=b(n)),n&&(c===q||c(n))&&e.add(n));z.Ce(p)}}}g===f&&z.Ce(k);return l||this.background!==q||this.hi!==q}g===f&&z.Ce(k);return s};z.A(E,{Ob:"isOrthogonal"},function(){var a=this.yn;return a===nk||a===Df});E.prototype.computeCurve=function(){if(this.Mh===q){var a=this.Ob;this.Mh=this.Kc===this.td&&!a}return this.Mh?Bg:this.Xe};E.prototype.computeCorner=function(){if(this.Xe===Bg)return 0;var a=this.tC;if(isNaN(a)||0>a)a=10;return a};
E.prototype.computeCurviness=function(){var a=this.Xu;if(isNaN(a)){var b=this.oe;if(0!==b){var c=this.gl,a=c!==q?c.spacing:10,c=Math.abs(b),a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};
E.prototype.adjustPoints=function(a,b,c,d){var e=this.Hu;if(this.Ob){if(e===rk)return s;e===sk&&(e=qk)}switch(e){case rk:var g=this.o(a),k=this.o(c);if(!g.N(b)||!k.N(d)){var e=g.x,g=g.y,l=k.x-e,m=k.y-g,n=Math.sqrt(l*l+m*m);if(!N.I(n,0)){var p;N.I(l,0)?p=0>m?-Math.PI/2:Math.PI/2:(p=Math.atan(m/Math.abs(l)),0>l&&(p=Math.PI-p));var k=b.x,r=b.y,l=d.x-k,t=d.y-r,m=Math.sqrt(l*l+t*t);N.I(l,0)?t=0>t?-Math.PI/2:Math.PI/2:(t=Math.atan(t/Math.abs(l)),0>l&&(t=Math.PI-t));n=m/n;p=t-p;this.ff(a,b);for(a+=1;a<c;a++)b=
this.o(a),l=b.x-e,m=b.y-g,b=Math.sqrt(l*l+m*m),N.I(b,0)||(N.I(l,0)?m=0>m?-Math.PI/2:Math.PI/2:(m=Math.atan(m/Math.abs(l)),0>l&&(m=Math.PI-m)),l=m+p,b*=n,this.U(a,k+b*Math.cos(l),r+b*Math.sin(l)));this.ff(c,d)}}return h;case sk:g=this.o(a);r=this.o(c);if(!g.N(b)||!r.N(d)){e=g.x;g=g.y;k=r.x;r=r.y;n=(k-e)*(k-e)+(r-g)*(r-g);l=b.x;p=b.y;var m=d.x,t=d.y,u=0,v=1,u=0!==m-l?(t-p)/(m-l):9E9;0!==u&&(v=Math.sqrt(1+1/(u*u)));this.ff(a,b);for(a+=1;a<c;a++){b=this.o(a);var A=b.x,C=b.y,K=0.5;0!==n&&(K=((e-A)*(e-
k)+(g-C)*(g-r))/n);var I=e+K*(k-e),R=g+K*(r-g);b=Math.sqrt((A-I)*(A-I)+(C-R)*(C-R));C<u*(A-I)+R&&(b=-b);0<u&&(b=-b);A=l+K*(m-l);K=p+K*(t-p);0!==u?(b=A+b/v,this.U(a,b,K-(b-A)/u)):this.U(a,A,K+b)}this.ff(c,d)}return h;case qk:return this.Ob&&(e=this.o(a),g=this.o(a+1),k=this.o(a+2),N.I(e.y,g.y)?N.I(g.x,k.x)?this.U(a+1,g.x,b.y):N.I(g.y,k.y)&&this.U(a+1,b.x,g.y):N.I(e.x,g.x)&&(N.I(g.y,k.y)?this.U(a+1,b.x,g.y):N.I(g.x,k.x)&&this.U(a+1,g.x,b.y)),e=this.o(c),g=this.o(c-1),k=this.o(c-2),N.I(e.y,g.y)?N.I(g.x,
k.x)?this.U(c-1,g.x,d.y):N.I(g.y,k.y)&&this.U(c-1,d.x,g.y):N.I(e.x,g.x)&&(N.I(g.y,k.y)?this.U(c-1,d.x,g.y):N.I(g.x,k.x)&&this.U(c-1,g.x,d.y))),this.ff(a,b),this.ff(c,d),h;default:return s}};
E.prototype.addOrthoPoints=function(a,b,c,d,e,g){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var k=e.ya.copy(),l=g.ya.copy();if(k.W()&&l.W()){k.Fg(8,8);l.Fg(8,8);k.Lj(a);l.Lj(c);var m,n;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&l.right>a.x||90===d&&c.y>a.y&&l.right>a.x)m=new G(c.x,a.y),n=new G(c.x,(a.y+c.y)/2),180===d?(m.x=this.computeMidOrthoPosition(a.x,c.x,s),n.x=m.x,n.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(m.x=a.x<l.left?this.computeMidOrthoPosition(a.x,
l.left,s):a.x<l.right&&(270===d&&a.y<l.top||90===d&&a.y>l.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):l.right,n.x=m.x,n.y=c.y):0===d&&(a.x<l.left&&a.y>l.top&&a.y<l.bottom)&&(m.x=a.x,m.y=a.y<c.y?Math.min(c.y,l.top):Math.max(c.y,l.bottom),n.y=m.y);else{m=new G(a.x,c.y);n=new G((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<k.top||270===d&&c.y>k.bottom){if(180===d&&(l.Ia(a)||k.Ia(c)))m.y=this.computeMidOrthoPosition(a.y,c.y,h);else if(c.y<a.y&&(180===d||90===d))m.y=this.computeMidOrthoPosition(k.top,Math.max(c.y,
l.bottom),h);else if(c.y>a.y&&(180===d||270===d))m.y=this.computeMidOrthoPosition(k.bottom,Math.min(c.y,l.top),h);n.x=c.x;n.y=m.y}if(m.y>k.top&&m.y<k.bottom)if(c.x>=k.left&&c.x<=a.x||a.x<=l.right&&a.x>=c.x){if(90===d||270===d)m=new G(Math.max((a.x+c.x)/2,a.x),a.y),n=new G(m.x,c.y)}else m.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?k.top:Math.min(k.top,l.top)):Math.max(c.y,0===d?k.bottom:Math.max(k.bottom,l.bottom)),n.x=c.x,n.y=m.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&l.left<a.x||
90===d&&c.y>a.y&&l.left<a.x)m=new G(c.x,a.y),n=new G(c.x,(a.y+c.y)/2),0===d?(m.x=this.computeMidOrthoPosition(a.x,c.x,s),n.x=m.x,n.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(m.x=a.x>l.right?this.computeMidOrthoPosition(a.x,l.right,s):a.x>l.left&&(270===d&&a.y<l.top||90===d&&a.y>l.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):l.left,n.x=m.x,n.y=c.y):180===d&&(a.x>l.right&&a.y>l.top&&a.y<l.bottom)&&(m.x=a.x,m.y=a.y<c.y?Math.min(c.y,l.top):Math.max(c.y,l.bottom),n.y=m.y);else{m=new G(a.x,c.y);n=new G((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<k.top||270===d&&c.y>k.bottom){if(0===d&&(l.Ia(a)||k.Ia(c)))m.y=this.computeMidOrthoPosition(a.y,c.y,h);else if(c.y<a.y&&(0===d||90===d))m.y=this.computeMidOrthoPosition(k.top,Math.max(c.y,l.bottom),h);else if(c.y>a.y&&(0===d||270===d))m.y=this.computeMidOrthoPosition(k.bottom,Math.min(c.y,l.top),h);n.x=c.x;n.y=m.y}if(m.y>k.top&&m.y<k.bottom)if(c.x<=k.right&&c.x>=a.x||a.x>=l.left&&a.x<=c.x){if(90===d||270===d)m=new G(Math.min((a.x+c.x)/2,a.x),a.y),n=new G(m.x,c.y)}else m.y=
270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?k.top:Math.min(k.top,l.top)):Math.max(c.y,180===d?k.bottom:Math.max(k.bottom,l.bottom)),n.x=c.x,n.y=m.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&l.bottom>a.y||0===d&&c.x>a.x&&l.bottom>a.y)m=new G(a.x,c.y),n=new G((a.x+c.x)/2,c.y),270===d?(m.y=this.computeMidOrthoPosition(a.y,c.y,h),n.x=c.x,n.y=m.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(m.y=a.y<l.top?this.computeMidOrthoPosition(a.y,l.top,h):a.y<l.bottom&&(180===d&&a.x<l.left||0===d&&a.x>l.right)?
this.computeMidOrthoPosition(a.y,c.y,h):l.bottom,n.x=c.x,n.y=m.y):90===d&&(a.y<l.top&&a.x>l.left&&a.x<l.right)&&(m.x=a.x<c.x?Math.min(c.x,l.left):Math.max(c.x,l.right),m.y=a.y,n.x=m.x);else{m=new G(c.x,a.y);n=new G(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<k.left||180===d&&c.x>k.right){if(270===d&&(l.Ia(a)||k.Ia(c)))m.x=this.computeMidOrthoPosition(a.x,c.x,s);else if(c.x<a.x&&(270===d||0===d))m.x=this.computeMidOrthoPosition(k.left,Math.max(c.x,l.right),s);else if(c.x>a.x&&(270===d||180===d))m.x=this.computeMidOrthoPosition(k.right,
Math.min(c.x,l.left),s);n.x=m.x;n.y=c.y}if(m.x>k.left&&m.x<k.right)if(c.y>=k.top&&c.y<=a.y||a.y<=l.bottom&&a.y>=c.y){if(0===d||180===d)m=new G(a.x,Math.max((a.y+c.y)/2,a.y)),n=new G(c.x,m.y)}else m.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?k.left:Math.min(k.left,l.left)):Math.max(c.x,90===d?k.right:Math.max(k.right,l.right)),n.x=m.x,n.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&l.top<a.y||0===d&&c.x>a.x&&l.top<a.y)m=new G(a.x,c.y),n=new G((a.x+c.x)/2,c.y),90===d?(m.y=this.computeMidOrthoPosition(a.y,
c.y,h),n.x=c.x,n.y=m.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(m.y=a.y>l.bottom?this.computeMidOrthoPosition(a.y,l.bottom,h):a.y>l.top&&(180===d&&a.x<l.left||0===d&&a.x>l.right)?this.computeMidOrthoPosition(a.y,c.y,h):l.top,n.x=c.x,n.y=m.y):270===d&&(a.y>l.bottom&&a.x>l.left&&a.x<l.right)&&(m.x=a.x<c.x?Math.min(c.x,l.left):Math.max(c.x,l.right),m.y=a.y,n.x=m.x);else{m=new G(c.x,a.y);n=new G(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<k.left||180===d&&c.x>k.right){if(90===d&&(l.Ia(a)||k.Ia(c)))m.x=this.computeMidOrthoPosition(a.x,
c.x,s);else if(c.x<a.x&&(90===d||0===d))m.x=this.computeMidOrthoPosition(k.left,Math.max(c.x,l.right),s);else if(c.x>a.x&&(90===d||180===d))m.x=this.computeMidOrthoPosition(k.right,Math.min(c.x,l.left),s);n.x=m.x;n.y=c.y}if(m.x>k.left&&m.x<k.right)if(c.y<=k.bottom&&c.y>=a.y||a.y>=l.top&&a.y<=c.y){if(0===d||180===d)m=new G(a.x,Math.min((a.y+c.y)/2,a.y)),n=new G(c.x,m.y)}else m.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?k.left:Math.min(k.left,l.left)):Math.max(c.x,270===d?k.right:Math.max(k.right,
l.right)),n.x=m.x,n.y=c.y}var p=m,r=n;if(this.xh!==Df)a=s;else{var t=this.h;if(t===q||k.Ia(c)||l.Ia(a)||e===g||this.layer.gc)a=s;else if(e=la(t,h,this),ym(e,Math.min(a.x,p.x),Math.min(a.y,p.y),Math.abs(a.x-p.x),Math.abs(a.y-p.y))&&ym(e,Math.min(p.x,r.x),Math.min(p.y,r.y),Math.abs(p.x-r.x),Math.abs(p.y-r.y))&&ym(e,Math.min(r.x,c.x),Math.min(r.y,c.y),Math.abs(r.x-c.x),Math.abs(r.y-c.y)))a=s;else if(k=k.copy().Mj(l),k.Fg(2*e.Pl,2*e.Ol),zm(e,a,b,c,d,k),l=Am(e,c.x,c.y),!e.abort&&l===na&&(Zi(e),l=e.uE,
k.Fg(e.Pl*l,e.Ol*l),zm(e,a,b,c,d,k),l=Am(e,c.x,c.y)),!e.abort&&l===na&&(Zi(e),l=e.rD,k.Fg(e.Pl*l,e.Ol*l),zm(e,a,b,c,d,k),l=Am(e,c.x,c.y)),!e.abort&&(l===na&&e.ZE)&&(Zi(e),zm(e,a,b,c,d,e.Nb),l=Am(e,c.x,c.y)),!e.abort&&l<na&&Am(e,c.x,c.y)!==ma){Bm(this,e,c.x,c.y,d,h);d=this.o(2);if(4>this.ta)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.U(2,d.x,d.y),this.C(3,d.x,d.y);else if(c=this.o(3),0===b||180===b)N.I(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.U(2,b,a.y),this.U(3,b,c.y)):
N.I(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Ol/2&&(this.U(2,d.x,a.y),this.U(3,c.x,a.y)),this.C(2,d.x,a.y)):this.U(2,a.x,d.y);else if(90===b||270===b)N.I(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.U(2,a.x,b),this.U(3,c.x,b)):N.I(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Pl/2&&(this.U(2,a.x,d.y),this.U(3,a.x,c.y)),this.C(2,a.x,d.y)):this.U(2,d.x,a.y);a=h}else a=s}a||(this.mh(m),this.mh(n))}};
E.prototype.computeMidOrthoPosition=function(a,b){if(!isNaN(this.Xu)||0!==this.oe&&!this.Ob){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};
function Bm(a,b,c,d,e,g){var k=b.Pl,l=b.Ol,m=Am(b,c,d),n=c,p=d;for(0===e?n+=k:90===e?p+=l:180===e?n-=k:p-=l;m>Cm&&Am(b,n,p)===m-Dm;)c=n,d=p,0===e?n+=k:90===e?p+=l:180===e?n-=k:p-=l,m-=Dm;if(g){if(m>Cm)if(180===e||0===e)c=Math.floor(c/k)*k+k/2;else if(90===e||270===e)d=Math.floor(d/l)*l+l/2}else c=Math.floor(c/k)*k+k/2,d=Math.floor(d/l)*l+l/2;m>Cm&&(g=e,n=c,p=d,0===e?(g=90,p+=l):90===e?(g=180,n-=k):180===e?(g=270,p-=l):270===e&&(g=0,n+=k),Am(b,n,p)===m-Dm?Bm(a,b,n,p,g,s):(n=c,p=d,0===e?(g=270,p-=l):
90===e?(g=0,n+=k):180===e?(g=90,p+=l):270===e&&(g=180,n-=k),Am(b,n,p)===m-Dm&&Bm(a,b,n,p,g,s)));a.Ck(c,d)}E.prototype.findClosestSegment=E.prototype.HI=function(a){x&&z.l(a,G,E,"findClosestSegment:p");var b=a.x;a=a.y;for(var c=this.o(0),d=this.o(1),e=cb(b,a,c.x,c.y,d.x,d.y),g=0,k=1;k<this.ta-1;k++){var c=this.o(k+1),l=cb(b,a,d.x,d.y,c.x,c.y),d=c;l<e&&(g=k,e=l)}return g};E.prototype.invalidateGeometry=E.prototype.Yf=function(){this.$h=this.Sa=q;this.ca()};
z.A(E,{Xc:"geometry"},function(){this.Sa===q&&(this.updateRoute(),this.Sa=this.makeGeometry());return this.Sa});E.prototype.xv=function(){if(this.Sa===q&&this.lh!==s){this.Sa=this.makeGeometry();var a=this.Ip();if(a!==q){a.Sa=this.Sa;for(var b=this.za,c=b.length,d=0;d<c;d++){var e=b.n[d];e!==a&&(e.rh&&e instanceof V)&&(e.Sa=this.Sa)}}}};
E.prototype.makeGeometry=function(){var a=this.ta;if(2>a){var b=new Dc(Ec),c=new Fc(0,0);b.lb.add(c);return b}var d=this.o(0).copy(),e=d.copy(),g=this.computeCurve();if(g===Bg&&3<=a&&!N.La(this.Gs,0))if(3===a)var k=this.o(1),b=Math.min(d.x,k.x),c=Math.min(d.y,k.y),k=this.o(2),b=Math.min(b,k.x),c=Math.min(c,k.y);else{if(this.Ob)for(k=0;k<a;k++)b=this.sc.n[k],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);else for(var l,k=3;k<a;k+=3)k+3>=a&&(k=a-1),l=this.o(k),e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);
b=e.x;c=e.y}else{for(k=0;k<a;k++)b=this.sc.n[k],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);b=e.x;c=e.y}b-=this.ey.x;c-=this.ey.y;d.x-=b;d.y-=c;if(2===a){var m=this.o(1).copy();m.x-=b;m.y-=c;0!==wm(this)&&Em(this,d,h,e);0!==xm(this)&&Em(this,m,s,e);b=new Dc(Lc);b.la=d.x;b.ma=d.y;b.D=m.x;b.F=m.y}else{m=z.u();0!==wm(this)&&Em(this,d,h,e);P(m,d.x,d.y,s,s);if(g===Bg&&3<=a&&!N.La(this.Gs,0))if(3===a)k=this.o(1),a=k.x-b,d=k.y-c,k=this.o(2).copy(),k.x-=b,k.y-=c,0!==xm(this)&&Em(this,k,s,e),Q(m,a,d,a,d,k.x,
k.y);else if(this.Ob){d=new G(b,c);g=this.o(1).copy();l=new G(b,c);for(var a=new G(b,c),e=this.o(0),n=q,p=this.Gs/3,k=1;k<this.ta-1;k++){var n=this.o(k),r=e,t=n,u=this.o(Fm(this,n,k,s));if(!N.La(r.x,t.x)||!N.La(t.x,u.x))if(!N.La(r.y,t.y)||!N.La(t.y,u.y)){var v=p,A=l,C=a;isNaN(v)&&(v=this.Gs/3);var K=r.x,r=r.y,I=t.x,t=t.y,R=u.x,u=u.y,M=v*Gm(K,r,I,t),v=v*Gm(I,t,R,u);N.La(r,t)&&N.La(I,R)&&(I>K?u>t?(A.x=I-M,A.y=t-M,C.x=I+v,C.y=t+v):(A.x=I-M,A.y=t+M,C.x=I+v,C.y=t-v):u>t?(A.x=I+M,A.y=t-M,C.x=I-v,C.y=t+
v):(A.x=I+M,A.y=t+M,C.x=I-v,C.y=t-v));N.La(K,I)&&N.La(t,u)&&(t>r?(R>I?(A.x=I-M,A.y=t-M,C.x=I+v):(A.x=I+M,A.y=t-M,C.x=I-v),C.y=t+v):(R>I?(A.x=I-M,A.y=t+M,C.x=I+v):(A.x=I+M,A.y=t+M,C.x=I-v),C.y=t-v));if(N.La(K,I)&&N.La(I,R)||N.La(r,t)&&N.La(t,u))K=0.5*(K+R),r=0.5*(r+u),A.x=K,A.y=r,C.x=K,C.y=r;1===k?(g.x=0.5*(e.x+n.x),g.y=0.5*(e.y+n.y)):2===k&&(N.La(e.x,this.o(0).x)&&N.La(e.y,this.o(0).y))&&(g.x=0.5*(e.x+n.x),g.y=0.5*(e.y+n.y));Q(m,g.x-b,g.y-c,l.x-b,l.y-c,n.x-b,n.y-c);d.set(l);g.set(a);e=n}}k=e.x;e=
e.y;d=this.o(this.ta-1);k=0.5*(k+d.x);e=0.5*(e+d.y);Q(m,a.x-b,a.y-c,k-b,e-c,d.x-b,d.y-c)}else for(k=3;k<a;k+=3)e=this.o(k-2),k+3>=a&&(k=a-1),d=this.o(k-1),l=this.o(k),k===a-1&&0!==xm(this)&&(l=l.copy(),Em(this,l,s,N.Nj)),Q(m,e.x-b,e.y-c,d.x-b,d.y-c,l.x-b,l.y-c);else{e=z.O();e.assign(this.o(0));for(k=1;k<a;){k=Fm(this,e,k,1<k);p=this.o(k);if(k>=a-1){e!==p&&(0!==xm(this)&&(p=p.copy(),Em(this,p,s,N.Nj)),Hm(this,m,-b,-c,e,p));break}k=Fm(this,p,k+1,k<a-3);d=m;g=-b;l=-c;n=e;A=this.o(k);C=e;N.I(n.y,p.y)&&
N.I(p.x,A.x)?(K=this.computeCorner(),K=Math.min(K,Math.abs(p.x-n.x)/2),K=r=Math.min(K,Math.abs(A.y-p.y)/2),N.I(K,0)?(Hm(this,d,g,l,n,p),C.assign(p)):(v=p.x,I=p.y,t=v,R=I,v=p.x>n.x?p.x-K:p.x+K,R=A.y>p.y?p.y+r:p.y-r,Hm(this,d,g,l,n,new G(v,I)),Vc(d,p.x+g,p.y+l,t+g,R+l),C.q(t,R))):N.I(n.x,p.x)&&N.I(p.y,A.y)?(K=this.computeCorner(),r=Math.min(K,Math.abs(p.y-n.y)/2),r=K=Math.min(r,Math.abs(A.x-p.x)/2),N.I(K,0)?(Hm(this,d,g,l,n,p),C.assign(p)):(v=p.x,R=I=p.y,I=p.y>n.y?p.y-r:p.y+r,t=A.x>p.x?p.x+K:p.x-K,
Hm(this,d,g,l,n,new G(v,I)),Vc(d,p.x+g,p.y+l,t+g,R+l),C.q(t,R))):(Hm(this,d,g,l,n,p),C.assign(p))}z.B(e)}b=m.s;z.v(m)}return b};function Gm(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return N.La(a,0)?b:N.La(b,0)?a:Math.sqrt(a*a+b*b)}
function Em(a,b,c,d){var e=a.ta;if(!(2>e))if(c){var g=a.o(1);c=g.x-d.x;d=g.y-d.y;g=Gm(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=wm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.o(e-2),c=g.x-d.x,d=g.y-d.y,g=Gm(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=xm(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function Fm(a,b,c,d){for(var e=a.ta,g=b;N.La(b.x,g.x)&&N.La(b.y,g.y);){if(c>=e)return e-1;g=a.o(c++)}if(!N.La(b.x,g.x)&&!N.La(b.y,g.y))return c-1;for(var k=g;N.La(b.x,g.x)&&N.La(g.x,k.x)&&(!d||(b.y>=g.y?g.y>=k.y:g.y<=k.y))||N.La(b.y,g.y)&&N.La(g.y,k.y)&&(!d||(b.x>=g.x?g.x>=k.x:g.x<=k.x));){if(c>=e)return e-1;k=a.o(c++)}return c-2}
function Hm(a,b,c,d,e,g){if(nm(a)){var k=new J("number"),l=Im(a,e,g,k),m=e.x,m=e.y;if(0<l)if(N.I(e.y,g.y))if(e.x<g.x)for(var n=0;n<l;){var p=Math.max(e.x,Math.min(k.n[n++]-5,g.x-10));b.lineTo(p+c,g.y+d);for(var m=p+c,r=Math.min(p+10,g.x);n<l;){var t=k.n[n];if(t<r+10)n++,r=Math.min(t+5,g.x);else break}t=(p+r)/2+c;t=g.y-10+d;p=r+c;r=g.y+d;a.Xe===ok?P(b,p,r,s,s):Q(b,m,t,p,t,p,r)}else for(n=l-1;0<=n;){p=Math.min(e.x,Math.max(k.n[n--]+5,g.x+10));b.lineTo(p+c,g.y+d);m=p+c;for(r=Math.max(p-10,g.x);0<=n;)if(t=
k.n[n],t>r-10)n--,r=Math.max(t-5,g.x);else break;t=g.y-10+d;p=r+c;r=g.y+d;a.Xe===ok?P(b,p,r,s,s):Q(b,m,t,p,t,p,r)}else if(N.I(e.x,g.x))if(e.y<g.y)for(n=0;n<l;){p=Math.max(e.y,Math.min(k.n[n++]-5,g.y-10));b.lineTo(g.x+c,p+d);m=p+d;for(r=Math.min(p+10,g.y);n<l;)if(t=k.n[n],t<r+10)n++,r=Math.min(t+5,g.y);else break;t=g.x-10+c;p=g.x+c;r+=d;a.Xe===ok?P(b,p,r,s,s):Q(b,t,m,t,r,p,r)}else for(n=l-1;0<=n;){p=Math.min(e.y,Math.max(k.n[n--]+5,g.y+10));b.lineTo(g.x+c,p+d);m=p+d;for(r=Math.max(p-10,g.y);0<=n;)if(t=
k.n[n],t>r-10)n--,r=Math.max(t-5,g.y);else break;t=g.x-10+c;p=g.x+c;r+=d;a.Xe===ok?P(b,p,r,s,s):Q(b,t,m,t,r,p,r)}}b.lineTo(g.x+c,g.y+d)}
function Im(a,b,c,d){var e=a.h;if(e===q)return 0;Math.min(b.x,c.x);Math.min(b.y,c.y);Math.max(b.x,c.x);Math.max(b.y,c.y);for(e=e.im;e.next();){var g=e.value;if(g!==q&&g.visible)for(var g=g.ab.n,k=g.length,l=0;l<k;l++){var m=g[l];if(m===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(m instanceof E&&a.Db()&&m.Db()&&nm(m)){var n=m.Ni();n.W()&&(a.Ni().xf(n)&&!a.usesSamePort(m))&&(n=m.path,n!==q&&n.Rk()&&Jm(b,c,d,m))}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function Jm(a,b,c,d){for(var e=d.ta,g=1;g<e;g++){var k=d.o(g-1),l=d.o(g),m=z.O(),n;a:{n=a;var p=b,r=m;if(N.I(n.x,p.x)){if(N.I(k.y,l.y)&&Math.min(n.y,p.y)<=k.y&&Math.max(n.y,p.y)>=k.y&&Math.min(k.x,l.x)<=n.x&&Math.max(k.x,l.x)>=n.x&&!N.I(k.x,l.x)){r.x=n.x;r.y=k.y;n=h;break a}}else if(N.I(k.x,l.x)&&Math.min(n.x,p.x)<=k.x&&Math.max(n.x,p.x)>=k.x&&Math.min(k.y,l.y)<=n.y&&Math.max(k.y,l.y)>=n.y&&!N.I(k.y,l.y)){r.x=k.x;r.y=n.y;n=h;break a}r.x=0;r.y=0;n=s}n&&(N.I(a.y,b.y)?c.add(m.x):c.add(m.y));z.B(m)}}
z.A(E,{Rr:"firstPickIndex"},function(){return 2>=this.ta?0:this.Ob||qm(this)!==Wb?1:0});z.A(E,{vv:"lastPickIndex"},function(){var a=this.ta;return 0===a?0:2>=a?a-1:this.Ob||rm(this)!==Wb?a-2:a-1});function nm(a){a=a.Xe;return a===pk||a===ok}function pm(a,b){if(b||nm(a)){var c=a.h;c!==q&&(!c.Tm.contains(a)&&a.Mx!==q)&&c.Tm.add(a,a.Mx)}}
function vg(a,b){var c=a.layer;if(!(c===q||!c.visible||c.gc)){var d=c.h;if(d!==q)for(var e=s,d=d.im;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,k=s,g=g.ab.n,l=g.length,m=0;m<l;m++){var n=g[m];n instanceof E&&(n===a?k=h:k&&Km(a,n,b))}else if(e){g=g.ab.n;l=g.length;for(m=0;m<l;m++)n=g[m],n instanceof E&&Km(a,n,b)}}}}function Km(a,b,c){if(b!==q&&nm(b)&&b.Sa!==q){var d=b.Ni();if(d.W()&&(a.Ni().xf(d)||c.xf(d)))a.usesSamePort(b)||b.Yf()}}
E.prototype.usesSamePort=function(a){var b=this.ta,c=a.ta;if(0<b&&0<c){if(this.o(0).qi(a.o(0))||this.o(b-1).qi(a.o(c-1)))return h}else if(this.da===a.da||this.ja===a.ja)return h;return s};z.g(E,"adjusting",E.prototype.Hu);z.defineProperty(E,{Hu:"adjusting"},w("fp"),function(a){var b=this.fp;b!==a&&(x&&z.wb(a,E,E,"adjusting"),this.fp=a,this.i("adjusting",b,a))});z.g(E,"corner",E.prototype.tC);
z.defineProperty(E,{tC:"corner"},w("qp"),function(a){var b=this.qp;b!==a&&(x&&z.j(a,"number",E,"corner"),this.qp=a,this.Yf(),this.i("corner",b,a))});z.g(E,"curve",E.prototype.Xe);z.defineProperty(E,{Xe:"curve"},w("tp"),function(a){var b=this.tp;b!==a&&(x&&z.wb(a,E,E,"curve"),this.tp=a,this.bc(),pm(this,b===ok||b===pk||a===ok||a===pk),this.i("curve",b,a))});z.g(E,"curviness",E.prototype.Xu);
z.defineProperty(E,{Xu:"curviness"},w("up"),function(a){var b=this.up;b!==a&&(x&&z.j(a,"number",E,"curviness"),this.up=a,this.bc(),this.i("curviness",b,a))});z.g(E,"routing",E.prototype.xh);z.defineProperty(E,{xh:"routing"},w("yn"),function(a){var b=this.yn;b!==a&&(x&&z.wb(a,E,E,"routing"),this.yn=a,this.Mh=q,this.bc(),pm(this,b===nk||b===Df||a===nk||a===Df),this.i("routing",b,a))});z.g(E,"smoothness",E.prototype.Gs);
z.defineProperty(E,{Gs:"smoothness"},w("dr"),function(a){var b=this.dr;b!==a&&(x&&z.j(a,"number",E,"smoothness"),this.dr=a,this.Yf(),this.i("smoothness",b,a))});
function lm(a){var b=a.Gf;if(b!==q){var c=a.Pf;if(c!==q){var d=a.Wg;a=a.jh;var e;a:{if(!(c===q||b.Pg===q))for(e=b.Pg.k;e.next();){var g=e.value;if(g.Go===b&&g.os===c&&g.Bv===d&&g.Cv===a||g.Go===c&&g.os===b&&g.Bv===a&&g.Cv===d){e=g;break a}}e=q}for(var k=g=q,l=b.Yb.n,m=l.length,n=0;n<m;n++){var p=l[n];if(p.Gf===b&&p.Wg===d&&p.Pf===c&&p.jh===a||p.Gf===c&&p.Wg===a&&p.Pf===b&&p.jh===d)k===q?k=p:(g===q&&(g=new J(E),g.add(k)),g.add(p))}if(g!==q){e===q&&(e=new Xl,e.Go=b,e.Bv=d,e.os=c,e.Cv=a,Wl(b,e),Wl(c,
e));e.links=g;for(n=0;n<g.count;n++)if(p=g.n[n],0===p.oe){b=1;for(c=0;c<g.count;c++)Math.abs(g.n[c].oe)===b&&(b++,c=-1);p.gl=e;p.oe=p.da===e.Go?b:-b;p.bc()}}}}}
function km(a){var b=a.gl;if(b!==q){var c=a.oe;a.gl=q;a.oe=0;a.bc();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.gl=q,c.oe=0,c.bc()),c=b.Go,b!==q&&c.Pg!==q&&c.Pg.remove(b),c=b.os,b!==q&&c.Pg!==q&&c.Pg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.k;b.next();){var d=b.value,e=Math.abs(d.oe),g=0===e%2;e>c&&a===g&&(d.oe=0<d.oe?d.oe-2:d.oe+2,d.bc())}}}}function Xl(){z.qc(this);this.links=this.Cv=this.os=this.Bv=this.Go=q;this.spacing=10}
z.Vf(Xl,{Go:h,Bv:h,os:h,Cv:h,links:h,spacing:h});function Xi(){z.qc(this);this.group=q;this.oo=h;this.abort=s;this.qf=this.pf=1;this.nq=this.mq=-1;this.cd=this.kd=8;this.Wb=q;this.ZE=s;this.uE=22;this.rD=111}z.Vf(Xi,{group:h,oo:h,abort:h,ZE:h,uE:h,rD:h});var ma=0,Cm=1,Dm=1,na=999999999,Lm=na;
Xi.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.pf=Math.floor((a.x-this.kd)/this.kd)*this.kd;this.qf=Math.floor((b-this.cd)/this.cd)*this.cd;this.mq=Math.ceil((c+2*this.kd)/this.kd)*this.kd;this.nq=Math.ceil((d+2*this.cd)/this.cd)*this.cd;a=1+(Math.ceil((this.mq-this.pf)/this.kd)|0);b=1+(Math.ceil((this.nq-this.qf)/this.cd)|0);if(this.Wb===q||this.Hl<a-1||this.Il<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.Wb=
c;this.Hl=a-1;this.Il=b-1}if(this.Wb!==q)for(a=0;a<=this.Hl;a++)for(b=0;b<=this.Il;b++)this.Wb[a][b]=Lm}};z.A(Xi,{Nb:q},function(){return new H(this.pf,this.qf,this.mq-this.pf,this.nq-this.qf)});z.g(Xi,"cellWidth",Xi.prototype.Pl);z.defineProperty(Xi,{Pl:q},w("kd"),function(a){0<a&&a!==this.kd&&(this.kd=a,this.initialize(this.Nb))});z.g(Xi,"cellHeight",Xi.prototype.Ol);z.defineProperty(Xi,{Ol:q},w("cd"),function(a){0<a&&a!==this.cd&&(this.cd=a,this.initialize(this.Nb))});
function Mm(a,b,c){return a.pf<=b&&b<=a.mq&&a.qf<=c&&c<=a.nq}function Am(a,b,c){if(!Mm(a,b,c))return 0;b-=a.pf;b/=a.kd;c-=a.qf;c/=a.cd;return a.Wb[b|0][c|0]}function $i(a,b,c){Mm(a,b,c)&&(b-=a.pf,b/=a.kd,c-=a.qf,c/=a.cd,a.Wb[b|0][c|0]=ma)}function Zi(a){if(a.Wb!==q)for(var b=0;b<=a.Hl;b++)for(var c=0;c<=a.Il;c++)a.Wb[b][c]>=Cm&&(a.Wb[b][c]|=na)}
function ym(a,b,c,d,e){if(b>a.mq||b+d<a.pf||c>a.nq||c+e<a.qf)return h;b=(b-a.pf)/a.kd|0;c=(c-a.qf)/a.cd|0;d=Math.max(0,d)/a.kd+1|0;var g=Math.max(0,e)/a.cd+1|0;0>b&&(d+=b,b=0);0>c&&(g+=c,c=0);if(0>d||0>g)return h;e=Math.min(b+d-1,a.Hl)|0;for(d=Math.min(c+g-1,a.Il)|0;b<=e;b++)for(g=c;g<=d;g++)if(a.Wb[b][g]===ma)return s;return h}
function Nm(a,b,c,d,e,g,k,l,m){if(!(b<g||b>k||c<l||c>m)){var n,p;n=b|0;p=c|0;var r=a.Wb[n][p];if(r>=Cm&&r<na){e?p+=d:n+=d;for(r+=Dm;g<=n&&(n<=k&&l<=p&&p<=m)&&!(r>=a.Wb[n][p]);)a.Wb[n][p]=r,r+=Dm,e?p+=d:n+=d}n=e?p:n;if(e)if(0<d)for(c+=d;c<n;c+=d)Nm(a,b,c,1,!e,g,k,l,m),Nm(a,b,c,-1,!e,g,k,l,m);else for(c+=d;c>n;c+=d)Nm(a,b,c,1,!e,g,k,l,m),Nm(a,b,c,-1,!e,g,k,l,m);else if(0<d)for(b+=d;b<n;b+=d)Nm(a,b,c,1,!e,g,k,l,m),Nm(a,b,c,-1,!e,g,k,l,m);else for(b+=d;b>n;b+=d)Nm(a,b,c,1,!e,g,k,l,m),Nm(a,b,c,-1,!e,g,
k,l,m)}}function Om(a,b,c,d,e,g,k,l,m,n,p){for(var r=b|0,t=c|0,u=a.Wb[r][t];0===u&&r>l&&r<m&&t>n&&t<p;)if(k?t+=g:r+=g,u=a.Wb[r][t],1>=Math.abs(r-d)&&1>=Math.abs(t-e))return a.abort=h,0;r=b|0;t=c|0;u=a.Wb[r][t];b=Cm;for(a.Wb[r][t]=b;0===u&&r>l&&r<m&&t>n&&t<p;)k?t+=g:r+=g,u=a.Wb[r][t],a.Wb[r][t]=b,b+=Dm;return k?t:r}
function zm(a,b,c,d,e,g){if(a.Wb!==q){a.abort=s;var k=b.x,l=b.y;if(Mm(a,k,l)){var k=k-a.pf,k=k/a.kd,l=l-a.qf,l=l/a.cd,m=d.x,n=d.y;if(Mm(a,m,n))if(m-=a.pf,m/=a.kd,n-=a.qf,n/=a.cd,1>=Math.abs(k-m)&&1>=Math.abs(l-n))a.abort=h;else{var p=g.x;b=g.y;d=g.x+g.width;var r=g.y+g.height,p=p-a.pf,p=p/a.kd;b-=a.qf;b/=a.cd;d-=a.pf;d/=a.kd;r-=a.qf;r/=a.cd;g=Math.max(0,Math.min(a.Hl,p|0));d=Math.min(a.Hl,Math.max(0,d|0));b=Math.max(0,Math.min(a.Il,b|0));var r=Math.min(a.Il,Math.max(0,r|0)),k=k|0,l=l|0,m=m|0,n=n|
0,p=k,t=l,u=0===c||90===c?1:-1;(c=90===c||270===c)?t=Om(a,k,l,m,n,u,c,g,d,b,r):p=Om(a,k,l,m,n,u,c,g,d,b,r);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var u=m|0,v=n|0,A=a.Wb[u][v];0===A&&u>g&&u<d&&v>b&&v<r;)if(e?v+=c:u+=c,A=a.Wb[u][v],1>=Math.abs(u-k)&&1>=Math.abs(v-l)){a.abort=h;break a}u=m|0;v=n|0;A=a.Wb[u][v];for(a.Wb[u][v]=Lm;0===A&&u>g&&u<d&&v>b&&v<r;)e?v+=c:u+=c,A=a.Wb[u][v],a.Wb[u][v]=Lm}a.abort||(Nm(a,p,t,1,s,g,d,b,r),Nm(a,p,t,-1,s,g,d,b,r),Nm(a,p,t,1,h,g,d,b,r),Nm(a,p,t,-1,
h,g,d,b,r))}}}}}function um(){z.qc(this);this.port=this.Cc=q;this.ag=[];this.ms=s}z.Vf(um,{Cc:h,port:h,ag:h,ms:h});um.prototype.toString=function(){for(var a=this.ag,b=this.Cc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==q&&(b+="\n  "+d.toString())}return b};
function Pm(a,b,c,d){b=b.offsetY;switch(b){case z.hd:return 90;case z.$c:return 180;case z.ud:return 270;case z.jd:return 0}switch(b){case z.hd|z.ud:return 180<c?270:90;case z.$c|z.jd:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case z.$c|z.ud:return c>a&&c<=180+a?180:270;case z.ud|z.jd:return c>180-a&&c<=360-a?270:0;case z.jd|z.hd:return c>a&&c<=180+a?90:0;case z.hd|z.$c:return c>180-a&&c<=360-a?180:90;case z.$c|z.ud|z.jd:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case z.ud|z.jd|z.hd:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case z.jd|z.hd|z.$c:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case z.hd|z.$c|z.ud:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(z.$c|z.ud|z.jd|z.hd)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function vm(a,b){var c=a.ag;if(0===c.length){if(!a.ms){c=a.ms;a.ms=h;var d=a.Cc.rd,e=a.ag.length=0,g=a.port.nb($b,z.O()),k=a.port.nb(gc,z.O()),l=z.Kj(g.x,g.y,0,0);l.Lj(k);z.B(g);z.B(k);g=z.ic(l.x+l.width/2,l.y+l.height/2);k=z.O();for(d=d.k;d.next();){var m=d.value;if(m.Db()){var n=Wb,n=m.Kc===a.port?qm(m,a.port):rm(m,a.port);if(Rb(n)){var p;p=m.Kc===a.port?m.td:m.Kc;if(p!==q&&p.Z!==q){var r=p.nb(cc,k);p=p.Pd;p=p!==q?vm(p,m):q;p!==q&&(r=p.zo);p=g.ni(r);var n=Pm(l,n,p,m.Ob),t;0===n?(t=z.jd,180<p&&(p-=
360)):t=90===n?z.hd:180===n?z.$c:z.ud;(n=a.ag[e])?(n.link=m,n.angle=p,n.ne=t):(n=new Qm(m,p,t),a.ag[e]=n);n.Av.set(r);e++}}}}z.B(g);z.B(k);a.ag.sort(um.prototype.AH);g=a.ag.length;k=-1;for(e=d=0;e<g;e++)n=a.ag[e],n!==q&&(n.ne!==k&&(k=n.ne,d=0),n.dm=d,d++);k=-1;d=0;for(e=g-1;0<=e;e--)n=a.ag[e],n!==q&&(n.ne!==k&&(k=n.ne,d=n.dm+1),n.Ir=d);e=a.ag;for(g=0;g<e.length;g++)if(k=e[g],k!==q){m=k;r=a.port;k=z.O();d=z.O();switch(m.ne){case z.hd:r.nb(gc,k);r.nb(dc,d);break;case z.$c:r.nb(dc,k);r.nb($b,d);break;
case z.ud:r.nb($b,k);r.nb(bc,d);break;default:case z.jd:r.nb(bc,k),r.nb(gc,d)}r=d.y-k.y;n=(m.dm+1)/(m.Ir+1);m=m.zo;m.x=k.x+(d.x-k.x)*n;m.y=k.y+r*n;z.B(k);z.B(d)}e=a.ag;for(g=0;g<e.length;g++)k=e[g],k!==q&&(k.bv=a.computeEndSegmentLength(k));a.ms=c;z.Jc(l)}c=a.ag}for(l=0;l<c.length;l++)if(e=c[l],e!==q&&e.link===b)return e;return q}um.prototype.AH=function(a,b){return a===b?0:a===q?-1:b===q?1:a.ne<b.ne?-1:a.ne>b.ne?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
um.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Cc,this.port,Wb,b.Kc===this.port),d=a.dm;if(0>d)return c;var e=a.Ir;if(1>=e||!b.Ob)return c;var b=a.Av,g=a.zo;if(a.ne===z.$c||a.ne===z.hd)d=e-1-d;return((a=a.ne===z.$c||a.ne===z.jd)?b.y<g.y:b.x<g.x)?c+8*d:(a?b.y===g.y:b.x===g.x)?c:c+8*(e-1-d)};function Qm(a,b,c){this.link=a;this.angle=b;this.ne=c;this.Av=new G;this.dm=this.Ir=this.dm=0;this.zo=new G;this.bv=0}
z.Vf(Qm,{link:h,angle:h,ne:h,Av:h,dm:h,Ir:h,zo:h,bv:h});Qm.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ne.toString()+":"+this.dm.toString()+"/"+this.Ir.toString()+" "+this.zo.toString()+" "+this.bv.toString()+" "+this.Av.toString()};
function oa(a){0===arguments.length?D.call(this,Pg):D.call(this,a);this.pq=new va(B);this.zl=new va(oa);this.sk=this.qq=this.oq=q;this.qr=s;this.Tp=h;this.rr=s;this.rb=this.gr=q;this.op=s;this.zd=new Eh;this.zd.group=this}z.ea("Group",oa);z.Pa(oa,D);
oa.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.oq=this.oq;a.qq=this.qq;a.sk=this.sk;a.qr=this.qr;a.Tp=this.Tp;a.rr=this.rr;a.gr=this.gr;var b=il(a,a,function(a){return a instanceof Gg});a.rb=b instanceof Gg?b:q;a.op=this.op;this.zd!==q?(a.zd=this.zd.copy(),a instanceof oa&&(a.zd.group=a)):(a.zd!==q&&(a.zd.group=q),a.zd=q)};
oa.prototype.oh=function(a){D.prototype.oh.call(this,a);var b=a.ho();for(a=a.Bc;a.next();){var c=a.value;c.ca();c.K(Xj);c.ge();c instanceof oa&&(c.Xv=c.Ze,Rm(c,b));if(c instanceof D)c.Gg(b);else if(c instanceof E)for(c=c.wi;c.next();)c.value.Gg(b)}};
oa.prototype.nm=function(a,b,c,d,e,g,k){if(a===zd&&"elements"===b)if(e instanceof Gg)this.rb===q?this.rb=e:this.rb!==e&&z.m("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof F){var l=il(e,e,function(a){return a instanceof Gg});l instanceof Gg&&(this.rb===q?this.rb=l:this.rb!==l&&z.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===Gd&&"elements"===b&&this.rb!==q&&(d===this.rb?this.rb=q:d instanceof F&&this.rb.ui(d)&&(this.rb=
q));D.prototype.nm.call(this,a,b,c,d,e,g,k)};oa.prototype.sj=function(a,b,c,d){this.rk=this.rb;F.prototype.sj.call(this,a,b,c,d)};oa.prototype.Qk=function(){if(!D.prototype.Qk.call(this))return s;for(var a=this.Bc;a.next();){var b=a.value;if(b instanceof D){if(b.Db()&&gi(b))return s}else if(b instanceof E&&b.Db()&&gi(b)&&b.da!==this&&b.ja!==this)return s}return h};z.A(oa,{placeholder:"placeholder"},w("rb"));z.g(oa,"computesBoundsAfterDrag",oa.prototype.Fy);
z.defineProperty(oa,{Fy:"computesBoundsAfterDrag"},w("op"),function(a){var b=this.op;b!==a&&(z.j(a,"boolean",oa,"computesBoundsAfterDrag"),this.op=a,this.i("computesBoundsAfterDrag",b,a))});z.A(oa,{Bc:"memberParts"},function(){return this.pq.k});function Ql(a,b){if(a.pq.add(b)){b instanceof oa&&a.zl.add(b);var c=a.CD;if(c!==q){var d=h,e=a.h;e!==q&&(d=e.Wa,e.Wa=h);c(a,b);e!==q&&(e.Wa=d)}}c=a.rb;c===q&&(c=a);c.ca()}
function Pl(a,b){if(a.pq.remove(b)){b instanceof oa&&a.zl.remove(b);var c=a.DD;if(c!==q){var d=h,e=a.h;e!==q&&(d=e.Wa,e.Wa=h);c(a,b);e!==q&&(e.Wa=d)}}c=a.rb;c===q&&(c=a);c.ca()}oa.prototype.Vl=function(){if(0<this.pq.count){var a=this.h;if(a===q)return;for(var b=this.pq.copy().k;b.next();)a.remove(b.value)}D.prototype.Vl.call(this)};oa.prototype.Qv=function(){var a=this.layer;a!==q&&a.Qv(this)};z.g(oa,"layout",oa.prototype.Pb);
z.defineProperty(oa,{Pb:"layout"},w("zd"),function(a){var b=this.zd;b!==a&&(a!==q&&z.l(a,Eh,oa,"layout"),b!==q&&(b.h=q,b.group=q),this.zd=a,a!==q&&(a.h=this.h,a.group=this),this.i("layout",b,a))});z.g(oa,"memberAdded",oa.prototype.CD);z.defineProperty(oa,{CD:"memberAdded"},w("oq"),function(a){var b=this.oq;b!==a&&(a!==q&&z.j(a,"function",oa,"memberAdded"),this.oq=a,this.i("memberAdded",b,a))});z.g(oa,"memberRemoved",oa.prototype.DD);
z.defineProperty(oa,{DD:"memberRemoved"},w("qq"),function(a){var b=this.qq;b!==a&&(a!==q&&z.j(a,"function",oa,"memberRemoved"),this.qq=a,this.i("memberRemoved",b,a))});z.g(oa,"memberValidation",oa.prototype.hs);z.defineProperty(oa,{hs:"memberValidation"},w("sk"),function(a){var b=this.sk;b!==a&&(a!==q&&z.j(a,"function",oa,"memberValidation"),this.sk=a,this.i("memberValidation",b,a))});
oa.prototype.canAddMembers=oa.prototype.tI=function(a){var b=this.h;if(b===q)return s;b=b.Ue;for(a=$e(a).k;a.next();)if(!b.isValidMember(this,a.value))return s;return h};oa.prototype.addMembers=oa.prototype.rI=function(a,b){var c=this.h;if(c===q)return s;for(var c=c.Ue,d=h,e=$e(a).k;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.bb=this:d=s}return d};z.g(oa,"ungroupable",oa.prototype.NE);
z.defineProperty(oa,{NE:"ungroupable"},w("qr"),function(a){var b=this.qr;b!==a&&(z.j(a,"boolean",oa,"ungroupable"),this.qr=a,this.i("ungroupable",b,a))});oa.prototype.canUngroup=function(){if(!this.NE)return s;var a=this.layer;if(a!==q&&!a.Qn)return s;a=a.h;return a!==q&&!a.Qn?s:h};
oa.prototype.findExternalLinksConnected=oa.prototype.JI=function(){var a=this.ho();a.add(this);for(var b=new va(E),c=a.k;c.next();){var d=c.value;if(d instanceof fa.fF)for(d=d.rd;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.k};
oa.prototype.findExternalNodesConnected=oa.prototype.KI=function(){var a=this.ho();a.add(this);for(var b=new va(D),c=a.k;c.next();){var d=c.value;if(d instanceof fa.fF)for(d=d.rd;d.next();){var e=d.value,g=e.da;(!a.contains(g)||g===this)&&b.add(g);e=e.ja;(!a.contains(e)||e===this)&&b.add(e)}}return b.k};oa.prototype.findSubGraphParts=oa.prototype.ho=function(){var a=new va(B);Me(a,this,h,0);a.remove(this);return a};
oa.prototype.collapseSubGraph=oa.prototype.collapseSubGraph=function(){var a=this.h;if(a!==q&&!a.Fd){a.Fd=h;var b=this.ho();Rm(this,b);a.Fd=s}};function Rm(a,b){a.Ze=s;for(var c=a.Bc;c.next();){var d=c.value;d.ca();d.K(Xj);d.ge();d instanceof oa&&(d.Xv=d.Ze,Rm(d,b));if(d instanceof D)d.Gg(b);else if(d instanceof E)for(d=d.wi;d.next();)d.value.Gg(b)}}oa.prototype.expandSubGraph=oa.prototype.expandSubGraph=function(){var a=this.h;if(a!==q&&!a.Fd){a.Fd=h;var b=this.ho();Sm(this,b);a.Fd=s}};
function Sm(a,b){a.Ze=h;for(var c=a.Bc;c.next();){var d=c.value;d.ca();d.K(Wj);d.updateAdornments();d instanceof oa&&d.Xv&&Sm(d,b);if(d instanceof D)d.Gg(b);else if(d instanceof E)for(d=d.wi;d.next();)d.value.Gg(b)}}z.g(oa,"isSubGraphExpanded",oa.prototype.Ze);
z.defineProperty(oa,{Ze:"isSubGraphExpanded"},w("Tp"),function(a){var b=this.Tp;if(b!==a){z.j(a,"boolean",oa,"isSubGraphExpanded");this.Tp=a;var c=this.h;this.i("isSubGraphExpanded",b,a);b=this.zE;if(b!==q){var d=h;c!==q&&(d=c.Wa,c.Wa=h);b(this);c!==q&&(c.Wa=d)}c!==q&&c.Aa.jb||(a?this.expandSubGraph():this.collapseSubGraph())}});z.g(oa,"wasSubGraphExpanded",oa.prototype.Xv);
z.defineProperty(oa,{Xv:"wasSubGraphExpanded"},w("rr"),function(a){var b=this.rr;b!==a&&(z.j(a,"boolean",oa,"wasSubGraphExpanded"),this.rr=a,this.i("wasSubGraphExpanded",b,a))});z.g(oa,"subGraphExpandedChanged",oa.prototype.zE);z.defineProperty(oa,{zE:"subGraphExpandedChanged"},w("gr"),function(a){var b=this.gr;b!==a&&(a!==q&&z.j(a,"function",oa,"subGraphExpandedChanged"),this.gr=a,this.i("subGraphExpandedChanged",b,a))});
oa.prototype.move=oa.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;D.prototype.move.call(this,a);for(a=this.ho().k;a.next();){var d=a.value,e=d.position;D.prototype.move.call(d,new G(e.x+c,e.y+b))}};function Gg(){U.call(this);this.re=N.ap;this.Rq=new H(NaN,NaN,NaN,NaN)}z.ea("Placeholder",Gg);z.Pa(Gg,U);Gg.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.re=this.re.Y();a.Rq=this.Rq.copy()};
Gg.prototype.tj=function(a){if(this.background===q&&this.hi===q)return s;var b=this.Ma;return Cb(0,0,b.width,b.height,a.x,a.y)};
Gg.prototype.gs=function(){var a=this.Z;(a===q||!(a instanceof oa)&&!(a instanceof Ne))&&z.m("Placeholder is not inside a Group or Adornment.");if(a instanceof oa){var b;a:{b=this.Rq;var c=this.Z;if(c instanceof oa&&c.Fy&&this.Rq.W()){var d=c.h;if(d!==q&&(d=d.Ra,d instanceof gf&&!d.yp&&d.lc!==q&&!d.lc.contains(c))){b.assign(this.Rq);break a}}c=z.hf();d=this.Z;if(d instanceof oa){for(var e=Infinity,g=Infinity,k=-Infinity,l=-Infinity,m=d.Bc;m.next();){var n=m.value;if(n.Db()){if(n instanceof E){if(fi(n))continue;
if(n.da===d||n.ja===d)continue}n=n.ya;n.left<e&&(e=n.left);n.top<g&&(g=n.top);n.right>k&&(k=n.right);n.bottom>l&&(l=n.bottom)}}!isFinite(e)||!isFinite(g)?(d=d.location,e=this.padding,c.q(d.x+e.left,d.y+e.top,0,0)):c.q(e,g,k-e,l-g)}else c.q(0,0,0,0);d=this.padding;b.q(c.x-d.left,c.y-d.top,c.width+d.left+d.right,c.height+d.top+d.bottom);z.Jc(c)}c=this.Rc;lb(c,b.width||0,b.height||0);pj(this,0,0,c.width,c.height);c=a.Bc;for(d=s;c.next();)if(c.value.Db()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(c=new G,
c.Cs(b,a.af),a.location=new G(c.x,c.y))}else b=this.Fa,c=this.Rc,a=this.padding,d=a.left+a.right,e=a.top+a.bottom,b.W()?(lb(c,b.width+d||0,b.height+e||0),pj(this,-a.left,-a.top,c.width,c.height)):(g=this.Z,k=g.Hc,l=k.nb($b,z.O()),b=z.Kj(l.x,l.y,0,0),b.Lj(k.nb(gc,l)),b.Lj(k.nb(bc,l)),b.Lj(k.nb(dc,l)),g.Rh.q(b.x,b.y),lb(c,b.width+d||0,b.height+e||0),pj(this,-a.left,-a.top,c.width,c.height),z.B(l),z.Jc(b))};Gg.prototype.sj=function(a,b,c,d){var e=this.ya;e.x=a;e.y=b;e.width=c;e.height=d};
z.g(Gg,"padding",Gg.prototype.padding);z.defineProperty(Gg,{padding:"padding"},w("re"),function(a){"number"===typeof a?(0>a&&z.ia(a,">= 0",Gg,"padding"),a=new ub(a)):(z.l(a,ub,Gg,"padding"),0>a.left&&z.ia(a.left,">= 0",Gg,"padding:val.left"),0>a.right&&z.ia(a.right,">= 0",Gg,"padding:val.right"),0>a.top&&z.ia(a.top,">= 0",Gg,"padding:val.top"),0>a.bottom&&z.ia(a.bottom,">= 0",Gg,"padding:val.bottom"));var b=this.re;b.N(a)||(this.re=a=a.Y(),this.i("padding",b,a))});
function Eh(){0<arguments.length&&z.m("Layout constructor cannot take any arguments.");z.qc(this);this.ix=this.fa=q;this.Op=this.Qp=h;this.Xp=this.fn=s;this.hp=(new G(0,0)).freeze();this.px=h;this.Cx=q;this.Rp=h}z.ea("Layout",Eh);Eh.prototype.cloneProtected=function(a){a.Qp=this.Qp;a.Op=this.Op;this.Op||(a.fn=h);a.Xp=this.Xp;a.hp.assign(this.hp);a.Rp=this.Rp};Eh.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
Eh.prototype.toString=function(){var a=z.ph(Object.getPrototypeOf(this)),a=a+"(";this.group!==q&&(a+=" in "+this.group);this.h!==q&&(a+=" for "+this.h);return a+")"};z.g(Eh,"diagram",Eh.prototype.h);z.defineProperty(Eh,{h:"diagram"},w("fa"),function(a){this.fa!==a&&(a!==q&&z.l(a,y,Eh,"diagram"),this.fa=a)});z.g(Eh,"group",Eh.prototype.group);z.defineProperty(Eh,{group:"group"},w("ix"),function(a){this.ix!==a&&(a!==q&&z.l(a,oa,Eh,"group"),this.ix=a)});z.g(Eh,"isOngoing",Eh.prototype.oD);
z.defineProperty(Eh,{oD:"isOngoing"},w("Qp"),function(a){this.Qp!==a&&(z.j(a,"boolean",Eh,"isOngoing"),this.Qp=a)});z.g(Eh,"isInitial",Eh.prototype.mD);z.defineProperty(Eh,{mD:"isInitial"},w("Op"),function(a){z.j(a,"boolean",Eh,"isInitial");this.Op=a;a||(this.fn=h)});z.g(Eh,"isValidLayout",Eh.prototype.$e);z.defineProperty(Eh,{$e:"isValidLayout"},w("fn"),function(a){this.fn!==a&&(z.j(a,"boolean",Eh,"isValidLayout"),this.fn=a,a||(a=this.h,a!==q&&(a.Xs=h)))});
Eh.prototype.invalidateLayout=Eh.prototype.K=function(){if(this.fn){var a=this.h;if(a!==q&&!a.Aa.jb&&(this.oD&&a.vg||this.mD&&!a.vg))this.$e=s,a.oc(h)}};z.g(Eh,"isRealtime",Eh.prototype.fz);z.defineProperty(Eh,{fz:"isRealtime"},w("Rp"),function(a){this.Rp!==a&&(z.j(a,"boolean",Eh,"isRealtime"),this.Rp=a)});z.g(Eh,"isViewportSized",Eh.prototype.cs);z.defineProperty(Eh,{cs:"isViewportSized"},w("Xp"),function(a){this.Xp!==a&&(z.j(a,"boolean",Eh,"isViewportSized"),(this.Xp=a)&&this.K())});
z.g(Eh,"isRouting",Eh.prototype.bs);z.defineProperty(Eh,{bs:"isRouting"},w("px"),function(a){this.px!==a&&(z.j(a,"boolean",Eh,"isRouting"),this.px=a)});z.g(Eh,"network",Eh.prototype.network);z.defineProperty(Eh,{network:"network"},w("Cx"),function(a){var b=this.Cx;b!==a&&(a!==q&&z.l(a,Tm,Eh,"network"),b!==q&&Um(b,q),this.Cx=a,a!==q&&Um(a,this))});Eh.prototype.createNetwork=function(){var a=new Tm;Um(a,this);return a};
Eh.prototype.makeNetwork=function(a){var b=this.createNetwork();a instanceof y?(b.xr(a.Gj,h),b.xr(a.links,h)):a instanceof oa?b.xr(a.Bc):b.xr(a.k);return b};Eh.prototype.updateParts=function(){var a=this.h;if(a===q&&this.network!==q)for(var b=this.network.vertexes.k;b.next();){var c=b.value.Cc;if(c!==q&&(a=c.h,a!==q))break}this.$e=h;a!==q&&a.pc("Layout");this.commitLayout();a!==q&&a.we("Layout")};Eh.prototype.commitLayout=aa();
Eh.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new va(B);a===this.h?(Vm(this,b,a.Gj,h,this.sz,h,s,h),Vm(this,b,a.mm,h,this.sz,h,s,h)):a===this.group?Vm(this,b,a.Bc,s,this.sz,h,s,h):b.Re(a.k);var c=b.count;if(0<c){a=this.h;a!==q&&a.pc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.nd.x,e=d,g=this.nd.y,k=0,l=0,b=b.k;b.next();){var m=b.value;m.pi();var n=m.Ga,p=n.width,n=n.height;m.moveTo(e,g);
delete m.qB;e+=Math.max(p,50)+20;l=Math.max(l,Math.max(n,50));k>=c-1?(k=0,e=d,g+=l+20,l=0):k++}a!==q&&a.we("Layout")}this.$e=h};Eh.prototype.sz=function(a){return!a.location.W()||a instanceof oa&&a.qB?h:s};function Vm(a,b,c,d,e,g,k,l){for(c=c.k;c.next();){var m=c.value;if(!d||m.so)if(!e||e(m))m.canLayout()&&(g&&m instanceof D?m.vi||(m instanceof oa&&m.Pb===q?Vm(a,b,m.Bc,s,e,g,k,l):b.add(m)):k&&m instanceof E?b.add(m):l&&(m.Td()&&!(m instanceof D))&&b.add(m))}}z.g(Eh,"arrangementOrigin",Eh.prototype.nd);
z.defineProperty(Eh,{nd:"arrangementOrigin"},w("hp"),function(a){this.hp.N(a)||(z.l(a,G,Eh,"arrangementOrigin"),this.hp.assign(a),this.K())});function Wm(a,b){var c=a.group;if(c!==q){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==q?(d=e.nb($b),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Tm(){z.qc(this);this.zd=q;this.clear()}z.ea("LayoutNetwork",Tm);
Tm.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.k;a.next();){var b=a.value;b.clear();b.network=q}if(this.edges)for(a=this.edges.k;a.next();)b=a.value,b.clear(),b.network=q;this.vertexes=new va(Xm);this.edges=new va(Ym);this.vz=new ta(D,Xm);this.iz=new ta(E,Ym)};Tm.prototype.toString=function(){return"LayoutNetwork"+(this.Pb!==q?"("+this.Pb.toString()+")":"")};z.A(Tm,{Pb:"layout"},w("zd"));function Um(a,b){x&&b!==q&&z.l(b,Eh,Tm,"setLayout");a.zd=b}Tm.prototype.createVertex=function(){return new Xm};
Tm.prototype.createEdge=function(){return new Ym};
Tm.prototype.addParts=Tm.prototype.xr=function(a,b){if(a!==q){b===f&&(b=s);z.j(b,"boolean",Tm,"addParts:toplevelonly");for(var c=a.k;c.next();){var d=c.value;if(d instanceof D&&(!b||d.so)&&d.canLayout()&&!d.vi)if(d instanceof oa&&d.Pb===q)this.xr(d.Bc,s);else if(this.$l(d)===q){var e=this.createVertex();e.Cc=d;this.Dk(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof E&&(!b||d.so)&&d.canLayout()&&this.cv(d)===q){var g=d.da,e=d.ja;g!==e&&(g=this.dv(g),e=this.dv(e),g!==q&&e!==q&&this.jm(g,e,d))}}};
Tm.prototype.findGroupVertex=Tm.prototype.dv=function(a){if(a===q)return q;a=Ml(a);if(a===q)return q;var b=this.$l(a);if(b!==q)return b;a=a.bb;return a!==q&&(b=this.$l(a),b!==q)?b:q};Tm.prototype.addVertex=Tm.prototype.Dk=function(a){if(a!==q){x&&z.l(a,Xm,Tm,"addVertex:vertex");this.vertexes.add(a);var b=a.Cc;b!==q&&this.vz.add(b,a);a.network=this}};
Tm.prototype.addNode=Tm.prototype.Kn=function(a){if(a===q)return q;x&&z.l(a,D,Tm,"addNode:node");var b=this.$l(a);b===q&&(b=this.createVertex(),b.Cc=a,this.Dk(b));return b};Tm.prototype.deleteVertex=Tm.prototype.BC=function(a){if(a!==q&&(x&&z.l(a,Xm,Tm,"deleteVertex:vertex"),Zm(this,a))){for(var b=a.Ie,c=b.count-1;0<=c;c--){var d=b.na(c);this.Zn(d)}b=a.ye;for(c=b.count-1;0<=c;c--)d=b.na(c),this.Zn(d)}};
function Zm(a,b){if(b===q)return s;var c=a.vertexes.remove(b);c&&(a.vz.remove(b.Cc),b.network=q);return c}Tm.prototype.deleteNode=Tm.prototype.BI=function(a){a!==q&&(x&&z.l(a,D,Tm,"deleteNode:node"),a=this.$l(a),a!==q&&this.BC(a))};Tm.prototype.findVertex=Tm.prototype.$l=function(a){if(a===q)return q;x&&z.l(a,D,Tm,"findVertex:node");return this.vz.Ba(a)};
Tm.prototype.addEdge=Tm.prototype.Jn=function(a){if(a!==q){x&&z.l(a,Ym,Tm,"addEdge:edge");this.edges.add(a);var b=a.link;b!==q&&this.cv(b)===q&&this.iz.add(b,a);b=a.toVertex;b!==q&&b.ZB(a);b=a.fromVertex;b!==q&&b.VB(a);a.network=this}};
Tm.prototype.addLink=Tm.prototype.qI=function(a){if(a===q)return q;x&&z.l(a,E,Tm,"addLink:link");var b=a.da,c=a.ja,d=this.cv(a);d===q?(d=this.createEdge(),d.link=a,b!==q&&(d.fromVertex=this.Kn(b)),c!==q&&(d.toVertex=this.Kn(c)),this.Jn(d)):(d.fromVertex=b!==q?this.Kn(b):q,d.toVertex=c!==q?this.Kn(c):q);return d};Tm.prototype.deleteEdge=Tm.prototype.Zn=function(a){if(a!==q){x&&z.l(a,Ym,Tm,"deleteEdge:edge");var b=a.toVertex;b!==q&&b.AC(a);b=a.fromVertex;b!==q&&b.zC(a);$m(this,a)}};
function $m(a,b){b!==q&&a.edges.remove(b)&&(a.iz.remove(b.link),b.network=q)}Tm.prototype.deleteLink=Tm.prototype.AI=function(a){a!==q&&(x&&z.l(a,E,Tm,"deleteLink:link"),a=this.cv(a),a!==q&&this.Zn(a))};Tm.prototype.findEdge=Tm.prototype.cv=function(a){if(a===q)return q;x&&z.l(a,E,Tm,"findEdge:link");return this.iz.Ba(a)};
Tm.prototype.linkVertexes=Tm.prototype.jm=function(a,b,c){if(a===q||b===q)return q;x&&(z.l(a,Xm,Tm,"linkVertexes:fromVertex"),z.l(b,Xm,Tm,"linkVertexes:toVertex"),c!==q&&z.l(c,E,Tm,"linkVertexes:link"));if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.Jn(d);return d}return q};
Tm.prototype.reverseEdge=Tm.prototype.Gv=function(a){if(a!==q){x&&z.l(a,Ym,Tm,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;b===q||c===q||(b.zC(a),c.AC(a),a.Gv(),b.ZB(a),c.VB(a))}};Tm.prototype.deleteSelfEdges=Tm.prototype.$u=function(){for(var a=z.zb(),b=this.edges.k;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Zn(a[c]);z.Da(a)};
Tm.prototype.deleteArtificialVertexes=Tm.prototype.AG=function(){for(var a=z.zb(),b=this.vertexes.k;b.next();){var c=b.value;c.Cc===q&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.BC(a[b]);c=z.zb();for(b=this.edges.k;b.next();){var d=b.value;d.link===q&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.Zn(c[b]);z.Da(a);z.Da(c)};function an(a){for(var b=z.zb(),c=a.edges.k;c.next();){var d=c.value;(d.fromVertex===q||d.toVertex===q)&&b.push(d)}c=b.length;for(d=0;d<c;d++)a.Zn(b[d]);z.Da(b)}
Tm.prototype.splitIntoSubNetworks=Tm.prototype.XH=function(){this.AG();an(this);this.$u();for(var a=new J(Tm),b=h;b;)for(var b=s,c=this.vertexes.k;c.next();){var d=c.value;if(0<d.Ie.count||0<d.ye.count){b=this.Pb.createNetwork();a.add(b);bn(this,b,d);b=h;break}}a.sort(function(a,b){return a===q||b===q||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function bn(a,b,c){if(c!==q&&c.network!==b){Zm(a,c);b.Dk(c);for(var d=c.hc;d.next();){var e=d.value;e.network!==b&&($m(a,e),b.Jn(e),bn(a,b,e.fromVertex))}for(d=c.ac;d.next();)e=d.value,e.network!==b&&($m(a,e),b.Jn(e),bn(a,b,e.toVertex))}}Tm.prototype.getParts=Tm.prototype.findAllParts=Tm.prototype.GI=function(){for(var a=new va(B),b=this.vertexes.k;b.next();)a.add(b.value.Cc);for(b=this.edges.k;b.next();)a.add(b.value.link);return a};
function Xm(){z.qc(this);this.network=q;this.V=(new H(0,0,10,10)).freeze();this.P=(new G(5,5)).freeze();this.clear()}z.ea("LayoutVertex",Xm);Xm.prototype.clear=function(){this.ed=q;this.Ie=new J(Ym);this.ye=new J(Ym)};Xm.prototype.toString=function(){return"LayoutVertex#"+z.fc(this)+(this.Cc!==q?"("+this.Cc.toString()+")":"")};z.g(Xm,"node",Xm.prototype.Cc);
z.defineProperty(Xm,{Cc:"node"},w("ed"),function(a){if(this.ed!==a){x&&a!==q&&z.l(a,D,Xm,"node");this.ed=a;a.pi();var b=a.ya,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.V.q(c,d,e,b);c=a.Qb;c!==a&&!(a instanceof oa)?(a=c.ya,this.P.q(a.x+a.width/2,a.y+a.height/2)):this.P.q(e/2,b/2)}});z.g(Xm,"bounds",Xm.prototype.Nb);z.defineProperty(Xm,{Nb:"bounds"},w("V"),function(a){this.V.N(a)||(x&&z.l(a,H,Xm,"bounds"),this.V.assign(a))});z.g(Xm,"focus",Xm.prototype.focus);
z.defineProperty(Xm,{focus:"focus"},w("P"),function(a){this.P.N(a)||(x&&z.l(a,G,Xm,"focus"),this.P.assign(a))});z.g(Xm,"centerX",Xm.prototype.Ca);z.defineProperty(Xm,{Ca:"centerX"},function(){return this.V.x+this.P.x},function(a){var b=this.V;b.x+this.P.x!==a&&(x&&z.p(a,Xm,"centerX"),b.Ua(),b.x=a-this.P.x,b.freeze())});z.g(Xm,"centerY",Xm.prototype.Ka);
z.defineProperty(Xm,{Ka:"centerY"},function(){return this.V.y+this.P.y},function(a){var b=this.V;b.y+this.P.y!==a&&(x&&z.p(a,Xm,"centerY"),b.Ua(),b.y=a-this.P.y,b.freeze())});z.g(Xm,"focusX",Xm.prototype.TG);z.defineProperty(Xm,{TG:"focusX"},function(){return this.P.x},function(a){var b=this.P;b.x!==a&&(b.Ua(),b.x=a,b.freeze())});z.g(Xm,"focusY",Xm.prototype.UG);z.defineProperty(Xm,{UG:"focusY"},function(){return this.P.y},function(a){var b=this.P;b.y!==a&&(b.Ua(),b.y=a,b.freeze())});z.g(Xm,"x",Xm.prototype.x);
z.defineProperty(Xm,{x:"x"},function(){return this.V.x},function(a){var b=this.V;b.x!==a&&(b.Ua(),b.x=a,b.freeze())});z.g(Xm,"y",Xm.prototype.y);z.defineProperty(Xm,{y:"y"},function(){return this.V.y},function(a){var b=this.V;b.y!==a&&(b.Ua(),b.y=a,b.freeze())});z.g(Xm,"width",Xm.prototype.width);z.defineProperty(Xm,{width:"width"},function(){return this.V.width},function(a){var b=this.V;b.width!==a&&(b.Ua(),b.width=a,b.freeze())});z.g(Xm,"height",Xm.prototype.height);
z.defineProperty(Xm,{height:"height"},function(){return this.V.height},function(a){var b=this.V;b.height!==a&&(b.Ua(),b.height=a,b.freeze())});Xm.prototype.commit=function(){var a=this.Cc;if(a!==q){var b=this.Nb;a.moveTo(b.x,b.y)}};Xm.prototype.addSourceEdge=Xm.prototype.ZB=function(a){a!==q&&(x&&z.l(a,Ym,Xm,"addSourceEdge:edge"),this.Ie.contains(a)||this.Ie.add(a))};Xm.prototype.deleteSourceEdge=Xm.prototype.AC=function(a){a!==q&&(x&&z.l(a,Ym,Xm,"deleteSourceEdge:edge"),this.Ie.remove(a))};
Xm.prototype.addDestinationEdge=Xm.prototype.VB=function(a){a!==q&&(x&&z.l(a,Ym,Xm,"addDestinationEdge:edge"),this.ye.contains(a)||this.ye.add(a))};Xm.prototype.deleteDestinationEdge=Xm.prototype.zC=function(a){a!==q&&(x&&z.l(a,Ym,Xm,"deleteDestinationEdge:edge"),this.ye.remove(a))};z.A(Xm,{WH:"sourceVertexes"},function(){for(var a=new va(Xm),b=this.hc;b.next();){var c=b.value.fromVertex;c!==q&&!a.contains(c)&&a.add(c)}return a.k});
z.A(Xm,{BG:"destinationVertexes"},function(){for(var a=new va(Xm),b=this.ac;b.next();){var c=b.value.toVertex;c!==q&&!a.contains(c)&&a.add(c)}return a.k});z.A(Xm,{vertexes:"vertexes"},function(){for(var a=new va(Xm),b=this.hc;b.next();){var c=b.value,c=c.fromVertex;c!==q&&!a.contains(c)&&a.add(c)}for(b=this.ac;b.next();)c=b.value,c=c.toVertex,c!==q&&!a.contains(c)&&a.add(c);return a.k});z.A(Xm,{hc:"sourceEdges"},function(){return this.Ie.k});z.A(Xm,{ac:"destinationEdges"},function(){return this.ye.k});
z.A(Xm,{edges:"edges"},function(){for(var a=new J(Ym),b=this.hc;b.next();){var c=b.value;a.add(c)}for(b=this.ac;b.next();)c=b.value,a.add(c);return a.k});z.A(Xm,{PG:"edgesCount"},function(){return this.Ie.count+this.ye.count});var cn;Xm.standardComparer=cn=function(a,b){x&&z.l(a,Xm,Xm,"standardComparer:m");x&&z.l(b,Xm,Xm,"standardComparer:n");var c=a.ed,d=b.ed;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==q?-1:0};
Xm.smartComparer=function(a,b){x&&z.l(a,Xm,Xm,"smartComparer:m");x&&z.l(b,Xm,Xm,"smartComparer:n");if(a!==q){if(b!==q){var c=a.ed,d=b.ed;if(c!==q){if(d!==q){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),k=parseFloat(d[e]);if(isNaN(g))if(isNaN(k)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(k))return-1;if(0!==g-k)return g-k}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==q?-1:0}return 1}return b!==q?-1:0};function Ym(){z.qc(this);this.network=q;this.clear()}z.ea("LayoutEdge",Ym);Ym.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=q};Ym.prototype.toString=function(){return"LayoutEdge#"+z.fc(this)+(this.link!==q?"("+this.link.toString()+")":"")};
Ym.prototype.Gv=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};Ym.prototype.commit=aa();Ym.prototype.getOtherVertex=Ym.prototype.YG=function(a){x&&z.l(a,Xm,Ym,"getOtherVertex:v");return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:q};
function ej(){0<arguments.length&&z.m("GridLayout constructor cannot take any arguments.");Eh.call(this);this.cs=h;this.tr=this.ur=NaN;this.Ei=(new qa(NaN,NaN)).freeze();this.hh=(new qa(10,10)).freeze();this.Yd=Bk;this.ad=zk;this.gh=vk;this.Rg=dn}z.ea("GridLayout",ej);z.Pa(ej,Eh);ej.prototype.cloneProtected=function(a){Eh.prototype.cloneProtected.call(this,a);a.ur=this.ur;a.tr=this.tr;a.Ei.assign(this.Ei);a.hh.assign(this.hh);a.Yd=this.Yd;a.ad=this.ad;a.gh=this.gh;a.Rg=this.Rg};
ej.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=this.h;b===q&&z.m("The diagram for this layout is not set.");this.nd=Wm(this,this.nd);var c=new va(B);a===this.h?(Vm(this,c,a.Gj,h,q,h,s,h),Vm(this,c,a.links,h,q,h,s,h),Vm(this,c,a.mm,h,q,h,s,h)):a===this.group?Vm(this,c,a.Bc,s,q,h,s,h):c.Re(a.k);for(a=c.copy().k;a.next();){var d=a.value;if(d instanceof E&&(d.da!==q||d.ja!==q))c.remove(d);else if(d.pi(),
d instanceof oa)for(d=d.Bc;d.next();)c.remove(d.value)}c=c.Je();if(0!==c.length){switch(this.sorting){case yk:c.reverse();break;case vk:c.sort(this.comparer);break;case wk:c.sort(this.comparer),c.reverse()}d=this.$E;isNaN(d)&&(d=0);a=this.hA;a=isNaN(a)?Math.max(this.h.gb.width-b.padding.left-b.padding.right,0):Math.max(this.hA,0);0>=d&&0>=a&&(d=1);var e=this.spacing.width;isFinite(e)||(e=0);var g=this.spacing.height;isFinite(g)||(g=0);b.pc("Layout");switch(this.alignment){case Ck:var k=Math.max(this.Hk.width,
1);if(!isFinite(k))for(var l=k=0;l<c.length;l++)var m=c[l],n=m.Ga,k=Math.max(k,n.width);var k=Math.max(k+e,1),p=Math.max(this.Hk.height,1);if(!isFinite(p))for(l=p=0;l<c.length;l++)m=c[l],n=m.Ga,p=Math.max(p,n.height);for(var p=Math.max(p+g,1),r=this.ue,t=this.nd.x,u=t,v=this.nd.y,A=0,C=0,l=0;l<c.length;l++){var m=c[l],n=m.Ga,K=Math.ceil((n.width+e)/k)*k,I=Math.ceil((n.height+g)/p)*p,R;switch(r){case Ak:R=Math.abs(u-n.width)+t;break;default:R=u+n.width-t}if(0<d&&A>d-1||0<a&&0<A&&R>a)A=0,u=t,v+=C,C=
0;C=Math.max(C,I);switch(r){case Ak:n=-n.width;break;default:n=0}m.moveTo(u+n,v);switch(r){case Ak:u-=K;break;default:u+=K}A++}break;case Bk:k=Math.max(this.Hk.width,1);l=C=A=0;m=z.O();for(p=0;p<c.length;p++)r=c[p],t=r.Ga,u=Nl(r,r.Qb,r.af,m),A=Math.max(A,u.x),C=Math.max(C,t.width-u.x),l=Math.max(l,u.y);v=this.ue;switch(v){case Ak:A+=e;break;default:C+=e}var k=isFinite(k)?Math.max(k+e,1):Math.max(A+C,1),M=A=this.nd.x,C=this.nd.y,n=K=0,I=Math.max(this.Hk.height,1);R=l=0;for(var S=h,Z=z.O(),p=0;p<c.length;p++){r=
c[p];t=r.Ga;u=Nl(r,r.Qb,r.af,m);if(0<K)switch(v){case Ak:M=Math.floor((M-A-(t.width-u.x))/k)*k+A;break;default:M=Math.ceil((M-A+u.x)/k)*k+A}else switch(v){case Ak:n=M+u.x+t.width;break;default:n=M-u.x}var X;switch(v){case Ak:X=-(M+u.x)+A+n;break;default:X=M+t.width-u.x-A-n}if(0<d&&K>d-1||0<a&&0<K&&X>a){for(M=0;M<K&&p!==K;M++){X=c[p-K+M];var ea=Nl(X,X.Qb,X.af,Z);X.moveTo(X.position.x,X.position.y+l-ea.y)}R+=g;C=S?C+R:C+(R+l);K=R=l=0;M=A;S=s}l=Math.max(l,u.y);R=Math.max(R,t.height-u.y);isFinite(I)&&
(R=Math.max(R,Math.max(t.height,I)-u.y));S?r.moveTo(M-u.x,C-u.y):r.moveTo(M-u.x,C);switch(v){case Ak:M-=u.x+e;break;default:M+=t.width-u.x+e}K++}for(M=0;M<K&&p!==K;M++)X=c[p-K+M],ea=Nl(X,X.Qb,X.af,m),X.moveTo(X.position.x,X.position.y+l-ea.y);z.B(m);z.B(Z)}b.we("Layout");this.$e=h}};z.g(ej,"wrappingWidth",ej.prototype.hA);z.defineProperty(ej,{hA:"wrappingWidth"},w("ur"),function(a){if(this.ur!==a&&(0<a||isNaN(a)))this.ur=a,this.cs=isNaN(a),this.K()});z.g(ej,"wrappingColumn",ej.prototype.$E);
z.defineProperty(ej,{$E:"wrappingColumn"},w("tr"),function(a){if(this.tr!==a&&(0<a||isNaN(a)))this.tr=a,this.K()});z.g(ej,"cellSize",ej.prototype.Hk);z.defineProperty(ej,{Hk:"cellSize"},w("Ei"),function(a){this.Ei.N(a)||(this.Ei.assign(a),this.K())});z.g(ej,"spacing",ej.prototype.spacing);z.defineProperty(ej,{spacing:"spacing"},w("hh"),function(a){this.hh.N(a)||(this.hh.assign(a),this.K())});z.g(ej,"alignment",ej.prototype.alignment);
z.defineProperty(ej,{alignment:"alignment"},w("Yd"),function(a){if(this.Yd!==a&&(x&&z.l(a,pa,ej,"alignment"),a===Bk||a===Ck))this.Yd=a,this.K()});z.g(ej,"arrangement",ej.prototype.ue);z.defineProperty(ej,{ue:"arrangement"},w("ad"),function(a){if(this.ad!==a&&(x&&z.l(a,pa,ej,"arrangement"),a===zk||a===Ak))this.ad=a,this.K()});z.g(ej,"sorting",ej.prototype.sorting);
z.defineProperty(ej,{sorting:"sorting"},w("gh"),function(a){if(this.gh!==a&&(x&&z.l(a,pa,ej,"sorting"),a===xk||a===yk||a===vk||a===wk))this.gh=a,this.K()});z.g(ej,"comparer",ej.prototype.comparer);z.defineProperty(ej,{comparer:"comparer"},w("Rg"),function(a){this.Rg!==a&&(x&&z.j(a,"function",ej,"comparer"),this.Rg=a,this.K())});var dn;ej.standardComparer=dn=function(a,b){x&&z.l(a,B,ej,"standardComparer:a");x&&z.l(b,B,ej,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
ej.smartComparer=function(a,b){x&&z.l(a,B,ej,"standardComparer:a");x&&z.l(b,B,ej,"standardComparer:b");if(a!==q){if(b!==q){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),k=parseFloat(d[e]);if(isNaN(g))if(isNaN(k)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(k))return-1;
if(0!==g-k)return g-k}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==q?-1:0};var Ck;ej.Position=Ck=z.w(ej,"Position",0);var Bk;ej.Location=Bk=z.w(ej,"Location",1);var zk;ej.LeftToRight=zk=z.w(ej,"LeftToRight",2);var Ak;ej.RightToLeft=Ak=z.w(ej,"RightToLeft",3);var xk;ej.Forward=xk=z.w(ej,"Forward",4);var yk;ej.Reverse=yk=z.w(ej,"Reverse",5);var vk;ej.Ascending=vk=z.w(ej,"Ascending",6);var wk;ej.Descending=wk=z.w(ej,"Descending",7);
function Dk(){0<arguments.length&&z.m("CircularLayout constructor cannot take any arguments.");Eh.call(this);this.Ww=this.Um=this.ld=0;this.zp=360;this.Vw=Pk;this.fk=0;this.TA=Pk;this.dt=this.Tf=this.OB=0;this.Du=new en;this.gt=this.Bl=0;this.uF=600;this.Gq=NaN;this.jp=1;this.ce=0;this.ee=360;this.ad=Pk;this.pa=Lk;this.gh=Ik;this.Rg=cn;this.hh=6;this.Aq=Sk}z.ea("CircularLayout",Dk);z.Pa(Dk,Eh);
Dk.prototype.cloneProtected=function(a){Eh.prototype.cloneProtected.call(this,a);a.Gq=this.Gq;a.jp=this.jp;a.ce=this.ce;a.ee=this.ee;a.ad=this.ad;a.pa=this.pa;a.gh=this.gh;a.Rg=this.Rg;a.hh=this.hh;a.Aq=this.Aq};Dk.prototype.createNetwork=function(){var a=new fn;Um(a,this);return a};
Dk.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.sb(),a.Ca=0,a.Ka=0);else{var b=new J(gn);b.Re(a.k);a=new J(gn);var c=new J(gn),b=this.sort(b);a=new J(gn);var c=new J(gn),d=this.Vw,e=this.TA,g=this.ld,k=this.Um,l=this.Ww,m=this.zp,n=this.fk,p=this.OB,r=this.Tf,t=this.dt,d=this.ue,e=this.ps,g=this.RD;
if(!isFinite(g)||0>=g)g=NaN;k=this.eC;if(!isFinite(k)||0>=k)k=1;l=this.hg;isFinite(l)||(l=0);m=this.Ah;if(!isFinite(m)||360<m||1>m)m=360;n=this.spacing;isFinite(n)||(n=NaN);d===Qk&&e===Rk?d=Pk:d===Qk&&e!==Rk&&(e=Rk,d=this.ue);if((this.direction===Jk||this.direction===Kk)&&this.sorting!==Ik){for(var u=0;!(u>=b.length);u+=2){a.add(b.na(u));if(u+1>=b.length)break;c.add(b.na(u+1))}this.direction===Jk?(this.ue===Qk&&a.reverse(),b=new J(gn),b.Re(a),b.Re(c)):(this.ue===Qk&&c.reverse(),b=new J(gn),b.Re(c),
b.Re(a))}for(var v=b.length,A=p=0,u=0;u<b.length;u++){var r=l+m*A*(this.direction===Lk?1:-1)/v,C=b.na(u).diameter;isNaN(C)&&(C=hn(b.na(u),r));if(360>m&&(0===u||u===b.length-1))C/=2;p+=C;A++}if(isNaN(g)||d===Qk){isNaN(n)&&(n=6);if(d!==Pk&&d!==Qk){C=-Infinity;for(u=0;u<v;u++){var t=b.na(u),K=b.na(u===v-1?0:u+1);isNaN(t.diameter)&&hn(t,0);isNaN(K.diameter)&&hn(K,0);C=Math.max(C,(t.diameter+K.diameter)/2)}t=C+n;d===Nk?(r=2*Math.PI/v,g=(C+n)/r):g=jn(this,t*(360<=m?v:v-1),k,l*Math.PI/180,m*Math.PI/180)}else g=
jn(this,p+(360<=m?v:v-1)*(d!==Qk?n:1.6*n),k,l*Math.PI/180,m*Math.PI/180);r=g*k}else if(r=g*k,A=kn(this,g,r,l*Math.PI/180,m*Math.PI/180),isNaN(n)){if(d===Pk||d===Qk)n=(A-p)/(360<=m?v:v-1)}else if(d===Pk||d===Qk)u=(A-p)/(360<=m?v:v-1),u<n?(g=jn(this,p+n*(360<=m?v:v-1),k,l*Math.PI/180,m*Math.PI/180),r=g*k):n=u;else{C=-Infinity;for(u=0;u<v;u++)t=b.na(u),K=b.na(u===v-1?0:u+1),isNaN(t.diameter)&&hn(t,0),isNaN(K.diameter)&&hn(K,0),C=Math.max(C,(t.diameter+K.diameter)/2);t=C+n;u=jn(this,t*(360<=m?v:v-1),
k,l*Math.PI/180,m*Math.PI/180);u>g?(g=u,r=g*k):t=A/(360<=m?v:v-1)}this.Vw=d;this.TA=e;this.ld=g;this.Um=k;this.Ww=l;this.zp=m;this.fk=n;this.OB=p;this.Tf=r;this.dt=t;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.Vw;e=this.ld;k=this.Ww;l=this.zp;m=this.fk;n=this.Tf;p=this.dt;if((this.direction===Jk||this.direction===Kk)&&d===Qk)ln(this,b,l,k-l/2,Lk);else if(this.direction===Jk||this.direction===Kk){g=0;switch(d){case Ok:g=180*mn(this,e,n,k,p)/Math.PI;break;case Pk:p=b=0;g=a.sb();g!==q&&(b=hn(g,Math.PI/2));
g=c.sb();g!==q&&(p=hn(g,Math.PI/2));g=180*mn(this,e,n,k,m+(b+p)/2)/Math.PI;break;case Nk:g=l/b.length}if(this.direction===Jk){switch(d){case Ok:nn(this,a,k,Mk);break;case Pk:on(this,a,k,Mk);break;case Nk:pn(this,a,l/2,k,Mk)}switch(d){case Ok:nn(this,c,k+g,Lk);break;case Pk:on(this,c,k+g,Lk);break;case Nk:pn(this,c,l/2,k+g,Lk)}}else{switch(d){case Ok:nn(this,c,k,Mk);break;case Pk:on(this,c,k,Mk);break;case Nk:pn(this,c,l/2,k,Mk)}switch(d){case Ok:nn(this,a,k+g,Lk);break;case Pk:on(this,a,k+g,Lk);break;
case Nk:pn(this,a,l/2,k+g,Lk)}}}else switch(d){case Ok:nn(this,b,k,this.direction);break;case Pk:on(this,b,k,this.direction);break;case Nk:pn(this,b,l,k,this.direction);break;case Qk:ln(this,b,l,k,this.direction)}}this.updateParts();this.network=q;this.$e=h};
function pn(a,b,c,d,e){var g=a.zp,k=a.ld;a=a.Tf;d=d*Math.PI/180;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=d+(e===Lk?m*c/(360<=g?l:l-1):-(m*c)/l),p=b.na(m),r=k*Math.tan(n)/a,r=Math.sqrt((k*k+a*a*r*r)/(1+r*r));p.Ca=r*Math.cos(n);p.Ka=r*Math.sin(n);p.actualAngle=180*n/Math.PI}}
function on(a,b,c,d){var e=a.ld,g=a.Tf,k=a.fk;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=b.na(m),p=b.na(m===l-1?0:m+1),r=g*Math.sin(c);n.Ca=e*Math.cos(c);n.Ka=r;n.actualAngle=180*c/Math.PI;isNaN(n.diameter)&&hn(n,0);isNaN(p.diameter)&&hn(p,0);n=mn(a,e,g,d===Lk?c:-c,(n.diameter+p.diameter)/2+k);c+=d===Lk?n:-n}}
function nn(a,b,c,d){var e=a.ld,g=a.Tf,k=a.dt;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=b.na(m);n.Ca=e*Math.cos(c);n.Ka=g*Math.sin(c);n.actualAngle=180*c/Math.PI;n=mn(a,e,g,d===Lk?c:-c,k);c+=d===Lk?n:-n}}function ln(a,b,c,d,e){var g=a.gt,g=a.zp;a.Bl=0;a.Du=new en;if(360>c){for(g=d+(e===Lk?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.gt=g;qn(a,b,c,d,e)}else rn(a,b,c,d,e);a.Du.commit(b)}
function rn(a,b,c,d,e){var g=a.ld,k=a.Tf,l=a.fk,m=a.Um,n=g*Math.cos(d*Math.PI/180),p=k*Math.sin(d*Math.PI/180),r=b.Je();if(3===r.length)r[0].Ca=g*Math.cos(0),r[0].Ka=k*Math.sin(0),r[1].Ca=r[0].Ca-r[0].width/2-r[1].width/2-l,r[1].y=r[0].y,r[2].Ca=(r[0].Ca+r[1].Ca)/2,r[2].y=r[0].y-r[2].height-l;else if(4===r.length)r[0].Ca=g*Math.cos(0),r[0].Ka=k*Math.sin(0),r[2].Ca=-r[0].Ca,r[2].Ka=r[0].Ka,r[1].Ca=0,r[1].y=Math.min(r[0].y,r[2].y)-r[1].height-l,r[3].Ca=0,r[3].y=Math.max(r[0].y+r[0].height+l,r[2].y+
r[2].height+l);else{for(g=0;g<r.length;g++){r[g].Ca=n;r[g].Ka=p;if(g>=r.length-1)break;k=sn(a,n,p,r,g,e);k[0]||(k=tn(a,n,p,r,g,e));n=k[1];p=k[2]}a.Bl++;if(!(23<a.Bl)){var n=r[0].Ca,p=r[0].Ka,g=r[r.length-1].Ca,k=r[r.length-1].Ka,t=Math.abs(n-g)-((r[0].width+r[r.length-1].width)/2+l),u=Math.abs(p-k)-((r[0].height+r[r.length-1].height)/2+l),l=0;1>Math.abs(u)?Math.abs(n-g)<(r[0].width+r[r.length-1].width)/2&&(l=0):l=0<u?u:1>Math.abs(t)?0:t;t=s;t=Math.abs(g)>Math.abs(k)?0<g!==p>k:0<k!==n<g;if(t=e===Lk?
t:!t)l=-Math.abs(l),l=Math.min(l,-r[r.length-1].width),l=Math.min(l,-r[r.length-1].height);n=a.Du;if(0<l&&0>n.jo||Math.abs(l)<Math.abs(n.jo)&&!(0>l&&0<n.jo)){n.jo=l;n.zm=[];n.Wo=[];for(p=0;p<r.length;p++)n.zm[p]=r[p].Nb.x,n.Wo[p]=r[p].Nb.y}1<Math.abs(l)&&(a.ld=8>a.Bl?a.ld-l/(2*Math.PI):5>r.length&&10<l?a.ld/2:a.ld-(0<l?1.7:-2.3),a.Tf=a.ld*m,rn(a,b,c,d,e))}}}
function qn(a,b,c,d,e){for(var g=a.ld,k=a.Tf,l=a.Um,m=g*Math.cos(d*Math.PI/180),n=k*Math.sin(d*Math.PI/180),p=b.Je(),r=0;r<p.length;r++){p[r].Ca=m;p[r].Ka=n;if(r>=p.length-1)break;var t=sn(a,m,n,p,r,e);t[0]||(t=tn(a,m,n,p,r,e));m=t[1];n=t[2]}a.Bl++;if(!(23<a.Bl)){m=Math.atan2(n,m);m=e===Lk?a.gt-m:m-a.gt;m=Math.abs(m)<Math.abs(m-2*Math.PI)?m:m-2*Math.PI;g=m*(g+k)/2;k=a.Du;if(Math.abs(g)<Math.abs(k.jo)){k.jo=g;k.zm=[];k.Wo=[];for(m=0;m<p.length;m++)k.zm[m]=p[m].Nb.x,k.Wo[m]=p[m].Nb.y}1<Math.abs(g)&&
(a.ld=8>a.Bl?a.ld-g/(2*Math.PI):a.ld-(0<g?1.7:-2.3),a.Tf=a.ld*l,qn(a,b,c,d,e))}}function sn(a,b,c,d,e,g){var k=a.ld,l=a.Tf,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.fk;var p=s;if(0<=c!==(g===Lk)){if(m=b+a,m>k){m=b-a;if(m<-k)return b=[s],b[1]=m,b[2]=n,b;p=h}}else if(m=b-a,m<-k){m=b+a;if(m>k)return b=[s],b[1]=m,b[2]=n,b;p=h}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);b=Math.abs(c-n)>(d[e].height+d[e+1].height)/2?[s]:[h];b[1]=m;b[2]=n;return b}
function tn(a,b,c,d,e,g){var k=a.ld,l=a.Tf,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.fk;var p=s;if(0<=b!==(g===Lk)){if(n=c-a,n<-l){n=c+a;if(n>l)return b=[s],b[1]=m,b[2]=n,b;p=h}}else if(n=c+a,n>l){n=c-a;if(n<-l)return b=[s],b[1]=m,b[2]=n,b;p=h}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==p&&(m=-m);b=Math.abs(b-m)>(d[e].width+d[e+1].width)/2?[s]:[h];b[1]=m;b[2]=n;return b}function en(){this.jo=-Infinity;this.Wo=this.zm=q}
en.prototype.commit=function(a){if(!(this.zm===q||this.Wo===q))for(var b=0;b<this.zm.length;b++){var c=a.na(b);c.x=this.zm[b];c.y=this.Wo[b]}};Dk.prototype.commitLayout=function(){this.commitNodes();this.bs&&this.commitLinks()};Dk.prototype.commitNodes=function(){for(var a=this.BF,b=this.network.vertexes.k,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()};Dk.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};
function kn(a,b,c,d,e){var g=a.uF;if(0.001>Math.abs(a.Um-1))return d!==f&&e!==f?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;var k=0,l;l=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var m=0;m<=g;m++)var n=Math.sin(d!==f&&e!==f?d+m*e/g:m*Math.PI/(2*g)),k=k+Math.sqrt(1-a*a*n*n)*l;return d!==f&&e!==f?(b>c?b:c)*k:4*(b>c?b:c)*k}function jn(a,b,c,d,e){a=d!==f&&e!==f?kn(a,1,c,d,e):kn(a,1,c);return b/a}
function mn(a,b,c,d,e){if(0.001>Math.abs(a.Um-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,k=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var l=0;;l++){var m=Math.sin(d+l*a),k=k+(b>c?b:c)*Math.sqrt(1-g*g*m*m)*a;if(k>=e)return l*a}return 0}
Dk.prototype.sort=function(a){switch(this.sorting){case Gk:break;case Hk:a.reverse();break;case Ek:a.sort(this.comparer);break;case Fk:a.sort(this.comparer);a.reverse();break;case Ik:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new J(gn),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var k=0;k<a.length;k++){var l=a.na(k).PG;l>e&&(e=l,g=k)}else for(k=0;k<a.length;k++)l=b[k],l>e&&(e=l,g=k);d.add(a.na(g));b[g]=-1;g=a.na(g);e=g.hc;for(g=g.ac;e.next();)k=e.value,k=k.fromVertex,k=a.indexOf(k),0>
k||0<=b[k]&&b[k]++;for(;g.next();)k=g.value,k=k.toVertex,k=a.indexOf(k),0>k||0<=b[k]&&b[k]++}a=[];for(b=0;b<d.length;b++){l=d.na(b);a[b]=[];for(var c=l.ac,e=l.hc,m,n;c.next();)m=c.value,n=d.indexOf(m.toVertex),n!==b&&0>a[b].indexOf(n)&&a[b].push(n);for(;e.next();)m=e.value,n=d.indexOf(m.fromVertex),n!==b&&0>a[b].indexOf(n)&&a[b].push(n)}l=[];for(b=0;b<a.length;b++)l[b]=0;for(var c=[],p=[],r=[],e=[],g=new J(gn),k=b=0;b<a.length;b++){var t=a[b].length;if(1===t)e.push(b);else if(0===t)g.add(d.na(b));
else{if(0===k)c.push(b);else{for(var u=Infinity,v=Infinity,A=-1,C=[],t=0;t<c.length;t++)if(0>a[c[t]].indexOf(c[t===c.length-1?0:t+1]))C.push(t===c.length-1?0:t+1);if(0===C.length)for(t=0;t<c.length;t++)C.push(t);for(t=0;t<C.length;t++){var K=C[t],I;n=a[b];m=p;I=r;for(var R=l,M=K,S=c,Z=0,X=0;X<m.length;X++){var ea=R[m[X]],ia=R[I[X]],W=0,xa=0;ea<ia?(W=ea,xa=ia):(W=ia,xa=ea);if(W<M&&M<=xa)for(ea=0;ea<n.length;ea++)ia=n[ea],0>S.indexOf(ia)||W<R[ia]&&R[ia]<xa||(W===R[ia]||xa===R[ia])||Z++;else for(ea=
0;ea<n.length;ea++)ia=n[ea],0>S.indexOf(ia)||W<R[ia]&&R[ia]<xa&&!(W===R[ia]||xa===R[ia])&&Z++}I=Z;for(m=R=0;m<a[b].length;m++)n=c.indexOf(a[b][m]),0<=n&&(n=Math.abs(K-(n>=K?n+1:n)),R+=n<c.length+1-n?n:c.length+1-n);for(m=0;m<p.length;m++)n=l[p[m]],M=l[r[m]],n>=K&&n++,M>=K&&M++,n>M&&(S=M,M=n,n=S),M-n<(c.length+2)/2===(n<K&&K<=M)&&R++;if(I<u||I===u&&R<v)u=I,v=R,A=K}c.splice(A,0,b);for(t=0;t<c.length;t++)l[c[t]]=t;for(t=0;t<a[b].length;t++)u=a[b][t],0<=c.indexOf(u)&&(p.push(b),r.push(u))}k++}}p=s;for(r=
c.length;;){p=h;for(l=0;l<e.length;l++)if(b=e[l],t=a[b][0],n=c.indexOf(t),0<=n){for(k=v=0;k<a[t].length;k++)u=a[t][k],u=c.indexOf(u),0>u||u===n||(A=u>n?u-n:n-u,v+=u<n!==A>r-A?1:-1);c.splice(0>v?n:n+1,0,b);e.splice(l,1);l--}else p=s;if(p)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)n=c[b],g.add(d.na(n));return g;default:z.m("Invalid sorting type.")}return a};z.g(Dk,"radius",Dk.prototype.RD);
z.defineProperty(Dk,{RD:"radius"},w("Gq"),function(a){if(this.Gq!==a&&(0<a||isNaN(a)))this.Gq=a,this.K()});z.g(Dk,"aspectRatio",Dk.prototype.eC);z.defineProperty(Dk,{eC:"aspectRatio"},w("jp"),function(a){this.jp!==a&&0<a&&(this.jp=a,this.K())});z.g(Dk,"startAngle",Dk.prototype.hg);z.defineProperty(Dk,{hg:"startAngle"},w("ce"),function(a){this.ce!==a&&(this.ce=a,this.K())});z.g(Dk,"sweepAngle",Dk.prototype.Ah);
z.defineProperty(Dk,{Ah:"sweepAngle"},w("ee"),function(a){this.ee!==a&&(this.ee=0<a&&360>=a?a:360,this.K())});z.g(Dk,"arrangement",Dk.prototype.ue);z.defineProperty(Dk,{ue:"arrangement"},w("ad"),function(a){if(this.ad!==a&&(x&&z.l(a,pa,Dk,"arrangement"),a===Qk||a===Pk||a===Ok||a===Nk))this.ad=a,this.K()});z.g(Dk,"direction",Dk.prototype.direction);
z.defineProperty(Dk,{direction:"direction"},w("pa"),function(a){if(this.pa!==a&&(x&&z.l(a,pa,Dk,"direction"),a===Lk||a===Mk||a===Jk||a===Kk))this.pa=a,this.K()});z.g(Dk,"sorting",Dk.prototype.sorting);z.defineProperty(Dk,{sorting:"sorting"},w("gh"),function(a){if(this.gh!==a&&(x&&z.l(a,pa,Dk,"sorting"),a===Gk||a===Hk||a===Ek||Fk||a===Ik))this.gh=a,this.K()});z.g(Dk,"comparer",Dk.prototype.comparer);
z.defineProperty(Dk,{comparer:"comparer"},w("Rg"),function(a){this.Rg!==a&&(x&&z.j(a,"function",Dk,"comparer"),this.Rg=a,this.K())});z.g(Dk,"spacing",Dk.prototype.spacing);z.defineProperty(Dk,{spacing:"spacing"},w("hh"),function(a){this.hh!==a&&(this.hh=a,this.K())});z.g(Dk,"nodeDiameterFormula",Dk.prototype.ps);z.defineProperty(Dk,{ps:"nodeDiameterFormula"},w("Aq"),function(a){if(this.Aq!==a&&(x&&z.l(a,pa,Dk,"nodeDiameterFormula"),a===Sk||a===Rk))this.Aq=a,this.K()});
z.A(Dk,{CF:"actualXRadius"},w("ld"));z.A(Dk,{DF:"actualYRadius"},w("Tf"));z.A(Dk,{nI:"actualSpacing"},w("fk"));z.A(Dk,{BF:"actualCenter"},function(){return isNaN(this.nd.x)||isNaN(this.nd.y)?new G(0,0):new G(this.nd.x+this.CF,this.nd.y+this.DF)});var Pk;Dk.ConstantSpacing=Pk=z.w(Dk,"ConstantSpacing",0);var Ok;Dk.ConstantDistance=Ok=z.w(Dk,"ConstantDistance",1);var Nk;Dk.ConstantAngle=Nk=z.w(Dk,"ConstantAngle",2);var Qk;Dk.Packed=Qk=z.w(Dk,"Packed",3);var Lk;Dk.Clockwise=Lk=z.w(Dk,"Clockwise",4);var Mk;
Dk.Counterclockwise=Mk=z.w(Dk,"Counterclockwise",5);var Jk;Dk.BidirectionalLeft=Jk=z.w(Dk,"BidirectionalLeft",6);var Kk;Dk.BidirectionalRight=Kk=z.w(Dk,"BidirectionalRight",7);var Gk;Dk.Forwards=Gk=z.w(Dk,"Forwards",8);var Hk;Dk.Reverse=Hk=z.w(Dk,"Reverse",9);var Ek;Dk.Ascending=Ek=z.w(Dk,"Ascending",10);var Fk;Dk.Descending=Fk=z.w(Dk,"Descending",11);var Ik;Dk.Optimized=Ik=z.w(Dk,"Optimized",12);var Sk;Dk.Pythagorean=Sk=z.w(Dk,"Pythagorean",13);var Rk;Dk.Circular=Rk=z.w(Dk,"Circular",14);
function fn(){Tm.call(this)}z.ea("CircularNetwork",fn);z.Pa(fn,Tm);fn.prototype.createVertex=function(){return new gn};fn.prototype.createEdge=function(){return new un};function gn(){Xm.call(this);this.actualAngle=this.diameter=NaN}z.ea("CircularVertex",gn);z.Pa(gn,Xm);
function hn(a,b){var c=a.network;if(c===q)return NaN;c=c.Pb;if(c===q)return NaN;if(c.ue===Qk)if(c.ps===Rk)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.ps===Rk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function un(){Ym.call(this)}z.ea("CircularEdge",un);z.Pa(un,Ym);
function vn(){0<arguments.length&&z.m("ForceDirectedLayout constructor cannot take any arguments.");Eh.call(this);this.Sf=q;this.Yp=0;this.Df=(new qa(100,100)).freeze();this.ip=s;this.np=this.fh=h;this.qn=100;this.Bp=1;this.Xg=1E3;this.Qm=0.05;this.Pm=50;this.Nm=150;this.Om=0;this.Mm=20;this.Lm=25}z.ea("ForceDirectedLayout",vn);z.Pa(vn,Eh);
vn.prototype.cloneProtected=function(a){Eh.prototype.cloneProtected.call(this,a);a.Df.assign(this.Df);a.ip=this.ip;a.fh=this.fh;a.np=this.np;a.qn=this.qn;a.Bp=this.Bp;a.Xg=this.Xg;a.Qm=this.Qm;a.Pm=this.Pm;a.Nm=this.Nm;a.Om=this.Om;a.Mm=this.Mm;a.Lm=this.Lm};vn.prototype.createNetwork=function(){var a=new wn;Um(a,this);return a};
vn.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));a=this.yv;if(0<this.network.vertexes.count){this.network.$u();for(var b=this.network.vertexes.k;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.k;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);this.Yp=
0;a:{if(!(3>this.network.vertexes.count)){var d=b=0,c=this.network.vertexes.k;c.next();for(var e=c.value.V;c.next();){if(c.value.V.xf(e)&&(b++,1<b)){b=h;break a}if(10<d)break;d++}}b=s}if(b){b=this.network;for(d=b.XH().k;d.next();){this.network=e=d.value;for(c=this.network.vertexes.k;c.next();){for(var e=c.value,g=0,k=e.vertexes;k.next();)g++;e.zf=g;e.Hj=1;e.Rl=q;e.Mg=q}xn(this,0,a)}this.network=b;d.reset();x&&z.l(b,wn,vn,"arrangeConnectedGraphs:singletons");for(var c=this.Lu,l=d.count,m=h,g=e=0,k=
z.zb(),n=0;n<l+b.vertexes.count+2;n++)k[n]=q;l=0;d.reset();for(n=z.hf();d.next();){var p=d.value;this.Ve(p,n);if(m)m=s,e=n.x+n.width/2,g=n.y+n.height/2,k[0]=new G(n.x+n.width+c.width,n.y),k[1]=new G(n.x,n.y+n.height+c.height),l=2;else{var r=yn(k,l,e,g,n.width,n.height,c),t=k[r],u=new G(t.x+n.width+c.width,t.y),v=new G(t.x,t.y+n.height+c.height);r+1<l&&k.splice(r+1,0,q);k[r]=u;k[r+1]=v;l++;r=t.x-n.x;t=t.y-n.y;for(p=p.vertexes.k;p.next();){var A=p.value;A.Ca+=r;A.Ka+=t}}}z.Jc(n);for(p=b.vertexes.k;p.next();)A=
p.value,m=A.V,2>l?(e=m.x+m.width/2,g=m.y+m.height/2,k[0]=new G(m.x+m.width+c.width,m.y),k[1]=new G(m.x,m.y+m.height+c.height),l=2):(r=yn(k,l,e,g,m.width,m.height,c),t=k[r],u=new G(t.x+m.width+c.width,t.y),v=new G(t.x,t.y+m.height+c.height),r+1<l&&k.splice(r+1,0,q),k[r]=u,k[r+1]=v,l++,A.Ca=t.x+A.width/2,A.Ka=t.y+A.height/2);z.Da(k);for(d.reset();d.next();){e=d.value;for(g=e.vertexes.k;g.next();)c=g.value,b.Dk(c);for(e=e.edges.k;e.next();)c=e.value,b.Jn(c)}}zn(this,a);this.updateParts()}this.qn=a;this.network=
q;this.$e=h};vn.prototype.Ve=function(a,b){for(var c=h,d=a.vertexes.k;d.next();){var e=d.value;c?(c=s,b.set(e.V)):b.Mj(e.V)}return b};function An(a,b,c){x&&(z.p(b,vn,"computeClusterLayoutIterations:level"),z.p(c,vn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}
function xn(a,b,c){x&&(z.p(b,vn,"layoutClusters:level"),z.p(c,vn,"layoutClusters:maxiter"));if(Bn(a,b)){var d=a.Xg;a.Xg*=1+1/(b+1);var e=Cn(a,b),g=Math.max(0,An(a,b,c));a.yv+=g;xn(a,b+1,c);zn(a,g);Dn(a,e,b);c=a.Sf;c===q?c=new J(En):c.clear();c.Re(e.vertexes);c.sort(function(a,b){return a===q||b===q||a===b?0:b.zf-a.zf});for(e=c.k;e.next();)Fn(a,e.value,b);a.Xg=d}}
function Bn(a,b){x&&z.p(b,vn,"hasClusters:level");if(10<b||3>a.network.vertexes.count)return s;a.Sf===q?a.Sf=new J(En):a.Sf.clear();a.Sf.Re(a.network.vertexes);var c=a.Sf;c.sort(function(a,b){return a===q||b===q||a===b?0:b.zf-a.zf});for(var d=c.count-1;0<=d&&1>=c.n[d].zf;)d--;return 1<c.count-d}
function Cn(a,b){x&&z.p(b,vn,"pushSubNetwork:level");for(var c=a.network,d=new wn,e=a.Sf.k;e.next();){var g=e.value;if(1<g.zf){d.Dk(g);var k={nA:g.zf,pA:g.width,mA:g.height,aF:g.P.x,bF:g.P.y};g.Mg===q&&(g.Mg=new J);g.Mg.add(k);g.Mz=g.Mg.count-1}else break}for(var l=c.edges.k;l.next();){var m=l.value;if(m.fromVertex.network===d&&m.toVertex.network===d)d.Jn(m);else if(m.fromVertex.network===d){var n=m.fromVertex.Rl;n===q&&(n=new J(En),m.fromVertex.Rl=n);n.add(m.toVertex);m.fromVertex.zf--;m.fromVertex.Hj+=
m.toVertex.Hj}else m.toVertex.network===d&&(n=m.toVertex.Rl,n===q&&(n=new J(En),m.toVertex.Rl=n),n.add(m.fromVertex),m.toVertex.zf--,m.toVertex.Hj+=m.fromVertex.Hj)}for(l=d.edges.k;l.next();)m=l.value,m.length*=Math.max(1,N.sqrt((m.fromVertex.Hj+m.toVertex.Hj)/(4*b+1)));for(e=d.vertexes.k;e.next();)if(g=e.value,n=g.Rl,n!==q&&0<n.count&&(k=g.Mg.n[g.Mg.count-1],k=k.nA-g.zf,!(0>=k))){for(var p=0,r=0,t=n.count-k;t<n.count;t++){for(var u=n.n[t],m=q,l=u.edges.k;l.next();){var v=l.value;if(v.YG(u)===g){m=
v;break}}m!==q&&(r+=m.length,p+=u.width*u.height)}n=g.Ca;l=g.Ka;m=g.width;t=g.height;u=g.P;v=m*t;1>v&&(v=1);p=N.sqrt((p+v+4*r*r/(k*k))/v);k=(p-1)*m/2;p=(p-1)*t/2;g.Nb=new H(n-u.x-k,l-u.y-p,m+2*k,t+2*p);g.focus=new G(u.x+k,u.y+p)}a.network=d;return c}
function Dn(a,b,c){x&&(z.l(b,wn,vn,"popNetwork:oldnet"),z.p(c,vn,"popNetwork:level"));for(c=a.network.vertexes.k;c.next();){var d=c.value;d.network=b;if(d.Mg!==q){var e=d.Mg.n[d.Mz];d.zf=e.nA;var g=e.aF,k=e.bF;d.Nb=new H(d.Ca-g,d.Ka-k,e.pA,e.mA);d.focus=new G(g,k);d.Mz--}}for(c=a.network.edges.k;c.next();)c.value.network=b;a.network=b}
function Fn(a,b,c){x&&(z.l(b,En,vn,"surroundNode:oldnet"),z.p(c,vn,"surroundNode:level"));var d=b.Rl;if(!(d===q||0===d.count)){c=b.Ca;var e=b.Ka,g=b.width,k=b.height;b.Mg!==q&&0<b.Mg.count&&(k=b.Mg.n[0],g=k.pA,k=k.mA);for(var g=N.sqrt(g*g+k*k)/2,l=s,m=k=0,n=0,p=b.vertexes.k;p.next();){var r=p.value;1>=r.zf?m++:(l=h,n++,k+=Math.atan2(b.Ka-r.Ka,b.Ca-r.Ca))}if(0!==m){0<n&&(k/=n);n=b=0;b=l?2*Math.PI/(m+1):2*Math.PI/m;0===m%2&&(n=b/2);1<d.count&&d.sort(function(a,b){return a===q||b===q||a===b?0:b.width*
b.height-a.width*a.height});l=0===m%2?0:1;for(p=d.k;p.next();)if(r=p.value,!(1<r.zf)&&!a.isFixed(r)){d=q;for(m=r.edges.k;m.next();){d=m.value;break}var m=r.width,t=r.height,m=N.sqrt(m*m+t*t)/2,d=g+d.length+m,m=k+(b*(l/2>>1)+n)*(0==l%2?1:-1);r.Ca=c+d*Math.cos(m);r.Ka=e+d*Math.sin(m);l++}}}}
function yn(a,b,c,d,e,g,k){var l=9E19,m=-1,n=0;a:for(;n<b;n++){var p=a[n],r=p.x-c,t=p.y-d,r=r*r+t*t;if(r<l){for(t=n-1;0<=t;t--)if(a[t].y>p.y&&a[t].x-p.x<e+k.width)continue a;for(t=n+1;t<b;t++)if(a[t].x>p.x&&a[t].y-p.y<g+k.height)continue a;m=n;l=r}}return m}vn.prototype.addComments=function(a){var b=a.Cc;if(b!==q)for(b=b.LC();b.next();){var c=b.value;if("Comment"===c.Ic){var d=this.network.$l(c);d===q&&(d=this.network.Kn(c),d.charge=this.Lm,c=this.network.jm(a,d,q),c!==q&&(c.length=this.Mm))}}};
function Gn(a,b){x&&(z.l(a,En,vn,"getNodeDistance:vertexA"),z.l(b,En,vn,"getNodeDistance:vertexB"));var c=a.V,d=c.x,e=c.y,g=c.width,c=c.height,k=b.V,l=k.x,m=k.y,n=k.width,k=k.height;return d+g<l?e>m+k?(d=d+g-l,e=e-m-k,N.sqrt(d*d+e*e)):e+c<m?(d=d+g-l,e=e+c-m,N.sqrt(d*d+e*e)):l-(d+g):d>l+n?e>m+k?(d=d-l-n,e=e-m-k,N.sqrt(d*d+e*e)):e+c<m?(d=d-l-n,e=e+c-m,N.sqrt(d*d+e*e)):d-(l+n):e>m+k?e-(m+k):e+c<m?m-(e+c):0.1}
function zn(a,b){x&&z.p(b,vn,"performIterations:num");a.Sf=q;for(var c=a.Yp+b;a.Yp<c&&!(a.Yp++,!Hn(a)););a.Sf=q}
function Hn(a){a.Sf===q&&(a.Sf=new J(En),a.Sf.Re(a.network.vertexes));var b=a.Sf;if(0>=b.count)return s;var c=b.n[0];c.forceX=0;c.forceY=0;for(var d=c.Ca,e=d,g=c.Ka,k=g,c=1;c<b.count;c++){var l=b.n[c];l.forceX=0;l.forceY=0;var m=l.Ca,l=l.Ka,d=Math.min(d,m),e=Math.max(e,m),g=Math.min(g,l),k=Math.max(k,l)}(k=e-d>k-g)?b.sort(function(a,b){return a===q||b===q||a===b?0:a.Ca-b.Ca}):b.sort(function(a,b){return a===q||b===q||a===b?0:a.Ka-b.Ka});for(var n=0,p=m=0,c=0;c<b.count;c++){l=b.n[c];d=l.Ca;e=l.Ka;
m=l.charge*a.electricalFieldX(d,e);p=l.charge*a.electricalFieldY(d,e);l.forceX+=m;l.forceY+=p;m=l.mass*a.gravitationalFieldX(d,e);p=l.mass*a.gravitationalFieldY(d,e);l.forceX+=m;l.forceY+=p;for(var r=a.Xg,t=c+1;t<b.count;t++)if(g=b.n[t],g!==l){var p=g.Ca,u=g.Ka;if(Math.abs(d-p)>r){if(k)break}else if(Math.abs(e-u)>r){if(!k)break}else{var v=Gn(l,g);1>v?(d>p?(m=Math.abs(g.V.right-l.V.x),m=In(1+m)):d<p?(m=Math.abs(g.V.x-l.V.right),m=-In(1+m)):(m=Math.max(g.width,l.width),m=In(1+m)-m/2),e>u?(p=Math.abs(g.V.bottom-
l.V.y),p=In(1+p)):d<p?(p=Math.abs(g.V.y-l.V.bottom),p=-In(1+p)):(p=Math.max(g.height,l.height),p=In(1+p)-p/2)):(n=-(l.charge*g.charge)/(v*v),m=n*((p-d)/v),p=n*((u-e)/v));l.forceX+=m;l.forceY+=p;g.forceX-=m;g.forceY-=p}}}for(c=a.network.edges.k;c.next();)k=c.value,l=k.fromVertex,g=k.toVertex,d=l.Ca,e=l.Ka,p=g.Ca,u=g.Ka,v=Gn(l,g),1>v?(m=(d>p?1:-1)*In(1+Math.max(g.width,l.width)),p=(e>u?1:-1)*In(1+Math.max(g.height,l.height))):(n=k.stiffness*(v-k.length),m=n*((p-d)/v),p=n*((u-e)/v)),l.forceX+=m,l.forceY+=
p,g.forceX-=m,g.forceY-=p;c=0;d=Math.max(a.Xg/20,50);for(e=0;e<b.count;e++)l=b.n[e],a.isFixed(l)||(g=l.forceX,k=l.forceY,g<-d?g=-d:g>d&&(g=d),k<-d?k=-d:k>d&&(k=d),l.Ca+=g,l.Ka+=k,c=Math.max(c,g*g+k*k));return c>a.Oy*a.Oy}function In(a){return Math.floor(a*Math.random())}vn.prototype.commitLayout=function(){this.Sz();this.commitNodes();this.bs&&this.commitLinks()};vn.prototype.Sz=function(){if(this.Yk)for(var a=this.network.edges.k;a.next();){var b=a.value.link;b!==q&&(b.mb=Zb,b.qb=Zb)}};
vn.prototype.commitNodes=function(){var a=0,b=0;if(this.cC){var c=z.hf();this.Ve(this.network,c);b=this.nd;a=b.x-c.x;b=b.y-c.y;z.Jc(c)}for(var c=z.hf(),d=this.network.vertexes.k;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.V),c.x+=a,c.y+=b,e.Nb=c;e.commit()}z.Jc(c)};vn.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};vn.prototype.springStiffness=function(a){a=a.stiffness;return!isNaN(a)?a:this.Qm};
vn.prototype.springLength=function(a){a=a.length;return!isNaN(a)?a:this.Pm};vn.prototype.electricalCharge=function(a){a=a.charge;return!isNaN(a)?a:this.Nm};vn.prototype.electricalFieldX=ca(0);vn.prototype.electricalFieldY=ca(0);vn.prototype.gravitationalMass=function(a){a=a.mass;return!isNaN(a)?a:this.Om};vn.prototype.gravitationalFieldX=ca(0);vn.prototype.gravitationalFieldY=ca(0);vn.prototype.isFixed=function(a){return a.isFixed};z.A(vn,{yI:"currentIteration"},w("Yp"));
z.g(vn,"arrangementSpacing",vn.prototype.Lu);z.defineProperty(vn,{Lu:"arrangementSpacing"},w("Df"),function(a){this.Df.N(a)||(this.Df.assign(a),this.K())});z.g(vn,"arrangesToOrigin",vn.prototype.cC);z.defineProperty(vn,{cC:"arrangesToOrigin"},w("ip"),function(a){this.ip!==a&&(this.ip=a,this.K())});z.g(vn,"setsPortSpots",vn.prototype.Yk);z.defineProperty(vn,{Yk:"setsPortSpots"},w("fh"),function(a){this.fh!==a&&(this.fh=a,this.K())});z.g(vn,"comments",vn.prototype.comments);
z.defineProperty(vn,{comments:"comments"},w("np"),function(a){this.np!==a&&(this.np=a,this.K())});z.g(vn,"maxIterations",vn.prototype.yv);z.defineProperty(vn,{yv:"maxIterations"},w("qn"),function(a){this.qn!==a&&0<=a&&(this.qn=a,this.K())});z.g(vn,"epsilonDistance",vn.prototype.Oy);z.defineProperty(vn,{Oy:"epsilonDistance"},w("Bp"),function(a){this.Bp!==a&&0<a&&(this.Bp=a,this.K())});z.g(vn,"infinityDistance",vn.prototype.gH);
z.defineProperty(vn,{gH:"infinityDistance"},w("Xg"),function(a){this.Xg!==a&&1<a&&(this.Xg=a,this.K())});z.g(vn,"defaultSpringStiffness",vn.prototype.yG);z.defineProperty(vn,{yG:"defaultSpringStiffness"},w("Qm"),function(a){this.Qm!==a&&(this.Qm=a,this.K())});z.g(vn,"defaultSpringLength",vn.prototype.xG);z.defineProperty(vn,{xG:"defaultSpringLength"},w("Pm"),function(a){this.Pm!==a&&(this.Pm=a,this.K())});z.g(vn,"defaultElectricalCharge",vn.prototype.qG);
z.defineProperty(vn,{qG:"defaultElectricalCharge"},w("Nm"),function(a){this.Nm!==a&&(this.Nm=a,this.K())});z.g(vn,"defaultGravitationalMass",vn.prototype.sG);z.defineProperty(vn,{sG:"defaultGravitationalMass"},w("Om"),function(a){this.Om!==a&&(this.Om=a,this.K())});z.g(vn,"defaultCommentSpringLength",vn.prototype.pG);z.defineProperty(vn,{pG:"defaultCommentSpringLength"},w("Mm"),function(a){this.Mm!==a&&(this.Mm=a,this.K())});z.g(vn,"defaultCommentElectricalCharge",vn.prototype.oG);
z.defineProperty(vn,{oG:"defaultCommentElectricalCharge"},w("Lm"),function(a){this.Lm!==a&&(this.Lm=a,this.K())});function wn(){Tm.call(this)}z.ea("ForceDirectedNetwork",wn);z.Pa(wn,Tm);wn.prototype.createVertex=function(){return new En};wn.prototype.createEdge=function(){return new Jn};function En(){Xm.call(this);this.isFixed=s;this.mass=this.charge=NaN;this.Hj=this.zf=this.forceY=this.forceX=0;this.Mg=this.Rl=q;this.Mz=0}z.ea("ForceDirectedVertex",En);z.Pa(En,Xm);
function Jn(){Ym.call(this);this.length=this.stiffness=NaN}z.ea("ForceDirectedEdge",Jn);z.Pa(Jn,Ym);function uk(){0<arguments.length&&z.m("LayeredDigraphLayout constructor cannot take any arguments.");Eh.call(this);this.vd=this.mn=25;this.pa=0;this.Jm=Kn;this.nn=Ln;this.bn=Mn;this.vl=4;this.Dm=Nn;this.Yh=On;this.fh=h;this.gq=4;this.Bb=this.Kt=this.ib=-1;this.of=this.rq=0;this.yd=this.mf=this.yg=this.bh=this.wd=q;this.xq=0;this.Tt=this.yl=q;this.Kf=0;this.yq=q;this.zg=[];this.zg.length=100}
z.ea("LayeredDigraphLayout",uk);z.Pa(uk,Eh);uk.prototype.cloneProtected=function(a){Eh.prototype.cloneProtected.call(this,a);a.mn=this.mn;a.vd=this.vd;a.pa=this.pa;a.Jm=this.Jm;a.nn=this.nn;a.bn=this.bn;a.vl=this.vl;a.Dm=this.Dm;a.Yh=this.Yh;a.fh=this.fh;a.gq=this.gq};uk.prototype.createNetwork=function(){var a=new Pn;Um(a,this);return a};
uk.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));this.nd=Wm(this,this.nd);this.Kt=-1;this.of=this.rq=0;this.yq=this.Tt=this.yl=q;for(a=0;a<this.zg.length;a++)this.zg[a]=q;if(0<this.network.vertexes.count){this.network.$u();for(a=this.network.edges.k;a.next();)a.value.rev=s;switch(this.Jm){default:case Qn:var b=0,c=this.network.vertexes.count-1;a=[];
a.length=c+1;for(var d=this.network.vertexes.k;d.next();)d.value.valid=h;for(;Rn(this.network)!==q;){for(d=Sn(this.network);d!==q;)a[c]=d,c--,d.valid=s,d=Sn(this.network);for(d=Tn(this.network);d!==q;)a[b]=d,b++,d.valid=s,d=Tn(this.network);for(var d=q,e=0,g=this.network.vertexes.k;g.next();){var k=g.value;if(k.valid){for(var l=0,m=k.ac;m.next();)m.value.toVertex.valid&&l++;for(var m=0,n=k.hc;n.next();)n.value.fromVertex.valid&&m++;if(d===q||e<l-m)d=k,e=l-m}}d!==q&&(a[b]=d,b++,d.valid=s)}for(b=0;b<
this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.k;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.Gv(b),b.rev=h);break;case Kn:for(b=this.network.vertexes.k;b.next();)b.value.$n=-1,b.value.finish=-1;for(a=this.network.edges.k;a.next();)a.value.forest=s;this.xq=0;for(b.reset();b.next();)0===b.value.hc.count&&Un(this,b.value);for(b.reset();b.next();)-1===b.value.$n&&Un(this,b.value);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,d=c.finish,e=
b.toVertex,g=e.finish,e.$n<c.$n&&d<g&&(this.network.Gv(b),b.rev=h))}for(a=this.network.vertexes.k;a.next();)b=a.value,b.layer=-1;this.ib=-1;this.assignLayers();for(a.reset();a.next();)this.ib=Math.max(this.ib,a.value.layer);c=this.network.edges.k;for(b=[];c.next();)a=c.value,a.valid=s,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],!a.valid&&!((a.fromVertex.ed===q||a.toVertex.ed===q)&&a.fromVertex.layer===a.toVertex.layer)){g=l=k=m=0;e=a.fromVertex;d=a.toVertex;if(a.link!==q){l=a.link;if(l===q)continue;
var p=e.ed,g=d.ed;if(p===q||g===q)continue;var r=l.da,k=l.ja,t=l.Kc,m=l.td;a.rev&&(l=r,n=t,r=k,t=m,k=l,m=n);var u=e.P,l=a.toVertex.P,v=a.rev?d.V:e.V,n=z.O();isNaN(v.x)?n.assign(u):Nl(r,t,cc,n);p!==r&&(!isNaN(v.x)&&r.Db())&&(p=e.V,isNaN(p.x)||(n.x+=v.x-p.x,n.y+=v.y-p.y));r=a.rev?e.V:d.V;p=z.O();isNaN(r.x)?p.assign(l):Nl(k,m,cc,p);g!==k&&(!isNaN(r.x)&&k.Db())&&(g=d.V,isNaN(g.x)||(p.x+=r.x-g.x,p.y+=r.y-g.y));90===this.pa||270===this.pa?(g=Math.round((n.x-u.x)/this.vd),k=n.x,l=Math.round((p.x-l.x)/this.vd),
m=p.x):(g=Math.round((n.y-u.y)/this.vd),k=n.y,l=Math.round((p.y-l.y)/this.vd),m=p.y);z.B(n);z.B(p);a.portFromColOffset=g;a.portFromPos=k;a.portToColOffset=l;a.portToPos=m}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;n=e.layer;u=d.layer;p=a;r=0;v=p.link;if(v!==q){var A=v.Kc,C=v.td;if(A!==q&&C!==q){var K=v.da,t=v.ja;if(K!==q&&t!==q){var I=A.mb,R=C.qb;this.Yk||(Vb(v.mb)||(I=v.mb),Vb(v.qb)||(R=v.qb));if(Vb(I)||I===Wb)I=Vn(this,h);if(Vb(R)||R===Wb)R=Vn(this,s);var M=v.Ob,
S=v.getLinkPoint(K,A,I,h,M,t,C,z.O()),I=v.getLinkDirection(K,A,S,I,h,M,t,C);z.B(S);I===Wn(this,p,h)?r+=1:this.Yk&&K!==q&&1===K.ports.count&&p.rev&&(r+=1);S=v.getLinkPoint(t,C,R,s,M,K,A,z.O());v=v.getLinkDirection(t,C,S,R,s,M,K,A);z.B(S);v===Wn(this,p,s)?r+=2:this.Yk&&t!==q&&1===t.ports.count&&p.rev&&(r+=2)}}}p=1===r||3===r?h:s;if(r=2===r||3===r?h:s)t=this.network.createVertex(),t.ed=q,t.Ml=1,t.layer=n,t.near=e,this.network.Dk(t),e=this.network.jm(e,t,a.link),e.valid=s,e.rev=a.rev,e.portFromColOffset=
g,e.portToColOffset=0,e.portFromPos=k,e.portToPos=0,e=t;v=1;p&&v--;if(n-u>v&&0<n){a.valid=s;t=this.network.createVertex();t.ed=q;t.Ml=2;t.layer=n-1;this.network.Dk(t);e=this.network.jm(e,t,a.link);e.valid=h;e.rev=a.rev;e.portFromColOffset=r?0:g;e.portToColOffset=0;e.portFromPos=r?0:k;e.portToPos=0;e=t;for(n--;n-u>v&&0<n;)t=this.network.createVertex(),t.ed=q,t.Ml=3,t.layer=n-1,this.network.Dk(t),e=this.network.jm(e,t,a.link),e.valid=h,e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=
0,e.portToPos=0,e=t,n--;e=this.network.jm(t,d,a.link);e.valid=!p;p&&(t.near=d);e.rev=a.rev;e.portFromColOffset=0;e.portToColOffset=l;e.portFromPos=0;e.portToPos=m}else a.valid=h}b=this.wd=[];for(c=0;c<=this.ib;c++)b[c]=0;for(a=this.network.vertexes.k;a.next();)a.value.index=-1;this.initializeIndices();this.Kt=-1;for(c=this.of=this.rq=0;c<=this.ib;c++)b[c]>b[this.of]&&(this.Kt=b[c]-1,this.of=c),b[c]<b[this.rq]&&(this.rq=c);this.yq=[];for(c=0;c<b.length;c++)this.yq[c]=[];for(a.reset();a.next();)c=a.value,
b=c.layer,this.yq[b][c.index]=c;this.Bb=-1;for(a=0;a<=this.ib;a++){b=Xn(this,a);c=0;d=this.wd[a];for(e=0;e<d;e++)g=b[e],c+=Yn(this,g,h),g.column=c,c+=1,c+=Yn(this,g,s);this.Bb=Math.max(this.Bb,c-1);Zn(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=q;this.$e=h};function $n(a){var b=a.toVertex,c=0;for(a=a.fromVertex.ac;a.next();)a.value.toVertex===b&&c++;return 1<c?2:1}
function ho(a){var b=a.fromVertex.ed;a=a.toVertex.ed;return b===q&&a===q?8:b===q||a===q?4:1}function no(a,b,c){return b.ed===q?0:90===a.pa||270===a.pa?c?b.P.y+10:b.V.height-b.P.y+10:c?b.P.x+10:b.V.width-b.P.x+10}function Yn(a,b,c){if(b.ed===q)return 0;var d=c?b.uz:b.tz;if(d!==f)return d;d=a.pa;return 90===d||270===d?c?b.uz=b.P.x/a.vd+1|0:b.tz=(b.V.width-b.P.x)/a.vd+1|0:c?b.uz=b.P.y/a.vd+1|0:b.tz=(b.V.height-b.P.y)/a.vd+1|0}
function oo(a){a.yl===q&&(a.yl=[]);for(var b=0,c=a.network.vertexes.k,d;c.next();)d=c.value,a.yl[b]=d.layer,b++,a.yl[b]=d.column,b++,a.yl[b]=d.index,b++;return a.yl}function po(a,b){for(var c=0,d=a.network.vertexes.k,e;d.next();)e=d.value,e.layer=b[c],c++,e.column=b[c],c++,e.index=b[c],c++}
function qo(a,b,c){x&&(z.p(b,uk,"crossingMatrix:unfixedLayer"),z.p(c,uk,"crossingMatrix:direction"));var d=Xn(a,b),e=a.wd[b];a.Tt||(a.Tt=[]);for(var g=a.Tt,k,l=0;l<e;l++){k=0;var m=d[l],n=m.near,p,r;if(n!==q&&n.layer===m.layer)if(m=n.index,m>l)for(r=l+1;r<m;r++)p=d[r],(p.near!==n||p.Ml!==n.Ml)&&k++;else for(r=l-1;r>m;r--)p=d[r],(p.near!==n||p.Ml!==n.Ml)&&k++;var t,u,v,A,C,K;if(0<=c){m=d[l].Ie;for(n=0;n<m.count;n++)if(t=m.n[n],t.valid&&t.fromVertex.layer!==b){p=t.fromVertex.index;r=t.portToPos;t=t.portFromPos;
for(u=n+1;u<m.count;u++)v=m.n[u],v.valid&&v.fromVertex.layer!==b&&(A=v.fromVertex.index,C=v.portToPos,v=v.portFromPos,r<C&&(p>A||p===A&&t>v)&&k++,C<r&&(A>p||A===p&&v>t)&&k++)}}if(0>=c){m=d[l].ye;for(n=0;n<m.count;n++)if(t=m.n[n],t.valid&&t.toVertex.layer!==b){p=t.toVertex.index;r=t.portToPos;t=t.portFromPos;for(u=n+1;u<m.count;u++)v=m.n[u],v.valid&&v.toVertex.layer!==b&&(A=v.toVertex.index,C=v.portToPos,v=v.portFromPos,t<v&&(p>A||p===A&&r>C)&&k++,v<t&&(A>p||A===p&&C>r)&&k++)}}g[l*e+l]=k;for(m=l+1;m<
e;m++){var I=0,R=0;if(0<=c){k=d[l].Ie;K=d[m].Ie;for(n=0;n<k.count;n++)if(t=k.n[n],t.valid&&t.fromVertex.layer!==b){p=t.fromVertex.index;t=t.portFromPos;for(u=0;u<K.count;u++)v=K.n[u],v.valid&&v.fromVertex.layer!==b&&(A=v.fromVertex.index,v=v.portFromPos,(p<A||p===A&&t<v)&&R++,(A<p||A===p&&v<t)&&I++)}}if(0>=c){k=d[l].ye;K=d[m].ye;for(n=0;n<k.count;n++)if(t=k.n[n],t.valid&&t.toVertex.layer!==b){p=t.toVertex.index;r=t.portToPos;for(u=0;u<K.count;u++)v=K.n[u],v.valid&&v.toVertex.layer!==b&&(A=v.toVertex.index,
C=v.portToPos,(p<A||p===A&&r<C)&&R++,(A<p||A===p&&C<r)&&I++)}}g[l*e+m]=I;g[m*e+l]=R}}Zn(a,b,d);return g}uk.prototype.countCrossings=function(){var a,b=0,c,d;for(a=0;a<=this.ib;a++){c=qo(this,a,1);d=this.wd[a];for(var e=0;e<d;e++)for(var g=e;g<d;g++)b+=c[e*d+g]}return b};
function ro(a){for(var b=0,c=0;c<=a.ib;c++){for(var d=a,e=c,g=Xn(d,e),k=d.wd[e],l=0,m=f,m=0;m<k;m++){var n=g[m].ye,p,r,t;if("undefined"!==typeof n)for(var u=0;u<n.count;u++)p=n.n[u],p.valid&&p.toVertex.layer!==e&&(r=p.fromVertex.column+p.portFromColOffset,t=p.toVertex.column+p.portToColOffset,l+=(Math.abs(r-t)+1)*ho(p))}Zn(d,e,g);b+=l}return b}
uk.prototype.normalize=function(){var a=Infinity;this.Bb=-1;for(var b=this.network.vertexes.k,c;b.next();)c=b.value,a=Math.min(a,c.column-Yn(this,c,h)),this.Bb=Math.max(this.Bb,c.column+Yn(this,c,s));for(b.reset();b.next();)b.value.column-=a;this.Bb-=a};
function so(a,b,c){x&&(z.p(b,uk,"barycenters:unfixedLayer"),z.p(c,uk,"barycenters:direction"));var d=Xn(a,b),e=a.wd[b],g=[],k;for(k=0;k<e;k++){var l=d[k],m=q;0>=c&&(m=l.Ie);var n=q;0<=c&&(n=l.ye);var p=0,r=0,t=l.near;t!==q&&t.layer===l.layer&&(p+=t.column-1,r++);if(m!==q)for(t=0;t<m.count;t++){var l=m.n[t],u=l.fromVertex;l.valid&&(!l.rev&&u.layer!==b)&&(p+=u.column+l.portFromColOffset,r++)}if(n!==q)for(m=0;m<n.count;m++)l=n.n[m],t=l.toVertex,l.valid&&(!l.rev&&t.layer!==b)&&(p+=t.column+l.portToColOffset,
r++);g[k]=0===r?-1:p/r}Zn(a,b,d);return g}
function to(a,b,c){x&&(z.p(b,uk,"medians:unfixedLayer"),z.p(c,uk,"medians:direction"));for(var d=Xn(a,b),e=a.wd[b],g=[],k=0;k<e;k++){var l=d[k],m=q;0>=c&&(m=l.Ie);var n=q;0<=c&&(n=l.ye);var p=0,r=[],t=l.near;t!==q&&t.layer===l.layer&&(r[p]=t.column-1,p++);if(m!==q)for(t=0;t<m.count;t++){var l=m.n[t],u=l.fromVertex;l.valid&&(!l.rev&&u.layer!==b)&&(r[p]=u.column+l.portFromColOffset,p++)}if(n!==q)for(m=0;m<n.count;m++)l=n.n[m],t=l.toVertex,l.valid&&(!l.rev&&t.layer!==b)&&(r[p]=t.column+l.portToColOffset,
p++);0===p?g[k]=-1:(r.sort(function(a,b){return a-b}),n=p>>1,g[k]=p&1?r[n]:r[n-1]+r[n]>>1)}Zn(a,b,d);return g}function uo(a,b,c,d,e,g){if(b.component===d){b.component=c;var k,l;if(e)for(var m=b.ac;m.next();){var n=m.value.toVertex;k=b.layer-n.layer;l=$n(m.value);k===l&&uo(a,n,c,d,e,g)}if(g)for(m=b.hc;m.next();)n=m.value.fromVertex,k=n.layer-b.layer,l=$n(m.value),k===l&&uo(a,n,c,d,e,g)}}
function vo(a,b,c,d,e,g){if(b.component===d){b.component=c;if(e)for(var k=b.ac,l;k.next();)l=k.value.toVertex,vo(a,l,c,d,e,g);if(g)for(b=b.hc;b.next();)k=b.value.fromVertex,vo(a,k,c,d,e,g)}}function Rn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid)return b}return q}function Sn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=h,d=b.ac;d.next();)if(d.value.toVertex.valid){c=s;break}if(c)return b}}return q}
function Tn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=h,d=b.hc;d.next();)if(d.value.fromVertex.valid){c=s;break}if(c)return b}}return q}function Un(a,b){b.$n=a.xq;a.xq++;for(var c=b.ac;c.next();){var d=c.value,e=d.toVertex;-1===e.$n&&(d.forest=h,Un(a,e))}b.finish=a.xq;a.xq++}
uk.prototype.assignLayers=function(){switch(this.nn){case wo:xo(this);break;case yo:for(var a,b=this.network.vertexes.k;b.next();)a=zo(this,b.value),this.ib=Math.max(a,this.ib);for(b.reset();b.next();)a=b.value,a.layer=this.ib-a.layer;break;default:case Ln:xo(this);for(b=this.network.vertexes.k;b.next();)b.value.valid=s;for(b.reset();b.next();)0===b.value.hc.count&&Ao(this,b.value);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.ib=-1;for(b.reset();b.next();)b.value.layer-=a,this.ib=
Math.max(this.ib,b.value.layer)}};function xo(a){for(var b=a.network.vertexes.k;b.next();){var c=Bo(a,b.value);a.ib=Math.max(c,a.ib)}}function Bo(a,b){var c=0;if(-1===b.layer){for(var d=b.ac;d.next();)var e=d.value,g=$n(e),c=Math.max(c,Bo(a,e.toVertex)+g);b.layer=c}else c=b.layer;return c}function zo(a,b){var c=0;if(-1===b.layer){for(var d,e,g=b.hc;g.next();)e=g.value,d=$n(e),c=Math.max(c,zo(a,e.fromVertex)+d);b.layer=c}else c=b.layer;return c}
function Ao(a,b){if(!b.valid){b.valid=h;for(var c=b.ac;c.next();)Ao(a,c.value.toVertex);for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(var d=b.Ie.n,e=d.length,g=0;g<e;g++){var k=d[g],l=$n(k);k.fromVertex.layer-k.toVertex.layer>l&&uo(a,k.fromVertex,0,-1,h,s)}for(uo(a,b,1,-1,h,h);0!==b.component;){for(var l=0,d=Infinity,m=0,n=q,p=a.network.vertexes.k;p.next();){var r=p.value;if(1===r.component){for(var t=0,u=s,v=r.Ie.n,e=v.length,g=0;g<e;g++){var k=v[g],A=k.fromVertex,t=t+1;1!==A.component&&
(l+=1,A=A.layer-r.layer,k=$n(k),d=Math.min(d,A-k))}k=r.ye.n;e=k.length;for(g=0;g<e;g++)v=k[g].toVertex,t-=1,1!==v.component?l-=1:u=h;if((n===q||t<m)&&!u)n=r,m=t}}if(0<l){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else n.component=0}for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(uo(a,b,1,-1,h,s);0!==b.component;){g=0;e=Infinity;d=0;l=q;for(m=a.network.vertexes.k;m.next();)if(n=m.value,1===n.component){p=0;r=s;k=n.Ie.n;t=k.length;for(u=0;u<t;u++)v=k[u].fromVertex,
p+=1,1!==v.component?g+=1:r=h;k=n.ye.n;t=k.length;for(u=0;u<t;u++)v=k[u],A=v.toVertex,p-=1,1!==A.component&&(g-=1,A=n.layer-A.layer,v=$n(v),e=Math.min(e,A-v));if((l===q||p>d)&&!r)l=n,d=p}if(0>g){for(c.reset();c.next();)g=c.value,1===g.component&&(g.layer-=e);b.component=0}else l.component=0}}}function Wn(a,b,c){return 90===a.pa?c&&!b.rev||!c&&b.rev?270:90:180===a.pa?c&&!b.rev||!c&&b.rev?0:180:270===a.pa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
uk.prototype.initializeIndices=function(){switch(this.bn){default:case Co:for(var a,b=this.network.vertexes.k;b.next();){var c=b.value;a=c.layer;c.index=this.wd[a];this.wd[a]++}break;case Mn:b=this.network.vertexes.k;for(a=this.ib;0<=a;a--){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Do(this,b.value);b.reset()}break;case Eo:b=this.network.vertexes.k;for(a=0;a<=this.ib;a++){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Fo(this,b.value);b.reset()}}};
function Do(a,b){var c=b.layer;b.index=a.wd[c];a.wd[c]++;for(var c=b.ye.Je(),d=h,e;d;){d=s;for(e=0;e<c.length-1;e++){var g=c[e],k=c[e+1];g.portFromColOffset>k.portFromColOffset&&(d=h,c[e]=k,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Do(a,d))}
function Fo(a,b){var c=b.layer;b.index=a.wd[c];a.wd[c]++;for(var c=b.Ie.Je(),d=h,e;d;){d=s;for(e=0;e<c.length-1;e++){var g=c[e],k=c[e+1];g.portToColOffset>k.portToColOffset&&(d=h,c[e]=k,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Fo(a,d))}
uk.prototype.reduceCrossings=function(){var a=this.countCrossings(),b=oo(this),c,d,e;for(c=0;c<this.vl;c++){for(d=0;d<=this.ib;d++)Go(this,d,1),Ho(this,d,1);e=this.countCrossings();e<a&&(a=e,b=oo(this));for(d=this.ib;0<=d;d--)Go(this,d,-1),Ho(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=oo(this))}po(this,b);for(c=0;c<this.vl;c++){for(d=0;d<=this.ib;d++)Go(this,d,0),Ho(this,d,0);e=this.countCrossings();e<a&&(a=e,b=oo(this));for(d=this.ib;0<=d;d--)Go(this,d,0),Ho(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=oo(this))}po(this,b);var g,k,l;switch(this.Dm){case Io:break;case Jo:for(l=a+1;(d=this.countCrossings())<l;){l=d;for(c=this.ib;0<=c;c--)for(k=0;k<=c;k++){for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,-1)||g}e=this.countCrossings();e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,1)||g}e=this.countCrossings();e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Ho(this,d,1)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=
Ho(this,d,-1)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,0)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Ho(this,d,0)||g}e>=a?po(this,b):(a=e,b=oo(this))}}break;default:case Nn:c=this.ib;k=0;for(l=a+1;(d=this.countCrossings())<l;){l=d;for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,-1)||g}e=this.countCrossings();e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,1)||g}e=this.countCrossings();e>=a?po(this,b):(a=
e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Ho(this,d,1)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Ho(this,d,-1)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Ho(this,d,0)||g}e>=a?po(this,b):(a=e,b=oo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Ho(this,d,0)||g}e>=a?po(this,b):(a=e,b=oo(this))}}po(this,b)};
function Go(a,b,c){x&&(z.p(b,uk,"medianBarycenterCrossingReduction:unfixedLayer"),z.p(c,uk,"medianBarycenterCrossingReduction:direction"));var d=Xn(a,b),e=a.wd[b],g=to(a,b,c),k=so(a,b,c);for(c=0;c<e;c++)-1===k[c]&&(k[c]=d[c].column),-1===g[c]&&(g[c]=d[c].column);for(var l=h,m;l;){l=s;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&k[c+1]<k[c])l=h,m=g[c],g[c]=g[c+1],g[c+1]=m,m=k[c],k[c]=k[c+1],k[c+1]=m,m=d[c],d[c]=d[c+1],d[c+1]=m}for(c=g=0;c<e;c++)m=d[c],m.index=c,g+=Yn(a,m,h),m.column=g,g+=1,g+=
Yn(a,m,s);Zn(a,b,d)}
function Ho(a,b,c){var d=Xn(a,b),e=a.wd[b];c=qo(a,b,c);var g,k;k=[];for(g=0;g<e;g++)k[g]=-1;var l;l=[];for(g=0;g<e;g++)l[g]=-1;for(var m=s,n=h;n;){n=s;for(g=0;g<e-1;g++){var p=c[d[g].index*e+d[g+1].index],r=c[d[g+1].index*e+d[g].index],t=0,u=0,v=d[g].column,A=d[g+1].column,C=Yn(a,d[g],h),K=Yn(a,d[g],s),I=Yn(a,d[g+1],h),R=Yn(a,d[g+1],s),C=v-C+I,K=A-K+R,M=d[g].hc.k;for(M.reset();M.next();)if(R=M.value,R.valid&&R.fromVertex.layer===b){R=R.fromVertex;for(I=0;d[I]!==R;)I++;I<g&&(t+=2*(g-I),u+=2*(g+1-I));
I===g+1&&(t+=1);I>g+1&&(t+=4*(I-g),u+=4*(I-(g+1)))}M=d[g].ac.k;for(M.reset();M.next();)if(R=M.value,R.valid&&R.toVertex.layer===b){R=R.toVertex;for(I=0;d[I]!==R;)I++;I===g+1&&(u+=1)}M=d[g+1].hc.k;for(M.reset();M.next();)if(R=M.value,R.valid&&R.fromVertex.layer===b){R=R.fromVertex;for(I=0;d[I]!==R;)I++;I<g&&(t+=2*(g+1-I),u+=2*(g-I));I===g&&(u+=1);I>g+1&&(t+=4*(I-(g+1)),u+=4*(I-g))}M=d[g+1].ac.k;for(M.reset();M.next();)if(R=M.value,R.valid&&R.toVertex.layer===b){R=R.toVertex;for(I=0;d[I]!==R;)I++;I===
g&&(t+=1)}var I=R=0,M=k[d[g].index],S=l[d[g].index],Z=k[d[g+1].index],X=l[d[g+1].index];-1!==M&&(R+=Math.abs(M-v),I+=Math.abs(M-K));-1!==S&&(R+=Math.abs(S-v),I+=Math.abs(S-K));-1!==Z&&(R+=Math.abs(Z-A),I+=Math.abs(Z-C));-1!==X&&(R+=Math.abs(X-A),I+=Math.abs(X-C));if(u<t-0.5||u===t&&r<p-0.5||u===t&&r===p&&I<R-0.5)n=m=h,d[g].column=K,d[g+1].column=C,p=d[g],d[g]=d[g+1],d[g+1]=p}}for(g=0;g<e;g++)d[g].index=g;Zn(a,b,d);return m}
uk.prototype.straightenAndPack=function(){var a,b,c=0!==(this.Yh&Ko);a=this.Yh===On;1E3<this.network.edges.count&&!a&&(c=s);if(c){b=[];for(a=0;a<=this.ib;a++)b[a]=0;for(var d=this.network.vertexes.k,e,g;d.next();)e=d.value,a=e.layer,g=e.column,e=Yn(this,e,s),b[a]=Math.max(b[a],g+e);for(d.reset();d.next();)e=d.value,a=e.layer,g=e.column,e.column=(8*(this.Bb-b[a])>>1)+8*g;this.Bb*=8}if(0!==(this.Yh&Lo))for(b=h;b;){b=s;for(a=this.of+1;a<=this.ib;a++)b=Mo(this,a,1)||b;for(a=this.of-1;0<=a;a--)b=Mo(this,
a,-1)||b;b=Mo(this,this.of,0)||b}if(0!==(this.Yh&No)){for(a=this.of+1;a<=this.ib;a++)Oo(this,a,1);for(a=this.of-1;0<=a;a--)Oo(this,a,-1);Oo(this,this.of,0)}c&&(Po(this,-1),Po(this,1));if(0!==(this.Yh&Lo))for(b=h;b;){b=s;b=Mo(this,this.of,0)||b;for(a=this.of+1;a<=this.ib;a++)b=Mo(this,a,0)||b;for(a=this.of-1;0<=a;a--)b=Mo(this,a,0)||b}};function Mo(a,b,c){x&&(z.p(b,uk,"bendStraighten:unfixedLayer"),z.p(c,uk,"bendStraighten:direction"));for(var d=s;Qo(a,b,c);)d=h;return d}
function Qo(a,b,c){x&&(z.p(b,uk,"shiftbendStraighten:unfixedLayer"),z.p(c,uk,"shiftbendStraighten:direction"));var d,e=Xn(a,b),g=a.wd[b],k=so(a,b,-1);if(0<c)for(d=0;d<g;d++)k[d]=-1;var l=so(a,b,1);if(0>c)for(d=0;d<g;d++)l[d]=-1;for(var m=s,n=h;n;){n=s;for(d=0;d<g;d++){var p=e[d].column,r=Yn(a,e[d],h),t=Yn(a,e[d],s),r=0>d-1||p-e[d-1].column-1>r+Yn(a,e[d-1],s)?p-1:p,t=d+1>=g||e[d+1].column-p-1>t+Yn(a,e[d+1],h)?p+1:p,u=0,v=0,A=0,C,K,I,R;if(0>=c)for(var M=e[d].hc.k;M.next();)C=M.value,C.valid&&C.fromVertex.layer!==
b&&(K=ho(C),I=C.portFromColOffset,R=C.portToColOffset,C=C.fromVertex.column,u+=(Math.abs(p+R-(C+I))+1)*K,v+=(Math.abs(r+R-(C+I))+1)*K,A+=(Math.abs(t+R-(C+I))+1)*K);if(0<=c)for(M=e[d].ac.k;M.next();)C=M.value,C.valid&&C.toVertex.layer!==b&&(K=ho(C),I=C.portFromColOffset,R=C.portToColOffset,C=C.toVertex.column,u+=(Math.abs(p+I-(C+R))+1)*K,v+=(Math.abs(r+I-(C+R))+1)*K,A+=(Math.abs(t+I-(C+R))+1)*K);R=I=K=0;C=k[e[d].index];M=l[e[d].index];-1!==C&&(K+=Math.abs(C-p),I+=Math.abs(C-r),R+=Math.abs(C-t));-1!==
M&&(K+=Math.abs(M-p),I+=Math.abs(M-r),R+=Math.abs(M-t));if(v<u||v===u&&I<K)n=m=h,e[d].column=r;if(A<u||A===u&&R<K)n=m=h,e[d].column=t}}Zn(a,b,e);a.normalize();return m}
function Oo(a,b,c){x&&(z.p(b,uk,"medianStraighten:unfixedLayer"),z.p(c,uk,"medianStraighten:direction"));var d=Xn(a,b),e=a.wd[b],g=to(a,b,c),k=[];for(c=0;c<e;c++)k[c]=g[c];for(g=h;g;){g=s;for(c=0;c<e;c++){var l=d[c].column,m=Yn(a,d[c],h),n=Yn(a,d[c],s),p=0,r;-1===k[c]?0===c&&c===e-1?p=l:0===c?(r=d[c+1].column,p=r-l===n+Yn(a,d[c+1],h)?l-1:l):c===e-1?(r=d[c-1].column,p=l-r===m+Yn(a,d[c-1],s)?l+1:l):(r=d[c-1].column,m=r+Yn(a,d[c-1],s)+m+1,r=d[c+1].column,n=r-Yn(a,d[c+1],h)-n-1,p=(m+n)/2|0):0===c&&c===
e-1?p=k[c]:0===c?(r=d[c+1].column,n=r-Yn(a,d[c+1],h)-n-1,p=Math.min(k[c],n)):c===e-1?(r=d[c-1].column,m=r+Yn(a,d[c-1],s)+m+1,p=Math.max(k[c],m)):(r=d[c-1].column,m=r+Yn(a,d[c-1],s)+m+1,r=d[c+1].column,n=r-Yn(a,d[c+1],h)-n-1,m<k[c]&&k[c]<n?p=k[c]:m>=k[c]?p=m:n<=k[c]&&(p=n));p!==l&&(g=h,d[c].column=p)}}Zn(a,b,d);a.normalize()}
function Ro(a,b){x&&(z.p(b,uk,"packAux:column"),z.p(1,uk,"packAux:direction"));for(var c=h,d=a.network.vertexes.k,e;d.next();){e=d.value;var g=Yn(a,e,h),k=Yn(a,e,s);if(e.column-g<=b&&e.column+k>=b){c=s;break}}g=s;if(c)for(d.reset();d.next();)e=d.value,e.column>b&&(e.column-=1,g=h);return g}
function So(a,b){x&&(z.p(b,uk,"tightPackAux:column"),z.p(1,uk,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.ib;d++)e[d]=s,g[d]=s;for(var k=a.network.vertexes.k;k.next();){d=k.value;var l=d.column-Yn(a,d,h),m=d.column+Yn(a,d,s);l<=b&&m>=b&&(e[d.layer]=h);l<=c&&m>=c&&(g[d.layer]=h)}l=h;c=s;for(d=0;d<=a.ib;d++)l=l&&!(e[d]&&g[d]);if(l)for(k.reset();k.next();)d=k.value,d.column>b&&(d.column-=1,c=h);return c}
function Po(a,b){x&&z.p(b,uk,"componentPack:direction");for(var c=0;c<=a.Bb;c++)for(;Ro(a,c););a.normalize();for(c=0;c<a.Bb;c++)for(;So(a,c););a.normalize();var d,e,g,k;if(0<b)for(c=0;c<=a.Bb;c++){d=oo(a);e=ro(a);for(g=e+1;e<g;)g=e,To(a,c,1),k=ro(a),k>e?po(a,d):k<e&&(e=k,d=oo(a))}if(0>b)for(c=a.Bb;0<=c;c--){d=oo(a);e=ro(a);for(g=e+1;e<g;)g=e,To(a,c,-1),k=ro(a),k>e?po(a,d):k<e&&(e=k,d=oo(a))}a.normalize()}
function To(a,b,c){a.Kf=0;for(var d=a.network.vertexes.k,e;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.column-Yn(a,e,h)<=b&&(e.component=a.Kf);if(0>c)for(d.reset();d.next();)e=d.value,e.column+Yn(a,e,s)>=b&&(e.component=a.Kf);a.Kf++;for(d.reset();d.next();)e=d.value,-1===e.component&&(vo(a,e,a.Kf,-1,h,h),a.Kf++);b=[];for(e=0;e<a.Kf*a.Kf;e++)b[e]=s;var g=[];for(e=0;e<(a.ib+1)*(a.Bb+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var k=e.layer,l=Math.max(0,e.column-
Yn(a,e,h)),m=Math.min(a.Bb,e.column+Yn(a,e,s));l<=m;l++)g[k*(a.Bb+1)+l]=e.component}for(e=0;e<=a.ib;e++){if(0<c)for(l=0;l<a.Bb;l++)-1!==g[e*(a.Bb+1)+l]&&(-1!==g[e*(a.Bb+1)+l+1]&&g[e*(a.Bb+1)+l]!==g[e*(a.Bb+1)+l+1])&&(b[g[e*(a.Bb+1)+l]*a.Kf+g[e*(a.Bb+1)+l+1]]=h);if(0>c)for(l=a.Bb;0<l;l--)-1!==g[e*(a.Bb+1)+l]&&(-1!==g[e*(a.Bb+1)+l-1]&&g[e*(a.Bb+1)+l]!==g[e*(a.Bb+1)+l-1])&&(b[g[e*(a.Bb+1)+l]*a.Kf+g[e*(a.Bb+1)+l-1]]=h)}g=[];for(e=0;e<a.Kf;e++)g[e]=h;k=new J("number");for(k.add(0);0!==k.count;)if(m=k.n[k.count-
1],k.sd(k.count-1),g[m]){g[m]=s;for(e=0;e<a.Kf;e++)b[m*a.Kf+e]&&k.Ed(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.component]&&(e.column-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.component]&&(e.column+=1)}uk.prototype.commitLayout=function(){if(this.Yk)for(var a=Vn(this,h),b=Vn(this,s),c=this.network.edges.k,d;c.next();)d=c.value.link,d!==q&&(d.mb=a,d.qb=b);this.commitNodes();this.bs&&this.commitLinks()};
function Vn(a,b){return 270===a.pa?b?hc:kc:90===a.pa?b?kc:hc:180===a.pa?b?ic:jc:b?jc:ic}
uk.prototype.commitNodes=function(){this.bh=[];this.yg=[];this.mf=[];this.yd=[];for(var a=0;a<=this.ib;a++)this.bh[a]=0,this.yg[a]=0,this.mf[a]=0,this.yd[a]=0;for(var a=this.network.vertexes.k,b,c;a.next();)b=a.value,c=b.layer,this.bh[c]=Math.max(this.bh[c],no(this,b,h)),this.yg[c]=Math.max(this.yg[c],no(this,b,s));b=0;for(var d=this.mn,e=0;e<=this.ib;e++)c=d,0>=this.bh[e]+this.yg[e]&&(c=0),0<e&&(b+=c/2),90===this.pa||0===this.pa?(b+=this.yg[e],this.mf[e]=b,b+=this.bh[e]):(b+=this.bh[e],this.mf[e]=
b,b+=this.yg[e]),e<this.ib&&(b+=c/2),this.yd[e]=b;d=this.nd;for(e=0;e<=this.ib;e++)270===this.pa?(this.mf[e]=d.y+this.mf[e],this.yd[e]=d.y+this.yd[e]):90===this.pa?(this.mf[e]=d.y+b-this.mf[e],this.yd[e]=d.y+b-this.yd[e]):180===this.pa?(this.mf[e]=d.x+this.mf[e],this.yd[e]=d.x+this.yd[e]):(this.mf[e]=d.x+b-this.mf[e],this.yd[e]=d.x+b-this.yd[e]);for(a.reset();a.next();){b=a.value;c=b.layer;var g=b.column|0;270===this.pa||90===this.pa?(e=d.x+this.vd*g,c=this.mf[c]):(e=this.mf[c],c=d.y+this.vd*g);b.Ca=
e;b.Ka=c;b.commit()}};
uk.prototype.commitLinks=function(){for(var a=this.network.edges.k,b,c;a.next();)c=a.value.link,"undefined"!==typeof c&&c!==q&&(c.Zk(),c.Un(),c.li());for(a.reset();a.next();)c=a.value.link,"undefined"!==typeof c&&c!==q&&c.updateRoute();for(a.reset();a.next();)if(b=a.value,c=b.link){c.Zk();var d=c,e=d.da,g=d.ja,k=d.Kc,l=d.td;if(b.valid){if(c.Xe===Bg&&4===c.ta){if(b.rev)var m=e,e=g,g=m,n=k,k=l,l=n;if(b.fromVertex.column===b.toVertex.column){var p=c.getLinkPoint(e,k,c.computeSpot(h),h,s,g,l),r=c.getLinkPoint(g,
l,c.computeSpot(s),s,s,e,k);c.Un();c.Ck(p.x,p.y);c.Ck((2*p.x+r.x)/3,(2*p.y+r.y)/3);c.Ck((p.x+2*r.x)/3,(p.y+2*r.y)/3);c.Ck(r.x,r.y)}else{var t=s,u=s;k!==q&&c.computeSpot(h)===Wb&&(t=h);l!==q&&c.computeSpot(s)===Wb&&(u=h);if(t||u){var v=c.o(0).x,A=c.o(0).y,C=c.o(1).x,K=c.o(1).y,I=c.o(2).x,R=c.o(2).y,M=c.o(3).x,S=c.o(3).y;if(t){90===this.pa||270===this.pa?(C=v,K=(A+S)/2):(C=(v+M)/2,K=A);c.U(1,C,K);var Z=c.getLinkPoint(e,k,c.computeSpot(h),h,s,g,l);c.U(0,Z.x,Z.y)}u&&(90===this.pa||270===this.pa?(I=M,
R=(A+S)/2):(I=(v+M)/2,R=S),c.U(2,I,R),Z=c.getLinkPoint(g,l,c.computeSpot(s),s,s,e,k),c.U(3,Z.x,Z.y))}}}c.li()}else if(b.fromVertex.layer===b.toVertex.layer)c.li();else{var X=s,ea=s,ia,W=c.Rr+1;if(c.Ob)ea=h,ia=c.ta,4<ia&&c.points.removeRange(2,ia-3);else if(c.Xe===Bg)X=h,ia=c.ta,4<ia&&c.points.removeRange(2,ia-3),W=2;else{ia=c.ta;var xa=c.computeSpot(h)===Wb,Oa=c.computeSpot(s)===Wb;2<ia&&xa&&Oa?c.points.removeRange(1,ia-2):3<ia&&xa&&!Oa?c.points.removeRange(1,ia-3):3<ia&&!xa&&Oa?c.points.removeRange(2,
ia-2):4<ia&&(!xa&&!Oa)&&c.points.removeRange(2,ia-3)}var Qa=b.fromVertex,Sa=b.toVertex,Ba,Wa;if(b.rev){for(var Ga;Sa!==q&&Qa!==Sa;){Wa=Ba=q;for(var wb=Sa.hc.k;wb.next()&&!(sc=wb.value,sc.link===b.link&&(Ba=sc.fromVertex,Wa=sc.toVertex,Ba.ed===q)););Ba!==Qa&&(pb=c.o(W-1).x,qb=c.o(W-1).y,La=Ba.Ca,Pa=Ba.Ka,ea?180===this.pa||0===this.pa?2===W?(c.C(W++,pb,qb),c.C(W++,pb,Pa)):(Rf=Wa!==q?Wa.Ka:qb,Rf!==Pa&&(hb=this.yd[Ba.layer-1],c.C(W++,hb,qb),c.C(W++,hb,Pa))):2===W?(c.C(W++,pb,qb),c.C(W++,La,qb)):(nd=Wa!==
q?Wa.Ca:pb,nd!==La&&(hb=this.yd[Ba.layer-1],c.C(W++,pb,hb),c.C(W++,La,hb))):2===W?X?(yb=Math.max(10,this.bh[Sa.layer]),db=Math.max(10,this.yg[Sa.layer]),180===this.pa?(Ga=Sa.V.x,c.C(W++,Ga-yb,Pa),c.C(W++,Ga,Pa),c.C(W++,Ga+db,Pa)):90===this.pa?(Ga=Sa.V.y+Sa.V.height,c.C(W++,La,Ga+db),c.C(W++,La,Ga),c.C(W++,La,Ga-yb)):270===this.pa?(Ga=Sa.V.y,c.C(W++,La,Ga-yb),c.C(W++,La,Ga),c.C(W++,La,Ga+db)):(Ga=Sa.V.x+Sa.V.width,c.C(W++,Ga+db,Pa),c.C(W++,Ga,Pa),c.C(W++,Ga-yb,Pa))):(c.C(W++,pb,qb),180===this.pa||
0===this.pa?c.C(W++,pb,Pa):c.C(W++,La,qb),c.C(W++,La,Pa)):(yb=Math.max(10,this.bh[Ba.layer]),db=Math.max(10,this.yg[Ba.layer]),180===this.pa?(X&&c.C(W++,La-yb,Pa),c.C(W++,La,Pa),X&&c.C(W++,La+db,Pa)):90===this.pa?(X&&c.C(W++,La,Pa+db),c.C(W++,La,Pa),X&&c.C(W++,La,Pa-yb)):270===this.pa?(X&&c.C(W++,La,Pa-yb),c.C(W++,La,Pa),X&&c.C(W++,La,Pa+db)):(X&&c.C(W++,La+db,Pa),c.C(W++,La,Pa),X&&c.C(W++,La-yb,Pa))));Sa=Ba}if(l===q||c.computeSpot(s)!==Wb)if(pb=c.o(W-1).x,qb=c.o(W-1).y,La=c.o(W).x,Pa=c.o(W).y,ea){var qf=
this.yg[Qa.layer],rc;180===this.pa||0===this.pa?(rc=qb,rc>=Qa.V.y&&rc<=Qa.V.bottom&&(Ga=Qa.Ca+qf,rc=rc<Qa.V.y+Qa.V.height/2?Qa.V.y-this.vd/2:Qa.V.bottom+this.vd/2,c.C(W++,Ga,qb),c.C(W++,Ga,rc)),c.C(W++,La,rc)):(rc=pb,rc>=Qa.V.x&&rc<=Qa.V.right&&(Ga=Qa.Ka+qf,rc=rc<Qa.V.x+Qa.V.width/2?Qa.V.x-this.vd/2:Qa.V.right+this.vd/2,c.C(W++,pb,Ga),c.C(W++,rc,Ga)),c.C(W++,rc,Pa));c.C(W++,La,Pa)}else X?(yb=Math.max(10,this.bh[Qa.layer]),db=Math.max(10,this.yg[Qa.layer]),180===this.pa?(Ga=Qa.V.x+Qa.V.width,c.U(W-
2,Ga,qb),c.U(W-1,Ga+db,qb)):90===this.pa?(Ga=Qa.V.y,c.U(W-2,pb,Ga),c.U(W-1,pb,Ga-yb)):270===this.pa?(Ga=Qa.V.y+Qa.V.height,c.U(W-2,pb,Ga),c.U(W-1,pb,Ga+db)):(Ga=Qa.V.x,c.U(W-2,Ga,qb),c.U(W-1,Ga-yb,qb))):(180===this.pa||0===this.pa?c.C(W++,La,qb):c.C(W++,pb,Pa),c.C(W++,La,Pa))}else{for(;Qa!==q&&Qa!==Sa;){Wa=Ba=q;for(var rf=Qa.ac.k,sc;rf.next()&&!(sc=rf.value,sc.link===b.link&&(Ba=sc.toVertex,Wa=sc.fromVertex,Wa.ed!==q&&(Wa=q),Ba.ed===q)););var pb,qb,La,Pa,hb,yb,db;if(Ba!==Sa)if(pb=c.o(W-1).x,qb=c.o(W-
1).y,La=Ba.Ca,Pa=Ba.Ka,ea)if(180===this.pa||0===this.pa){var Rf=Wa!==q?Wa.Ka:qb;Rf!==Pa&&(hb=this.yd[Ba.layer],2===W&&(hb=0===this.pa?Math.max(hb,pb):Math.min(hb,pb)),c.C(W++,hb,qb),c.C(W++,hb,Pa))}else{var nd=Wa!==q?Wa.Ca:pb;nd!==La&&(hb=this.yd[Ba.layer],2===W&&(hb=90===this.pa?Math.max(hb,qb):Math.min(hb,qb)),c.C(W++,pb,hb),c.C(W++,La,hb))}else yb=Math.max(10,this.bh[Ba.layer]),db=Math.max(10,this.yg[Ba.layer]),180===this.pa?(c.C(W++,La+db,Pa),X&&c.C(W++,La,Pa),c.C(W++,La-yb,Pa)):90===this.pa?
(c.C(W++,La,Pa-yb),X&&c.C(W++,La,Pa),c.C(W++,La,Pa+db)):270===this.pa?(c.C(W++,La,Pa+db),X&&c.C(W++,La,Pa),c.C(W++,La,Pa-yb)):(c.C(W++,La-yb,Pa),X&&c.C(W++,La,Pa),c.C(W++,La+db,Pa));Qa=Ba}ea&&(pb=c.o(W-1).x,qb=c.o(W-1).y,La=c.o(W).x,Pa=c.o(W).y,180===this.pa||0===this.pa?qb!==Pa&&(hb=0===this.pa?Math.min(Math.max((La+pb)/2,this.yd[Sa.layer]),La):Math.max(Math.min((La+pb)/2,this.yd[Sa.layer]),La),c.C(W++,hb,qb),c.C(W++,hb,Pa)):pb!==La&&(hb=90===this.pa?Math.min(Math.max((Pa+qb)/2,this.yd[Sa.layer]),
Pa):Math.max(Math.min((Pa+qb)/2,this.yd[Sa.layer]),Pa),c.C(W++,pb,hb),c.C(W++,La,hb)))}if(d!==q&&X){if(k!==q){if(Sb(c.computeSpot(h))){var Ad=c.o(0),Od=c.o(2);Ad.N(Od)||c.U(1,(Ad.x+Od.x)/2,(Ad.y+Od.y)/2)}Z=c.getLinkPoint(e,k,Wb,h,s,g,l);c.U(0,Z.x,Z.y)}l!==q&&(Sb(c.computeSpot(s))&&(Ad=c.o(c.ta-1),Od=c.o(c.ta-3),Ad.N(Od)||c.U(c.ta-2,(Ad.x+Od.x)/2,(Ad.y+Od.y)/2)),Z=c.getLinkPoint(g,l,Wb,s,s,e,k),c.U(c.ta-1,Z.x,Z.y))}c.li();b.commit()}}for(var ce=new J(E),Bd=this.network.edges.k,de;Bd.next();)de=Bd.value.link,
de!==q&&(de.Ob&&!ce.contains(de))&&ce.add(de);if(0<ce.count)if(90===this.pa||270===this.pa){for(var Kg=0,Ib=new J(Uo),sf=ce.k,Pb,lc,Tb;sf.next();)if(Pb=sf.value,Pb!==q&&Pb.Ob)for(var Xa=2;Xa<Pb.ta-3;Xa++)if(lc=Pb.o(Xa),Tb=Pb.o(Xa+1),this.I(lc.y,Tb.y)&&!this.I(lc.x,Tb.x)){var tc=new Uo;tc.layer=Math.floor(lc.y/2);var Se=Pb.o(0),Sf=Pb.o(Pb.ta-1);tc.sb=Se.x*Se.x+Se.y;tc.Gd=Sf.x*Sf.x+Sf.y;tc.ie=Math.min(lc.x,Tb.x);tc.Dd=Math.max(lc.x,Tb.x);tc.index=Xa;tc.link=Pb;if(Xa+2<Pb.ta){var og=Pb.o(Xa-1),Nb=Pb.o(Xa+
2),od=0;og.y<lc.y?od=Nb.y<lc.y?3:lc.x<Tb.x?2:1:og.y>lc.y&&(od=Nb.y>lc.y?0:Tb.x<lc.x?2:1);tc.Bh=od}Ib.add(tc)}if(1<Ib.count){Ib.sort(this.kE);for(var zc=0;zc<Ib.count;){for(var pd=Ib.n[zc].layer,eb=zc+1;eb<Ib.count&&Ib.n[eb].layer===pd;)eb++;if(1<eb-zc)for(var nb=zc;nb<eb;){for(var ec=Ib.n[nb].Dd,zb=zc+1;zb<eb&&Ib.n[zb].ie<ec;)ec=Math.max(ec,Ib.n[zb].Dd),zb++;var uc=zb-nb;if(1<uc){Ib.To(this.Iv,nb,nb+uc);for(var tf=1,Ac=Ib.n[nb].Gd,Db,Xa=nb;Xa<zb;Xa++)Db=Ib.n[Xa],Db.Gd!==Ac&&(tf++,Ac=Db.Gd);Ib.To(this.jE,
nb,nb+uc);for(var Pd=1,Ac=Ib.n[nb].sb,Xa=nb;Xa<zb;Xa++)Db=Ib.n[Xa],Db.sb!==Ac&&(Pd++,Ac=Db.sb);var qe,Eb;tf<Pd?(qe=s,Eb=tf,Ac=Ib.n[nb].Gd,Ib.To(this.Iv,nb,nb+uc)):(qe=h,Eb=Pd,Ac=Ib.n[nb].sb);for(var Qd=0,Xa=nb;Xa<zb;Xa++){Db=Ib.n[Xa];if((qe?Db.sb:Db.Gd)!==Ac)Qd++,Ac=qe?Db.sb:Db.Gd;Pb=Db.link;lc=Pb.o(Db.index);Tb=Pb.o(Db.index+1);var Te=this.hz*(Qd-(Eb-1)/2);if(Pb.xh!==Df||Vo(lc.x,lc.y+Te,Tb.x,Tb.y+Te))Kg++,Pb.Zk(),Pb.U(Db.index,lc.x,lc.y+Te),Pb.U(Db.index+1,Tb.x,Tb.y+Te),Pb.li()}}nb=zb}zc=eb}}}else{for(var re=
0,ob=new J(Uo),uf=ce.k,Fb,fb,Xc;uf.next();)if(Fb=uf.value,Fb!==q&&Fb.Ob)for(var Ub=2;Ub<Fb.ta-3;Ub++)if(fb=Fb.o(Ub),Xc=Fb.o(Ub+1),this.I(fb.x,Xc.x)&&!this.I(fb.y,Xc.y)){var Rd=new Uo;Rd.layer=Math.floor(fb.x/2);var ee=Fb.o(0),fe=Fb.o(Fb.ta-1);Rd.sb=ee.x+ee.y*ee.y;Rd.Gd=fe.x+fe.y*fe.y;Rd.ie=Math.min(fb.y,Xc.y);Rd.Dd=Math.max(fb.y,Xc.y);Rd.index=Ub;Rd.link=Fb;if(Ub+2<Fb.ta){var se=Fb.o(Ub-1),Yc=Fb.o(Ub+2),Cd=0;se.x<fb.x?Cd=Yc.x<fb.x?3:fb.y<Xc.y?2:1:se.x>fb.x&&(Cd=Yc.x>fb.x?0:Xc.y<fb.y?2:1);Rd.Bh=Cd}ob.add(Rd)}if(1<
ob.count){ob.sort(this.kE);for(var rb=0;rb<ob.count;){for(var Ue=ob.n[rb].layer,Ve=rb+1;Ve<ob.count&&ob.n[Ve].layer===Ue;)Ve++;if(1<Ve-rb)for(var vb=rb;vb<Ve;){for(var te=ob.n[vb].Dd,Jb=rb+1;Jb<Ve&&ob.n[Jb].ie<te;)te=Math.max(te,ob.n[Jb].Dd),Jb++;var Bc=Jb-vb;if(1<Bc){ob.To(this.Iv,vb,vb+Bc);for(var Dd=1,Hc=ob.n[vb].Gd,Qb,Ub=vb;Ub<Jb;Ub++)Qb=ob.n[Ub],Qb.Gd!==Hc&&(Dd++,Hc=Qb.Gd);ob.To(this.jE,vb,vb+Bc);for(var ue=1,Hc=ob.n[vb].sb,Ub=vb;Ub<Jb;Ub++)Qb=ob.n[Ub],Qb.sb!==Hc&&(ue++,Hc=Qb.sb);var sb,gb;Dd<
ue?(sb=s,gb=Dd,Hc=ob.n[vb].Gd,ob.To(this.Iv,vb,vb+Bc)):(sb=h,gb=ue,Hc=ob.n[vb].sb);for(var We=0,Ub=vb;Ub<Jb;Ub++){Qb=ob.n[Ub];if((sb?Qb.sb:Qb.Gd)!==Hc)We++,Hc=sb?Qb.sb:Qb.Gd;Fb=Qb.link;fb=Fb.o(Qb.index);Xc=Fb.o(Qb.index+1);var Mc=this.hz*(We-(gb-1)/2);if(Fb.xh!==Df||Vo(fb.x+Mc,fb.y,Xc.x+Mc,Xc.y))re++,Fb.Zk(),Fb.U(Qb.index,fb.x+Mc,fb.y),Fb.U(Qb.index+1,Xc.x+Mc,Xc.y),Fb.li()}}vb=Jb}rb=Ve}}}};function Uo(){this.index=this.Dd=this.ie=this.Gd=this.sb=this.layer=0;this.link=q;this.Bh=0}
z.Vf(Uo,{layer:h,sb:h,Gd:h,ie:h,Dd:h,index:h,link:h,Bh:h});uk.prototype.kE=function(a,b){return!(a instanceof Uo)||!(b instanceof Uo)||a===b?0:a.layer<b.layer?-1:a.layer>b.layer?1:a.ie<b.ie?-1:a.ie>b.ie?1:a.Dd<b.Dd?-1:a.Dd>b.Dd?1:0};uk.prototype.jE=function(a,b){return!(a instanceof Uo)||!(b instanceof Uo)||a===b?0:a.sb<b.sb?-1:a.sb>b.sb||a.Bh<b.Bh?1:a.Bh>b.Bh||a.ie<b.ie?-1:a.ie>b.ie?1:a.Dd<b.Dd?-1:a.Dd>b.Dd?1:0};
uk.prototype.Iv=function(a,b){return!(a instanceof Uo)||!(b instanceof Uo)||a===b?0:a.Gd<b.Gd?-1:a.Gd>b.Gd||a.Bh<b.Bh?1:a.Bh>b.Bh||a.ie<b.ie?-1:a.ie>b.ie?1:a.Dd<b.Dd?-1:a.Dd>b.Dd?1:0};uk.prototype.I=function(a,b){x&&(z.p(a,uk,"isApprox:a"),z.p(b,uk,"isApprox:b"));var c=a-b;return-1<c&&1>c};function Vo(a,b,c,d){x&&(z.p(a,uk,"isUnoccupied2:px"),z.p(b,uk,"isUnoccupied2:py"),z.p(c,uk,"isUnoccupied2:qx"),z.p(d,uk,"isUnoccupied2:qy"));return h}
function Xn(a,b){var c,d=a.wd[b];if(d>=a.zg.length){c=[];var e;for(e=0;e<a.zg.length;e++)c[e]=a.zg[e];a.zg=c}"undefined"===typeof a.zg[d]||a.zg[d]===q?c=[]:(c=a.zg[d],a.zg[d]=q);var d=a.yq[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof Wo&&(c[g.index]=g);return c}function Zn(a,b,c){a.zg[a.wd[b]]=c}z.g(uk,"layerSpacing",uk.prototype.layerSpacing);z.defineProperty(uk,{layerSpacing:"layerSpacing"},w("mn"),function(a){this.mn!==a&&("number"===typeof a&&0<=a)&&(this.mn=a,this.K())});
z.g(uk,"columnSpacing",uk.prototype.fG);z.defineProperty(uk,{fG:"columnSpacing"},w("vd"),function(a){this.vd!==a&&("number"===typeof a&&0<=a)&&(this.vd=a,this.K())});z.g(uk,"direction",uk.prototype.direction);z.defineProperty(uk,{direction:"direction"},w("pa"),function(a){this.pa!==a&&"number"===typeof a&&(this.pa=a,this.K())});z.g(uk,"cycleRemoveOption",uk.prototype.vC);
z.defineProperty(uk,{vC:"cycleRemoveOption"},w("Jm"),function(a){if(this.Jm!==a&&(x&&z.l(a,pa,Pn,"cycleRemoveOption"),a===Qn||a===Kn))this.Jm=a,this.K()});z.g(uk,"layeringOption",uk.prototype.sD);z.defineProperty(uk,{sD:"layeringOption"},w("nn"),function(a){if(this.nn!==a&&(x&&z.l(a,pa,Pn,"layeringOption"),a===Ln||a===wo||a===yo))this.nn=a,this.K()});z.g(uk,"initializeOption",uk.prototype.iD);
z.defineProperty(uk,{iD:"initializeOption"},w("bn"),function(a){if(this.bn!==a&&(x&&z.l(a,pa,Pn,"initializeOption"),a===Mn||a===Eo||a===Co))this.bn=a,this.K()});z.g(uk,"iterations",uk.prototype.sH);z.defineProperty(uk,{sH:"iterations"},w("vl"),function(a){x&&z.p(a,Pn,"iterations");this.vl!==a&&("number"===typeof a&&0<=a)&&(this.vl=a,this.K())});z.g(uk,"aggressiveOption",uk.prototype.$B);
z.defineProperty(uk,{$B:"aggressiveOption"},w("Dm"),function(a){if(this.Dm!==a&&(x&&z.l(a,pa,Pn,"cycleRemoveOption"),a===Io||a===Nn||a===Jo))this.Dm=a,this.K()});z.g(uk,"packOption",uk.prototype.JH);z.defineProperty(uk,{JH:"packOption"},w("Yh"),function(a){this.Yh!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.Yh=a,this.K())});z.g(uk,"setsPortSpots",uk.prototype.Yk);z.defineProperty(uk,{Yk:"setsPortSpots"},w("fh"),function(a){this.fh!==a&&"boolean"===typeof a&&(this.fh=a,this.K())});
z.g(uk,"linkSpacing",uk.prototype.hz);z.defineProperty(uk,{hz:"linkSpacing"},w("gq"),function(a){this.gq!==a&&(this.gq=a,this.K())});z.A(uk,{qJ:"maxLayer"},w("ib"));z.A(uk,{oJ:"maxIndex"},w("Kt"));z.A(uk,{nJ:"maxColumn"},w("Bb"));z.A(uk,{tJ:"minIndexLayer"},w("rq"));z.A(uk,{pJ:"maxIndexLayer"},w("of"));var Kn;uk.CycleDepthFirst=Kn=z.w(uk,"CycleDepthFirst",0);var Qn;uk.CycleGreedy=Qn=z.w(uk,"CycleGreedy",1);var Ln;uk.LayerOptimalLinkLength=Ln=z.w(uk,"LayerOptimalLinkLength",0);var wo;
uk.LayerLongestPathSink=wo=z.w(uk,"LayerLongestPathSink",1);var yo;uk.LayerLongestPathSource=yo=z.w(uk,"LayerLongestPathSource",2);var Mn;uk.InitDepthFirstOut=Mn=z.w(uk,"InitDepthFirstOut",0);var Eo;uk.InitDepthFirstIn=Eo=z.w(uk,"InitDepthFirstIn",1);var Co;uk.InitNaive=Co=z.w(uk,"InitNaive",2);var Io;uk.AggressiveNone=Io=z.w(uk,"AggressiveNone",0);var Nn;uk.AggressiveLess=Nn=z.w(uk,"AggressiveLess",1);var Jo;uk.AggressiveMore=Jo=z.w(uk,"AggressiveMore",2);uk.PackNone=0;var Ko;uk.PackExpand=Ko=1;
var Lo;uk.PackStraighten=Lo=2;var No;uk.PackMedian=No=4;var On;uk.PackAll=On=7;function Pn(){Tm.call(this)}z.ea("LayeredDigraphNetwork",Pn);z.Pa(Pn,Tm);Pn.prototype.createVertex=function(){return new Wo};Pn.prototype.createEdge=function(){return new Xo};function Wo(){Xm.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=q;this.valid=s;this.finish=this.$n=NaN;this.Ml=0;this.tz=this.uz=f}z.ea("LayeredDigraphVertex",Wo);z.Pa(Wo,Xm);
function Xo(){Ym.call(this);this.forest=this.rev=this.valid=s;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}z.ea("LayeredDigraphEdge",Xo);z.Pa(Xo,Ym);function Y(){0<arguments.length&&z.m("TreeLayout constructor cannot take any arguments.");Eh.call(this);this.Fc=new va(Object);this.$h=Yo;this.lf=Zo;this.or=$o;this.ad=ap;this.Df=(new qa(10,10)).freeze();this.sa=new bp;this.ra=new bp}z.ea("TreeLayout",Y);z.Pa(Y,Eh);
Y.prototype.cloneProtected=function(a){Eh.prototype.cloneProtected.call(this,a);a.$h=this.$h;a.or=this.or;a.ad=this.ad;a.Df.assign(this.Df);a.sa.copyInheritedPropertiesFrom(this.sa);a.ra.copyInheritedPropertiesFrom(this.ra)};Y.prototype.createNetwork=function(){var a=new cp;Um(a,this);return a};Y.prototype.makeNetwork=function(a){var b=this.createNetwork();a instanceof y?(dp(this,b,a.Gj,h),dp(this,b,a.links,h)):a instanceof oa?dp(this,b,a.Bc,s):dp(this,b,a.k,s);return b};
function dp(a,b,c,d){for(c=c.k;c.next();){var e=c.value;if(e instanceof D&&e.canLayout()&&"Comment"!==e.Ic&&(!d||e.so))e.vi||(e instanceof oa&&e.Pb===q?dp(a,b,e.Bc,s):b.Kn(e))}for(c.reset();c.next();)if(e=c.value,e instanceof E&&e.canLayout()&&"Comment"!==e.Ic&&(!d||e.so)){var g=e.da;a=e.ja;if(!(g===q||a===q||g===a)&&"Comment"!==g.Ic&&"Comment"!==a.Ic)g=b.dv(g),a=b.dv(a),g!==q&&a!==q&&b.jm(g,a,e)}}
Y.prototype.doLayout=function(a){a||z.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));this.ue!==ep&&(this.nd=Wm(this,this.nd));var b=this.h;b===q&&a instanceof y&&(b=a);this.lf=this.path===Yo&&b!==q?b.Mc?Zo:fp:this.path===Yo?Zo:this.path;if(0<this.network.vertexes.count){this.network.$u();for(b=this.network.vertexes.k;b.next();)a=b.value,a.initialized=s,a.level=0,a.parent=q,a.children=[];
if(0<this.Fc.count){b=this.Fc.k;for(this.Fc=new va(bp);b.next();)a=b.value,a instanceof D?(a=this.network.$l(a),a!==q&&this.Fc.add(a)):a instanceof bp&&this.Fc.add(a)}if(0===this.Fc.count){for(a=this.network.vertexes.k;a.next();)switch(b=a.value,this.lf){case Zo:0===b.hc.count&&this.Fc.add(b);break;case fp:0===b.ac.count&&this.Fc.add(b);break;default:z.m("Unhandled path value "+this.lf.toString())}if(0===this.Fc.count){a=999999;for(var b=q,c=this.network.vertexes.k;c.next();){var d=c.value;switch(this.lf){case Zo:d.hc.count<
a&&(a=d.hc.count,b=d);break;case fp:d.ac.count<a&&(a=d.ac.count,b=d);break;default:z.m("Unhandled path value "+this.lf.toString())}}b!==q&&this.Fc.add(b)}}for(b=this.Fc.k;b.next();)a=b.value,a.initialized||(a.initialized=h,gp(this,a));for(a=this.Fc.k;a.next();)hp(this,a.value);for(a=this.Fc.k;a.next();)ip(this,a.value);for(a=this.Fc.k;a.next();)jp(this,a.value);for(a=this.network.vertexes.k;a.next();)this.addComments(a.value);for(a=this.Fc.k;a.next();)kp(this,a.value);this.arrangeTrees();this.updateParts()}this.network=
q;this.Fc=new va(Object);this.$e=h};
function gp(a,b){x&&z.l(b,bp,Y,"walkTree:v");if(b!==q){switch(a.lf){case Zo:if(0<b.ac.count){for(var c=new J(bp),d=b.BG;d.next();){var e=d.value;lp(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.Je())}break;case fp:if(0<b.hc.count){c=new J(bp);for(d=b.WH;d.next();)e=d.value,lp(a,b,e)&&c.add(e);0<c.count&&(b.children=c.Je())}break;default:z.m("Unhandled path value"+a.lf.toString())}for(var c=b.children,d=c.length,g=0;g<d;g++)e=c[g],e.initialized=h,e.level=b.level+1,e.parent=b,a.Fc.remove(e);for(g=0;g<d;g++)e=
c[g],gp(a,e)}}function lp(a,b,c){x&&z.l(b,bp,Y,"walkOK:v");x&&z.l(c,bp,Y,"walkOK:c");if(c.initialized){var d;x&&z.l(c,bp,Y,"isAncestor:a");x&&z.l(b,bp,Y,"isAncestor:b");if(b===q)d=s;else{for(d=b.parent;d!==q&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return s;a.removeChild(c.parent,c)}return h}
Y.prototype.removeChild=function(a,b){x&&z.l(a,bp,Y,"removeChild:p");x&&z.l(b,bp,Y,"removeChild:c");if(a!==q&&b!==q){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.children=d}}};
function hp(a,b){x&&z.l(b,bp,Y,"initializeTree:v");if(b!==q){a.initializeTreeVertexValues(b);b.alignment===mp&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Ql,e=0,g=b.children,k=g.length,l=0;l<k;l++){var m=g[l];hp(a,m);c+=m.descendantCount+1;d=Math.max(d,m.maxChildrenCount);e=Math.max(e,m.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function np(a,b){x&&z.l(b,bp,Y,"mom:v");switch(a.or){default:case $o:return b.parent!==q?b.parent:a.sa;case op:return b.parent===q?a.sa:b.parent.parent===q?a.ra:b.parent;case pp:if(b.parent!==q)return b.parent.parent!==q?b.parent.parent:a.ra;case qp:var c=h;if(0===b.Ql)c=s;else for(var d=b.children,e=d.length,g=0;g<e;g++)if(0<d[g].Ql){c=s;break}return c&&b.parent!==q?a.ra:b.parent!==q?b.parent:a.sa}}
Y.prototype.initializeTreeVertexValues=function(a){x&&z.l(a,bp,Y,"initializeTreeVertexValues:v");var b=np(this,a);a.copyInheritedPropertiesFrom(b);if(a.parent!==q&&a.parent.alignment===mp){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=h};
function ip(a,b){x&&z.l(b,bp,Y,"assignTree:v");if(b!==q){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ip(a,c[e])}}Y.prototype.assignTreeVertexValues=aa();function jp(a,b){x&&z.l(b,bp,Y,"sortTree:v");if(b!==q){b.alignment!==mp&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)jp(a,c[e])}}
Y.prototype.sortTreeVertexChildren=function(a){x&&z.l(a,bp,Y,"sortTreeVertexChildren:v");switch(a.sorting){case rp:break;case sp:a.children.reverse();break;case tp:a.children.sort(a.comparer);break;case up:a.children.sort(a.comparer);a.children.reverse();break;default:z.m("Unhandled sorting value "+a.sorting.toString())}};
Y.prototype.addComments=function(a){x&&z.l(a,bp,Y,"addComments:v");var b=a.angle,c=a.parent,d=0,e=vp,e=s;c!==q&&(d=c.angle,e=c.alignment,e=wp(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Ql,g=0,k=0,l=0,m=a.commentSpacing;if(a.Cc!==q)for(var n=a.Cc.LC();n.next();){var p=n.value;"Comment"===p.Ic&&p.Db()&&(a.comments===q&&(a.comments=[]),a.comments.push(p),p.pi(),p=p.Ga,b&&!c||!e&&!d&&c||e&&d&&c?(g=Math.max(g,p.width),k+=p.height+Math.abs(l)):(g+=p.width+Math.abs(l),k=Math.max(k,p.height)),l=
m)}a.comments!==q&&(b&&!c||!e&&!d&&c||e&&d&&c?(g+=Math.abs(a.commentMargin),k=Math.max(0,k-a.height)):(k+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),e=z.Kj(0,0,a.V.width+g,a.V.height+k),a.Nb=e,z.Jc(e))};function wp(a){return a===xp||a===mp||a===yp||a===zp}function Ap(a){return a===xp||a===mp}
function Bp(a){x&&z.l(a,bp,Y,"isLeftSideBus:v");var b=a.parent;if(b!==q){var c=b.alignment;if(wp(c)){if(Ap(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===yp)return h}}return s}
Y.prototype.layoutComments=function(a){x&&z.l(a,bp,Y,"layoutComments:v");if(a.comments!==q){var b=a.Cc.Ga,c=a.parent,d=a.angle,e=0,g=vp,g=s;c!==q&&(e=c.angle,g=c.alignment,g=wp(g));for(var d=90===d||270===d,k=90===e||270===e,l=0===a.Ql,m=Bp(a),n=0,p=a.comments,r=p.length,t=z.O(),u=0;u<r;u++){var c=p[u],v=c.Ga;if(d&&!l||!g&&!k&&l||g&&k&&l){if(135<e&&!g||k&&m)if(0<=a.commentMargin){t.q(a.V.x-a.commentMargin-v.width,a.V.y+n);c.location=t;for(var A=c.Wf();A.next();)c=A.value,c.mb=ic,c.qb=jc}else{t.q(a.V.x+
2*a.P.x-a.commentMargin,a.V.y+n);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=jc,c.qb=ic}else if(0<=a.commentMargin){t.q(a.V.x+2*a.P.x+a.commentMargin,a.V.y+n);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=jc,c.qb=ic}else{t.q(a.V.x+a.commentMargin-v.width,a.V.y+n);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=ic,c.qb=jc}n=0<=a.commentSpacing?n+(v.height+a.commentSpacing):n+(a.commentSpacing-v.height)}else{if(135<e&&!g||!k&&m)if(0<=a.commentMargin){t.q(a.V.x+n,a.V.y-a.commentMargin-
v.height);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=hc,c.qb=kc}else{t.q(a.V.x+n,a.V.y+2*a.P.y-a.commentMargin);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=kc,c.qb=hc}else if(0<=a.commentMargin){t.q(a.V.x+n,a.V.y+2*a.P.y+a.commentMargin);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=kc,c.qb=hc}else{t.q(a.V.x+n,a.V.y+a.commentMargin-v.height);c.location=t;for(A=c.Wf();A.next();)c=A.value,c.mb=hc,c.qb=kc}n=0<=a.commentSpacing?n+(v.width+a.commentSpacing):n+(a.commentSpacing-v.width)}}z.B(t);
b=n-a.commentSpacing-(d?b.height:b.width);if(this.lf===Zo)for(a=a.ac;a.next();){if(e=a.value,(c=e.link)&&c.xh!==Df)c.am=0<b?b:NaN}else for(a=a.hc;a.next();)if(e=a.value,(c=e.link)&&c.xh!==Df)c.wm=0<b?b:NaN}};
function kp(a,b){x&&z.l(b,bp,Y,"layoutTree:v");if(b!==q){for(var c=b.children,d=c.length,e=0;e<d;e++)kp(a,c[e]);switch(b.compaction){case Cp:Dp(a,b);break;case Ep:if(b.alignment===mp)Dp(a,b);else if(x&&z.l(b,bp,Y,"layoutTreeBlock:v"),0===b.Ql){var e=b.parent,c=s,d=0,g=vp;e!==q&&(d=e.angle,g=e.alignment,c=wp(g));e=Bp(b);b.ka.q(0,0);b.Za.q(b.width,b.height);b.parent!==q&&b.comments!==q&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Na.q(b.width-2*b.P.x,0):b.Na.q(0,b.height-2*b.P.y):
b.Na.q(0,0);b.es=q;b.vs=q}else{for(var k=Fp(b),c=90===k||270===k,l=0,m=b.children,n=m.length,p=0;p<n;p++)var r=m[p],l=Math.max(l,c?r.Za.width:r.Za.height);var t=b.alignment,e=t===Gp,u=t===Hp,v=wp(t),A=Math.max(0,b.breadthLimit),d=Ip(b),C=b.nodeSpacing,K=Jp(b),I=b.rowSpacing,R=0;if(e||u||b.Po||b.Qo&&1===b.maxGenerationCount)R=Math.max(0,b.rowIndent);var e=b.width,g=b.height,M=0,S=0,Z=0,X=q,ea=q,ia=0,W=0,xa=0,Oa=0,Qa=0,Sa=0,Ba=0,Wa=0,r=0;v&&!Ap(t)&&135<k&&m.reverse();if(Ap(t))if(1<n)for(p=0;p<n;p++)0===
p%2&&p!==n-1?Wa=Math.max(Wa,c?m[p].Za.width:m[p].Za.height):0!==p%2&&(r=Math.max(r,c?m[p].Za.width:m[p].Za.height));else 1===n&&(Wa=c?m[0].Za.width:m[0].Za.height);if(v){switch(t){case xp:W=135>k?Kp(b,m,Wa,M,S):Lp(b,m,Wa,M,S);Wa=W[0];M=W[1];S=W[2];break;case yp:for(p=0;p<n;p++){var r=m[p],Ga=r.Za,X=0===Sa?0:I;c?(r.ka.q(l-Ga.width,Oa+X),M=Math.max(M,Ga.width),S=Math.max(S,Oa+X+Ga.height),Oa+=X+Ga.height):(r.ka.q(xa+X,l-Ga.height),M=Math.max(M,xa+X+Ga.width),S=Math.max(S,Ga.height),xa+=X+Ga.width);
Sa++}break;case zp:for(p=0;p<n;p++)r=m[p],Ga=r.Za,X=0===Sa?0:I,c?(r.ka.q(C/2+b.P.x,Oa+X),M=Math.max(M,Ga.width),S=Math.max(S,Oa+X+Ga.height),Oa+=X+Ga.height):(r.ka.q(xa+X,C/2+b.P.y),M=Math.max(M,xa+X+Ga.width),S=Math.max(S,Ga.height),xa+=X+Ga.width),Sa++}X=Mp(a,2);ea=Mp(a,2);c?(X[0].q(0,0),X[1].q(0,S),ea[0].q(M,0)):(X[0].q(0,0),X[1].q(M,0),ea[0].q(0,S));ea[1].q(M,S)}else for(p=0;p<n;p++){r=m[p];Ga=r.Za;if(c){0<A&&(0<Sa&&xa+C+Ga.width>A)&&(xa<l&&Np(b,t,l-xa,0,Ba,p-1),Qa++,Sa=0,Ba=p,Z=S,xa=0,Oa=135<
k?-S-I:S+I);Op(a,r,0,Oa);var wb=0;if(0===Sa){if(X=r.es,ea=r.vs,ia=Ga.width,W=Ga.height,X===q||ea===q||k!==Fp(r))X=Mp(a,2),ea=Mp(a,2),X[0].q(0,0),X[1].q(0,W),ea[0].q(ia,0),ea[1].q(ia,W)}else W=Pp(a,b,r,X,ea,ia,W),wb=W[0],X=W[1],ea=W[2],ia=W[3],W=W[4],xa<Ga.width&&0>wb&&(Qp(b,-wb,0,Ba,p-1),Rp(X,-wb,0),Rp(ea,-wb,0),wb=0);r.ka.q(wb,Oa);M=Math.max(M,ia);S=Math.max(S,Z+(0===Qa?0:I)+Ga.height);xa=ia}else{0<A&&(0<Sa&&Oa+C+Ga.height>A)&&(Oa<l&&Np(b,t,0,l-Oa,Ba,p-1),Qa++,Sa=0,Ba=p,Z=M,Oa=0,xa=135<k?-M-I:M+
I);Op(a,r,xa,0);wb=0;if(0===Sa){if(X=r.es,ea=r.vs,ia=Ga.width,W=Ga.height,X===q||ea===q||k!==Fp(r))X=Mp(a,2),ea=Mp(a,2),X[0].q(0,0),X[1].q(ia,0),ea[0].q(0,W),ea[1].q(ia,W)}else W=Pp(a,b,r,X,ea,ia,W),wb=W[0],X=W[1],ea=W[2],ia=W[3],W=W[4],Oa<Ga.height&&0>wb&&(Qp(b,0,-wb,Ba,p-1),Rp(X,0,-wb),Rp(ea,0,-wb),wb=0);r.ka.q(xa,wb);S=Math.max(S,W);M=Math.max(M,Z+(0===Qa?0:I)+Ga.width);Oa=W}Sa++}0<Qa&&(c?(S+=Math.max(0,d),xa<M&&Np(b,t,M-xa,0,Ba,n-1),0<R&&(u||Qp(b,R,0,0,n-1),M+=R)):(M+=Math.max(0,d),Oa<S&&Np(b,
t,0,S-Oa,Ba,n-1),0<R&&(u||Qp(b,0,R,0,n-1),S+=R)));u=l=0;switch(t){case Sp:c?l+=M/2-b.P.x-K/2:u+=S/2-b.P.y-K/2;break;case vp:0<Qa?c?l+=M/2-b.P.x-K/2:u+=S/2-b.P.y-K/2:c?(p=m[0].ka.x+m[0].Na.x,Wa=m[n-1].ka.x+m[n-1].Na.x+2*m[n-1].P.x,l+=p+(Wa-p)/2-b.P.x-K/2):(p=m[0].ka.y+m[0].Na.y,Wa=m[n-1].ka.y+m[n-1].Na.y+2*m[n-1].P.y,u+=p+(Wa-p)/2-b.P.y-K/2);break;case Gp:c?(l-=K,M+=K):(u-=K,S+=K);break;case Hp:c?(l+=M-b.width+K,M+=K):(u+=S-b.height+K,S+=K);break;case xp:c?l=1<n?l+(Wa+C/2-b.P.x):l+(m[0].P.x-b.P.x+
m[0].Na.x):u=1<n?u+(Wa+C/2-b.P.y):u+(m[0].P.y-b.P.y+m[0].Na.y);break;case yp:c?l+=M+C/2-b.P.x:u+=S+C/2-b.P.y;break;case zp:break;default:z.m("Unhandled alignment value "+t.toString())}for(p=0;p<n;p++)r=m[p],c?r.ka.q(r.ka.x+r.Na.x-l,r.ka.y+(135<k?(v?-S:-r.Za.height)+r.Na.y-d:g+d+r.Na.y)):r.ka.q(r.ka.x+(135<k?(v?-M:-r.Za.width)+r.Na.x-d:e+d+r.Na.x),r.ka.y+r.Na.y-u);n=m=0;v?c?(M=Tp(b,M,l),0>l&&(l=0),135<k&&(u+=S+d),S+=g+d,t===zp&&(m+=C/2+b.P.x),n+=g+d):(135<k&&(l+=M+d),M+=e+d,S=Up(b,S,u),0>u&&(u=0),
t===zp&&(n+=C/2+b.P.y),m+=e+d):c?(b.comments===q?e>M&&(t=Vp(t,e-M,0),m=t[0],n=t[1],M=e,l=0):M=Tp(b,M,l),0>l&&(m-=l,l=0),135<k&&(u+=S+d),S=Math.max(Math.max(S,g),S+g+d),n+=g+d):(135<k&&(l+=M+d),M=Math.max(Math.max(M,e),M+e+d),b.comments===q?g>S&&(t=Vp(t,0,g-S),m=t[0],n=t[1],S=g,u=0):S=Up(b,S,u),0>u&&(n-=u,u=0),m+=e+d);if(0<Qa)k=Mp(a,4),t=Mp(a,4),c?(k[2].q(0,g+d),k[3].q(k[2].x,S),t[2].q(M,k[2].y),t[3].q(t[2].x,k[3].y)):(k[2].q(e+d,0),k[3].q(M,k[2].y),t[2].q(k[2].x,S),t[3].q(k[3].x,t[2].y));else{k=Mp(a,
X.length+2);t=Mp(a,ea.length+2);for(p=0;p<X.length;p++)v=X[p],k[p+2].q(v.x+m,v.y+n);for(p=0;p<ea.length;p++)v=ea[p],t[p+2].q(v.x+m,v.y+n)}c?(k[0].q(l,0),k[1].q(k[0].x,g),k[2].y<k[1].y&&(k[2].x>k[0].x?k[2].assign(k[1]):k[1].assign(k[2])),k[3].y<k[2].y&&(k[3].x>k[0].x?k[3].assign(k[2]):k[2].assign(k[3])),t[0].q(l+e,0),t[1].q(t[0].x,g),t[2].y<t[1].y&&(t[2].x<t[0].x?t[2].assign(t[1]):t[1].assign(t[2])),t[3].y<t[2].y&&(t[3].x<t[0].x?t[3].assign(t[2]):t[2].assign(t[3])),k[2].y-=d/2,t[2].y-=d/2):(k[0].q(0,
u),k[1].q(e,k[0].y),k[2].x<k[1].x&&(k[2].y>k[0].y?k[2].assign(k[1]):k[1].assign(k[2])),k[3].x<k[2].x&&(k[3].y>k[0].y?k[3].assign(k[2]):k[2].assign(k[3])),t[0].q(0,u+g),t[1].q(e,t[0].y),t[2].x<t[1].x&&(t[2].y<t[0].y?t[2].assign(t[1]):t[1].assign(t[2])),t[3].x<t[2].x&&(t[3].y<t[0].y?t[3].assign(t[2]):t[2].assign(t[3])),k[2].x-=d/2,t[2].x-=d/2);Wp(a,X);Wp(a,ea);b.es=k;b.vs=t;b.Na.q(l,u);b.Za.q(M,S)}break;default:z.m("Unhandled compaction value "+b.compaction.toString())}}}
function Dp(a,b){x&&z.l(b,bp,Y,"layoutTreeNone:v");if(0===b.Ql){var c=s,d=0,e=vp;b.parent!==q&&(d=b.parent.angle,e=b.parent.alignment,c=wp(e));e=Bp(b);b.ka.q(0,0);b.Za.q(b.width,b.height);b.parent!==q&&b.comments!==q&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Na.q(b.width-2*b.P.x,0):b.Na.q(0,b.height-2*b.P.y):b.Na.q(0,0)}else{for(var c=Fp(b),d=90===c||270===c,g=0,e=b.children,k=e.length,l=0;l<k;l++)var m=e[l],g=Math.max(g,d?m.Za.width:m.Za.height);var n=b.alignment,p=n===Gp,
r=n===Hp,t=wp(n),u=Math.max(0,b.breadthLimit),v=Ip(b),A=b.nodeSpacing,C=Jp(b),K=p||r?0:C/2,I=b.rowSpacing,R=0;if(p||r||b.Po||b.Qo&&1===b.maxGenerationCount)R=Math.max(0,b.rowIndent);var p=b.width,M=b.height,S=0,Z=0,X=0,ea=0,ia=0,W=0,xa=0,Oa=0,Qa=0,Sa=0;t&&!Ap(n)&&135<c&&e.reverse();if(Ap(n))if(1<k)for(l=0;l<k;l++){var m=e[l],Ba=m.Za;0===l%2&&l!==k-1?Qa=Math.max(Qa,(d?Ba.width:Ba.height)+Xp(m)-A):0!==l%2&&(Sa=Math.max(Sa,(d?Ba.width:Ba.height)+Xp(m)-A))}else 1===k&&(Qa=d?e[0].Za.width:e[0].Za.height);
if(t)switch(n){case xp:case mp:Z=135>c?Kp(b,e,Qa,S,Z):Lp(b,e,Qa,S,Z);Qa=Z[0];S=Z[1];Z=Z[2];break;case yp:for(l=0;l<k;l++)m=e[l],Ba=m.Za,u=0===xa?0:I,d?(m.ka.q(g-Ba.width,ia+u),S=Math.max(S,Ba.width),Z=Math.max(Z,ia+u+Ba.height),ia+=u+Ba.height):(m.ka.q(ea+u,g-Ba.height),S=Math.max(S,ea+u+Ba.width),Z=Math.max(Z,Ba.height),ea+=u+Ba.width),xa++;break;case zp:for(g=0;g<k;g++)m=e[g],Ba=m.Za,u=0===xa?0:I,d?(m.ka.q(A/2+b.P.x,ia+u),S=Math.max(S,Ba.width),Z=Math.max(Z,ia+u+Ba.height),ia+=u+Ba.height):(m.ka.q(ea+
u,A/2+b.P.y),S=Math.max(S,ea+u+Ba.width),Z=Math.max(Z,Ba.height),ea+=u+Ba.width),xa++}else for(l=0;l<k;l++)m=e[l],Ba=m.Za,d?(0<u&&(0<xa&&ea+A+Ba.width>u)&&(ea<g&&Np(b,n,g-ea,0,Oa,l-1),W++,xa=0,Oa=l,X=Z,ea=0,ia=135<c?-Z-I:Z+I),Sa=0===xa?K:A,Op(a,m,0,ia),m.ka.q(ea+Sa,ia),S=Math.max(S,ea+Sa+Ba.width),Z=Math.max(Z,X+(0===W?0:I)+Ba.height),ea+=Sa+Ba.width):(0<u&&(0<xa&&ia+A+Ba.height>u)&&(ia<g&&Np(b,n,0,g-ia,Oa,l-1),W++,xa=0,Oa=l,X=S,ia=0,ea=135<c?-S-I:S+I),Sa=0===xa?K:A,Op(a,m,ea,0),m.ka.q(ea,ia+Sa),
Z=Math.max(Z,ia+Sa+Ba.height),S=Math.max(S,X+(0===W?0:I)+Ba.width),ia+=Sa+Ba.height),xa++;0<W&&(d?(Z+=Math.max(0,v),ea<S&&Np(b,n,S-ea,0,Oa,k-1),0<R&&(r||Qp(b,R,0,0,k-1),S+=R)):(S+=Math.max(0,v),ia<Z&&Np(b,n,0,Z-ia,Oa,k-1),0<R&&(r||Qp(b,0,R,0,k-1),Z+=R)));R=r=0;switch(n){case Sp:d?r+=S/2-b.P.x-C/2:R+=Z/2-b.P.y-C/2;break;case vp:0<W?d?r+=S/2-b.P.x-C/2:R+=Z/2-b.P.y-C/2:d?(n=e[0].ka.x+e[0].Na.x,A=e[k-1].ka.x+e[k-1].Na.x+2*e[k-1].P.x,r+=n+(A-n)/2-b.P.x-C/2):(n=e[0].ka.y+e[0].Na.y,A=e[k-1].ka.y+e[k-1].Na.y+
2*e[k-1].P.y,R+=n+(A-n)/2-b.P.y-C/2);break;case Gp:d?(r-=C,S+=C):(R-=C,Z+=C);break;case Hp:d?(r+=S-b.width+C,S+=C):(R+=Z-b.height+C,Z+=C);break;case xp:case mp:d?r=1<k?r+(Qa+A/2-b.P.x):r+(e[0].P.x-b.P.x+e[0].Na.x):R=1<k?R+(Qa+A/2-b.P.y):R+(e[0].P.y-b.P.y+e[0].Na.y);break;case yp:d?r+=S+A/2-b.P.x:R+=Z+A/2-b.P.y;break;case zp:break;default:z.m("Unhandled alignment value "+n.toString())}for(l=0;l<k;l++)m=e[l],d?m.ka.q(m.ka.x+m.Na.x-r,m.ka.y+(135<c?(t?-Z:-m.Za.height)+m.Na.y-v:M+v+m.Na.y)):m.ka.q(m.ka.x+
(135<c?(t?-S:-m.Za.width)+m.Na.x-v:p+v+m.Na.x),m.ka.y+m.Na.y-R);d?(S=Tp(b,S,r),0>r&&(r=0),135<c&&(R+=Z+v),Z+=M+v):(135<c&&(r+=S+v),S+=p+v,Z=Up(b,Z,R),0>R&&(R=0));b.Na.q(r,R);b.Za.q(S,Z)}}
function Kp(a,b,c,d,e){x&&z.l(a,bp,Y,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===g){var k=b[0];d=k.Za.width;e=k.Za.height;a=[];a[0]=c;a[1]=d;a[2]=e;return a}for(var l=a.nodeSpacing,m=a.rowSpacing,n=90===Fp(a),p=0,r=0,t=0,u=0;u<g;u++)if(!(0!==u%2||1<g&&u===g-1)){var k=b[u],v=k.Za,A=0===p?0:m;if(n){var C=Xp(k)-l;k.ka.q(c-(v.width+C),t+A);d=Math.max(d,v.width+C);e=Math.max(e,t+A+v.height);t+=A+v.height}else C=Xp(k)-l,k.ka.q(r+A,c-(v.height+C)),e=Math.max(e,
v.height+C),d=Math.max(d,r+A+v.width),r+=A+v.width;p++}var p=0,K=r,I=t;n?(r=c+l,t=0):(r=0,t=c+l);for(u=0;u<g;u++)0!==u%2&&(k=b[u],v=k.Za,A=0===p?0:m,n?(C=Xp(k)-l,k.ka.q(r+C,t+A),d=Math.max(d,r+v.width+C),e=Math.max(e,t+A+v.height),t+=A+v.height):(C=Xp(k)-l,k.ka.q(r+A,t+C),d=Math.max(d,r+A+v.width),e=Math.max(e,t+v.height+C),r+=A+v.width),p++);1<g&&1===g%2&&(k=b[g-1],v=k.Za,b=Yp(k,n?Math.max(Math.abs(I),Math.abs(t)):Math.max(Math.abs(K),Math.abs(r))),n?(k.ka.q(c+l/2-k.P.x-k.Na.x,e+b),n=c+l/2-k.P.x-
k.Na.x,d=Math.max(d,n+v.width),0>n&&(d-=n),e=Math.max(e,Math.max(I,t)+b+v.height),0>k.ka.x&&(c=dq(a,k.ka.x,s,c,l))):(k.ka.q(d+b,c+l/2-k.P.y-k.Na.y),d=Math.max(d,Math.max(K,r)+b+v.width),n=c+l/2-k.P.y-k.Na.y,e=Math.max(e,n+v.height),0>n&&(e-=n),0>k.ka.y&&(c=dq(a,k.ka.y,h,c,l))));a=[];a[0]=c;a[1]=d;a[2]=e;return a}
function Lp(a,b,c,d,e){x&&z.l(a,bp,Y,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===g){var k=b[0];d=k.Za.width;e=k.Za.height;a=[];a[0]=c;a[1]=d;a[2]=e;return a}for(var l=a.nodeSpacing,m=a.rowSpacing,n=270===Fp(a),p=0,r=0,t=0,u=0;u<g;u++)if(!(0!==u%2||1<g&&u===g-1)){var k=b[u],v=k.Za,A=0===p?0:m;if(n){var C=Xp(k)-l,t=t-(A+v.height);k.ka.q(c-(v.width+C),t);d=Math.max(d,v.width+C);e=Math.max(e,Math.abs(t))}else C=Xp(k)-l,r-=A+v.width,k.ka.q(r,c-(v.height+
C)),e=Math.max(e,v.height+C),d=Math.max(d,Math.abs(r));p++}var p=0,K=r,I=t;n?(r=c+l,t=0):(r=0,t=c+l);for(u=0;u<g;u++)0!==u%2&&(k=b[u],v=k.Za,A=0===p?0:m,n?(C=Xp(k)-l,t-=A+v.height,k.ka.q(r+C,t),d=Math.max(d,r+v.width+C),e=Math.max(e,Math.abs(t))):(C=Xp(k)-l,r-=A+v.width,k.ka.q(r,t+C),e=Math.max(e,t+v.height+C),d=Math.max(d,Math.abs(r))),p++);1<g&&1===g%2&&(k=b[g-1],v=k.Za,m=Yp(k,n?Math.max(Math.abs(I),Math.abs(t)):Math.max(Math.abs(K),Math.abs(r))),n?(k.ka.q(c+l/2-k.P.x-k.Na.x,-e-v.height-m),r=c+
l/2-k.P.x-k.Na.x,d=Math.max(d,r+v.width),0>r&&(d-=r),e=Math.max(e,Math.abs(Math.min(I,t))+m+v.height),0>k.ka.x&&(c=dq(a,k.ka.x,s,c,l))):(k.ka.q(-d-v.width-m,c+l/2-k.P.y-k.Na.y),d=Math.max(d,Math.abs(Math.min(K,r))+m+v.width),r=c+l/2-k.P.y-k.Na.y,e=Math.max(e,r+v.height),0>r&&(e-=r),0>k.ka.y&&(c=dq(a,k.ka.y,h,c,l))));for(u=0;u<g;u++)k=b[u],n?k.ka.q(k.ka.x,k.ka.y+e):k.ka.q(k.ka.x+d,k.ka.y);a=[];a[0]=c;a[1]=d;a[2]=e;return a}
function Xp(a){x&&z.l(a,bp,Y,"fixRelativePostions:child");return a.parent===q?0:a.parent.nodeSpacing}function Yp(a){x&&z.l(a,bp,Y,"fixRelativePostions:lastchild");return a.parent===q?0:a.parent.rowSpacing}function dq(a,b,c,d,e){x&&z.l(a,bp,Y,"fixRelativePostions:v");a=a.children;for(var g=a.length,k=0;k<g;k++)c?a[k].ka.q(a[k].ka.x,a[k].ka.y-b):a[k].ka.q(a[k].ka.x-b,a[k].ka.y);b=a[g-1];return Math.max(d,c?b.Na.y+b.P.y-e/2:b.Na.x+b.P.x-e/2)}
function Tp(a,b,c){x&&z.l(a,bp,Y,"calculateSubwidth:v");switch(a.alignment){case vp:case Sp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Gp:return a.width>b?a.width:b;case Hp:return 2*a.P.x>b?a.width:b+a.width-2*a.P.x;case xp:case mp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case yp:return a.width-a.P.x+a.nodeSpacing/2+b;case zp:return Math.max(a.width,a.P.x+a.nodeSpacing/2+b);default:return b}}
function Up(a,b,c){x&&z.l(a,bp,Y,"calculateSubheight:v");switch(a.alignment){case vp:case Sp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Gp:return a.height>b?a.height:b;case Hp:return 2*a.P.y>b?a.height:b+a.height-2*a.P.y;case xp:case mp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case yp:return a.height-a.P.y+a.nodeSpacing/2+b;case zp:return Math.max(a.height,a.P.y+a.nodeSpacing/2+b);default:return b}}
function Vp(a,b,c){x&&z.l(a,pa,Y,"alignOffset:align");switch(a){case Sp:b/=2;c/=2;break;case vp:b/=2;c/=2;break;case Gp:c=b=0;break;case Hp:break;default:z.m("Unhandled alignment value "+a.toString())}a=[];a[0]=b;a[1]=c;return a}function Np(a,b,c,d,e,g){x&&z.l(a,bp,Y,"shiftRelPosAlign:v");x&&z.l(b,pa,Y,"shiftRelPosAlign:align");b=Vp(b,c,d);Qp(a,b[0],b[1],e,g)}function Qp(a,b,c,d,e){x&&z.l(a,bp,Y,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.children;d<=e;d++){var g=a[d].ka;g.x+=b;g.y+=c}}
function Op(a,b,c,d){x&&(z.l(b,bp,Y,"recordMidPoints:v"),z.j(c,"number",Y,"recordMidPoints:x"),z.j(d,"number",Y,"recordMidPoints:y"));var e=b.parent;switch(a.lf){case Zo:for(a=b.hc;a.next();)b=a.value,b.fromVertex===e&&b.Hq.q(c,d);break;case fp:for(a=b.ac;a.next();)b=a.value,b.toVertex===e&&b.Hq.q(c,d);break;default:z.m("Unhandled path value "+a.lf.toString())}}function Rp(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Pp(a,b,c,d,e,g,k){x&&z.l(b,bp,Y,"mergeFringes:parent");x&&z.l(c,bp,Y,"mergeFringes:child");var l=Fp(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=g;e=k;var r=c.es,t=c.vs;k=c.Za;var u=m?Math.max(e,k.height):Math.max(d,k.width);if(r===q||l!==Fp(c))r=Mp(a,2),t=Mp(a,2),m?(r[0].q(0,0),r[1].q(0,k.height),t[0].q(k.width,0),t[1].q(t[0].x,r[1].y)):(r[0].q(0,0),r[1].q(k.width,0),t[0].q(0,k.height),t[1].q(r[1].x,t[0].y));if(m){c=d;d=9999999;if(!(p===q||2>p.length||r===q||2>r.length))for(g=e=0;e<
p.length&&g<r.length;){var l=p[e],v=r[g],m=v.x,A=v.y,m=m+c,C=l;e+1<p.length&&(C=p[e+1]);var K=v,v=K.x,K=K.y;g+1<r.length&&(K=r[g+1],v=K.x,K=K.y,v+=c);var I=d;l.y===A?I=m-l.x:l.y>A&&l.y<K?I=m+(l.y-A)/(K-A)*(v-m)-l.x:A>l.y&&A<C.y&&(I=m-(l.x+(A-l.y)/(C.y-l.y)*(C.x-l.x)));I<d&&(d=I);C.y<=l.y?e++:K<=A?g++:(C.y<=K&&e++,K<=C.y&&g++)}c-=d;c+=n;e=r;g=c;if(b===q||2>b.length||e===q||2>e.length)d=q;else{n=Mp(a,b.length+e.length);for(d=m=l=0;m<e.length&&e[m].y<b[0].y;)A=e[m++],n[d++].q(A.x+g,A.y);for(;l<b.length;)A=
b[l++],n[d++].q(A.x,A.y);for(l=b[b.length-1].y;m<e.length&&e[m].y<=l;)m++;for(;m<e.length&&e[m].y>l;)A=e[m++],n[d++].q(A.x+g,A.y);e=Mp(a,d);for(l=0;l<d;l++)e[l].assign(n[l]);Wp(a,n);d=e}m=t;A=c;if(p===q||2>p.length||m===q||2>m.length)e=q;else{n=Mp(a,p.length+m.length);for(g=C=e=0;e<p.length&&p[e].y<m[0].y;)l=p[e++],n[g++].q(l.x,l.y);for(;C<m.length;)l=m[C++],n[g++].q(l.x+A,l.y);for(m=m[m.length-1].y;e<p.length&&p[e].y<=m;)e++;for(;e<p.length&&p[e].y>m;)l=p[e++],n[g++].q(l.x,l.y);l=Mp(a,g);for(e=0;e<
g;e++)l[e].assign(n[e]);Wp(a,n);e=l}g=Math.max(0,c)+k.width;k=u}else{c=e;d=9999999;if(!(p===q||2>p.length||r===q||2>r.length))for(g=e=0;e<p.length&&g<r.length;)l=p[e],v=r[g],m=v.x,A=v.y,A+=c,C=l,e+1<p.length&&(C=p[e+1]),K=v,v=K.x,K=K.y,g+1<r.length&&(K=r[g+1],v=K.x,K=K.y,K+=c),I=d,l.x===m?I=A-l.y:l.x>m&&l.x<v?I=A+(l.x-m)/(v-m)*(K-A)-l.y:m>l.x&&m<C.x&&(I=A-(l.y+(m-l.x)/(C.x-l.x)*(C.y-l.y))),I<d&&(d=I),C.x<=l.x?e++:v<=m?g++:(C.x<=v&&e++,v<=C.x&&g++);c-=d;c+=n;e=r;g=c;if(b===q||2>b.length||e===q||2>
e.length)d=q;else{n=Mp(a,b.length+e.length);for(d=m=l=0;m<e.length&&e[m].x<b[0].x;)A=e[m++],n[d++].q(A.x,A.y+g);for(;l<b.length;)A=b[l++],n[d++].q(A.x,A.y);for(l=b[b.length-1].x;m<e.length&&e[m].x<=l;)m++;for(;m<e.length&&e[m].x>l;)A=e[m++],n[d++].q(A.x,A.y+g);e=Mp(a,d);for(l=0;l<d;l++)e[l].assign(n[l]);Wp(a,n);d=e}m=t;A=c;if(p===q||2>p.length||m===q||2>m.length)e=q;else{n=Mp(a,p.length+m.length);for(g=C=e=0;e<p.length&&p[e].x<m[0].x;)l=p[e++],n[g++].q(l.x,l.y);for(;C<m.length;)l=m[C++],n[g++].q(l.x,
l.y+A);for(m=m[m.length-1].x;e<p.length&&p[e].x<=m;)e++;for(;e<p.length&&p[e].x>m;)l=p[e++],n[g++].q(l.x,l.y);l=Mp(a,g);for(e=0;e<g;e++)l[e].assign(n[e]);Wp(a,n);e=l}g=u;k=Math.max(0,c)+k.height}Wp(a,b);Wp(a,r);Wp(a,p);Wp(a,t);a=[];a[0]=c;a[1]=d;a[2]=e;a[3]=g;a[4]=k;return a}function Mp(a,b){a.ir||(a.ir=[]);var c=a.ir[b];if(c!==f&&(c=c.pop(),c!==f))return c;for(var c=[],d=0;d<b;d++)c[d]=new G;return c}function Wp(a,b){if(a.ir){var c=b.length,d=a.ir[c];d===f&&(d=[],a.ir[c]=d);d.push(b)}}
Y.prototype.arrangeTrees=function(){if(this.ad===ep)for(var a=this.Fc.k;a.next();){var b=a.value,c=b.Cc;if(c!==q){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);eq(this,b,c,d)}}else{a=this.nd;c=a.x;d=a.y;for(a=this.Fc.k;a.next();)switch(b=a.value,eq(this,b,c+b.Na.x,d+b.Na.y),this.ad){case ap:d+=b.Za.height+this.Df.height;break;case fq:c+=b.Za.width+this.Df.width;break;default:z.m("Unhandled arrangement value "+this.ad.toString())}}};
function eq(a,b,c,d){if(b!==q){x&&z.l(b,bp,Y,"assignAbsolutePositions:v");b.x=c;b.y=d;b=b.children;for(var e=b.length,g=0;g<e;g++){var k=b[g];eq(a,k,c+k.ka.x,d+k.ka.y)}}}Y.prototype.commitLayout=function(){this.Sz();this.commitNodes();this.bs&&this.commitLinks()};Y.prototype.commitNodes=function(){for(var a=this.network.vertexes.k,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)};Y.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};
Y.prototype.Sz=function(){for(var a=this.Fc.k;a.next();)gq(this,a.value)};function gq(a,b){if(b!==q){x&&z.l(b,bp,Y,"setPortSpotsTree:v");a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)gq(a,c[e])}}
Y.prototype.setPortSpots=function(a){x&&z.l(a,bp,Y,"setPortSpots:v");var b=a.alignment;if(wp(b)){x&&z.l(a,bp,Y,"setPortSpotsBus:v");x&&z.l(b,pa,Y,"setPortSpots:align");var c=this.lf===Zo,d=Fp(a),e;switch(d){case 0:e=jc;break;case 90:e=kc;break;case 180:e=ic;break;default:e=hc}var g=a.children,k=g.length;switch(b){case xp:case mp:for(b=0;b<k;b++){var l=g[b],l=c?l.hc:l.ac;if(l.next()){var m=l.value,m=m.link;if(m!==q){var n=90===d||270===d?ic:hc;if(1===k||b===k-1&&1===k%2)switch(d){case 0:n=ic;break;
case 90:n=hc;break;case 180:n=jc;break;default:n=kc}else 0===b%2&&(n=90===d||270===d?jc:kc);c?(a.setsPortSpot&&(m.mb=e),a.setsChildPortSpot&&(m.qb=n)):(a.setsPortSpot&&(m.mb=n),a.setsChildPortSpot&&(m.qb=e))}}}break;case yp:n=90===d||270===d?jc:kc;for(l=c?a.ac:a.hc;l.next();)m=l.value,m=m.link,m!==q&&(c?(a.setsPortSpot&&(m.mb=e),a.setsChildPortSpot&&(m.qb=n)):(a.setsPortSpot&&(m.mb=n),a.setsChildPortSpot&&(m.qb=e)));break;case zp:n=90===d||270===d?ic:hc;for(l=c?a.ac:a.hc;l.next();)m=l.value,m=m.link,
m!==q&&(c?(a.setsPortSpot&&(m.mb=e),a.setsChildPortSpot&&(m.qb=n)):(a.setsPortSpot&&(m.mb=n),a.setsChildPortSpot&&(m.qb=e)))}}else if(c=Fp(a),this.lf===Zo)for(d=a.ac;d.next();){if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Vb(a.portSpot))switch(c){case 0:e.mb=jc;break;case 90:e.mb=kc;break;case 180:e.mb=ic;break;default:e.mb=hc}else e.mb=a.portSpot;if(a.setsChildPortSpot)if(Vb(a.childPortSpot))switch(c){case 0:e.qb=ic;break;case 90:e.qb=hc;break;case 180:e.qb=jc;break;default:e.qb=kc}else e.qb=
a.childPortSpot}}else for(d=a.hc;d.next();)if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Vb(a.portSpot))switch(c){case 0:e.qb=jc;break;case 90:e.qb=kc;break;case 180:e.qb=ic;break;default:e.qb=hc}else e.qb=a.portSpot;if(a.setsChildPortSpot)if(Vb(a.childPortSpot))switch(c){case 0:e.mb=ic;break;case 90:e.mb=hc;break;case 180:e.mb=jc;break;default:e.mb=kc}else e.mb=a.childPortSpot}};function Fp(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Ip(a){x&&z.l(a,bp,Y,"computeLayerSpacing:v");var b=Fp(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}function Jp(a){x&&z.l(a,bp,Y,"computeNodeIndent:v");var b=Fp(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
z.g(Y,"roots",Y.prototype.TH);z.defineProperty(Y,{TH:"roots"},w("Fc"),function(a){this.Fc!==a&&(z.l(a,va,Y,"roots"),this.Fc=a,this.K())});z.g(Y,"path",Y.prototype.path);z.defineProperty(Y,{path:"path"},w("$h"),function(a){this.$h!==a&&(z.l(a,pa,Y,"path"),this.$h=a,this.K())});z.g(Y,"treeStyle",Y.prototype.ME);z.defineProperty(Y,{ME:"treeStyle"},w("or"),function(a){if(this.ad!==a&&(x&&z.l(a,pa,Y,"treeStyle"),a===$o||a===pp||a===qp||a===op))this.or=a,this.K()});z.g(Y,"arrangement",Y.prototype.ue);
z.defineProperty(Y,{ue:"arrangement"},w("ad"),function(a){if(this.ad!==a&&(x&&z.l(a,pa,Y,"arrangement"),a===ap||a===fq||a===ep))this.ad=a,this.K()});z.g(Y,"arrangementSpacing",Y.prototype.Lu);z.defineProperty(Y,{Lu:"arrangementSpacing"},w("Df"),function(a){this.Df.N(a)||(this.Df.assign(a),this.K())});z.g(Y,"rootDefaults",Y.prototype.SH);z.defineProperty(Y,{SH:"rootDefaults"},w("sa"),function(a){this.sa!==a&&(x&&z.l(a,bp,Y,"rootDefaults"),this.sa=a,this.K())});z.g(Y,"alternateDefaults",Y.prototype.PF);
z.defineProperty(Y,{PF:"alternateDefaults"},w("ra"),function(a){this.ra!==a&&(x&&z.l(a,bp,Y,"alternateDefaults"),this.ra=a,this.K())});z.g(Y,"sorting",Y.prototype.sorting);z.defineProperty(Y,{sorting:"sorting"},function(){return this.sa.sorting},function(a){if(this.sa.sorting!==a&&(x&&z.l(a,pa,Y,"sorting"),a===rp||a===sp||a===tp||up))this.sa.sorting=a,this.K()});z.g(Y,"comparer",Y.prototype.comparer);
z.defineProperty(Y,{comparer:"comparer"},function(){return this.sa.comparer},function(a){this.sa.comparer!==a&&(x&&z.j(a,"function",Y,"comparer"),this.sa.comparer=a,this.K())});z.g(Y,"angle",Y.prototype.angle);z.defineProperty(Y,{angle:"angle"},function(){return this.sa.angle},function(a){if(this.sa.angle!==a&&(0===a||90===a||180===a||270===a))this.sa.angle=a,this.K()});z.g(Y,"alignment",Y.prototype.alignment);
z.defineProperty(Y,{alignment:"alignment"},function(){return this.sa.alignment},function(a){this.sa.alignment!==a&&(x&&z.wb(a,Y,Y,"alignment"),this.sa.alignment=a,this.K())});z.g(Y,"nodeIndent",Y.prototype.nodeIndent);z.defineProperty(Y,{nodeIndent:"nodeIndent"},function(){return this.sa.nodeIndent},function(a){this.sa.nodeIndent!==a&&0<=a&&(this.sa.nodeIndent=a,this.K())});z.g(Y,"nodeIndentPastParent",Y.prototype.nodeIndentPastParent);
z.defineProperty(Y,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.sa.nodeIndentPastParent},function(a){this.sa.nodeIndentPastParent!==a&&(0<=a&&1>=a)&&(this.sa.nodeIndentPastParent=a,this.K())});z.g(Y,"nodeSpacing",Y.prototype.nodeSpacing);z.defineProperty(Y,{nodeSpacing:"nodeSpacing"},function(){return this.sa.nodeSpacing},function(a){this.sa.nodeSpacing!==a&&(this.sa.nodeSpacing=a,this.K())});z.g(Y,"layerSpacing",Y.prototype.layerSpacing);
z.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.sa.layerSpacing},function(a){this.sa.layerSpacing!==a&&(this.sa.layerSpacing=a,this.K())});z.g(Y,"layerSpacingParentOverlap",Y.prototype.layerSpacingParentOverlap);z.defineProperty(Y,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.sa.layerSpacingParentOverlap},function(a){this.sa.layerSpacingParentOverlap!==a&&(0<=a&&1>=a)&&(this.sa.layerSpacingParentOverlap=a,this.K())});z.g(Y,"compaction",Y.prototype.compaction);
z.defineProperty(Y,{compaction:"compaction"},function(){return this.sa.compaction},function(a){if(this.sa.compaction!==a&&(x&&z.l(a,pa,Y,"compaction"),a===Cp||a===Ep))this.sa.compaction=a,this.K()});z.g(Y,"breadthLimit",Y.prototype.breadthLimit);z.defineProperty(Y,{breadthLimit:"breadthLimit"},function(){return this.sa.breadthLimit},function(a){this.sa.breadthLimit!==a&&0<=a&&(this.sa.breadthLimit=a,this.K())});z.g(Y,"rowSpacing",Y.prototype.rowSpacing);
z.defineProperty(Y,{rowSpacing:"rowSpacing"},function(){return this.sa.rowSpacing},function(a){this.sa.rowSpacing!==a&&(this.sa.rowSpacing=a,this.K())});z.g(Y,"rowIndent",Y.prototype.rowIndent);z.defineProperty(Y,{rowIndent:"rowIndent"},function(){return this.sa.rowIndent},function(a){this.sa.rowIndent!==a&&0<=a&&(this.sa.rowIndent=a,this.K())});z.g(Y,"commentSpacing",Y.prototype.commentSpacing);
z.defineProperty(Y,{commentSpacing:"commentSpacing"},function(){return this.sa.commentSpacing},function(a){this.sa.commentSpacing!==a&&(this.sa.commentSpacing=a,this.K())});z.g(Y,"commentMargin",Y.prototype.commentMargin);z.defineProperty(Y,{commentMargin:"commentMargin"},function(){return this.sa.commentMargin},function(a){this.sa.commentMargin!==a&&(this.sa.commentMargin=a,this.K())});z.g(Y,"setsPortSpot",Y.prototype.setsPortSpot);
z.defineProperty(Y,{setsPortSpot:"setsPortSpot"},function(){return this.sa.setsPortSpot},function(a){this.sa.setsPortSpot!==a&&(this.sa.setsPortSpot=a,this.K())});z.g(Y,"portSpot",Y.prototype.portSpot);z.defineProperty(Y,{portSpot:"portSpot"},function(){return this.sa.portSpot},function(a){this.sa.portSpot.N(a)||(this.sa.portSpot=a,this.K())});z.g(Y,"setsChildPortSpot",Y.prototype.setsChildPortSpot);
z.defineProperty(Y,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.sa.setsChildPortSpot},function(a){this.sa.setsChildPortSpot!==a&&(this.sa.setsChildPortSpot=a,this.K())});z.g(Y,"childPortSpot",Y.prototype.childPortSpot);z.defineProperty(Y,{childPortSpot:"childPortSpot"},function(){return this.sa.childPortSpot},function(a){this.sa.childPortSpot.N(a)||(this.sa.childPortSpot=a,this.K())});z.g(Y,"alternateSorting",Y.prototype.$F);
z.defineProperty(Y,{$F:"alternateSorting"},function(){return this.ra.sorting},function(a){if(this.ra.sorting!==a&&(x&&z.l(a,pa,Y,"alternateSorting"),a===rp||a===sp||a===tp||up))this.ra.sorting=a,this.K()});z.g(Y,"alternateComparer",Y.prototype.NF);z.defineProperty(Y,{NF:"alternateComparer"},function(){return this.ra.comparer},function(a){this.ra.comparer!==a&&(x&&z.j(a,"function",Y,"alternateComparer"),this.ra.comparer=a,this.K())});z.g(Y,"alternateAngle",Y.prototype.HF);
z.defineProperty(Y,{HF:"alternateAngle"},function(){return this.ra.angle},function(a){if(this.ra.angle!==a&&(0===a||90===a||180===a||270===a))this.ra.angle=a,this.K()});z.g(Y,"alternateAlignment",Y.prototype.GF);z.defineProperty(Y,{GF:"alternateAlignment"},function(){return this.ra.alignment},function(a){this.ra.alignment!==a&&(x&&z.wb(a,Y,Y,"alternateAlignment"),this.ra.alignment=a,this.K())});z.g(Y,"alternateNodeIndent",Y.prototype.SF);
z.defineProperty(Y,{SF:"alternateNodeIndent"},function(){return this.ra.nodeIndent},function(a){this.ra.nodeIndent!==a&&0<=a&&(this.ra.nodeIndent=a,this.K())});z.g(Y,"alternateNodeIndentPastParent",Y.prototype.TF);z.defineProperty(Y,{TF:"alternateNodeIndentPastParent"},function(){return this.ra.nodeIndentPastParent},function(a){this.ra.nodeIndentPastParent!==a&&(0<=a&&1>=a)&&(this.ra.nodeIndentPastParent=a,this.K())});z.g(Y,"alternateNodeSpacing",Y.prototype.UF);
z.defineProperty(Y,{UF:"alternateNodeSpacing"},function(){return this.ra.nodeSpacing},function(a){this.ra.nodeSpacing!==a&&(this.ra.nodeSpacing=a,this.K())});z.g(Y,"alternateLayerSpacing",Y.prototype.QF);z.defineProperty(Y,{QF:"alternateLayerSpacing"},function(){return this.ra.layerSpacing},function(a){this.ra.layerSpacing!==a&&(this.ra.layerSpacing=a,this.K())});z.g(Y,"alternateLayerSpacingParentOverlap",Y.prototype.RF);
z.defineProperty(Y,{RF:"alternateLayerSpacingParentOverlap"},function(){return this.ra.layerSpacingParentOverlap},function(a){this.ra.layerSpacingParentOverlap!==a&&(0<=a&&1>=a)&&(this.ra.layerSpacingParentOverlap=a,this.K())});z.g(Y,"alternateCompaction",Y.prototype.MF);z.defineProperty(Y,{MF:"alternateCompaction"},function(){return this.ra.compaction},function(a){if(this.ra.compaction!==a&&(x&&z.l(a,pa,Y,"alternateCompaction"),a===Cp||a===Ep))this.ra.compaction=a,this.K()});
z.g(Y,"alternateBreadthLimit",Y.prototype.IF);z.defineProperty(Y,{IF:"alternateBreadthLimit"},function(){return this.ra.breadthLimit},function(a){this.ra.breadthLimit!==a&&0<=a&&(this.ra.breadthLimit=a,this.K())});z.g(Y,"alternateRowSpacing",Y.prototype.XF);z.defineProperty(Y,{XF:"alternateRowSpacing"},function(){return this.ra.rowSpacing},function(a){this.ra.rowSpacing!==a&&(this.ra.rowSpacing=a,this.K())});z.g(Y,"alternateRowIndent",Y.prototype.WF);
z.defineProperty(Y,{WF:"alternateRowIndent"},function(){return this.ra.rowIndent},function(a){this.ra.rowIndent!==a&&0<=a&&(this.ra.rowIndent=a,this.K())});z.g(Y,"alternateCommentSpacing",Y.prototype.LF);z.defineProperty(Y,{LF:"alternateCommentSpacing"},function(){return this.ra.commentSpacing},function(a){this.ra.commentSpacing!==a&&(this.ra.commentSpacing=a,this.K())});z.g(Y,"alternateCommentMargin",Y.prototype.KF);
z.defineProperty(Y,{KF:"alternateCommentMargin"},function(){return this.ra.commentMargin},function(a){this.ra.commentMargin!==a&&(this.ra.commentMargin=a,this.K())});z.g(Y,"alternateSetsPortSpot",Y.prototype.ZF);z.defineProperty(Y,{ZF:"alternateSetsPortSpot"},function(){return this.ra.setsPortSpot},function(a){this.ra.setsPortSpot!==a&&(this.ra.setsPortSpot=a,this.K())});z.g(Y,"alternatePortSpot",Y.prototype.VF);
z.defineProperty(Y,{VF:"alternatePortSpot"},function(){return this.ra.portSpot},function(a){this.ra.portSpot.N(a)||(this.ra.portSpot=a,this.K())});z.g(Y,"alternateSetsChildPortSpot",Y.prototype.YF);z.defineProperty(Y,{YF:"alternateSetsChildPortSpot"},function(){return this.ra.setsChildPortSpot},function(a){this.ra.setsChildPortSpot!==a&&(this.ra.setsChildPortSpot=a,this.K())});z.g(Y,"alternateChildPortSpot",Y.prototype.JF);
z.defineProperty(Y,{JF:"alternateChildPortSpot"},function(){return this.ra.childPortSpot},function(a){this.ra.childPortSpot.N(a)||(this.ra.childPortSpot=a,this.K())});var Yo;Y.PathDefault=Yo=z.w(Y,"PathDefault",-1);var Zo;Y.PathDestination=Zo=z.w(Y,"PathDestination",0);var fp;Y.PathSource=fp=z.w(Y,"PathSource",1);var rp;Y.SortingForwards=rp=z.w(Y,"SortingForwards",10);var sp;Y.SortingReverse=sp=z.w(Y,"SortingReverse",11);var tp;Y.SortingAscending=tp=z.w(Y,"SortingAscending",12);var up;
Y.SortingDescending=up=z.w(Y,"SortingDescending",13);var Sp;Y.AlignmentCenterSubtrees=Sp=z.w(Y,"AlignmentCenterSubtrees",20);var vp;Y.AlignmentCenterChildren=vp=z.w(Y,"AlignmentCenterChildren",21);var Gp;Y.AlignmentStart=Gp=z.w(Y,"AlignmentStart",22);var Hp;Y.AlignmentEnd=Hp=z.w(Y,"AlignmentEnd",23);var xp;Y.AlignmentBus=xp=z.w(Y,"AlignmentBus",24);var mp;Y.AlignmentBusBranching=mp=z.w(Y,"AlignmentBusBranching",25);var yp;Y.AlignmentTopLeftBus=yp=z.w(Y,"AlignmentTopLeftBus",26);var zp;
Y.AlignmentBottomRightBus=zp=z.w(Y,"AlignmentBottomRightBus",27);var Cp;Y.CompactionNone=Cp=z.w(Y,"CompactionNone",30);var Ep;Y.CompactionBlock=Ep=z.w(Y,"CompactionBlock",31);var $o;Y.StyleLayered=$o=z.w(Y,"StyleLayered",40);var qp;Y.StyleLastParents=qp=z.w(Y,"StyleLastParents",41);var pp;Y.StyleAlternating=pp=z.w(Y,"StyleAlternating",42);var op;Y.StyleRootOnly=op=z.w(Y,"StyleRootOnly",43);var ap;Y.ArrangementVertical=ap=z.w(Y,"ArrangementVertical",50);var fq;
Y.ArrangementHorizontal=fq=z.w(Y,"ArrangementHorizontal",51);var ep;Y.ArrangementFixedRoots=ep=z.w(Y,"ArrangementFixedRoots",52);function cp(){Tm.call(this)}z.ea("TreeNetwork",cp);z.Pa(cp,Tm);cp.prototype.createVertex=function(){return new bp};cp.prototype.createEdge=function(){return new hq};
function bp(){Xm.call(this);this.initialized=s;this.parent=q;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=q;this.ka=new G(0,0);this.Za=new qa(0,0);this.Na=new G(0,0);this.Qo=this.Po=this.UH=s;this.vs=this.es=q;this.sorting=rp;this.comparer=cn;this.angle=0;this.alignment=vp;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Ep;this.breadthLimit=0;this.rowSpacing=
25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=h;this.portSpot=Zb;this.setsChildPortSpot=h;this.childPortSpot=Zb}z.ea("TreeVertex",bp);z.Pa(bp,Xm);
bp.prototype.copyInheritedPropertiesFrom=function(a){a!==q&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};z.A(bp,{Ql:"childrenCount"},function(){return this.children.length});z.g(bp,"relativePosition",bp.prototype.NH);z.defineProperty(bp,{NH:"relativePosition"},w("ka"),function(a){z.l(a,G,bp,"relativePosition");this.ka.set(a)});z.g(bp,"subtreeSize",bp.prototype.cI);
z.defineProperty(bp,{cI:"subtreeSize"},w("Za"),function(a){z.l(a,qa,bp,"subtreeSize");this.Za.set(a)});z.g(bp,"subtreeOffset",bp.prototype.bI);z.defineProperty(bp,{bI:"subtreeOffset"},w("Na"),function(a){z.l(a,G,bp,"subtreeOffset");this.Na.set(a)});function hq(){Ym.call(this);this.Hq=new G(0,0)}z.ea("TreeEdge",hq);z.Pa(hq,Ym);
hq.prototype.commit=function(){var a=this.link;if(a!==q&&a.xh!==Df){var b=this.network.Pb,c=q,d=q;switch(b.lf){case Zo:c=this.fromVertex;d=this.toVertex;break;case fp:c=this.toVertex;d=this.fromVertex;break;default:z.m("Unhandled path value "+b.lf.toString())}if(!(c===q||d===q))if(b=this.Hq,0===b.x&&0===b.y&&!c.UH){var e=c,g=d;x&&z.l(e,bp,hq,"adjustRouteForAngleChange:parent");x&&z.l(g,bp,hq,"adjustRouteForAngleChange:child");a=this.link;c=Fp(e);if(c!==Fp(g)&&(b=Ip(e),d=e.Nb,e=g.Nb,!(0===c&&e.left-
d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1))){a.updateRoute();var e=a.Xe===Bg,g=a.Ob,k=wp(this.fromVertex.alignment);a.Zk();0===c?(c=d.right+b/2,e?4===a.ta&&(b=a.o(3).y,a.U(1,c-20,a.o(1).y),a.C(2,c-20,b),a.C(3,c,b),a.C(4,c+20,b),a.U(5,a.o(5).x,b)):g?k?a.U(3,a.o(2).x,a.o(4).y):6===a.ta&&(a.U(2,c,a.o(2).y),a.U(3,c,a.o(3).y)):4===a.ta?a.C(2,c,a.o(2).y):3===a.ta?a.U(1,c,a.o(2).y):2===a.ta&&a.C(1,c,a.o(1).y)):90===c?(b=d.bottom+b/2,e?4===a.ta&&(c=
a.o(3).x,a.U(1,a.o(1).x,b-20),a.C(2,c,b-20),a.C(3,c,b),a.C(4,c,b+20),a.U(5,c,a.o(5).y)):g?k?a.U(3,a.o(2).x,a.o(4).y):6===a.ta&&(a.U(2,a.o(2).x,b),a.U(3,a.o(3).x,b)):4===a.ta?a.C(2,a.o(2).x,b):3===a.ta?a.U(1,a.o(2).x,b):2===a.ta&&a.C(1,a.o(1).x,b)):180===c?(c=d.left-b/2,e?4===a.ta&&(b=a.o(3).y,a.U(1,c+20,a.o(1).y),a.C(2,c+20,b),a.C(3,c,b),a.C(4,c-20,b),a.U(5,a.o(5).x,b)):g?k?a.U(3,a.o(2).x,a.o(4).y):6===a.ta&&(a.U(2,c,a.o(2).y),a.U(3,c,a.o(3).y)):4===a.ta?a.C(2,c,a.o(2).y):3===a.ta?a.U(1,c,a.o(2).y):
2===a.ta&&a.C(1,c,a.o(1).y)):270===c&&(b=d.top-b/2,e?4===a.ta&&(c=a.o(3).x,a.U(1,a.o(1).x,b+20),a.C(2,c,b+20),a.C(3,c,b),a.C(4,c,b-20),a.U(5,c,a.o(5).y)):g?k?a.U(3,a.o(2).x,a.o(4).y):6===a.ta&&(a.U(2,a.o(2).x,b),a.U(3,a.o(3).x,b)):4===a.ta?a.C(2,a.o(2).x,b):3===a.ta?a.U(1,a.o(2).x,b):2===a.ta&&a.C(1,a.o(1).x,b));a.li()}}else{var d=c.Nb,l=Fp(c),e=Ip(c),g=c.rowSpacing;a.updateRoute();var k=a.Xe===Bg,m=a.Ob,n,p,r,t;a.Zk();if(m||k){for(n=2;4<a.ta;)a.YD(2);p=a.o(1);r=a.o(2)}else{for(n=1;3<a.ta;)a.YD(1);
p=a.o(0);r=a.o(a.ta-1)}t=a.o(a.ta-1);0===l?(c.alignment===Hp?(l=d.bottom+b.y,0===b.y&&p.y>t.y+c.rowIndent&&(l=Math.min(l,Math.max(p.y,l-Jp(c))))):c.alignment===Gp?(l=d.top+b.y,0===b.y&&p.y<t.y-c.rowIndent&&(l=Math.max(l,Math.min(p.y,l+Jp(c))))):l=c.Po||c.Qo&&1===c.maxGenerationCount?d.top-c.Na.y+b.y:d.y+d.height/2+b.y,k?(a.C(n,p.x,l),n++,a.C(n,d.right+e,l),n++,a.C(n,d.right+e+(b.x-g)/3,l),n++,a.C(n,d.right+e+2*(b.x-g)/3,l),n++,a.C(n,d.right+e+(b.x-g),l),n++,a.C(n,r.x,l)):(m&&(a.C(n,d.right+e/2,p.y),
n++),a.C(n,d.right+e/2,l),n++,a.C(n,d.right+e+b.x-(m?g/2:g),l),n++,m&&a.C(n,a.o(n-1).x,r.y))):90===l?(c.alignment===Hp?(l=d.right+b.x,0===b.x&&p.x>t.x+c.rowIndent&&(l=Math.min(l,Math.max(p.x,l-Jp(c))))):c.alignment===Gp?(l=d.left+b.x,0===b.x&&p.x<t.x-c.rowIndent&&(l=Math.max(l,Math.min(p.x,l+Jp(c))))):l=c.Po||c.Qo&&1===c.maxGenerationCount?d.left-c.Na.x+b.x:d.x+d.width/2+b.x,k?(a.C(n,l,p.y),n++,a.C(n,l,d.bottom+e),n++,a.C(n,l,d.bottom+e+(b.y-g)/3),n++,a.C(n,l,d.bottom+e+2*(b.y-g)/3),n++,a.C(n,l,d.bottom+
e+(b.y-g)),n++,a.C(n,l,r.y)):(m&&(a.C(n,p.x,d.bottom+e/2),n++),a.C(n,l,d.bottom+e/2),n++,a.C(n,l,d.bottom+e+b.y-(m?g/2:g)),n++,m&&a.C(n,r.x,a.o(n-1).y))):180===l?(c.alignment===Hp?(l=d.bottom+b.y,0===b.y&&p.y>t.y+c.rowIndent&&(l=Math.min(l,Math.max(p.y,l-Jp(c))))):c.alignment===Gp?(l=d.top+b.y,0===b.y&&p.y<t.y-c.rowIndent&&(l=Math.max(l,Math.min(p.y,l+Jp(c))))):l=c.Po||c.Qo&&1===c.maxGenerationCount?d.top-c.Na.y+b.y:d.y+d.height/2+b.y,k?(a.C(n,p.x,l),n++,a.C(n,d.left-e,l),n++,a.C(n,d.left-e+(b.x+
g)/3,l),n++,a.C(n,d.left-e+2*(b.x+g)/3,l),n++,a.C(n,d.left-e+(b.x+g),l),n++,a.C(n,r.x,l)):(m&&(a.C(n,d.left-e/2,p.y),n++),a.C(n,d.left-e/2,l),n++,a.C(n,d.left-e+b.x+(m?g/2:g),l),n++,m&&a.C(n,a.o(n-1).x,r.y))):270===l?(c.alignment===Hp?(l=d.right+b.x,0===b.x&&p.x>t.x+c.rowIndent&&(l=Math.min(l,Math.max(p.x,l-Jp(c))))):c.alignment===Gp?(l=d.left+b.x,0===b.x&&p.x<t.x-c.rowIndent&&(l=Math.max(l,Math.min(p.x,l+Jp(c))))):l=c.Po||c.Qo&&1===c.maxGenerationCount?d.left-c.Na.x+b.x:d.x+d.width/2+b.x,k?(a.C(n,
l,p.y),n++,a.C(n,l,d.top-e),n++,a.C(n,l,d.top-e+(b.y+g)/3),n++,a.C(n,l,d.top-e+2*(b.y+g)/3),n++,a.C(n,l,d.top-e+(b.y+g)),n++,a.C(n,l,r.y)):(m&&(a.C(n,p.x,d.top-e/2),n++),a.C(n,l,d.top-e/2),n++,a.C(n,l,d.top-e+b.y+(m?g/2:g)),n++,m&&a.C(n,r.x,a.o(n-1).y))):z.m("Invalid angle "+l);a.li()}}};z.g(hq,"relativePoint",hq.prototype.MH);z.defineProperty(hq,{MH:"relativePoint"},w("Hq"),function(a){this.Hq.set(a)});function iq(){this.Zm=[]}
function ik(a){var b=new iq,c;if("string"===typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else if(a instanceof Document)c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",q),c.appendChild(c.importNode(a.documentElement,h));else return q;a=c.getElementsByTagName("svg");if(0===a.length)return q;var d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient");for(a=0;a<e.length;a++){for(var k=e[a],l=jk(Nd,$d,{start:nc,end:oc}),m=k.childNodes,
n=0;n<m.length;n++)if("stop"===m[n].tagName){var p=m[n].getAttribute("stop-color"),r=m[n].getAttribute("offset");-1!==r.indexOf("%")?l.addColorStop(0.01*parseFloat(r),p):l.addColorStop(parseFloat(r),p)}k=k.getAttribute("id");"string"===typeof k&&(b["_brush"+k]=l)}for(a=0;a<g.length;a++){k=g[a];l=jk(Nd,ae,{start:cc,end:cc});m=k.childNodes;for(n=0;n<m.length;n++)"stop"===m[n].tagName&&(p=m[n].getAttribute("stop-color"),r=m[n].getAttribute("offset"),-1!==r.indexOf("%")?l.addColorStop(0.01*parseFloat(r),
p):l.addColorStop(parseFloat(r),p));k=k.getAttribute("id");"string"===typeof k&&(b["_brush"+k]=l)}for(e=h;e;){e=s;g=c.getElementsByTagName("use");for(a=0;a<g.length;a++)l=g[a],0===l.childNodes.length&&(k=l.href,k!==f&&(k=c.getElementById(k.baseVal.substring(1)),k!==q&&(k=k.cloneNode(h),k.removeAttribute("id"),m=parseFloat(l.getAttribute("x")),n=parseFloat(l.getAttribute("y")),isNaN(m)&&(m=0),isNaN(n)&&(n=0),p=l.getAttribute("transform"),p===q&&(p=""),l.setAttribute("transform",p+" translate("+m+","+
n+")"),l.appendChild(k),"use"===k.tagName&&(e=h))))}jq(b,d,q);if(0===b.Zm.length)return q;if(1===b.Zm.length)return b.Zm[0];c=new F;for(a=0;a<b.Zm.length;a++)c.add(b.Zm[a]);return c}
function jq(a,b,c){var d=b.tagName;if(!("g"!==d&&"svg"!==d&&"use"!==d&&"symbol"!==d))for(var d=b.childNodes,e=0;e<d.length;e++){var g=d[e],k=q;if(g.getAttribute!==f){var l=g.getAttribute("transform");switch(g.tagName){case "g":l===q?jq(a,g,q):(k=new F,jq(a,g,k));break;case "use":l===q?jq(a,g,q):(k=new F,jq(a,g,k));break;case "symbol":if("use"!==b.tagName)break;k=new F;jq(a,g,k);var m=k,n=g;n.getAttribute("preserveAspectRatio");n.getAttribute("viewBox");m.scale=1;break;case "path":m=g;k=new V;m=m.getAttribute("d");
"string"===typeof m&&(k.UC=Tc(m));break;case "line":var p=g,k=new V,m=parseFloat(p.getAttribute("x1")),n=parseFloat(p.getAttribute("y1")),r=parseFloat(p.getAttribute("x2")),p=parseFloat(p.getAttribute("y2"));isNaN(m)&&(m=0);isNaN(n)&&(n=0);isNaN(r)&&(r=0);isNaN(p)&&(p=0);var t=new Dc(Lc);k.position=new G(Math.min(m,r),Math.min(n,p));0<(r-m)/(p-n)?(t.la=0,t.ma=0,t.D=Math.abs(r-m),t.F=Math.abs(p-n)):(t.la=0,t.ma=Math.abs(p-n),t.D=Math.abs(r-m),t.F=0);k.Xc=t;break;case "circle":r=g;k=new V;m=parseFloat(r.getAttribute("r"));
n=parseFloat(r.getAttribute("cx"));r=parseFloat(r.getAttribute("cy"));isNaN(m)?k=q:(isNaN(n)&&(n=0),isNaN(r)&&(r=0),p=new Dc(Pc),p.la=0,p.ma=0,p.D=2*m,p.F=2*m,k.position=new G(n-m,r-m),k.Xc=p);break;case "ellipse":p=g;k=new V;m=parseFloat(p.getAttribute("rx"));n=parseFloat(p.getAttribute("ry"));r=parseFloat(p.getAttribute("cx"));p=parseFloat(p.getAttribute("cy"));isNaN(r)&&(r=0);isNaN(p)&&(p=0);isNaN(m)||isNaN(n)?k=q:(t=new Dc(Pc),t.la=0,t.ma=0,t.D=2*m,t.F=2*n,k.position=new G(r-m,p-n),k.Xc=t);break;
case "rect":p=g;k=new V;m=parseFloat(p.getAttribute("height"));n=parseFloat(p.getAttribute("width"));r=parseFloat(p.getAttribute("x"));p=parseFloat(p.getAttribute("y"));isNaN(m)||isNaN(n)?k=q:(isNaN(r)&&(r=0),isNaN(p)&&(p=0),t=new Dc(Oc),t.la=0,t.ma=0,t.D=n,t.F=m,k.position=new G(r,p),k.Xc=t);break;case "polygon":k=kq(g);break;case "polyline":k=kq(g)}if(k!==q){k instanceof V&&(m=parseFloat(lq(a,g,"stroke-width")),isNaN(m)||(k.pb=m),m=lq(a,g,"stroke-linecap"),m!==q&&(k.yE=m),m=lq(a,g,"fill"),m!==q&&
-1!==m.indexOf("url")?(m=m.substring(m.indexOf("#")+1,m.length-1),m=a["_brush"+m],k.fill=m instanceof Nd?m:"black"):k.fill=m===q?"black":"none"===m?q:m,g=lq(a,g,"stroke"),g!==q&&-1!==g.indexOf("url")?(m=g.substring(g.indexOf("#")+1,g.length-1),m=a["_brush"+m],k.stroke=m instanceof Nd?m:"black"):k.stroke="none"===g?q:g,k.bz=h);if(l!==q){l=l.split(")");m=h;for(g=0;g<l.length;g++)/\(.*[^0-9\.,\s-]/.test(l[g])&&(m=s),/\(.*[0-9]-[0-9]/.test(l[g])&&(m=s);if(m)for(g=l.length-1;0<=g;g--)if(n=l[g],""!==n)switch(r=
n.indexOf("("),m=n.substring(0,r).replace(/\s*/,""),r=n.substring(r+1).split(/\s*[\s,]\s*/),m){case "rotate":mq(a,k,r);break;case "translate":m=k;n=parseFloat(r[0]);r=parseFloat(r[1]);if(!isNaN(n)||!isNaN(r))p=m.position.copy(),isNaN(p.x)&&(p.x=0),isNaN(p.y)&&(p.y=0),m.position=new G(n+p.x,r+p.y);break;case "scale":nq(a,k,r);break;case "skewX":oq(a,k,parseFloat(r[0])*Math.PI/180);break;case "skewY":pq(a,k,parseFloat(r[0])*Math.PI/180);break;case "matrix":qq(a,k,r)}}if(k instanceof F){l=k.elements.k;
m=g=0;n=k.position.copy();isNaN(n.x)&&(n.x=0);isNaN(n.y)&&(n.y=0);for(;l.next();)r=l.value.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),r.x<g&&(g=r.x),r.y<m&&(m=r.y);n.x+=g;n.y+=m;k.position=n}c===q?a.Zm.push(k):c.add(k)}}}}
function qq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]),k=parseFloat(c[3]),l=parseFloat(c[4]),m=parseFloat(c[5]);if(!isNaN(d+e+g+k+l+m)){var n=b.position.copy();isNaN(n.x)&&(n.x=0);isNaN(n.y)&&(n.y=0);if(b instanceof V){c=b.Xc.copy();if(c.type===Oc)c=a.pr(c);else if(c.type===Pc)c=rq(c);else if(c.type===Lc){c.type=Ec;a=new Fc(c.la,c.ma);var p=new rd(Rc,c.D,c.F);a.Ha.add(p);c.lb.add(a)}c.offset(n.x,n.y);c.transform(d,e,g,k,l-n.x,m-n.y);a=c.normalize();b.Xc=c;n.x-=a.x;n.y-=a.y;
b.position=n}else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=n.x,d.y+=n.y,b.value.position=d;for(b.reset();b.next();)qq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=n.x,d.y-=n.y,b.value.position=d}}}
function mq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]);isNaN(e)&&(e=0);isNaN(g)&&(g=0);if(!isNaN(d)){var k=d*Math.PI/180,l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof V){c=b.Xc.copy();c.type===Pc?c=rq(c):c.type===Oc&&(c=a.pr(c));if(c.type===Ec)c.rotate(d,e-l.x,g-l.y),g=c.normalize(),b.Xc=c,l.x-=g.x,l.y-=g.y,b.position=l;else{var d=c.la-e+l.x,m=c.ma-g+l.y,n=c.D-e+l.x,p=c.F-g+l.y;a=d*Math.cos(k)-m*Math.sin(k)+e-l.x;d=m*Math.cos(k)+d*Math.sin(k)+
g-l.y;e=n*Math.cos(k)-p*Math.sin(k)+e-l.x;g=p*Math.cos(k)+n*Math.sin(k)+g-l.y;n=Math.min(a,e);p=Math.min(d,g);c.la=a-n;c.ma=d-p;c.D=e-n;c.F=g-p;l.x+=n;l.y+=p;b.position=l;b.Xc=c}b.fill instanceof Nd&&(l=b.fill.copy(),c=Math.atan((0.5-l.start.y)/(0.5-l.start.x)),c+=k,l.start=new O((1-Math.cos(c))/2,(1-Math.sin(c))/2),l.end=new O((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=l);b.stroke instanceof Nd&&(l=b.stroke.copy(),c=Math.atan((0.5-l.start.y)/(0.5-l.start.x)),c+=k,l.start=new O((1-Math.cos(c))/2,
(1-Math.sin(c))/2),l.end=new O((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=l)}else{for(b=b.elements.k;b.next();)k=b.value.position.copy(),k.x+=l.x,k.y+=l.y,b.value.position=k;for(b.reset();b.next();)mq(a,b.value,c);for(b.reset();b.next();)k=b.value.position.copy(),k.x-=l.x,k.y-=l.y,b.value.position=k}}}
function nq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d)){isNaN(e)&&(e=d);var g=b.position.copy();isNaN(g.x)&&(g.x=0);isNaN(g.y)&&(g.y=0);if(b instanceof V)a=b.Xc.copy(),g.x*=d,g.y*=e,b.position=g,a.scale(d,e),b.Xc=a;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=g.x,d.y+=g.y,b.value.position=d;for(b.reset();b.next();)nq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=g.x,d.y-=g.y,b.value.position=d}}}
function oq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Xc.copy();if(e.type===Oc)e=a.pr(e);else if(e.type===Pc)e=rq(e);else if(e.type===Lc){e.type=Ec;a=new Fc(e.la,e.ma);var g=new rd(Rc,e.D,e.F);a.Ha.add(g);e.lb.add(a)}e.offset(d.x,d.y);e.transform(1,0,Math.tan(c),1,-d.x,-d.y);c=e.normalize();b.Xc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)oq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function pq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Xc.copy();if(e.type===Oc)e=a.pr(e);else if(e.type===Pc)e=rq(e);else if(e.type===Lc){e.type=Ec;a=new Fc(e.la,e.ma);var g=new rd(Rc,e.D,e.F);a.Ha.add(g);e.lb.add(a)}e.offset(d.x,d.y);e.transform(1,Math.tan(c),0,1,-d.x,-d.y);c=e.normalize();b.Xc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)pq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function kq(a){var b=s;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return q;var c=new V,d=a.getAttribute("points");a=new Dc;var e=new J(Fc),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return q;for(var k,d=new J(rd),l,m,n=1;n<g.length;n+=2){l=eval(g[n-1]);m=eval(g[n]);if("number"!==typeof l||isNaN(l)||"number"!==typeof m||isNaN(m))return q;1===n?k=new Fc(l,m):d.add(new rd(Rc,l,m))}b&&(b=new rd(Rc,k.la,k.ma),b.close(),d.add(b));k.Ha=d;e.add(k);a.lb=e;k=a.normalize();c.position=new G(-k.x,
-k.y);c.Xc=a;return c}function lq(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&(d=b.style[c]);return"string"!==typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?lq(a,b,c):q):d}
function rq(a){var b=a.la,c=a.ma,d=a.D,e=a.F,g=Math.abs(d-b)/2,k=Math.abs(e-c)/2,b=Math.min(b,d)+g,c=Math.min(c,e)+k;new G;e=new Fc(b,c-k);d=new rd(hd);d.ob=b+N.ua*g;d.Gb=c-k;d.Vd=b+g;d.Wd=c-N.ua*k;d.D=b+g;d.F=c;e.Ha.add(d);d=new rd(hd);d.ob=b+g;d.Gb=c+N.ua*k;d.Vd=b+N.ua*g;d.Wd=c+k;d.D=b;d.F=c+k;e.Ha.add(d);d=new rd(hd);d.ob=b-N.ua*g;d.Gb=c+k;d.Vd=b-g;d.Wd=c+N.ua*k;d.D=b-g;d.F=c;e.Ha.add(d);d=new rd(hd);d.ob=b-g;d.Gb=c-N.ua*k;d.Vd=b-N.ua*g;d.Wd=c-k;d.D=b;d.F=c-k;e.Ha.add(d);a.type=Ec;a.lb.add(e);
return a}iq.prototype.pr=function(a){var b=a.la,c=a.ma,d=a.D,e=a.F,g=Math.min(b,d),k=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new Fc(g,k);e.Ha.add(new rd(Rc,g+b,k));e.Ha.add(new rd(Rc,g+b,k+c));e.Ha.add((new rd(Rc,g,k+c)).close());a.type=Ec;a.lb.add(e);return a};window.go=fa;fa.version="1.2.7"; })(window);
