<!doctype html>
<html>
<head>
<title>Floor Plan Editor</title>
<!-- Copyright 1998-2013 by Northwoods Software Corporation. -->
<link href="goSamples.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="go.js"></script>
<script type="text/javascript" src="DrawCommandHandler.js"></script>
<script type="text/javascript" src="RotateMultipleTool.js"></script>
<script type="text/javascript" src="ResizeMultipleTool.js"></script>
<script type="text/javascript" src="GuidedDraggingTool.js"></script>
<style type="text/css">
#menuBar {
  border: none;
  border: 0px;
  margin: 0px;
  padding: 0px;
  font: 67.5% 'Lucida Sans Unicode', 'Bitstream Vera Sans', 'Trebuchet Unicode MS', 'Lucida Grande', Verdana, Helvetica, sans-serif;
  font-size: 12px;
  font-weight: bold;
  width: auto;
}
#menuBar ul {
  background: #ededed;
  height: 25px;
  list-style: none;
  margin: 0;
  padding: 0;
}
#menuBar li {
  float: left;
  padding: 0px;
}
#menuBar li a {
  background: #ededed;
  display: block;
  font-weight: normal;
  line-height: 25px;
  margin: 0px;
  padding: 0px 5px;
  text-align: center;
  text-decoration: none;
}
#menuBar > ul > li > a {
  color: black;
}
#menuBar ul ul a {
  color: black;
}
#menuBar li > a:hover,
#menuBar ul li:hover > a {
  background: #007FFF;
  color: white;
  text-decoration: none;
}
#menuBar li ul {
  background: #9CCB19;
  display: none;
  height: auto;
  padding: 0px;
  margin: 0px;
  border: 0px;
  position: absolute;
  width: 150px;
  z-index: 200;
}
#menuBar li:hover ul {
  display: block;
}
#menuBar li li {
  background: #ededed;
  display: block;
  float: none;
  margin: 0px;
  padding: 0px;
  width: 150px;
}
#menuBar li:hover li a {
  background: none;
}
#menuBar li ul a {
  display: block;
  height: 25px;
  font-size: 12px;
  font-style: normal;
  margin: 0px;
  padding: 0px 10px 0px 15px;
  text-align: left;
}
#menuBar li ul a:hover,
#menuBar li ul li:hover > a {
  background: #007FFF;
  border: 0px;
  color: white;
  text-decoration: none;
}
/*sub-sublist*/
#nav li:hover ul ul {
    display: none;  
}
#nav li li:hover ul {
    background:#9CCB19;   
    margin-left: 150px;
    margin-top: -25px;
    display: block;
}
/*sub-sub-sublist*/
#nav li li:hover ul ul {
    display: none; 
}
#nav li li li:hover ul {
    background:#9CCB19;   
    margin-left: 150px;
    margin-top: -25px;
    display: block;
    color: #0276FD;
}
    input {
	    text-align: center;
	    font-size: large; 
	    float: left;
    }
    #myOverview {
        background-color: lightgray;
    }
    #currentFile {
        background: #1874CD;
        width:100%;  
        text-align:center; 
        font-family:Arial; 
        font-weight:bold;
        font-size:14px;
        padding:3px 0px;  
        color: white; 
    }
    .draggable {
        display: inline-block;
        vertical-align: top;
        border: 1px solid gray;
        background-color: #e2e2e2;

        position: absolute;
        top:40%;
        left:50%;
        width:300px; 
        height: 200px; 
        z-index: 500;
    }
    .handle {
        background-color: #9CCB19;
        text-align: center;
        font: bold 12px sans-serif;
    }
    .elementText {
        font-family:Arial; 
        font-size:medium;
        margin-left: 10px; 
        margin-top: 20px;
        margin-bottom:10px;  
    }
    .mySavedFiles {
        font-family:Arial; 
        font-size:medium;
        width:250px; 
        margin-left: 25px;  
    }
    .elementBtn {
        margin-top:20px;
        font-family:Arial; 
        font-size:medium;  
        margin-left:20px; 
    }
</style>
<script type="text/javascript" id="code">
  function init() {
    if (typeof (Storage) == "undefined" || navigator.appName == "Microsoft Internet Explorer") {
      var currentFile = document.getElementById("currentFile"); 
      currentFile.innerHTML = "Sorry! No web storage support. \n If you're using Internet Explorer, you must load the page from a server for local storage to work.";
    } else {
      // displays cached floor plan files in the listboxes
      var openlistbox = document.getElementById("mySavedFiles"); 
      var removelistbox = document.getElementById("mySavedFiles2");
      for (key in localStorage) {
        var storedFile = localStorage.getItem(key);
        if (storedFile === null || storedFile === undefined) continue;
        var option = document.createElement('option');
        option.value = key;
        option.text = key;
        openlistbox.add(option, null)
        removelistbox.add(option, null)
      }
    }
    // hides open HTML Element
    var openDocument = document.getElementById("openDocument");
    openDocument.style.visibility = "hidden";
    // hides remove HTML Element
    var removeDocument = document.getElementById("removeDocument");
    removeDocument.style.visibility = "hidden";

    var $ = go.GraphObject.make;  // for more concise visual tree definitions

    myDiagram =
      $(go.Diagram, "myDiagram",
        {
          allowDrop: true,  // accept drops from palette
          allowLink: false  // no user-drawn links
        });

    myDiagram.commandHandler = new DrawCommandHandler();
    myDiagram.commandHandler.arrowKeyBehavior = "move";

    myDiagram.toolManager.rotatingTool = new RotateMultipleTool();

    myDiagram.toolManager.resizingTool = new ResizeMultipleTool();

    myDiagram.toolManager.draggingTool = new GuidedDraggingTool();
    myDiagram.toolManager.draggingTool.horizontalGuidelineColor = "blue";
    myDiagram.toolManager.draggingTool.verticalGuidelineColor = "blue";
    myDiagram.toolManager.draggingTool.centerGuidelineColor = "green";
    myDiagram.toolManager.draggingTool.guidelineWidth = 1;

    // allow Ctrl-G to call groupSelection()
    myDiagram.commandHandler.archetypeGroupData = { text: "Group", isGroup: true };

    // converts data about the part into a string
    function tooltipTextConverter(data) {
      if (data.item != undefined) return data.item;
      return "(unnamed item)";
    }

    // sets the qualities of the tooltip
    var tooltiptemplate =
      $(go.Adornment, go.Panel.Auto,
        $(go.Shape, "RoundedRectangle",
          { fill: "whitesmoke", stroke: "gray" }),
        $(go.TextBlock,
          { margin: 3, editable: true },
          new go.Binding("text", "", tooltipTextConverter)));
    
    // Define the generic furniture and structure Nodes.
    // The Shape gets it Geometry from a geometry path string in the bound data.
    myDiagram.nodeTemplate =
      $(go.Node, "Spot",
        {
          locationObjectName: "SHAPE",
          locationSpot: go.Spot.Center,
          toolTip: tooltiptemplate,
          selectionAdorned: false  // use a Binding on the Shape.stroke to show selection
        },
        // remember the location of this Node
        new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
        // move a selected part into the Foreground layer, so it isn't obscured by any non-selected parts
        new go.Binding("layerName", "isSelected", function(s) { return s ? "Foreground" : ""; }).ofObject(),
        // can be resided according to the user's desires
        { resizable: true, resizeObjectName: "SHAPE" },
        { rotatable: true, rotateObjectName: "SHAPE" },
        $(go.Shape,
          {
            name: "SHAPE",
            // the following are default values;
            // actual values may come from the node data object via data-binding
            geometryString: "F1 M0 0 L20 0 20 20 0 20 z",
            fill: "rgb(130, 130, 256)"
          },
          // this determines the actual shape of the Shape
          new go.Binding("geometryString", "geo"),
          // allows the color to be determined by the node data
          new go.Binding("fill", "color"),
          // selection causes the stroke to be magenta instead of black
          new go.Binding("stroke", "isSelected", function(s) { return s ? "magenta" : "black"; }).ofObject(),
          // remember the size of this node 
          new go.Binding("desiredSize", "size", go.Size.parse).makeTwoWay(go.Size.stringify),
          // can set the angle of this Node
          new go.Binding("angle", "angle").makeTwoWay()
        )
      );

    myDiagram.nodeTemplate.contextMenu =
      $(go.Adornment, "Vertical",
        $("ContextMenuButton",
            $(go.TextBlock, "Rotate +45", { margin: 3 }),
            { click: function(e, obj) { myDiagram.commandHandler.rotate(obj.part.adornedPart, 45); } }),
        $("ContextMenuButton",
            $(go.TextBlock, "Rotate -45", { margin: 3 }),
            { click: function(e, obj) { myDiagram.commandHandler.rotate(obj.part.adornedPart, -45); } }),
        $("ContextMenuButton",
            $(go.TextBlock, "Rotate +90", { margin: 3 }),
            { click: function(e, obj) { myDiagram.commandHandler.rotate(obj.part.adornedPart, 90); } }),
        $("ContextMenuButton",
            $(go.TextBlock, "Rotate -90", { margin: 3 }),
            { click: function(e, obj) { myDiagram.commandHandler.rotate(obj.part.adornedPart, -90); } }),
        $("ContextMenuButton",
            $(go.TextBlock, "Rotate 180", { margin: 3 }),
            { click: function(e, obj) { myDiagram.commandHandler.rotate(obj.part.adornedPart, 180); } }),
        $("ContextMenuButton",
            $(go.TextBlock, "Rename", { margin: 3 }),
            { click: function(e, obj) { rename(obj); } }));

    // group settings from basic.html to lock things together 
    myDiagram.groupTemplate =
      $(go.Group, go.Panel.Auto,
        {
          ungroupable: true,  // enable Ctrl-Shift-G to ungroup a selected Group
          toolTip: tooltiptemplate
        },
        $(go.Shape, "Rectangle",  // the Group is not seen but can be selected due to the transparent fill
          { fill: "transparent", stroke: "lightgray", strokeWidth: 1 }),
        $(go.Placeholder)
      );


    // brushes for furniture structures 
    var wood = $(go.Brush, go.Brush.Linear, { 0: "#964514", 1: "#5E2605" });
    var wall = $(go.Brush, go.Brush.Linear, { 0: "#A8A8A8", 1: "#545454" });
    var blue = $(go.Brush, go.Brush.Linear, { 0: "#42C0FB", 1: "#009ACD" });
    var metal = $(go.Brush, go.Brush.Linear, { 0: "#A8A8A8", 1: "#474747" });
    var green = $(go.Brush, go.Brush.Linear, { 0: "#9CCB19", 1: "#698B22" });

    // default structures and furniture 
    myPalette =
      $(go.Palette, "myPalette",
        {
          nodeTemplate: myDiagram.nodeTemplate,  // shared with the main Diagram
          "contextMenuTool.isEnabled": false,  // but disable context menus
          allowZoom: false, 
          layout: $(go.GridLayout, { cellSize: new go.Size(1, 1), spacing: new go.Size(5, 5) }),
          // initialize the Palette with a few furniture and structure nodes
          model: $(go.GraphLinksModel,
            {
              nodeDataArray: [
                {
                    key: 1,
                    geo: "F1 M0 0 L5,0 5,40 0,40 0,0z x M0,0 a40,40 0 0,0 -40,40 ",
                    item: "left door", 
                    color: wall
                },
                {
                    key: 2,
                    geo: "F1 M0 0 L5,0 5,40 0,40 0,0z x M5,0 a40,40 0 0,1 40,40 ",
                    item: "right door",
                    color: wall
                },
                {
                    key: 3, angle: 90,
                    geo: "F1 M0,0 L0,100 12,100 12,0 0,0z",
                    item: "wall",
                    color: wall
                },
                {
                    key: 4, angle: 90,
                    geo: "F1 M0,0 L0,50 10,50 10,0 0,0 x M5,0 L5,50z",
                    item: "window",
                    color: "whitesmoke"
                },
                {
                    key: 5,
                    geo: "F1 M0,0 L50,0 50,12 12,12 12,50 0,50 0,0 z",
                    item: "corner",
                    color: wall
                },
                {
                    key: 6,
                    geo: "F1 M0 0 L40 0 40 40 0 40 0 0 x M0 10 L40 10 x M 8 10 8 40 x M 32 10 32 40 z",
                    item: "arm chair",
                    color: blue
                },
                {
                    key: 7,
                    geo: "F1 M0 0 L80,0 80,40 0,40 0 0 x M0,10 L80,10 x M 7,10 7,40 x M 73,10 73,40 z",
                    item: "couch",
                    color: blue
                },
                {
                    key: 8,
                    geo: "F1 M0 0 L30 0 30 30 0 30 z",
                    item: "Side Table",
                    color: wood
                },
                {
                    key: 9,
                    geo: "F1 M0 0 L80,0 80,90 0,90 0,0 x M0,7 L80,7 x M 0,30 80,30 z",
                    item: "queen bed",
                    color: green
                },
                {
                    key: 10, 
                    geo: "F1 M5 5 L30,5 35,30 0,30 5,5 x F M0 0 L 35,0 35,5 0,5 0,0 z",
                    item: "chair",
                    color: wood
                },
                {
                    key: 11,
                    geo: "F1 M0 0 L50,0 50,90 0,90 0,0 x M0,7 L50,7 x M 0,30 50,30 z",
                    item: "twin bed",
                    color: green
                },
                {
                    key: 12,
                    geo: "F1 M0 0 L0 60 80 60 80 0z",
                    item: "kitchen table",
                    color: wood
                },
                {
                    key: 13,
                    geo: "F1 M 0,0 a35,35 0 1,0 1,-1 z",
                    item: "round table",
                    color: wood
                },
                {
                    key: 14,
                    geo: "F1 M 0,0 L35,0 35,30 0,30 0,0 x M 5,5 L 30, 5 30,25 5,25 5,5 x M 17,2 L 17,10 19,10 19,2 17,2 z",
                    item: "kitchen sink",
                    color: metal
                },
                {
                    key: 15,
                    geo: "F1 M0,0 L55,0, 55,50, 0,50 0,0 x M 40,7 a 7,7 0 1 0 0.00001 0z x M 40,10 a 4,4 0 1 0 0.00001 0z x M 38,27 a 7,7 0 1 0 0.00001 0z x M 38,30 a 4,4 0 1 0 0.00001 0z x M 16,27 a 7,7 0 1 0 0.00001 0z xM 16,30 a 4,4 0 1 0 0.00001 0z x M 14,7 a 7,7 0 1 0 0.00001 0z x M 14,10 a 4,4 0 1 0 0.00001 0z",
                    item: "stove",
                    color: metal
                },
                {
                    key: 16,
                    geo: "F1 M0,0 L55,0, 55,50, 0,50 0,0 x F1 M0,51 L55,51 55,60 0,60 0,51 x F1 M5,60 L10,60 10,63 5,63z",
                    item: "refrigerator",
                    color: metal
                },
                {
                    key: 17,
                    geo: "F1 M0,0 100,0 100,40 0,40z",
                    item: "bookcase",
                    color: wood
                },
                {
                    key: 18,
                    geo: "F1 M0,0 70,0 70,50 0,50 0,0 x F1 M15,58 55,58 55,62 15,62 x F1 M17,58 16,50 54,50 53,58z",
                    item: "desk",
                    color: wood
                },
              ]  // end nodeDataArray
            })  // end model
        });  // end Palette

    myOverview =
      $(go.Overview, "myOverview",
        { observed: myDiagram, maxScale: 0.5 });
    // change color of viewport border in Overview
    myOverview.box.elt(0).stroke = "dodgerblue";


    // enable or disable a particular button
    function enable(name, ok) {
        var button = document.getElementById(name);
        if (button) button.disabled = !ok;
    }

    // enable or disable all command buttons
    function enableAll() {
        var cmdhnd = myDiagram.commandHandler;
        enable("AlignLeft", cmdhnd.canAlignSelection());
        enable("AlignRight", cmdhnd.canAlignSelection());
        enable("AlignTop", cmdhnd.canAlignSelection());
        enable("AlignBottom", cmdhnd.canAlignSelection());
        enable("AlignCenterX", cmdhnd.canAlignSelection());
        enable("AlignCenterY", cmdhnd.canAlignSelection());
        enable("AlignRow", cmdhnd.canAlignSelection());
        enable("AlignColumn", cmdhnd.canAlignSelection());
        enable("AlignGrid", cmdhnd.canAlignSelection());
    }

    // notice whenever the selection may have changed
    myDiagram.addDiagramListener("ChangedSelection", function(e) {
        enableAll();
    });
    // notice when the Paste command may need to be reenabled
    myDiagram.addDiagramListener("ClipboardChanged", function(e) {
        enableAll();
    });
    // notice whenever a transaction or undo/redo has occurred
    myDiagram.model.addChangedListener(function(e) {
        if (e.change === go.ChangedEvent.Transaction) enableAll();
    });
    // notice when an object has been dropped from the palette 
    myDiagram.addDiagramListener("ExternalObjectsDropped", function(e) {
        document.getElementById('myDiagram').focus();
        myDiagram.toolManager.draggingTool.reset();  // remove any guidelines
    });

    // make grouped Parts unselectable
    myDiagram.addDiagramListener("SelectionGrouped", function(e) {
      var newgroup = e.subject;
      if (newgroup) {
        var itr = newgroup.memberParts;
        while (itr.next()) {
          var part = itr.value;
          part.selectable = false;
        }
      }
    });
    myDiagram.addDiagramListener("SelectionUngrouped", function(e) {
      var itr = e.parameter.iterator;  // Iterable collection of ungrouped former members
      while (itr.next()) {
        var part = itr.value;
        part.selectable = true;
        part.isSelected = true;
      }
    });
    myDiagram.addDiagramListener("SelectionCopied", function(e) {
      var sel = myDiagram.selection.toArray();
      for (var i = 0; i < sel.length; i++) {
        var part = sel[i];
        if (part instanceof go.Group) {
          var mems = new go.Set();
          mems.addAll(part.memberParts);
          var it = mems.iterator;
          while (it.next()) {
            var member = it.value;
            member.isSelected = false;
            member.selectable = false;
          }
        }
      }
    });

    // start with a blank canvas
    myDiagram.isModified = false;
    newDocument();
  } // end init


  // Commands for this application

  // changes the item of the object
  function rename(obj) {
    var newName = prompt("Rename " + obj.part.data.item + " to...");
    obj.part.data.item = newName; 
  }

  // shows/hides gridlines
  // to be implemented onclick of a button
  function grid() {
    var grid = document.getElementById("grid"); 
    if (grid.checked === true) {
      myDiagram.grid.visible = true;
      return;
    } else {
      myDiagram.grid.visible = false; 
    }
  }

  // shows/hides guidelines
  function guidelines() {
    var guide = document.getElementById("guidelines")
    if (guide.checked === true) {
      myDiagram.toolManager.draggingTool.isGuidelineEnabled = true;
    } else {
      myDiagram.toolManager.draggingTool.isGuidelineEnabled = false;
    }
  }

  // enables/disables snapping tools, to be implemented by buttons 
  function snap() {
    var snap = document.getElementById("snap");
    if (snap.checked === true) {
      myDiagram.toolManager.draggingTool.isGridSnapEnabled = true;
      myDiagram.toolManager.resizingTool.isGridSnapEnabled = true;
    } else {
      myDiagram.toolManager.draggingTool.isGridSnapEnabled = false;
      myDiagram.toolManager.resizingTool.isGridSnapEnabled = false;
    }
  }

  // user specifies the amount of space between nodes when making rows and column 
  function spacer() {
    var space = prompt("Desired space between nodes (in pixels):", "0"); 
    return space; 
  }

  // arrowkey function is determined by a dropbox in the toolbar
  function arrowMode() {
    var move = document.getElementById("move");
    var select = document.getElementById("select");
    var scroll = document.getElementById("scroll");
    if (move.checked === true) {
      myDiagram.commandHandler.arrowKeyBehavior = "move";
    } else if (select.checked === true) {
      myDiagram.commandHandler.arrowKeyBehavior = "select";
    } else if (scroll.checked === true) {
      myDiagram.commandHandler.arrowKeyBehavior = "scroll";
    }
  }

  var UnsavedFileName = "(Unsaved File)";

  function newDocument() {
    var currentFile = document.getElementById("currentFile");
    // checks to see if all changes have been saved 
    if (myDiagram.isModified) {
      var fileName = currentFile.textContent;
      var save = confirm("Would you like to save changes to " + fileName + "?");
      if (save) {
        if (fileName == UnsavedFileName) {
          saveDocumentAs();
        } else {
          saveDocument();
        }
      }
    }
    // loads a blank diagram 
    myDiagram.model = new go.GraphLinksModel();
    myDiagram.model.undoManager.isEnabled = true;
    myDiagram.isModified = false;
    currentFile.innerHTML = UnsavedFileName;
  }

  function checkLocalStorage() {
    if (typeof(Storage) == "undefined" || navigator.appName == "Microsoft Internet Explorer") {
      alert("Sorry! No web storage support. \n If you're using Internet Explorer, you must load the page from a server for local storage to work.");
      return false;
    }
    return true;
  }

  // checks to see if all changes have been saved -> shows the open HTML element 
  function openDocument() {
    if (checkLocalStorage()) {
      if (myDiagram.isModified) {
        var fileName = document.getElementById("currentFile").textContent;
        var save = confirm("Would you like to save changes to " + fileName + "?");
        if (save) {
          if (fileName == UnsavedFileName) {
            saveDocumentAs();
          } else {
            saveDocument();
          }
        }
      }
      var openDocument = document.getElementById("openDocument");
      openDocument.style.visibility = "visible";
    }
  }

  // saves the current floorplan to local storage
  function saveDocument() {
    if (checkLocalStorage()) {
      var currentFile = document.getElementById("currentFile");
      var str = myDiagram.model.toJson();
      localStorage.setItem(currentFile.textContent, str);
      myDiagram.isModified = false;
    }
  }

  // saves floor plan to local storage 
  function saveDocumentAs() {
    if (checkLocalStorage()) {
      var saveName = prompt("Save file as...");
      if (saveName) {
        var str = myDiagram.model.toJson();
        localStorage.setItem(saveName, str);
        myDiagram.isModified = false;
        var listbox = document.getElementById("mySavedFiles");
        // adds saved floor plan to listbox if it isn't there already 
        var exists = false;
        for (var i = 0; i < listbox.options.length; i++) {
          if (listbox.options[i].value === saveName) {
            exists = true;
            break;
          }
        }
        if (exists === false) {
          var option = document.createElement('option');
          option.value = saveName;
          option.text = saveName;
          listbox.add(option, null);
        }
        var currentFile = document.getElementById("currentFile");
        currentFile.innerHTML = saveName;
      }
    }
  }

  // shows the remove HTML element 
  function removeDocument() {
    if (checkLocalStorage()) {
      // makes the HTML element visible 
      var removeDocument = document.getElementById("removeDocument");
      removeDocument.style.visibility = "visible";
    }
  }

  function load() {
    var sel = document.getElementById('mySavedFiles');
    // gets selected option
    var str = null;
    for (var i = 0; i < sel.options.length; i++) {
      if (sel.options[i].selected) str = localStorage.getItem(sel.options[i].text);
    }
    if (str !== null) {
      myDiagram.model = go.Model.fromJson(str);
      myDiagram.model.undoManager.isEnabled = true;
      myDiagram.isModified = false;
    }

    // changes the text of "currentFile" to be the same as the floor plan now loaded
    var name = null;
    for (var i = 0; i < sel.options.length; i++) {
      if (sel.options[i].selected) name = sel.options[i].text;
    }
    var currentFile = document.getElementById("currentFile");
    currentFile.innerHTML = name;

    // hides open HTML Element
    var openDocument = document.getElementById("openDocument");
    openDocument.style.visibility = "hidden";
  }


  // deletes the selected file from local storage
  function removeFile() {
    var listbox = document.getElementById('mySavedFiles2');
    var otherlistbox = document.getElementById('mySavedFiles');
    var fileName = undefined;
    for (var i = 0; i < listbox.options.length; i++) {
      if (listbox.options[i].selected) fileName = listbox.options[i].text; // selected file  
    }
    if (fileName !== undefined) {
      // verify deleting 
      var verify = confirm("Are you sure you want to delete " + fileName + "?");
      if (verify == false) return; 
      // removes file from local storage
      localStorage.removeItem(fileName);
      // removes file from listboxes
      var optionToRemove = listbox.options.selectedIndex;
      listbox.remove(optionToRemove);
      otherlistbox.remove(optionToRemove);
      // hides the remove HTML element
      var removeDocument = document.getElementById("removeDocument");
      removeDocument.style.visibility = "hidden";
    }
  }

  // hides the open/remove elements when the "cancel" button is pressed
  function closeElement() {
    var removeDocument = document.getElementById("removeDocument");
    if (removeDocument.style.visibility === "visible") removeDocument.style.visibility = "hidden";
    var openDocument = document.getElementById("openDocument");
    if (openDocument.style.visibility === "visible") openDocument.style.visibility = "hidden";
  }
</script>
</head>
<body onload="init()">
<div>
    <div id="currentFile">(Unsaved File)</div>
    <div id="menuBar">
    <ul id="nav">
        <li><a href="#">File</a>
            <ul>
                <li><a href="#" onclick="newDocument()">New</a></li>
                <li><a href="#" onclick="openDocument()">Open...</a></li>
                <li><a href="#" onclick="saveDocument()">Save</a></li>
                <li><a href="#" onclick="saveDocumentAs()">Save As...</a></li>
                <li><a href="#" onclick="removeDocument()">Delete...</a></li>
            </ul>
        </li>
        <li><a href="#">Edit</a>
            <ul>
                <li><a href="#" onclick="myDiagram.commandHandler.undo()">Undo</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.redo()">Redo</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.cutSelection()">Cut</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.copySelection()">Copy</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.pasteSelection()">Paste</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.deleteSelection()">Delete</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.selectAll()">Select All</a></li>
            </ul>
        </li>
        <li><a href="#">Align</a>
            <ul >
                <li><a href="#" onclick="myDiagram.commandHandler.alignLeft()">Left Sides</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignRight()">Right Sides</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignTop()">Tops</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignBottom()">Bottoms</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignCenterX()">Center X</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignCenterY()">Center Y</a></li>
            </ul>
        </li>
        <li><a href="#">Space</a>
            <ul >
                <li><a href="#" onclick="myDiagram.commandHandler.alignRow(spacer())">In Row...</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.alignColumn(spacer())">In Column...</a></li>
            </ul>
        </li>
        <li><a href="#">Rotate</a>
            <ul>
                <li><a href="#" onclick="myDiagram.commandHandler.rotate(45)">45°</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.rotate(-45)">-45°</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.rotate(90)">90°</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.rotate(-90)">-90°</a></li>
                <li><a href="#" onclick="myDiagram.commandHandler.rotate(180)">180°</a></li>
            </ul>
        </li>
        <li><a href="#">Options</a>
            <ul>
                <li><a href="#"><input id="grid" type="checkbox" name="options" value="grid" onclick="grid()">Grid</a></li>
                <li><a href="#"><input id="guidelines" type="checkbox" name="options" value="0" checked="checked" onclick="guidelines()">Guidelines</a></li>
                <li><a href="#"><input id="snap" type="checkbox" name="options" value="0" onclick="snap()">Snapping</a></li>
                <li><a href="#">Arrow Keys >></a>
                    <form >
                        <ul>
                            <li><a href="#"><input type="radio" name="arrow" id="move" onclick="arrowMode()" checked="checked">Move</a></li>
                            <li><a href="#"><input type="radio" name="arrow" id="select" onclick="arrowMode()">Select</a></li>
                            <li><a href="#"><input type="radio" name="arrow" id="scroll" onclick="arrowMode()">Scroll</a></li>
                        </ul>
                    </form>
                </li>
            </ul>
        </li>
        <li><a href="#" onclick="window.open('FloorPlanMonitor.html')">Monitor</a></li>
    </ul>
    </div><!--END menu bar -->    

    <div id="PaletteAndDiagram" style="position: relative; overflow: hidden; width: 100%;">
        <div id="sideBar" style="float:left; width:23%; min-height: 500px; text-align:center">
            <div class="handle">Palette:</div>
            <div id="myPalette" style="border:solid 1px gray; width: 100%; min-height: 625px"></div>
            <div class="handle">Overview:</div>
            <div id="myOverview" style="border:solid 1px gray; width: 100%; height:225px;"></div>
        </div>
        <div id="myDiagram" style="position: absolute; border: solid 1px gray; width:77%; height: 100%; min-height:500px; margin-left:23%; background-color:white"></div>
    </div>

    <div id="openDocument" class="draggable">
      <div id="openDraggableHandle" class="handle">Open File</div>
      <div id="openText" class="elementText">Choose file to open...</div>
      <select id="mySavedFiles" class="mySavedFiles" ></select>
      <br />
      <button id="openBtn" class="elementBtn" type="button" onclick="load()" style="margin-left:70px">Open</button>
      <button id="cancelBtn"class="elementBtn" type="button" onclick="closeElement()" >Cancel</button>
    </div>

    <div id="removeDocument" class="draggable">
        <div id="removeDraggableHandle" class="handle">Delete File</div>
        <div id="removeText" class="elementText">Choose file to remove...</div>
        <select id="mySavedFiles2" class="mySavedFiles" ></select>
        <br />
        <button id="removeBtn" class="elementBtn" type="button" onclick="removeFile()" style="margin-left:70px">Remove</button>
        <button id="cancelBtn2"class="elementBtn" type="button" onclick="closeElement()">Cancel</button>
    </div>
  <p>
    This sample demonstrates several custom <a>Tool</a>s, defined in their own files:
    <a href="GuidedDraggingTool.js">GuidedDraggingTool.js</a>, <a href="ResizeMultipleTool.js">ResizeMultipleTool.js</a>, <a href="RotateMultipleTool.js">RotateMultipleTool.js</a>,
    and a custom <a>CommandHandler</a>: <a href="DrawCommandHandler.js">DrawCommandHandler.js</a>.
  </p>
</div>
</body>
</html>
